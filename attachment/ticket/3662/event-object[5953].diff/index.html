<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">event-object[5953].diff on Ticket #3662 – Attachment – jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/bugs.jquery.com/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/bugs.jquery.com/favicon.svg">
<link rel="apple-touch-icon" href="/bugs.jquery.com/apple-touch-icon.png">
    
    
    
    
    
    
    
    <style>
      code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-diff]{--eleventy-code-padding:1.25em;padding-left:var(--eleventy-code-padding);padding-right:var(--eleventy-code-padding)}.token.deleted{background-color:#8e2e2e;color:inherit}.token.inserted{background-color:#44824a;color:inherit}.token.prefix.deleted,.token.prefix.inserted,.token.prefix.unchanged{-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;padding-top:2px;padding-bottom:2px}.token.prefix.deleted,.token.prefix.inserted{width:var(--eleventy-code-padding);background-color:rgba(0,0,0,.2)}.token.deleted:not(.prefix),.token.inserted:not(.prefix){display:block;margin-left:calc(-1 * var(--eleventy-code-padding));margin-right:calc(-1 * var(--eleventy-code-padding));text-decoration:none;color:inherit}:root{--attachment-info-bg-color:#f7f7f0;--attachment-info-border-color:#d7d7d7;--attachment-download-link-color:#666}h1,h2,h3,h4,h5,h6{font-weight:700}h3{font-size:.875rem}h6{font-size:.6875rem}.attachment-info{padding:.25em .5em;margin:1em 0;background-color:var(--attachment-info-bg-color);border:1px solid var(--attachment-info-border-color)}.attachment-info h6{font-family:var(--font-family-alternate)}.attachment-download{margin:2em 0;gap:.5em}.attachment-download-link[href],.attachment-download-link[href]:visited{color:var(--attachment-download-link-color)}.attachment img,.attachment picture{display:block;max-width:100%;height:auto}code[class*=language-],pre[class*=language-]{font-size:.75rem}:root{--font-family:'Trebuchet MS',Verdana,Helvetica,Arial,sans-serif;--font-family-header:var(--font-family);--font-family-alternate:Verdana,Arial,'Bitstream Vera Sans',Helvetica,sans-serif;--font-family-monospace:Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace}:root{--primary-color:#192839;--secondary-color:#0f67a1;--text-color:#222;--text-color-dark-bg:#fff;--text-color-link:var(--secondary-color);--text-color-link-hover:#0e3a58;--text-color-link-active:#1695e9;--text-color-link-visited:var(--secondary-color);--text-color-link-disabled:#998;--main-link-hover-bg-color:#eee;--text-shadow-color:#fcfcfc;--button-color:var(--secondary-color);--button-hover-color:var(--text-color-link-hover);--button-text-color:#fff;--footer-text-color-link:#5db0e6;--background-color:#39414a;--nav-background-color:var(--primary-color);--secondary-nav-background-color:var(--secondary-color);--main-background-start-color:#000000;--main-background-end-color:#181c21;--content-background-color:#fafafa;--sidenav-header-background-color:#ddd;--banner-background-color:var(--primary-color);--footer-background-start-color:var(--primary-color);--footer-background-end-color:#0f1923;--nav-text-link-color:white;--nav-hover-link-color:rgba(0, 0, 0, 0.2);--nav-active-link-color:#176092;--border-color:#e4e4e4;--border-radius:4px;--input-border-color:white;--blockquote-border-color:#b44;--pre-color:#333;--pre-background-color:#fff;--code-color:#600;--code-background-color:var(--content-background-color);--syntax-tab-size:2}*{box-sizing:border-box}body,html{padding:0;margin:0 auto;font-family:var(--font-family);font-size:100%;color:var(--text-color);background-color:var(--background-color);line-height:1.4}html{overflow-y:auto}body{background-repeat:repeat-x;background-position:50% 80px}.banner{width:100%;height:80px;background-color:var(--banner-background-color);color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.2);text-align:center;font-size:.875rem;padding:0 .25em}.banner a[href],.banner a[href]:visited{color:#5cb5f0}.banner a[href]:hover{color:var(--text-color-link-hover)}.banner a[href]:active{color:var(--text-color-link-active)}th,tr{font-family:var(--font-family-alternate)}.container{width:100%;max-width:910px;margin:0 auto;overflow:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-header);font-weight:400;margin:0;padding:0;letter-spacing:0}h1{font-size:1.25rem;font-weight:700}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}p{line-height:1.5;margin:.5em 0 1em}p:last-child{margin-bottom:0}ul{margin:0}li{line-height:1.5}hr{width:100%}blockquote{margin:-.3em 0 0 0;border-style:solid;border-width:0 0 0 2px;padding-left:.4em;border-color:var(--blockquote-border-color)}a[href]{color:var(--text-color-link)}a[href]:visited{color:var(--text-color-link-visited)}a[href]:hover,footer a[href]:hover{color:var(--text-color-link-hover)}a[href]:active,footer a[href]:hover{color:var(--text-color-link-active)}a[aria-disabled=true]{color:var(--text-color-link-disabled)}main{padding:1rem}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:var(--font-family-monospace)}pre:not([class*=language-]){margin:.5em 0;-moz-tab-size:var(--syntax-tab-size);-o-tab-size:var(--syntax-tab-size);tab-size:var(--syntax-tab-size);-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;width:100%;padding:.25em;font-size:.6875rem;border-radius:var(--border-radius);overflow-x:auto;background:var(--pre-background-color);color:var(--pre-color);border:1px solid #000;text-align:left}code{color:var(--code-color);border:1px solid var(--border-color);border-radius:.25em;padding:0 .3em;background:var(--code-background-color);word-break:break-all}pre[class*=language-] code{color:unset;border:none;border-radius:0;padding:0;background:0 0;word-break:normal}.strikethrough{text-decoration:line-through}header{position:relative;height:186px;display:flex;flex-wrap:wrap;padding:0 1.5rem}header h1{text-transform:uppercase}.nav{display:flex;flex-direction:column;padding:0;list-style:none}.nav a{display:flex;align-items:center;height:35px;font-size:.75rem;padding:0 1em;text-decoration:none;border-bottom:1px dotted var(--nav-text-link-color);white-space:nowrap;width:100%}.nav li:not(.active) a:active,.nav li:not(.active) a:hover{background-color:var(--nav-hover-link-color)}.nav a,.nav a:active,.nav a:hover,.nav a:visited{color:var(--nav-text-link-color)}.nav .active a{border-bottom:2px solid var(--nav-active-link-color)}#jq-siteLogo{margin-top:1em}#jq-primaryNavigation{padding:0 .5em;background-color:var(--nav-background-color)}#jq-secondaryNavigation{padding:0 .5em;background-color:var(--secondary-nav-background-color)}#jq-secondaryNavigation a{font-size:.8125rem}#bug-tracker-form{position:relative;width:100%;gap:16px;margin-top:25px;color:var(--text-color-dark-bg)}.content-nav{font-size:.8125rem;margin:1.2em 0;align-self:flex-end}.content-nav ul{list-style:none}.content-nav li{padding:0 .75em}.content-nav li:not(:last-of-type){border-right:1px solid var(--border-color)}.hamburger-lines{position:relative;width:18px;height:14px;align-self:center}.hamburger-line{width:100%;height:2px;background-color:#fff;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.hamburger-toggle:checked+.hamburger-lines span:first-of-type{transform:rotateZ(45deg) translate(4px,4.5px) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:nth-of-type(2){transform:rotateZ(135deg) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:last-of-type{transform:translateY(-8px) scale(0);opacity:0}.hamburger-toggle:checked~#jq-menus{transform:none;opacity:1}form{gap:.5em}label{font-style:italic;font-size:.8125rem;font-weight:700}input{border:1px solid var(--input-border-color);border-radius:var(--border-radius);height:25px;padding:0 .5em;color:var(--text-color)}button{display:block;border:0;padding:5px 10px;border-radius:var(--border-radius);background:var(--button-color);color:var(--button-text-color);font-size:.875rem;cursor:pointer}button:active,button:hover{background-color:var(--button-hover-color)}button:active{box-shadow:inset 0 0 5px #000}main{padding:20px;background:linear-gradient(to bottom,var(--main-background-start-color),var(--main-background-end-color));gap:1em}main a[href]:active,main a[href]:hover{background-color:var(--main-link-hover-bg-color)}#jq-content{position:relative;padding:1em}#jq-sidenav{padding:2em 1em}#jq-sidenav a{font-size:.75rem;display:block;padding:.35em .625em;text-decoration:none;border-bottom:1px solid var(--border-color)}.sidenav-header{font-size:.75rem;font-weight:700;color:var(--primary-color);text-transform:uppercase;background-color:var(--sidenav-header-background-color);padding:.225em .625em;margin-bottom:.5em}footer{background-color:var(--nav-background-color);background:var(--nav-background-color) linear-gradient(to bottom,var(--footer-background-start-color),var(--footer-background-end-color));padding:2.5em;margin-bottom:2em;border-top:2px solid #000;border-bottom:2px solid #000;color:var(--text-color-dark-bg)}footer a[href],footer a[href]:visited{color:var(--footer-text-color-link)}.flex-row{display:flex;flex-direction:row}.flex-column{display:flex;flex-direction:column}.flex-between-start{justify-content:space-between;align-items:flex-start}.flex-between-center{justify-content:space-between;align-items:center}.flex-start-center{justify-content:flex-start;align-items:center}.flex-center{display:flex;justify-content:center;align-items:center}.items-start{align-items:start}.white-box{background-color:var(--content-background-color);border-radius:var(--border-radius);border:1px solid var(--border-color)}a.ext-link .icon{padding-left:15px}@media (max-width:919px){#jq-menus{position:absolute;top:80px;height:calc(100vh - 80px);left:0;right:0;background-color:var(--nav-background-color);z-index:5;transition:transform .2s ease-in-out,opacity .2s ease-in-out;transform:translateX(100%);opacity:0;display:flex;flex-direction:column-reverse;justify-content:flex-end}}@media (min-width:920px){body{background-position-y:60px}.banner{height:60px;font-size:1rem}header{padding:0 2.5rem}.nav{flex-direction:row}.nav a{width:auto}#jq-primaryNavigation a{height:27px}#jq-secondaryNavigation{border-radius:var(--border-radius);margin-top:2em}#jq-siteLogo{margin-top:59px}#bug-tracker-form{flex-direction:row;gap:0;position:absolute;bottom:15px;left:0;right:0;padding:0 40px 0 60px}.hamburger-lines{display:none}main.flex-column{padding:2.5em;display:flex;flex-direction:row}#jq-sidenav{width:196px;flex-shrink:0}.content-nav{margin-top:.4em}#jq-content{flex-grow:1;max-width:622px;min-height:520px;font-size:.875rem}}:root{--pagefind-ui-background-color:#fff}#search{position:relative;width:calc(100% - 85px - 22px - 1rem);margin-right:22px;align-self:flex-end}#search:before{content:'Search Tickets';position:absolute;right:100%;top:50%;transform:translate(-10px,-50%);color:#fff;font-size:.8125rem;font-style:italic;white-space:nowrap}#search:after{content:'';display:block;position:absolute;right:-22px;top:-4px;width:35px;height:35px;z-index:2}.pagefind-ui__search-input{width:100%}.pagefind-ui__search-clear{display:inline-block;position:absolute;width:25px;height:25px;right:15px;top:0;padding:0 0 0 25px;overflow:hidden;background-color:transparent;z-index:1}.pagefind-ui__search-clear:active,.pagefind-ui__search-clear:hover{background-color:rgba(0,0,0,.2)}.pagefind-ui__search-clear:after{content:'×';position:absolute;top:0;left:0;right:0;bottom:0;font-weight:700;font-size:1.5rem;line-height:26px;text-align:center;color:var(--text-color);opacity:1}.pagefind-ui__hidden{display:none}.pagefind-ui__suppressed{display:none}.pagefind-ui__drawer{position:absolute;top:100%;left:0;right:0;height:350px;background-color:var(--pagefind-ui-background-color);border:1px solid var(--border-color);border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius);box-shadow:0 2px 4px rgba(0,0,0,.2);padding:10px;color:var(--text-color);font-size:.875rem;overflow-y:auto;word-break:break-word;z-index:1}.pagefind-ui__results-area{width:100%}.pagefind-ui__results{padding-left:20px}.pagefind-ui__result{margin-bottom:10px;vertical-align:top}.pagefind-ui__result-thumb{display:flex;flex-direction:column}.pagefind-ui__result-thumb .pagefind-ui__result-image{max-width:150px}.pagefind-ui__message{font-weight:700;text-transform:uppercase;font-size:1rem}.pagefind-ui__button{width:100%;padding:10px;margin-top:2em}@media(min-width:920px){#search{width:auto}.pagefind-ui__search-input{width:300px}.pagefind-ui__search-clear{right:auto;left:270px}.pagefind-ui__drawer{left:-200px;height:500px;padding:15px}}body{background-image:url(/bugs.jquery.com/img/bg-interior-tile-drk.jpg)}a.ext-link .icon{background:url(/bugs.jquery.com/img/extlink.png) 0 50% no-repeat}#search:after{background:url(/bugs.jquery.com/img/icon-search.png) 0 0 no-repeat}
    </style>
    
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/bugs.jquery.com/" title="jQuery Home">
            <img src="/bugs.jquery.com/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/bugs.jquery.com/newticket">New Ticket</a>
          <a href="/bugs.jquery.com/report">View Tickets</a>
          <a href="/bugs.jquery.com/ticketgraph">Ticket Graph</a>
          <a href="/bugs.jquery.com/roadmap">Roadmap</a>
          <a href="/bugs.jquery.com/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/bugs.jquery.com/ticket/3662">Back to Ticket #3662</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/bugs.jquery.com/ticket/3662">Ticket #3662</a>: event-object[5953].diff
  
  <hr>

  <div class="attachment-info">
    <h6>File event-object[5953].diff, 12.1 KB (added by flesler, November 28, 2008 11:58PM UTC)</h6>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-diff" tabindex="0"><code class="language-diff">Index: src/event.js
===================================================================
<span class="token coord">--- src/event.js	(revision 5953)</span>
<span class="token coord">+++ src/event.js	(working copy)</span>
<span class="token coord">@@ -155,69 +155,59 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		}
</span><span class="token prefix unchanged"> </span><span class="token line">	},
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	trigger: function(type, data, elem, donative, extra) {
</span><span class="token prefix deleted">-</span><span class="token line">		// Clone the incoming data, if any
</span><span class="token prefix deleted">-</span><span class="token line">		data = jQuery.makeArray(data);
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">		if ( type.indexOf("!") >= 0 ) {
</span><span class="token prefix deleted">-</span><span class="token line">			type = type.slice(0, -1);
</span><span class="token prefix deleted">-</span><span class="token line">			var exclusive = true;
</span><span class="token prefix deleted">-</span><span class="token line">		}
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	trigger: function( e, args, elem, donative, extra) {
</span><span class="token prefix inserted">+</span><span class="token line">		// Event object or event type
</span><span class="token prefix inserted">+</span><span class="token line">		var type = e.type || e;
</span><span class="token prefix inserted">+</span><span class="token line">		
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		// Handle a global trigger
</span><span class="token prefix unchanged"> </span><span class="token line">		if ( !elem ) {
</span><span class="token prefix unchanged"> </span><span class="token line">			// Only trigger if we've ever bound an event for it
</span><span class="token prefix unchanged"> </span><span class="token line">			if ( this.global[type] )
</span><span class="token prefix unchanged"> </span><span class="token line">				jQuery.each( jQuery.cache, function(){
</span><span class="token prefix unchanged"> </span><span class="token line">					if ( this.events &amp;&amp; this.events[type] )
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">						jQuery.event.trigger( type, data, this.handle.elem );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">						jQuery.event.trigger( type, args, this.handle.elem );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">				});
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">		// Handle triggering a single element
</span><span class="token prefix unchanged"> </span><span class="token line">		} else {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			// don't do events on text and comment nodes
</span><span class="token prefix unchanged"> </span><span class="token line">			if ( elem.nodeType == 3 || elem.nodeType == 8 )
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				return undefined;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				return;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			var val, ret, fn = jQuery.isFunction( elem[ type ] || null ),
</span><span class="token prefix deleted">-</span><span class="token line">				// Check to see if we need to provide a fake event, or not
</span><span class="token prefix deleted">-</span><span class="token line">				event = !data[0] || !data[0].preventDefault;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">			// Pass along a fake event
</span><span class="token prefix deleted">-</span><span class="token line">			if ( event ) {
</span><span class="token prefix deleted">-</span><span class="token line">				data.unshift({
</span><span class="token prefix deleted">-</span><span class="token line">					type: type,
</span><span class="token prefix deleted">-</span><span class="token line">					target: elem,
</span><span class="token prefix deleted">-</span><span class="token line">					preventDefault: function(){},
</span><span class="token prefix deleted">-</span><span class="token line">					stopPropagation: function(){},
</span><span class="token prefix deleted">-</span><span class="token line">					stopImmediatePropagation:stopImmediatePropagation,
</span><span class="token prefix deleted">-</span><span class="token line">					timeStamp: now()
</span><span class="token prefix deleted">-</span><span class="token line">				});
</span><span class="token prefix deleted">-</span><span class="token line">				data[0][expando] = true; // no need to fix fake event
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			// Clone the incoming args, if any
</span><span class="token prefix inserted">+</span><span class="token line">			args = jQuery.makeArray(args);
</span><span class="token prefix inserted">+</span><span class="token line">			
</span><span class="token prefix inserted">+</span><span class="token line">			if ( type.indexOf("!") >= 0 ) {
</span><span class="token prefix inserted">+</span><span class="token line">				type = type.slice(0, -1);
</span><span class="token prefix inserted">+</span><span class="token line">				var exclusive = true;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			}
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			
</span><span class="token prefix inserted">+</span><span class="token line">			if( !e.type )
</span><span class="token prefix inserted">+</span><span class="token line">				e = new jQuery.Event(type);
</span><span class="token prefix inserted">+</span><span class="token line">			e.target = elem;
</span><span class="token prefix inserted">+</span><span class="token line">			e.exclusive = exclusive;
</span><span class="token prefix inserted">+</span><span class="token line">			
</span><span class="token prefix inserted">+</span><span class="token line">			args.unshift( e );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			// Enforce the right trigger type
</span><span class="token prefix deleted">-</span><span class="token line">			data[0].type = type;
</span><span class="token prefix deleted">-</span><span class="token line">			if ( exclusive )
</span><span class="token prefix deleted">-</span><span class="token line">				data[0].exclusive = true;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			var val, ret, fn = jQuery.isFunction( elem[ type ] );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">			// Trigger the event, it is assumed that "handle" is a function
</span><span class="token prefix unchanged"> </span><span class="token line">			var handle = jQuery.data(elem, "handle");
</span><span class="token prefix unchanged"> </span><span class="token line">			if ( handle )
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				val = handle.apply( elem, data );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				val = handle.apply( elem, args );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">			// Handle triggering native .onfoo handlers (and on links since we don't call .click() for links)
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			if ( (!fn || (jQuery.nodeName(elem, 'a') &amp;&amp; type == "click")) &amp;&amp; elem["on"+type] &amp;&amp; elem["on"+type].apply( elem, data ) === false )
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			if ( (!fn || (jQuery.nodeName(elem, 'a') &amp;&amp; type == "click")) &amp;&amp; elem["on"+type] &amp;&amp; elem["on"+type].apply( elem, args ) === false )
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">				val = false;
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">			// Extra functions don't get the custom event object
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			if ( event )
</span><span class="token prefix deleted">-</span><span class="token line">				data.shift();
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			args.shift();
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">			// Handle triggering of extra function
</span><span class="token prefix unchanged"> </span><span class="token line">			if ( extra &amp;&amp; jQuery.isFunction( extra ) ) {
</span><span class="token prefix unchanged"> </span><span class="token line">				// call the extra function and tack the current return value on the end for possible inspection
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				ret = extra.apply( elem, val == null ? data : data.concat( val ) );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				ret = extra.apply( elem, val == null ? args : args.concat( val ) );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">				// if anything is returned, give it precedence and have it overwrite the previous value
</span><span class="token prefix unchanged"> </span><span class="token line">				if ( ret !== undefined )
</span><span class="token prefix unchanged"> </span><span class="token line">					val = ret;
</span></span><span class="token coord">@@ -239,31 +229,29 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	},
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	handle: function(event) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		// returned undefined or false
</span><span class="token prefix deleted">-</span><span class="token line">		var val, ret, namespace, all, handlers;
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		event = arguments[0] = jQuery.event.fix( event || window.event );
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		var val, 
</span><span class="token prefix inserted">+</span><span class="token line">			ns = event.type.split("."),
</span><span class="token prefix inserted">+</span><span class="token line">			// Cache this now, all = true means, any handler
</span><span class="token prefix inserted">+</span><span class="token line">			all = !ns[1] &amp;&amp; !event.exclusive, 
</span><span class="token prefix inserted">+</span><span class="token line">			handlers = ( jQuery.data(this, "events") || {} )[ns[0]];
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		// Namespaced event handlers
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		namespace = event.type.split(".");
</span><span class="token prefix deleted">-</span><span class="token line">		event.type = namespace[0];
</span><span class="token prefix deleted">-</span><span class="token line">		namespace = namespace[1];
</span><span class="token prefix deleted">-</span><span class="token line">		// Cache this now, all = true means, any handler
</span><span class="token prefix deleted">-</span><span class="token line">		all = !namespace &amp;&amp; !event.exclusive;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		event.type = ns[0];
</span><span class="token prefix inserted">+</span><span class="token line">		ns = ns[1];
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		handlers = ( jQuery.data(this, "events") || {} )[event.type];
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		for ( var j in handlers ) {
</span><span class="token prefix unchanged"> </span><span class="token line">			var handler = handlers[j];
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">			// Filter the functions by class
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">			if ( all || handler.type == namespace ) {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">			if ( all || handler.type == ns ) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">				// Pass in a reference to the handler function itself
</span><span class="token prefix unchanged"> </span><span class="token line">				// So that we can later remove it
</span><span class="token prefix unchanged"> </span><span class="token line">				event.handler = handler;
</span><span class="token prefix unchanged"> </span><span class="token line">				event.data = handler.data;
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">				ret = handler.apply( this, arguments );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">				var ret = handler.apply( this, arguments );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">				if ( val !== false )
</span><span class="token prefix unchanged"> </span><span class="token line">					val = ret;
</span></span><span class="token coord">@@ -282,7 +270,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		return val;
</span><span class="token prefix unchanged"> </span><span class="token line">	},
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" "),
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement type view wheelDelta which".split(" "),
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	fix: function(event) {
</span><span class="token prefix unchanged"> </span><span class="token line">		if ( event[expando] )
</span></span><span class="token coord">@@ -291,38 +279,13 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		// store a copy of the original event object
</span><span class="token prefix unchanged"> </span><span class="token line">		// and "clone" to set read-only properties
</span><span class="token prefix unchanged"> </span><span class="token line">		var originalEvent = event;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		event = { originalEvent: originalEvent };
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		event = new jQuery.Event( originalEvent );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">		for ( var i = this.props.length, prop; i; ){
</span><span class="token prefix unchanged"> </span><span class="token line">			prop = this.props[ --i ];
</span><span class="token prefix unchanged"> </span><span class="token line">			event[ prop ] = originalEvent[ prop ];
</span><span class="token prefix unchanged"> </span><span class="token line">		}
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		// Mark it as fixed
</span><span class="token prefix deleted">-</span><span class="token line">		event[expando] = true;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">		// add preventDefault and stopPropagation since
</span><span class="token prefix deleted">-</span><span class="token line">		// they will not work on the clone
</span><span class="token prefix deleted">-</span><span class="token line">		event.preventDefault = function() {
</span><span class="token prefix deleted">-</span><span class="token line">			// if preventDefault exists run it on the original event
</span><span class="token prefix deleted">-</span><span class="token line">			if (originalEvent.preventDefault)
</span><span class="token prefix deleted">-</span><span class="token line">				originalEvent.preventDefault();
</span><span class="token prefix deleted">-</span><span class="token line">			// otherwise set the returnValue property of the original event to false (IE)
</span><span class="token prefix deleted">-</span><span class="token line">			originalEvent.returnValue = false;
</span><span class="token prefix deleted">-</span><span class="token line">		};
</span><span class="token prefix deleted">-</span><span class="token line">		event.stopPropagation = function() {
</span><span class="token prefix deleted">-</span><span class="token line">			// if stopPropagation exists run it on the original event
</span><span class="token prefix deleted">-</span><span class="token line">			if (originalEvent.stopPropagation)
</span><span class="token prefix deleted">-</span><span class="token line">				originalEvent.stopPropagation();
</span><span class="token prefix deleted">-</span><span class="token line">			// otherwise set the cancelBubble property of the original event to true (IE)
</span><span class="token prefix deleted">-</span><span class="token line">			originalEvent.cancelBubble = true;
</span><span class="token prefix deleted">-</span><span class="token line">		};
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">		event.stopImmediatePropagation = stopImmediatePropagation;
</span><span class="token prefix deleted">-</span><span class="token line">
</span><span class="token prefix deleted">-</span><span class="token line">		// Fix timeStamp
</span><span class="token prefix deleted">-</span><span class="token line">		event.timeStamp = event.timeStamp || now();
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		// Fix target property, if necessary
</span><span class="token prefix unchanged"> </span><span class="token line">		if ( !event.target )
</span><span class="token prefix unchanged"> </span><span class="token line">			event.target = event.srcElement || document; // Fixes #1925 where srcElement might not be defined either
</span></span><span class="token coord">@@ -374,11 +337,49 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	}
</span><span class="token prefix unchanged"> </span><span class="token line">};
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">function stopImmediatePropagation(){
</span><span class="token prefix deleted">-</span><span class="token line">	this._sip = 1;
</span><span class="token prefix deleted">-</span><span class="token line">	this.stopPropagation();
</span><span class="token prefix deleted">-</span><span class="token line">}
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">jQuery.Event = function( src ){
</span><span class="token prefix inserted">+</span><span class="token line">	// Event object
</span><span class="token prefix inserted">+</span><span class="token line">	if( src &amp;&amp; src.type ){
</span><span class="token prefix inserted">+</span><span class="token line">		this.originalEvent = src;
</span><span class="token prefix inserted">+</span><span class="token line">		this.type = src.type;
</span><span class="token prefix inserted">+</span><span class="token line">		
</span><span class="token prefix inserted">+</span><span class="token line">		// Fix timeStamp
</span><span class="token prefix inserted">+</span><span class="token line">		this.timeStamp = src.timeStamp || now();
</span><span class="token prefix inserted">+</span><span class="token line">	// Event type
</span><span class="token prefix inserted">+</span><span class="token line">	}else
</span><span class="token prefix inserted">+</span><span class="token line">		this.type = src;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	// Mark it as fixed
</span><span class="token prefix inserted">+</span><span class="token line">	this[expando] = true;
</span><span class="token prefix inserted">+</span><span class="token line">};
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">jQuery.Event.prototype = {
</span><span class="token prefix inserted">+</span><span class="token line">	// add preventDefault and stopPropagation since
</span><span class="token prefix inserted">+</span><span class="token line">	// they will not work on the clone
</span><span class="token prefix inserted">+</span><span class="token line">	preventDefault: function() {
</span><span class="token prefix inserted">+</span><span class="token line">		if( !this.originalEvent )
</span><span class="token prefix inserted">+</span><span class="token line">			return;
</span><span class="token prefix inserted">+</span><span class="token line">		// if preventDefault exists run it on the original event
</span><span class="token prefix inserted">+</span><span class="token line">		if (this.originalEvent.preventDefault)
</span><span class="token prefix inserted">+</span><span class="token line">			this.originalEvent.preventDefault();
</span><span class="token prefix inserted">+</span><span class="token line">		// otherwise set the returnValue property of the original event to false (IE)
</span><span class="token prefix inserted">+</span><span class="token line">		this.originalEvent.returnValue = false;
</span><span class="token prefix inserted">+</span><span class="token line">	},
</span><span class="token prefix inserted">+</span><span class="token line">	stopPropagation: function() {
</span><span class="token prefix inserted">+</span><span class="token line">		if( !this.originalEvent )
</span><span class="token prefix inserted">+</span><span class="token line">			return;
</span><span class="token prefix inserted">+</span><span class="token line">		// if stopPropagation exists run it on the original event
</span><span class="token prefix inserted">+</span><span class="token line">		if (this.originalEvent.stopPropagation)
</span><span class="token prefix inserted">+</span><span class="token line">			this.originalEvent.stopPropagation();
</span><span class="token prefix inserted">+</span><span class="token line">		// otherwise set the cancelBubble property of the original event to true (IE)
</span><span class="token prefix inserted">+</span><span class="token line">		this.originalEvent.cancelBubble = true;
</span><span class="token prefix inserted">+</span><span class="token line">	},
</span><span class="token prefix inserted">+</span><span class="token line">	stopImmediatePropagation:function(){
</span><span class="token prefix inserted">+</span><span class="token line">		this._sip = 1;
</span><span class="token prefix inserted">+</span><span class="token line">		this.stopPropagation();
</span><span class="token prefix inserted">+</span><span class="token line">	}
</span><span class="token prefix inserted">+</span><span class="token line">};
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">if ( !jQuery.browser.msie ){	
</span><span class="token prefix unchanged"> </span><span class="token line">	// Checks if an event happened on an element within another element
</span><span class="token prefix unchanged"> </span><span class="token line">	// Used in jQuery.event.special.mouseenter and mouseleave handlers
</span></span>Index: test/unit/event.js
===================================================================
<span class="token coord">--- test/unit/event.js	(revision 5953)</span>
<span class="token coord">+++ test/unit/event.js	(working copy)</span>
<span class="token coord">@@ -182,7 +182,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">});
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">test("trigger(event, [data], [fn])", function() {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	expect(67);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	expect(62);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	var handler = function(event, a, b, c) {
</span><span class="token prefix unchanged"> </span><span class="token line">		equals( event.type, "click", "check passed data" );
</span></span><span class="token coord">@@ -213,48 +213,46 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		equals( c, "abc", "check passed data" );
</span><span class="token prefix unchanged"> </span><span class="token line">		equals( v, "test", "check current value" );
</span><span class="token prefix unchanged"> </span><span class="token line">	};
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	
</span><span class="token prefix inserted">+</span><span class="token line">	var $elem = jQuery("#firstp");
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Simulate a "native" click
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	jQuery("#firstp")[0].click = function(){
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	$elem[0].click = function(){
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		ok( true, "Native call was triggered" );
</span><span class="token prefix unchanged"> </span><span class="token line">	};
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers handlrs and native
</span><span class="token prefix unchanged"> </span><span class="token line">	// Trigger 5
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	jQuery("#firstp").bind("click", handler).trigger("click", [1, "2", "abc"]);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	$elem.bind("click", handler).trigger("click", [1, "2", "abc"]);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers handlers, native, and extra fn
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 9
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	jQuery("#firstp").trigger("click", [1, "2", "abc"], handler4);
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	$elem.trigger("click", [1, "2", "abc"], handler4);
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Simulate a "native" click
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	jQuery("#firstp")[0].click = function(){
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	$elem[0].click = function(){
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		ok( false, "Native call was triggered" );
</span><span class="token prefix unchanged"> </span><span class="token line">	};
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	// Triggers handlers, native, and extra fn
</span><span class="token prefix deleted">-</span><span class="token line">	// Triggers 7
</span><span class="token prefix deleted">-</span><span class="token line">	jQuery("#firstp").trigger("click", [1, "2", "abc"], handler2);
</span><span class="token prefix deleted">-</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	// Trigger only the handlers (no native)
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 5
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [1, "2", "abc"]), "test", "Verify handler response" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler("click", [1, "2", "abc"]), "test", "Verify handler response" );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Trigger only the handlers (no native) and extra fn
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 8
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [1, "2", "abc"], handler2), false, "Verify handler response" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler("click", [1, "2", "abc"], handler2), false, "Verify handler response" );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Build fake click event to pass in
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	var eventObj = jQuery.event.fix({ type: "foo", target: document.body });
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	var eventObj = new jQuery.Event("click");
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Trigger only the handlers (no native), with external event obj
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 5
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [eventObj, 1, "2", "abc"]), "test", "Verify handler response" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler(eventObj, [1, "2", "abc"]), "test", "Verify handler response" );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// Trigger only the handlers (no native) and extra fn, with external event obj
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 9
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	eventObj = jQuery.event.fix({ type: "foo", target: document.body });
</span><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [eventObj, 1, "2", "abc"], handler), "test", "Verify handler response" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	eventObj = new jQuery.Event("click");
</span><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler(eventObj, [1, "2", "abc"], handler2), false, "Verify handler response" );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	
</span><span class="token prefix unchanged"> </span><span class="token line">	var pass = true;
</span><span class="token prefix unchanged"> </span><span class="token line">	try {
</span></span><span class="token coord">@@ -268,11 +266,23 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// have the extra handler override the return
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 9
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [1, "2", "abc"], handler3), "newVal", "Verify triggerHandler return is overwritten by extra function" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler("click", [1, "2", "abc"], handler3), "newVal", "Verify triggerHandler return is overwritten by extra function" );
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	// have the extra handler leave the return value alone
</span><span class="token prefix unchanged"> </span><span class="token line">	// Triggers 9
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">	equals( jQuery("#firstp").triggerHandler("click", [1, "2", "abc"], handler4), "test", "Verify triggerHandler return is not overwritten by extra function" );
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">	equals( $elem.triggerHandler("click", [1, "2", "abc"], handler4), "test", "Verify triggerHandler return is not overwritten by extra function" );
</span><span class="token prefix inserted">+</span><span class="token line">	
</span><span class="token prefix inserted">+</span><span class="token line">	eventObj = new jQuery.Event('foo');
</span><span class="token prefix inserted">+</span><span class="token line">	eventObj.secret = 'boo!';
</span><span class="token prefix inserted">+</span><span class="token line">	
</span><span class="token prefix inserted">+</span><span class="token line">	$elem.unbind('click').bind('foo',function(e){
</span><span class="token prefix inserted">+</span><span class="token line">		equals( e.type, 'foo', 'Verify event type when passed passing an event object' );
</span><span class="token prefix inserted">+</span><span class="token line">		equals( e.target.id, 'firstp', 'Verify event.target when passed passing an event object' );
</span><span class="token prefix inserted">+</span><span class="token line">		equals( e.secret, 'boo!', 'Verify event object\'s custom attribute when passed passing an event object' );
</span><span class="token prefix inserted">+</span><span class="token line">	});
</span><span class="token prefix inserted">+</span><span class="token line">	
</span><span class="token prefix inserted">+</span><span class="token line">	$elem.triggerHandler( eventObj );
</span><span class="token prefix inserted">+</span><span class="token line">	$elem.unbind('foo');
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">});
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">test("toggle(Function, Function, ...)", function() {</span></span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/bugs.jquery.com/raw-attachment/ticket/3662/event-object[5953].diff">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2023
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/bugs.jquery.com/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
      window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
          element: "#search",
          showImages: false,
          translations: {
            placeholder: '',
            zero_results: 'No matches found.'
          }
        })
      })
    </script>
  </body>
</html>
