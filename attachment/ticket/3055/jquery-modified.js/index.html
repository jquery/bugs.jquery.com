<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">jquery-modified.js on Ticket #3055 – Attachment – jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/bugs.jquery.com/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/bugs.jquery.com/favicon.svg">
<link rel="apple-touch-icon" href="/bugs.jquery.com/apple-touch-icon.png">
    
    
    
    
    
    
    
    <style>
      code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-diff]{--eleventy-code-padding:1.25em;padding-left:var(--eleventy-code-padding);padding-right:var(--eleventy-code-padding)}.token.deleted{background-color:#8e2e2e;color:inherit}.token.inserted{background-color:#44824a;color:inherit}.token.prefix.deleted,.token.prefix.inserted,.token.prefix.unchanged{-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;padding-top:2px;padding-bottom:2px}.token.prefix.deleted,.token.prefix.inserted{width:var(--eleventy-code-padding);background-color:rgba(0,0,0,.2)}.token.deleted:not(.prefix),.token.inserted:not(.prefix){display:block;margin-left:calc(-1 * var(--eleventy-code-padding));margin-right:calc(-1 * var(--eleventy-code-padding));text-decoration:none;color:inherit}:root{--attachment-info-bg-color:#f7f7f0;--attachment-info-border-color:#d7d7d7;--attachment-download-link-color:#666}h1,h2,h3,h4,h5,h6{font-weight:700}h3{font-size:.875rem}h6{font-size:.6875rem}.attachment-info{padding:.25em .5em;margin:1em 0;background-color:var(--attachment-info-bg-color);border:1px solid var(--attachment-info-border-color)}.attachment-info h6{font-family:var(--font-family-alternate)}.attachment-download{margin:2em 0;gap:.5em}.attachment-download-link[href],.attachment-download-link[href]:visited{color:var(--attachment-download-link-color)}.attachment img,.attachment picture{display:block;max-width:100%;height:auto}code[class*=language-],pre[class*=language-]{font-size:.75rem}:root{--font-family:'Trebuchet MS',Verdana,Helvetica,Arial,sans-serif;--font-family-header:var(--font-family);--font-family-alternate:Verdana,Arial,'Bitstream Vera Sans',Helvetica,sans-serif;--font-family-monospace:Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace}:root{--primary-color:#192839;--secondary-color:#0f67a1;--text-color:#222;--text-color-dark-bg:#fff;--text-color-link:var(--secondary-color);--text-color-link-hover:#0e3a58;--text-color-link-active:#1695e9;--text-color-link-visited:var(--secondary-color);--text-color-link-disabled:#998;--main-link-hover-bg-color:#eee;--text-shadow-color:#fcfcfc;--button-color:var(--secondary-color);--button-hover-color:var(--text-color-link-hover);--button-text-color:#fff;--footer-text-color-link:#5db0e6;--background-color:#39414a;--nav-background-color:var(--primary-color);--secondary-nav-background-color:var(--secondary-color);--main-background-start-color:#000000;--main-background-end-color:#181c21;--content-background-color:#fafafa;--sidenav-header-background-color:#ddd;--banner-background-color:var(--primary-color);--footer-background-start-color:var(--primary-color);--footer-background-end-color:#0f1923;--nav-text-link-color:white;--nav-hover-link-color:rgba(0, 0, 0, 0.2);--nav-active-link-color:#176092;--border-color:#e4e4e4;--border-radius:4px;--input-border-color:white;--blockquote-border-color:#b44;--pre-color:#333;--pre-background-color:#fff;--code-color:#600;--code-background-color:var(--content-background-color);--syntax-tab-size:2}*{box-sizing:border-box}body,html{padding:0;margin:0 auto;font-family:var(--font-family);font-size:100%;color:var(--text-color);background-color:var(--background-color);line-height:1.4}html{overflow-y:auto}body{background-repeat:repeat-x;background-position:50% 80px}.banner{width:100%;height:80px;background-color:var(--banner-background-color);color:#fff;box-shadow:0 2px 5px rgba(0,0,0,.2);text-align:center;font-size:.875rem;padding:0 .25em}.banner a[href],.banner a[href]:visited{color:#5cb5f0}.banner a[href]:hover{color:var(--text-color-link-hover)}.banner a[href]:active{color:var(--text-color-link-active)}th,tr{font-family:var(--font-family-alternate)}.container{width:100%;max-width:910px;margin:0 auto;overflow:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-family-header);font-weight:400;margin:0;padding:0;letter-spacing:0}h1{font-size:1.25rem;font-weight:700}.visually-hidden{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}p{line-height:1.5;margin:.5em 0 1em}p:last-child{margin-bottom:0}ul{margin:0}li{line-height:1.5}hr{width:100%}blockquote{margin:-.3em 0 0 0;border-style:solid;border-width:0 0 0 2px;padding-left:.4em;border-color:var(--blockquote-border-color)}a[href]{color:var(--text-color-link)}a[href]:visited{color:var(--text-color-link-visited)}a[href]:hover,footer a[href]:hover{color:var(--text-color-link-hover)}a[href]:active,footer a[href]:hover{color:var(--text-color-link-active)}a[aria-disabled=true]{color:var(--text-color-link-disabled)}main{padding:1rem}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:var(--font-family-monospace)}pre:not([class*=language-]){margin:.5em 0;-moz-tab-size:var(--syntax-tab-size);-o-tab-size:var(--syntax-tab-size);tab-size:var(--syntax-tab-size);-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;width:100%;padding:.25em;font-size:.6875rem;border-radius:var(--border-radius);overflow-x:auto;background:var(--pre-background-color);color:var(--pre-color);border:1px solid #000;text-align:left}code{color:var(--code-color);border:1px solid var(--border-color);border-radius:.25em;padding:0 .3em;background:var(--code-background-color);word-break:break-all}pre[class*=language-] code{color:unset;border:none;border-radius:0;padding:0;background:0 0;word-break:normal}.strikethrough{text-decoration:line-through}header{position:relative;height:186px;display:flex;flex-wrap:wrap;padding:0 1.5rem}header h1{text-transform:uppercase}.nav{display:flex;flex-direction:column;padding:0;list-style:none}.nav a{display:flex;align-items:center;height:35px;font-size:.75rem;padding:0 1em;text-decoration:none;border-bottom:1px dotted var(--nav-text-link-color);white-space:nowrap;width:100%}.nav li:not(.active) a:active,.nav li:not(.active) a:hover{background-color:var(--nav-hover-link-color)}.nav a,.nav a:active,.nav a:hover,.nav a:visited{color:var(--nav-text-link-color)}.nav .active a{border-bottom:2px solid var(--nav-active-link-color)}#jq-siteLogo{margin-top:1em}#jq-primaryNavigation{padding:0 .5em;background-color:var(--nav-background-color)}#jq-secondaryNavigation{padding:0 .5em;background-color:var(--secondary-nav-background-color)}#jq-secondaryNavigation a{font-size:.8125rem}#bug-tracker-form{position:relative;width:100%;gap:16px;margin-top:25px;color:var(--text-color-dark-bg)}.content-nav{font-size:.8125rem;margin:1.2em 0;align-self:flex-end}.content-nav ul{list-style:none}.content-nav li{padding:0 .75em}.content-nav li:not(:last-of-type){border-right:1px solid var(--border-color)}.hamburger-lines{position:relative;width:18px;height:14px;align-self:center}.hamburger-line{width:100%;height:2px;background-color:#fff;transition:opacity .2s ease-in-out,transform .2s ease-in-out}.hamburger-toggle:checked+.hamburger-lines span:first-of-type{transform:rotateZ(45deg) translate(4px,4.5px) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:nth-of-type(2){transform:rotateZ(135deg) scaleX(1.2)}.hamburger-toggle:checked+.hamburger-lines span:last-of-type{transform:translateY(-8px) scale(0);opacity:0}.hamburger-toggle:checked~#jq-menus{transform:none;opacity:1}form{gap:.5em}label{font-style:italic;font-size:.8125rem;font-weight:700}input{border:1px solid var(--input-border-color);border-radius:var(--border-radius);height:25px;padding:0 .5em;color:var(--text-color)}button{display:block;border:0;padding:5px 10px;border-radius:var(--border-radius);background:var(--button-color);color:var(--button-text-color);font-size:.875rem;cursor:pointer}button:active,button:hover{background-color:var(--button-hover-color)}button:active{box-shadow:inset 0 0 5px #000}main{padding:20px;background:linear-gradient(to bottom,var(--main-background-start-color),var(--main-background-end-color));gap:1em}main a[href]:active,main a[href]:hover{background-color:var(--main-link-hover-bg-color)}#jq-content{position:relative;padding:1em}#jq-sidenav{padding:2em 1em}#jq-sidenav a{font-size:.75rem;display:block;padding:.35em .625em;text-decoration:none;border-bottom:1px solid var(--border-color)}.sidenav-header{font-size:.75rem;font-weight:700;color:var(--primary-color);text-transform:uppercase;background-color:var(--sidenav-header-background-color);padding:.225em .625em;margin-bottom:.5em}footer{background-color:var(--nav-background-color);background:var(--nav-background-color) linear-gradient(to bottom,var(--footer-background-start-color),var(--footer-background-end-color));padding:2.5em;margin-bottom:2em;border-top:2px solid #000;border-bottom:2px solid #000;color:var(--text-color-dark-bg)}footer a[href],footer a[href]:visited{color:var(--footer-text-color-link)}.flex-row{display:flex;flex-direction:row}.flex-column{display:flex;flex-direction:column}.flex-between-start{justify-content:space-between;align-items:flex-start}.flex-between-center{justify-content:space-between;align-items:center}.flex-start-center{justify-content:flex-start;align-items:center}.flex-center{display:flex;justify-content:center;align-items:center}.items-start{align-items:start}.white-box{background-color:var(--content-background-color);border-radius:var(--border-radius);border:1px solid var(--border-color)}a.ext-link .icon{padding-left:15px}@media (max-width:919px){#jq-menus{position:absolute;top:80px;height:calc(100vh - 80px);left:0;right:0;background-color:var(--nav-background-color);z-index:5;transition:transform .2s ease-in-out,opacity .2s ease-in-out;transform:translateX(100%);opacity:0;display:flex;flex-direction:column-reverse;justify-content:flex-end}}@media (min-width:920px){body{background-position-y:60px}.banner{height:60px;font-size:1rem}header{padding:0 2.5rem}.nav{flex-direction:row}.nav a{width:auto}#jq-primaryNavigation a{height:27px}#jq-secondaryNavigation{border-radius:var(--border-radius);margin-top:2em}#jq-siteLogo{margin-top:59px}#bug-tracker-form{flex-direction:row;gap:0;position:absolute;bottom:15px;left:0;right:0;padding:0 40px 0 60px}.hamburger-lines{display:none}main.flex-column{padding:2.5em;display:flex;flex-direction:row}#jq-sidenav{width:196px;flex-shrink:0}.content-nav{margin-top:.4em}#jq-content{flex-grow:1;max-width:622px;min-height:520px;font-size:.875rem}}:root{--pagefind-ui-background-color:#fff}#search{position:relative;width:calc(100% - 85px - 22px - 1rem);margin-right:22px;align-self:flex-end}#search:before{content:'Search Tickets';position:absolute;right:100%;top:50%;transform:translate(-10px,-50%);color:#fff;font-size:.8125rem;font-style:italic;white-space:nowrap}#search:after{content:'';display:block;position:absolute;right:-22px;top:-4px;width:35px;height:35px;z-index:2}.pagefind-ui__search-input{width:100%}.pagefind-ui__search-clear{display:inline-block;position:absolute;width:25px;height:25px;right:15px;top:0;padding:0 0 0 25px;overflow:hidden;background-color:transparent;z-index:1}.pagefind-ui__search-clear:active,.pagefind-ui__search-clear:hover{background-color:rgba(0,0,0,.2)}.pagefind-ui__search-clear:after{content:'×';position:absolute;top:0;left:0;right:0;bottom:0;font-weight:700;font-size:1.5rem;line-height:26px;text-align:center;color:var(--text-color);opacity:1}.pagefind-ui__hidden{display:none}.pagefind-ui__suppressed{display:none}.pagefind-ui__drawer{position:absolute;top:100%;left:0;right:0;height:350px;background-color:var(--pagefind-ui-background-color);border:1px solid var(--border-color);border-top:0;border-radius:0 0 var(--border-radius) var(--border-radius);box-shadow:0 2px 4px rgba(0,0,0,.2);padding:10px;color:var(--text-color);font-size:.875rem;overflow-y:auto;word-break:break-word;z-index:1}.pagefind-ui__results-area{width:100%}.pagefind-ui__results{padding-left:20px}.pagefind-ui__result{margin-bottom:10px;vertical-align:top}.pagefind-ui__result-thumb{display:flex;flex-direction:column}.pagefind-ui__result-thumb .pagefind-ui__result-image{max-width:150px}.pagefind-ui__message{font-weight:700;text-transform:uppercase;font-size:1rem}.pagefind-ui__button{width:100%;padding:10px;margin-top:2em}@media(min-width:920px){#search{width:auto}.pagefind-ui__search-input{width:300px}.pagefind-ui__search-clear{right:auto;left:270px}.pagefind-ui__drawer{left:-200px;height:500px;padding:15px}}body{background-image:url(/bugs.jquery.com/img/bg-interior-tile-drk.jpg)}a.ext-link .icon{background:url(/bugs.jquery.com/img/extlink.png) 0 50% no-repeat}#search:after{background:url(/bugs.jquery.com/img/icon-search.png) 0 0 no-repeat}
    </style>
    
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/bugs.jquery.com/" title="jQuery Home">
            <img src="/bugs.jquery.com/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/bugs.jquery.com/newticket">New Ticket</a>
          <a href="/bugs.jquery.com/report">View Tickets</a>
          <a href="/bugs.jquery.com/ticketgraph">Ticket Graph</a>
          <a href="/bugs.jquery.com/roadmap">Roadmap</a>
          <a href="/bugs.jquery.com/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/bugs.jquery.com/ticket/3055">Back to Ticket #3055</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/bugs.jquery.com/ticket/3055">Ticket #3055</a>: jquery-modified.js
  
  <hr>

  <div class="attachment-info">
    <h6>File jquery-modified.js, 97.9 KB (added by yaakov, June 17, 2008 02:09PM UTC)</h6>
    
      <p>jquery.js with three lines disabled --- this removes the bug.</p>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-js" tabindex="0"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">/*
 * jQuery 1.2.6 - New Wave Javascript
 *
 * Copyright (c) 2008 John Resig (jquery.com)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * $Date: 2008-05-24 14:22:17 -0400 (Sat, 24 May 2008) $
 * $Rev: 5685 $
 */</span>

<span class="token comment">// Map over jQuery in case of overwrite</span>
<span class="token keyword">var</span> _jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>jQuery<span class="token punctuation">,</span>
<span class="token comment">// Map over the $ in case of overwrite</span>
	_$ <span class="token operator">=</span> window<span class="token punctuation">.</span>$<span class="token punctuation">;</span>

<span class="token keyword">var</span> jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function-variable function">$</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// The jQuery object is actually just the init constructor 'enhanced'</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// A simple way to check for HTML strings or ID strings</span>
<span class="token comment">// (both of which we optimize for)</span>
<span class="token keyword">var</span> quickExpr <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^&lt;]*(&lt;(.|\s)+>)[^>]*$|^#(\w+)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

<span class="token comment">// Is it a simple selector</span>
	isSimple <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^.[^:#\[\.]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>

<span class="token comment">// Will speed up references to undefined, and allows munging its name.</span>
	<span class="token keyword">undefined</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Make sure that a selection was provided</span>
		selector <span class="token operator">=</span> selector <span class="token operator">||</span> document<span class="token punctuation">;</span>

		<span class="token comment">// Handle $(DOMElement)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector<span class="token punctuation">.</span>nodeType <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> selector<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// Handle HTML strings</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Are we dealing with HTML string or an ID?</span>
			<span class="token keyword">var</span> match <span class="token operator">=</span> quickExpr<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Verify a match, and that no context was specified for #id</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> match <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>context<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// HANDLE: $(html) -> $(array)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
					selector <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> context <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// HANDLE: $("#id")</span>
				<span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Make sure an element was located</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token comment">// Handle the case where IE and Opera return items</span>
						<span class="token comment">// by name instead of ID</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>id <span class="token operator">!=</span> match<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
							<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Otherwise, we inject the element directly into the jQuery object</span>
						<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					selector <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token comment">// HANDLE: $(expr, [context])</span>
			<span class="token comment">// (which is just equivalent to: $(content).find(expr)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span>
				<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> context <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// HANDLE: $(function)</span>
		<span class="token comment">// Shortcut for document ready</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> document <span class="token punctuation">)</span><span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>ready <span class="token operator">?</span> <span class="token string">"ready"</span> <span class="token operator">:</span> <span class="token string">"load"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setArray</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// The current version of jQuery being used</span>
	<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">"1.2.6"</span><span class="token punctuation">,</span>

	<span class="token comment">// The number of elements contained in the matched element set</span>
	<span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// The number of elements contained in the matched element set</span>
	<span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

	<span class="token comment">// Get the Nth element in the matched element set OR</span>
	<span class="token comment">// Get the whole matched element set as a clean array</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">num</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> num <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>

			<span class="token comment">// Return a 'clean' array</span>
			jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token operator">:</span>

			<span class="token comment">// Return just the object</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span> num <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Take an array of elements and push it onto the stack</span>
	<span class="token comment">// (returning the new matched element set)</span>
	<span class="token function-variable function">pushStack</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Build a new jQuery matched element set</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Add the old object onto the stack (as a reference)</span>
		ret<span class="token punctuation">.</span>prevObject <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		<span class="token comment">// Return the newly-formed element set</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Force the current matched set of elements to become</span>
	<span class="token comment">// the specified array of elements (destroying the stack in the process)</span>
	<span class="token comment">// You should use pushStack() in order to do this, but maintain the stack</span>
	<span class="token function-variable function">setArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Resetting the length to 0, then using the native Array push</span>
		<span class="token comment">// is a super-fast way to populate an object with array-like properties</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> elems <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Execute a callback for every element in the matched set.</span>
	<span class="token comment">// (You can seed the arguments with an array of args, but this is</span>
	<span class="token comment">// only used internally.)</span>
	<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">callback<span class="token punctuation">,</span> args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> args <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Determine the position of an element within</span>
	<span class="token comment">// the matched set of elements</span>
	<span class="token function-variable function">index</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token comment">// Locate the position of the desired element</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>
			<span class="token comment">// If it receives a jQuery object, the first element is used</span>
			elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>jquery <span class="token operator">?</span> elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> elem
		<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> options <span class="token operator">=</span> name<span class="token punctuation">;</span>

		<span class="token comment">// Look for the case where we're accessing a style value</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name<span class="token punctuation">.</span>constructor <span class="token operator">==</span> String <span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">[</span> type <span class="token operator">||</span> <span class="token string">"attr"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">else</span> <span class="token punctuation">{</span>
				options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
				options<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// Check to see if we're setting style values</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// Set all the styles</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span>
				jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>
					type <span class="token operator">?</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>style <span class="token operator">:</span>
						<span class="token keyword">this</span><span class="token punctuation">,</span>
					name<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> i<span class="token punctuation">,</span> name <span class="token punctuation">)</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ignore negative width and height values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">'width'</span> <span class="token operator">||</span> key <span class="token operator">==</span> <span class="token string">'height'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span>
			value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token string">"curCSS"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">text</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">text</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> text <span class="token operator">!=</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> text <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> text <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">8</span> <span class="token punctuation">)</span>
					ret <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">?</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>nodeValue <span class="token operator">:</span>
						jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token keyword">this</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrapAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
			<span class="token comment">// The elements to wrap the target around</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> html<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

					<span class="token keyword">while</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span>
						elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>

					<span class="token keyword">return</span> elem<span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrapInner</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">wrap</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">html</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span> html <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">append</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">prepend</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">after</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">domManip</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">end</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token operator">||</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">find</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> elems <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^+>] [^+>]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token operator">||</span> selector<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">".."</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span>
			jQuery<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span> elems <span class="token punctuation">)</span> <span class="token operator">:</span>
			elems <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">clone</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">events</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Do the clone</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// IE copies events bound via attachEvent when</span>
				<span class="token comment">// using cloneNode. Calling detachEvent on the</span>
				<span class="token comment">// clone will also remove the events from the orignal</span>
				<span class="token comment">// In order to get around this, we use innerHTML.</span>
				<span class="token comment">// Unfortunately, this means some modifications to</span>
				<span class="token comment">// attributes in IE that are actually only stored</span>
				<span class="token comment">// as properties will not be copied (such as the</span>
				<span class="token comment">// the name attribute on an input).</span>
				<span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token punctuation">[</span>container<span class="token punctuation">.</span>innerHTML<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Need to set the expando to null on the cloned set if it exists</span>
		<span class="token comment">// removeData doesn't work here, IE removes it from the original as well</span>
		<span class="token comment">// this is primarily for IE but the data expando shouldn't be copied over in any browser</span>
		<span class="token keyword">var</span> clone <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Copy the events from the original to the clone</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> events <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> events <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"events"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> events <span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> handler <span class="token keyword">in</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token punctuation">)</span>
						jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> clone<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">[</span> handler <span class="token punctuation">]</span><span class="token punctuation">,</span> events<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">[</span> handler <span class="token punctuation">]</span><span class="token punctuation">.</span>data <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Return the cloned set</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span>
			jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token function">selector</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">||</span>

			jQuery<span class="token punctuation">.</span><span class="token function">multiFilter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">not</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector<span class="token punctuation">.</span>constructor <span class="token operator">==</span> String <span class="token punctuation">)</span>
			<span class="token comment">// test special case where just one selector is passed in</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> isSimple<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">multiFilter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				selector <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">multiFilter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> isArrayLike <span class="token operator">=</span> selector<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> selector<span class="token punctuation">[</span>selector<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>selector<span class="token punctuation">.</span>nodeType<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> isArrayLike <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> selector <span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token keyword">this</span> <span class="token operator">!=</span> selector<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">'string'</span> <span class="token operator">?</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span> <span class="token operator">:</span>
				jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> selector <span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">is</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>selector <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">multiFilter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hasClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span> <span class="token string">"."</span> <span class="token operator">+</span> selector <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">val</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// We need to handle select boxes special</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> index <span class="token operator">=</span> elem<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">,</span>
						values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						options <span class="token operator">=</span> elem<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
						one <span class="token operator">=</span> elem<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">"select-one"</span><span class="token punctuation">;</span>

					<span class="token comment">// Nothing was selected</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span>
						<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

					<span class="token comment">// Loop through all the selected options</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> max <span class="token operator">=</span> one <span class="token operator">?</span> index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> options<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> max<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> option <span class="token operator">=</span> options<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span> option<span class="token punctuation">.</span>selected <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// Get the specifc value for the option</span>
							value <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>option<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>value<span class="token punctuation">.</span>specified <span class="token operator">?</span> option<span class="token punctuation">.</span>text <span class="token operator">:</span> option<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

							<span class="token comment">// We don't need an array for one selects</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> one <span class="token punctuation">)</span>
								<span class="token keyword">return</span> value<span class="token punctuation">;</span>

							<span class="token comment">// Multi-Selects return an array</span>
							values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> values<span class="token punctuation">;</span>

				<span class="token comment">// Everything else, we just grab the value</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span>
					<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span> value<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number <span class="token punctuation">)</span>
			value <span class="token operator">+=</span> <span class="token string">''</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> value<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">radio|checkbox</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span>
					jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"select"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> values <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token string">"option"</span><span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>selected <span class="token operator">=</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span> values <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">||</span>
						jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">,</span> values <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>values<span class="token punctuation">.</span>length <span class="token punctuation">)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>selectedIndex <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span> <span class="token keyword">else</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">html</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
			<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">:</span>
				<span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">:</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">replaceWith</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">eq</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">i</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> i<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">slice</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">andSelf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prevObject <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> parts <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">"."</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span><span class="token string">"getData"</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span>
				data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> data <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">:</span>
				data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"setData"</span> <span class="token operator">+</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">key</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> key <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">domManip</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">args<span class="token punctuation">,</span> table<span class="token punctuation">,</span> reverse<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">,</span> elems<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elems <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				elems <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span> args<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> reverse <span class="token punctuation">)</span>
					elems<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> table <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"table"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"tr"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"tbody"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> scripts <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> elem <span class="token operator">=</span> clone <span class="token operator">?</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">;</span>

				<span class="token comment">// execute all scripts after the elements have been injected</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"script"</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
					scripts <span class="token operator">=</span> scripts<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token comment">// Remove any inner scripts for later evaluation</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span>
						scripts <span class="token operator">=</span> scripts<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token string">"script"</span><span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Inject the elements into the document</span>
					<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> obj<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			scripts<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> evalScript <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Give the init function the jQuery prototype for later instantiation</span>
jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>prototype <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">evalScript</span><span class="token punctuation">(</span> <span class="token parameter">i<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>src <span class="token punctuation">)</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>src<span class="token punctuation">,</span>
			<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"script"</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">else</span>
		jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>text <span class="token operator">||</span> elem<span class="token punctuation">.</span>textContent <span class="token operator">||</span> elem<span class="token punctuation">.</span>innerHTML <span class="token operator">||</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span>
		elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span>extend <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// copy reference to target object</span>
	<span class="token keyword">var</span> target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span> deep <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> options<span class="token punctuation">;</span>

	<span class="token comment">// Handle a deep copy situation</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> target<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Boolean <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		deep <span class="token operator">=</span> target<span class="token punctuation">;</span>
		target <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">// skip the boolean and the target</span>
		i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Handle case when target is a string or something (possible in deep copy)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> target <span class="token operator">!=</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> target <span class="token operator">!=</span> <span class="token string">"function"</span> <span class="token punctuation">)</span>
		target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// extend jQuery itself if only one argument is passed</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> length <span class="token operator">==</span> i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token operator">--</span>i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
		<span class="token comment">// Only deal with non-null/undefined values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>options <span class="token operator">=</span> arguments<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
			<span class="token comment">// Extend the base object</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> src <span class="token operator">=</span> target<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> copy <span class="token operator">=</span> options<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Prevent never-ending loop</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> target <span class="token operator">===</span> copy <span class="token punctuation">)</span>
					<span class="token keyword">continue</span><span class="token punctuation">;</span>

				<span class="token comment">// Recurse if we're merging object values</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> deep <span class="token operator">&amp;&amp;</span> copy <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> copy <span class="token operator">==</span> <span class="token string">"object"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>copy<span class="token punctuation">.</span>nodeType <span class="token punctuation">)</span>
					target<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> deep<span class="token punctuation">,</span>
						<span class="token comment">// Never move original objects, clone them</span>
						src <span class="token operator">||</span> <span class="token punctuation">(</span> copy<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
					<span class="token punctuation">,</span> copy <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Don't bring in undefined values</span>
				<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> copy <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span>
					target<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> copy<span class="token punctuation">;</span>

			<span class="token punctuation">}</span>

	<span class="token comment">// Return the modified object</span>
	<span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> expando <span class="token operator">=</span> <span class="token string">"jQuery"</span> <span class="token operator">+</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uuid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> windowData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// exclude the following css properties to add px</span>
	exclude <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">z-?index|font-?weight|opacity|zoom|line-?height</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	<span class="token comment">// cache defaultView</span>
	defaultView <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">noConflict</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">deep</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		window<span class="token punctuation">.</span>$ <span class="token operator">=</span> _$<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> deep <span class="token punctuation">)</span>
			window<span class="token punctuation">.</span>jQuery <span class="token operator">=</span> _jQuery<span class="token punctuation">;</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// See test/unit/core.js for details concerning this function.</span>
	<span class="token function-variable function">isFunction</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>fn <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> fn <span class="token operator">!=</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>fn<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span>
			fn<span class="token punctuation">.</span>constructor <span class="token operator">!=</span> Array <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\s[]?function</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> fn <span class="token operator">+</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// check if an element is in a (or is an) XML document</span>
	<span class="token function-variable function">isXMLDoc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>documentElement <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>body <span class="token operator">||</span>
			elem<span class="token punctuation">.</span>tagName <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>ownerDocument <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Evalulates a script in a global context</span>
	<span class="token function-variable function">globalEval</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Inspired by code by Andrea Giammarchi</span>
			<span class="token comment">// http://webreflection.blogspot.com/2007/08/global-scope-evaluation-and-dom.html</span>
			<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span>
				script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span>
				script<span class="token punctuation">.</span>text <span class="token operator">=</span> data<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				script<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Use insertBefore instead of appendChild  to circumvent an IE6 bug.</span>
			<span class="token comment">// This arises when a base node is used (#2709).</span>
			head<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> script<span class="token punctuation">,</span> head<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
			head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">nodeName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> elem<span class="token punctuation">.</span>nodeName <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem <span class="token operator">=</span> elem <span class="token operator">==</span> window <span class="token operator">?</span>
			<span class="token literal-property property">windowData</span> <span class="token operator">:</span>
			elem<span class="token punctuation">;</span>

		<span class="token keyword">var</span> id <span class="token operator">=</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Compute a unique ID for the element</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>id <span class="token punctuation">)</span>
			id <span class="token operator">=</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>uuid<span class="token punctuation">;</span>

		<span class="token comment">// Only generate the data cache if we're</span>
		<span class="token comment">// trying to access or manipulate it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Prevent overriding the named cache with undefined values</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> data <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>

		<span class="token comment">// Return the named cache data, or the ID for the element</span>
		<span class="token keyword">return</span> name <span class="token operator">?</span>
			jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">:</span>
			id<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		elem <span class="token operator">=</span> elem <span class="token operator">==</span> window <span class="token operator">?</span>
			<span class="token literal-property property">windowData</span> <span class="token operator">:</span>
			elem<span class="token punctuation">;</span>

		<span class="token keyword">var</span> id <span class="token operator">=</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// If we want to remove a specific section of the element's data</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Remove the section of cache data</span>
				<span class="token keyword">delete</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// If we've removed all the data, remove the element's cache</span>
				name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>name <span class="token punctuation">)</span>
					jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token comment">// Otherwise, we want to remove all of the element's data</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// Clean up the element expando</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token keyword">delete</span> elem<span class="token punctuation">[</span> expando <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// IE has trouble directly removing the expando</span>
				<span class="token comment">// but it's ok with using removeAttribute</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>removeAttribute <span class="token punctuation">)</span>
					elem<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span> expando <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Completely remove the data cache</span>
			<span class="token keyword">delete</span> jQuery<span class="token punctuation">.</span>cache<span class="token punctuation">[</span> id <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// args is for internal usage only</span>
	<span class="token function-variable function">each</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">object<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> args</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> name<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> object<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> args <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> length <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> object <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> args <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token comment">// A special, fast, case for the most common use of each</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> length <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> object <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> object<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> value <span class="token operator">=</span> object<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					i <span class="token operator">&lt;</span> length <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> value<span class="token punctuation">,</span> i<span class="token punctuation">,</span> value <span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">;</span> value <span class="token operator">=</span> object<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> object<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">prop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> value<span class="token punctuation">,</span> type<span class="token punctuation">,</span> i<span class="token punctuation">,</span> name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Handle executable functions</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token punctuation">)</span>
			value <span class="token operator">=</span> <span class="token function">value</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Handle passing in a number to a CSS property</span>
		<span class="token keyword">return</span> value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"curCSS"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>exclude<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token operator">?</span>
			value <span class="token operator">+</span> <span class="token string">"px"</span> <span class="token operator">:</span>
			value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// internal only, use addClass("class")</span>
		<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> classNames</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">(</span>classNames <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> className</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>className<span class="token punctuation">,</span> className <span class="token punctuation">)</span> <span class="token punctuation">)</span>
					elem<span class="token punctuation">.</span>className <span class="token operator">+=</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>className <span class="token operator">?</span> <span class="token string">" "</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> className<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// internal only, use removeClass("class")</span>
		<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> classNames</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
				elem<span class="token punctuation">.</span>className <span class="token operator">=</span> classNames <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">className</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> classNames<span class="token punctuation">,</span> className <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// internal only, use hasClass("class")</span>
		<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> className</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span> className<span class="token punctuation">,</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>className <span class="token operator">||</span> elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// A method for quickly swapping in/out CSS properties to get correct calculations</span>
	<span class="token function-variable function">swap</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> old <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">// Remember the old values, and insert the new ones</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			old<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> options<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Revert the old values</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> name <span class="token keyword">in</span> options <span class="token punctuation">)</span>
			elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> old<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">css</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token operator">||</span> name <span class="token operator">==</span> <span class="token string">"height"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> val<span class="token punctuation">,</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"absolute"</span><span class="token punctuation">,</span> <span class="token literal-property property">visibility</span><span class="token operator">:</span> <span class="token string">"hidden"</span><span class="token punctuation">,</span> <span class="token literal-property property">display</span><span class="token operator">:</span><span class="token string">"block"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> which <span class="token operator">=</span> name <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token operator">?</span> <span class="token punctuation">[</span> <span class="token string">"Left"</span><span class="token punctuation">,</span> <span class="token string">"Right"</span> <span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"Top"</span><span class="token punctuation">,</span> <span class="token string">"Bottom"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">function</span> <span class="token function">getWH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				val <span class="token operator">=</span> name <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token operator">?</span> elem<span class="token punctuation">.</span>offsetWidth <span class="token operator">:</span> elem<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
				<span class="token keyword">var</span> padding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> border <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> which<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					padding <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"padding"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
					border <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"border"</span> <span class="token operator">+</span> <span class="token keyword">this</span> <span class="token operator">+</span> <span class="token string">"Width"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				val <span class="token operator">-=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>padding <span class="token operator">+</span> border<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":visible"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
				<span class="token function">getWH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				jQuery<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> props<span class="token punctuation">,</span> getWH <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">curCSS</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> force</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret<span class="token punctuation">,</span> style <span class="token operator">=</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">;</span>

		<span class="token comment">// A helper method for determining if an element's values are broken</span>
		<span class="token keyword">function</span> <span class="token function">color</span><span class="token punctuation">(</span> <span class="token parameter">elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token comment">// defaultView is cached</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">!</span>ret <span class="token operator">||</span> ret<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// We need to handle opacity special in IE</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">==</span> <span class="token string">"opacity"</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> style<span class="token punctuation">,</span> <span class="token string">"opacity"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> ret <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">?</span>
				<span class="token string-property property">"1"</span> <span class="token operator">:</span>
				ret<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// Opera sometimes will give the wrong display answer, this fixes it, see #2037</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>opera <span class="token operator">&amp;&amp;</span> name <span class="token operator">==</span> <span class="token string">"display"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> save <span class="token operator">=</span> style<span class="token punctuation">.</span>outline<span class="token punctuation">;</span>
			style<span class="token punctuation">.</span>outline <span class="token operator">=</span> <span class="token string">"0 solid black"</span><span class="token punctuation">;</span>
			style<span class="token punctuation">.</span>outline <span class="token operator">=</span> save<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Make sure we're using the right name for getting the float value</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">float</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
			name <span class="token operator">=</span> styleFloat<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>force <span class="token operator">&amp;&amp;</span> style <span class="token operator">&amp;&amp;</span> style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token punctuation">)</span>
			ret <span class="token operator">=</span> style<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> defaultView<span class="token punctuation">.</span>getComputedStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// Only "float" is needed here</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">float</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				name <span class="token operator">=</span> <span class="token string">"float"</span><span class="token punctuation">;</span>

			name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([A-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"-$1"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> computedStyle <span class="token operator">=</span> defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> computedStyle <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">color</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				ret <span class="token operator">=</span> computedStyle<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// If the element isn't reporting its values properly in Safari</span>
			<span class="token comment">// then some display: none elements are involved</span>
			<span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> swap <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a <span class="token operator">=</span> elem<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// Locate all of the parent display: none elements</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> a <span class="token operator">&amp;&amp;</span> <span class="token function">color</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> a <span class="token operator">=</span> a<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span>
					stack<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Go through and make them visible, but in reverse</span>
				<span class="token comment">// (It would be better if we knew the exact display type that they had)</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> stack<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">color</span><span class="token punctuation">(</span> stack<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						swap<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> stack<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
						stack<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

				<span class="token comment">// Since we flip the display style, we have to handle that</span>
				<span class="token comment">// one special, otherwise get the value</span>
				ret <span class="token operator">=</span> name <span class="token operator">==</span> <span class="token string">"display"</span> <span class="token operator">&amp;&amp;</span> swap<span class="token punctuation">[</span> stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
					<span class="token string-property property">"none"</span> <span class="token operator">:</span>
					<span class="token punctuation">(</span> computedStyle <span class="token operator">&amp;&amp;</span> computedStyle<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>

				<span class="token comment">// Finally, revert the display styles back</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> swap<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> swap<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
						stack<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> swap<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// We should always get a number back from opacity</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">==</span> <span class="token string">"opacity"</span> <span class="token operator">&amp;&amp;</span> ret <span class="token operator">==</span> <span class="token string">""</span> <span class="token punctuation">)</span>
				ret <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>currentStyle <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> camelCase <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\-(\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> letter</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			ret <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">[</span> camelCase <span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// From the awesome hack by Dean Edwards</span>
			<span class="token comment">// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291</span>

			<span class="token comment">// If we're not dealing with a regular pixel number</span>
			<span class="token comment">// but a number that has a weird ending, we need to convert it to pixels</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+(px)?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Remember the original values</span>
				<span class="token keyword">var</span> left <span class="token operator">=</span> style<span class="token punctuation">.</span>left<span class="token punctuation">,</span> rsLeft <span class="token operator">=</span> elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left<span class="token punctuation">;</span>

				<span class="token comment">// Put in the new values to get a computed value out</span>
				elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left <span class="token operator">=</span> elem<span class="token punctuation">.</span>currentStyle<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
				style<span class="token punctuation">.</span>left <span class="token operator">=</span> ret <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
				ret <span class="token operator">=</span> style<span class="token punctuation">.</span>pixelLeft <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>

				<span class="token comment">// Revert the changed values</span>
				style<span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
				elem<span class="token punctuation">.</span>runtimeStyle<span class="token punctuation">.</span>left <span class="token operator">=</span> rsLeft<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">clean</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>
		<span class="token comment">// !context.createElement fails in IE with an error but returns typeof 'object'</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> context<span class="token punctuation">.</span>createElement <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span>
			context <span class="token operator">=</span> context<span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> context<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ownerDocument <span class="token operator">||</span> document<span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number <span class="token punctuation">)</span>
				elem <span class="token operator">+=</span> <span class="token string">''</span><span class="token punctuation">;</span>

			<span class="token comment">// Convert html string into DOM nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> elem <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Fix "XHTML"-style tags in all browsers</span>
				elem <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(&lt;(\w+)[^>]*?)\/></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> front<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">return</span> tag<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token operator">?</span>
						<span class="token literal-property property">all</span> <span class="token operator">:</span>
						front <span class="token operator">+</span> <span class="token string">">&lt;/"</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">">"</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Trim whitespace, otherwise indexOf won't work as expected</span>
				<span class="token keyword">var</span> tags <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> div <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">var</span> wrap <span class="token operator">=</span>
					<span class="token comment">// option or optgroup</span>
					<span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;opt"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;select multiple='multiple'>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/select>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					<span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;leg"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;fieldset>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/fieldset>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					tags<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;(thead|tbody|tfoot|colg|cap)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/table>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					<span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;tr"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/tbody>&lt;/table>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

				 	<span class="token comment">// &lt;thead> matched above</span>
					<span class="token punctuation">(</span><span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;td"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;th"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>&lt;tr>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/tr>&lt;/tbody>&lt;/table>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					<span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;col"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"&lt;table>&lt;tbody>&lt;/tbody>&lt;colgroup>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/colgroup>&lt;/table>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					<span class="token comment">// IE can't serialize &lt;link> and &lt;script> tags normally</span>
					jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span>
					<span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"div&lt;div>"</span><span class="token punctuation">,</span> <span class="token string">"&lt;/div>"</span> <span class="token punctuation">]</span> <span class="token operator">||</span>

					<span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Go to html and back, then peel off extra wrappers</span>
				div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> wrap<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> elem <span class="token operator">+</span> wrap<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token comment">// Move to the right depth</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span> wrap<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">--</span> <span class="token punctuation">)</span>
					div <span class="token operator">=</span> div<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>

				<span class="token comment">// Remove IE's autoinserted &lt;tbody> from table fragments</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// String was a &lt;table>, *may* have spurious &lt;tbody></span>
					<span class="token keyword">var</span> tbody <span class="token operator">=</span> <span class="token operator">!</span>tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;table"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;tbody"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span>
						div<span class="token punctuation">.</span>firstChild <span class="token operator">&amp;&amp;</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>childNodes <span class="token operator">:</span>

						<span class="token comment">// String was a bare &lt;thead> or &lt;tfoot></span>
						wrap<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"&lt;table>"</span> <span class="token operator">&amp;&amp;</span> tags<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"&lt;tbody"</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span>
							div<span class="token punctuation">.</span>childNodes <span class="token operator">:</span>
							<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> tbody<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token operator">--</span>j <span class="token punctuation">)</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"tbody"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token punctuation">)</span>
							tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> tbody<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// IE completely kills leading whitespace when innerHTML is used</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token punctuation">)</span>
						div<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span> context<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> div<span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span>

				elem <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span> div<span class="token punctuation">.</span>childNodes <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"form"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"select"</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"form"</span> <span class="token punctuation">)</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>options <span class="token punctuation">)</span>
				ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">else</span>
				ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> ret<span class="token punctuation">,</span> elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">attr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// don't set attributes on text and comment nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elem <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> notxml <span class="token operator">=</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token comment">// Whether we are setting (or getting)</span>
			set <span class="token operator">=</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
			msie <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie<span class="token punctuation">;</span>

		<span class="token comment">// Try to normalize/fix the name</span>
		name <span class="token operator">=</span> notxml <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>props<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">||</span> name<span class="token punctuation">;</span>

		<span class="token comment">// Only do all the following if this is a node (faster for style)</span>
		<span class="token comment">// IE elem.getAttribute passes even for style</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>tagName <span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// These attributes require special treatment</span>
			<span class="token keyword">var</span> special <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">href|src|style</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Safari mis-reports the default selected property of a hidden option</span>
			<span class="token comment">// Accessing the parent's selectedIndex property fixes it</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">==</span> <span class="token string">"selected"</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token punctuation">)</span>
				elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>selectedIndex<span class="token punctuation">;</span>

			<span class="token comment">// If applicable, access the attribute via the DOM 0 way</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token keyword">in</span> elem <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>special <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token comment">// We can't allow the type property to be changed (since it causes problems in IE)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> name <span class="token operator">==</span> <span class="token string">"type"</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"input"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>parentNode <span class="token punctuation">)</span>
						<span class="token keyword">throw</span> <span class="token string">"type property can't be changed"</span><span class="token punctuation">;</span>

					elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// browsers index elements by id/name on forms, give priority to attributes.</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"form"</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token keyword">return</span> elem<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>

				<span class="token keyword">return</span> elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> msie <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span>  name <span class="token operator">==</span> <span class="token string">"style"</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token string">"cssText"</span><span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span>
				<span class="token comment">// convert the value to a string (all browsers do this but IE) see #1070</span>
				elem<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token operator">+</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> attr <span class="token operator">=</span> msie <span class="token operator">&amp;&amp;</span> notxml <span class="token operator">&amp;&amp;</span> special
					<span class="token comment">// Some attributes require a special call on IE</span>
					<span class="token operator">?</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span>
					<span class="token operator">:</span> elem<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Non-existent attributes return null, we normalize to undefined</span>
			<span class="token keyword">return</span> attr <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> attr<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// elem is actually elem.style ... set the style</span>

		<span class="token comment">// IE uses filters for opacity</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> msie <span class="token operator">&amp;&amp;</span> name <span class="token operator">==</span> <span class="token string">"opacity"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// IE has trouble with opacity if it does not have layout</span>
				<span class="token comment">// Force it by setting the zoom level</span>
				elem<span class="token punctuation">.</span>zoom <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

				<span class="token comment">// Set the alpha filter to set the opacity</span>
				elem<span class="token punctuation">.</span>filter <span class="token operator">=</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>filter <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">alpha\([^)]*\)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token operator">+</span>
					<span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span> value <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span> <span class="token operator">==</span> <span class="token string">"NaN"</span> <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">:</span> <span class="token string">"alpha(opacity="</span> <span class="token operator">+</span> value <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> elem<span class="token punctuation">.</span>filter <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"opacity="</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span>
				<span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opacity=([^)]*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token operator">:</span>
				<span class="token string">""</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		name <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-([a-z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> letter</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> set <span class="token punctuation">)</span>
			elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>

		<span class="token keyword">return</span> elem<span class="token punctuation">[</span> name <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">trim</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">text</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>text <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s+|\s+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">makeArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span><span class="token punctuation">(</span> array <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> i <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			<span class="token comment">//the window, strings and functions also have 'length'</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span> i <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> array<span class="token punctuation">.</span>split <span class="token operator">||</span> array<span class="token punctuation">.</span>setInterval <span class="token operator">||</span> array<span class="token punctuation">.</span>call <span class="token punctuation">)</span>
				ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				<span class="token keyword">while</span><span class="token punctuation">(</span> i <span class="token punctuation">)</span>
					ret<span class="token punctuation">[</span><span class="token operator">--</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">inArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
		<span class="token comment">// Use === because on IE, window == document</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">===</span> elem <span class="token punctuation">)</span>
				<span class="token keyword">return</span> i<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">merge</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">first<span class="token punctuation">,</span> second</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// We have to loop this way because IE &amp; Opera overwrite the length</span>
		<span class="token comment">// expando of getElementsByTagName</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem<span class="token punctuation">,</span> pos <span class="token operator">=</span> first<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
		<span class="token comment">// Also, we need to make sure that the correct elements are being returned</span>
		<span class="token comment">// (IE returns comment nodes in a '*' query)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> elem <span class="token operator">=</span> second<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">8</span> <span class="token punctuation">)</span>
					first<span class="token punctuation">[</span> pos<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> elem <span class="token operator">=</span> second<span class="token punctuation">[</span> i<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span>
				first<span class="token punctuation">[</span> pos<span class="token operator">++</span> <span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>

		<span class="token keyword">return</span> first<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">unique</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> done <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> id <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>done<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					done<span class="token punctuation">[</span> id <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> e <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret <span class="token operator">=</span> array<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">grep</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> inv</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Go through the array, only saving the items</span>
		<span class="token comment">// that pass the validator function</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>inv <span class="token operator">!=</span> <span class="token operator">!</span><span class="token function">callback</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				ret<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">map</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elems<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Go through the array, translating each of the items to their</span>
		<span class="token comment">// new value (or values).</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span> elems<span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
				ret<span class="token punctuation">[</span> ret<span class="token punctuation">.</span>length <span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> userAgent <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Figure out what browser is being used</span>
jQuery<span class="token punctuation">.</span>browser <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token punctuation">(</span>userAgent<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.+(?:rv|it|ra|ie)[\/: ]([\d.]+)</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">safari</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">webkit</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">opera</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opera</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">msie</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">msie</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opera</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mozilla</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mozilla</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(compatible|webkit)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> userAgent <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> styleFloat <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">?</span>
	<span class="token string-property property">"styleFloat"</span> <span class="token operator">:</span>
	<span class="token string">"cssFloat"</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Check to see if the W3C box model is being used</span>
	<span class="token literal-property property">boxModel</span><span class="token operator">:</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">||</span> document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">"CSS1Compat"</span><span class="token punctuation">,</span>

	<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">"for"</span><span class="token operator">:</span> <span class="token string">"htmlFor"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"class"</span><span class="token operator">:</span> <span class="token string">"className"</span><span class="token punctuation">,</span>
		<span class="token string-property property">"float"</span><span class="token operator">:</span> styleFloat<span class="token punctuation">,</span>
		<span class="token literal-property property">cssFloat</span><span class="token operator">:</span> styleFloat<span class="token punctuation">,</span>
		<span class="token literal-property property">styleFloat</span><span class="token operator">:</span> styleFloat<span class="token punctuation">,</span>
		<span class="token literal-property property">readonly</span><span class="token operator">:</span> <span class="token string">"readOnly"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">maxlength</span><span class="token operator">:</span> <span class="token string">"maxLength"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">cellspacing</span><span class="token operator">:</span> <span class="token string">"cellSpacing"</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">parent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">parents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token string">"parentNode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"nextSibling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prev</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">nextAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token string">"nextSibling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">prevAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">siblings</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">sibling</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">,</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">children</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">sibling</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">contents</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token string">"iframe"</span><span class="token punctuation">)</span><span class="token operator">?</span>elem<span class="token punctuation">.</span>contentDocument<span class="token operator">||</span>elem<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>document<span class="token operator">:</span>jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>elem<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> selector <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span>
			ret <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">multiFilter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pushStack</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span> ret <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">appendTo</span><span class="token operator">:</span> <span class="token string">"append"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">prependTo</span><span class="token operator">:</span> <span class="token string">"prepend"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">insertBefore</span><span class="token operator">:</span> <span class="token string">"before"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">insertAfter</span><span class="token operator">:</span> <span class="token string">"after"</span><span class="token punctuation">,</span>
	<span class="token literal-property property">replaceAll</span><span class="token operator">:</span> <span class="token string">"replaceWith"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> original</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span> args<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">[</span> original <span class="token punctuation">]</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">removeAttr</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">name</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">addClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">classNames</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> classNames <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">removeClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">classNames</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> classNames <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">toggleClass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">classNames</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span>className<span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> classNames <span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"remove"</span> <span class="token operator">:</span> <span class="token string">"add"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> classNames <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">selector</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>selector <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token keyword">this</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>r<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Prevent memory leaks</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Remove element nodes and prevent memory leaks</span>
		<span class="token function">jQuery</span><span class="token punctuation">(</span> <span class="token string">">*"</span><span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Remove any remaining nodes</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstChild <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">"Height"</span><span class="token punctuation">,</span> <span class="token string">"Width"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> type <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">size</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Get window width or height</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> window <span class="token operator">?</span>
			<span class="token comment">// Opera reports document.body.client[Width/Height] properly in both quirks and standards</span>
			jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>opera <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>body<span class="token punctuation">[</span> <span class="token string">"client"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">||</span>

			<span class="token comment">// Safari reports inner[Width/Height] just fine (Mozilla and Opera include scroll bar widths)</span>
			jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">[</span> <span class="token string">"inner"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">||</span>

			<span class="token comment">// Everyone else use document.documentElement or document.body depending on Quirks vs Standards mode</span>
			document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">"CSS1Compat"</span> <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span> <span class="token string">"client"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">[</span> <span class="token string">"client"</span> <span class="token operator">+</span> name <span class="token punctuation">]</span> <span class="token operator">:</span>

			<span class="token comment">// Get document width or height</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> document <span class="token operator">?</span>
				<span class="token comment">// Either scroll[Width/Height] or offset[Width/Height], whichever is greater</span>
				Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>
					Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"scroll"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"scroll"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token string">"offset"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">"offset"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">)</span>
				<span class="token punctuation">)</span> <span class="token operator">:</span>

				<span class="token comment">// Get or set width or height on the element</span>
				size <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>
					<span class="token comment">// Get width or height on the element</span>
					<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">?</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">:</span>

					<span class="token comment">// Set the width or height on the element (default to pixels if value is unitless)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> size<span class="token punctuation">.</span>constructor <span class="token operator">==</span> String <span class="token operator">?</span> size <span class="token operator">:</span> size <span class="token operator">+</span> <span class="token string">"px"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Helper function used by the dimensions and offset modules</span>
<span class="token keyword">function</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> prop<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">var</span> chars <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token operator">&amp;&amp;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>version<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">417</span> <span class="token operator">?</span>
		<span class="token string-property property">"(?:[\\w*_-]|\\\\.)"</span> <span class="token operator">:</span>
		<span class="token string">"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)"</span><span class="token punctuation">,</span>
	quickChild <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^>\\s*("</span> <span class="token operator">+</span> chars <span class="token operator">+</span> <span class="token string">"+)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	quickID <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^("</span> <span class="token operator">+</span> chars <span class="token operator">+</span> <span class="token string">"+)(#)("</span> <span class="token operator">+</span> chars <span class="token operator">+</span> <span class="token string">"+)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	quickClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^([#.]?)("</span> <span class="token operator">+</span> chars <span class="token operator">+</span> <span class="token string">"*)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">expr</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">""</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">"*"</span><span class="token operator">||</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">"#"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token operator">==</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">":"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">// Position Checks</span>
			<span class="token function-variable function">lt</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">gt</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">></span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">nth</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">==</span>i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">eq</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">0</span><span class="token operator">==</span>i<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">first</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">last</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">==</span>r<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">even</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">odd</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Child Checks</span>
			<span class="token string-property property">"first-child"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">"last-child"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token operator">==</span>a<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">"only-child"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"previousSibling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Parent Checks</span>
			<span class="token function-variable function">parent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">empty</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Text Check</span>
			<span class="token function-variable function">contains</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>textContent<span class="token operator">||</span>a<span class="token punctuation">.</span>innerText<span class="token operator">||</span><span class="token function">jQuery</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Visibility</span>
			<span class="token function-variable function">visible</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"hidden"</span><span class="token operator">!=</span>a<span class="token punctuation">.</span>type<span class="token operator">&amp;&amp;</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">"none"</span><span class="token operator">&amp;&amp;</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"visibility"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">"hidden"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">hidden</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"hidden"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token operator">||</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">"none"</span><span class="token operator">||</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"visibility"</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">"hidden"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Form attributes</span>
			<span class="token function-variable function">enabled</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token operator">!</span>a<span class="token punctuation">.</span>disabled<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">disabled</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>disabled<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">checked</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>checked<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">selected</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token punctuation">.</span>selected<span class="token operator">||</span>jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"selected"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Form elements</span>
			<span class="token function-variable function">text</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"text"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">radio</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"radio"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">checkbox</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"checkbox"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">file</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"file"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">password</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"password"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">submit</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"submit"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">image</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"image"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"reset"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">button</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token string">"button"</span><span class="token operator">==</span>a<span class="token punctuation">.</span>type<span class="token operator">||</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">input</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">input|select|textarea|button</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// :has()</span>
			<span class="token function-variable function">has</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>i<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// :header</span>
			<span class="token function-variable function">header</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h\d</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// :animated</span>
			<span class="token function-variable function">animated</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> a<span class="token operator">==</span>fn<span class="token punctuation">.</span>elem<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// The regular expressions that power the parsing engine</span>
	<span class="token literal-property property">parse</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// Match: [@value='test'], [@foo]</span>
		<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token punctuation">[</span><span class="token punctuation">)</span> <span class="token operator">*</span>@<span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">!</span><span class="token operator">*</span>$<span class="token operator">^</span><span class="token operator">~</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">*</span><span class="token punctuation">(</span>'<span class="token operator">?</span>"<span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">)</span>\<span class="token number">4</span> <span class="token operator">*</span>\<span class="token punctuation">]</span><span class="token operator">/</span><span class="token punctuation">,</span>

		<span class="token comment">// Match: :contains('foo')</span>
		<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">(</span><span class="token string">"?'?(.*?(\(.*?\))?[^(]*?)"</span><span class="token operator">?</span>'<span class="token operator">?</span>\<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">,</span>

		<span class="token comment">// Match: :even, :last-child, #id, .class</span>
		<span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">"^([:.#]*)("</span> <span class="token operator">+</span> chars <span class="token operator">+</span> <span class="token string">"+)"</span><span class="token punctuation">)</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token function-variable function">multiFilter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">expr<span class="token punctuation">,</span> elems<span class="token punctuation">,</span> not</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> old<span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span> expr <span class="token operator">&amp;&amp;</span> expr <span class="token operator">!=</span> old <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			old <span class="token operator">=</span> expr<span class="token punctuation">;</span>
			<span class="token keyword">var</span> f <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span> expr<span class="token punctuation">,</span> elems<span class="token punctuation">,</span> not <span class="token punctuation">)</span><span class="token punctuation">;</span>
			expr <span class="token operator">=</span> f<span class="token punctuation">.</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*,\s*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			cur <span class="token operator">=</span> not <span class="token operator">?</span> elems <span class="token operator">=</span> f<span class="token punctuation">.</span>r <span class="token operator">:</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> cur<span class="token punctuation">,</span> f<span class="token punctuation">.</span>r <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">find</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">t<span class="token punctuation">,</span> context</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Quickly handle non-string expressions</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> t <span class="token operator">!=</span> <span class="token string">"string"</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token punctuation">[</span> t <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// check to make sure context is a DOM element or a document</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> context <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">9</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Set the correct context (if none is provided)</span>
		context <span class="token operator">=</span> context <span class="token operator">||</span> document<span class="token punctuation">;</span>

		<span class="token comment">// Initialize the search</span>
		<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">,</span> done <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> last<span class="token punctuation">,</span> nodeName<span class="token punctuation">;</span>

		<span class="token comment">// Continue while a selector expression exists, and while</span>
		<span class="token comment">// we're no longer looping upon ourselves</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> t <span class="token operator">&amp;&amp;</span> last <span class="token operator">!=</span> t <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			last <span class="token operator">=</span> t<span class="token punctuation">;</span>

			t <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> foundToken <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

			<span class="token comment">// An attempt at speeding up child selectors that</span>
			<span class="token comment">// point to a specific element tag</span>
				re <span class="token operator">=</span> quickChild<span class="token punctuation">,</span>

				m <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				nodeName <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Perform our own iteration and filter</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> c <span class="token operator">=</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> c<span class="token punctuation">;</span> c <span class="token operator">=</span> c<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> c<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>nodeName <span class="token operator">==</span> <span class="token string">"*"</span> <span class="token operator">||</span> c<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nodeName<span class="token punctuation">)</span> <span class="token punctuation">)</span>
							r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>

				ret <span class="token operator">=</span> r<span class="token punctuation">;</span>
				t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> re<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
				foundToken <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([>+~])\s*(\w*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>m <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">var</span> merge <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
					nodeName <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					m <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> rl <span class="token operator">=</span> ret<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> rl<span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> n <span class="token operator">=</span> m <span class="token operator">==</span> <span class="token string">"~"</span> <span class="token operator">||</span> m <span class="token operator">==</span> <span class="token string">"+"</span> <span class="token operator">?</span> ret<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>nextSibling <span class="token operator">:</span> ret<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> n<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">var</span> id <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>

								<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token operator">==</span> <span class="token string">"~"</span> <span class="token operator">&amp;&amp;</span> merge<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>

								<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>nodeName <span class="token operator">||</span> n<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nodeName <span class="token punctuation">)</span> <span class="token punctuation">{</span>
									<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token operator">==</span> <span class="token string">"~"</span> <span class="token punctuation">)</span> merge<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
									r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>

								<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token operator">==</span> <span class="token string">"+"</span> <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					ret <span class="token operator">=</span> r<span class="token punctuation">;</span>

					<span class="token comment">// And remove the token</span>
					t <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span> t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> re<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					foundToken <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// See if there's still an expression, and that we haven't already</span>
			<span class="token comment">// matched a token</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> t <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>foundToken <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Handle multiple expressions</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>t<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Clean the result set</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> context <span class="token operator">==</span> ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> ret<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Merge the result sets</span>
					done <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> done<span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Reset the context</span>
					r <span class="token operator">=</span> ret <span class="token operator">=</span> <span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token comment">// Touch up the selector string</span>
					t <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token comment">// Optimize for the case nodeName#idName</span>
					<span class="token keyword">var</span> re2 <span class="token operator">=</span> quickID<span class="token punctuation">;</span>
					<span class="token keyword">var</span> m <span class="token operator">=</span> re2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Re-organize the results, so that they're consistent</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						m <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// Otherwise, do a traditional filter check for</span>
						<span class="token comment">// ID, class, and element selectors</span>
						re2 <span class="token operator">=</span> quickClass<span class="token punctuation">;</span>
						m <span class="token operator">=</span> re2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">var</span> elem <span class="token operator">=</span> ret<span class="token punctuation">[</span>ret<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token comment">// Try to do a global search by ID, where we can</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"#"</span> <span class="token operator">&amp;&amp;</span> elem <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>getElementById <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">isXMLDoc</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Optimization for HTML document case</span>
						<span class="token keyword">var</span> oid <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Do a quick check for the existence of the actual ID attribute</span>
						<span class="token comment">// to avoid selecting by the name attribute in IE</span>
						<span class="token comment">// also check to insure id is a string to avoid selecting an element with the name of 'id' inside a form</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie<span class="token operator">||</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>opera<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> oid <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> oid<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> oid<span class="token punctuation">.</span>id <span class="token operator">!=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
							oid <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'[@id="'</span><span class="token operator">+</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">'"]'</span><span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// Do a quick check for node name (where applicable) so</span>
						<span class="token comment">// that div#foo searches will be really fast</span>
						ret <span class="token operator">=</span> r <span class="token operator">=</span> oid <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>oid<span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span>oid<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// We need to find all descendant elements</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token comment">// Grab the tag name being searched for</span>
							<span class="token keyword">var</span> tag <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"#"</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">?</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">:</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">""</span> <span class="token operator">||</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">?</span> <span class="token string">"*"</span> <span class="token operator">:</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

							<span class="token comment">// Handle IE7 being really dumb about &lt;object>s</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> tag <span class="token operator">==</span> <span class="token string">"*"</span> <span class="token operator">&amp;&amp;</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"object"</span> <span class="token punctuation">)</span>
								tag <span class="token operator">=</span> <span class="token string">"param"</span><span class="token punctuation">;</span>

							r <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> r<span class="token punctuation">,</span> ret<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span> tag <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// It's faster to filter by class and be done with it</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"."</span> <span class="token punctuation">)</span>
							r <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">classFilter</span><span class="token punctuation">(</span> r<span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// Same with ID filtering</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"#"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

							<span class="token comment">// Try to find the element with the ID</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token operator">==</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
									tmp <span class="token operator">=</span> <span class="token punctuation">[</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
									<span class="token keyword">break</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>

							r <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						ret <span class="token operator">=</span> r<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> re2<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>

			<span class="token comment">// If a selector string still exists</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> t <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Attempt to filter it</span>
				<span class="token keyword">var</span> val <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
				ret <span class="token operator">=</span> r <span class="token operator">=</span> val<span class="token punctuation">.</span>r<span class="token punctuation">;</span>
				t <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// An error occurred with the selector;</span>
		<span class="token comment">// just return an empty set instead</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> t <span class="token punctuation">)</span>
			ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Remove the root context</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">&amp;&amp;</span> context <span class="token operator">==</span> ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
			ret<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// And combine the results</span>
		done <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span> done<span class="token punctuation">,</span> ret <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> done<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">classFilter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span>m<span class="token punctuation">,</span>not</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		m <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> m <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> pass <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> m <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>not <span class="token operator">&amp;&amp;</span> pass <span class="token operator">||</span> not <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>pass <span class="token punctuation">)</span>
				tmp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">t<span class="token punctuation">,</span>r<span class="token punctuation">,</span>not</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> last<span class="token punctuation">;</span>

		<span class="token comment">// Look for common filter expressions</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> t <span class="token operator">&amp;&amp;</span> t <span class="token operator">!=</span> last <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			last <span class="token operator">=</span> t<span class="token punctuation">;</span>

			<span class="token keyword">var</span> p <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>parse<span class="token punctuation">,</span> m<span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				m <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span> t <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> m <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Remove what we just matched</span>
					t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">;</span>

					m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>m <span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>

			<span class="token comment">// :not() is a special case that can be optimized by</span>
			<span class="token comment">// keeping it out of the expression list</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">":"</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"not"</span> <span class="token punctuation">)</span>
				<span class="token comment">// optimize if only one selector found (most common case)</span>
				r <span class="token operator">=</span> isSimple<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>r <span class="token operator">:</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span> r <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// We can get a big speed boost by filtering by class here</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"."</span> <span class="token punctuation">)</span>
				r <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">classFilter</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> not<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"["</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token operator">=</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> rl <span class="token operator">=</span> r<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rl<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> a <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> z <span class="token operator">=</span> a<span class="token punctuation">[</span> jQuery<span class="token punctuation">.</span>props<span class="token punctuation">[</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> z <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">href|src|selected</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
						z <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">""</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>z <span class="token operator">||</span>
						 type <span class="token operator">==</span> <span class="token string">"="</span> <span class="token operator">&amp;&amp;</span> z <span class="token operator">==</span> m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">||</span>
						 type <span class="token operator">==</span> <span class="token string">"!="</span> <span class="token operator">&amp;&amp;</span> z <span class="token operator">!=</span> m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">||</span>
						 type <span class="token operator">==</span> <span class="token string">"^="</span> <span class="token operator">&amp;&amp;</span> z <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>z<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
						 type <span class="token operator">==</span> <span class="token string">"$="</span> <span class="token operator">&amp;&amp;</span> z<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>z<span class="token punctuation">.</span>length <span class="token operator">-</span> m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">||</span>
						 <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">"*="</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token string">"~="</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> z<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">^</span> not <span class="token punctuation">)</span>
							tmp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				r <span class="token operator">=</span> tmp<span class="token punctuation">;</span>

			<span class="token comment">// We can get a speed boost by handling nth-child here</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">":"</span> <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"nth-child"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> merge <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> tmp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token comment">// parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'</span>
					test <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(-?)(\d*)n((?:\+|-)?\d*)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>
						m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"even"</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"2n"</span> <span class="token operator">||</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"odd"</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"2n+1"</span> <span class="token operator">||</span>
						<span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\D</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"0n+"</span> <span class="token operator">+</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> m<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token comment">// calculate the numbers (first)n+(last) including if they are negative</span>
					first <span class="token operator">=</span> <span class="token punctuation">(</span>test<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>test<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">,</span> last <span class="token operator">=</span> test<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">;</span>

				<span class="token comment">// loop through all the elements left in the jQuery object</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> rl <span class="token operator">=</span> r<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rl<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> node <span class="token operator">=</span> r<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> parentNode <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span> id <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>merge<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

						<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> n <span class="token operator">=</span> parentNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> n<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span>
								n<span class="token punctuation">.</span>nodeIndex <span class="token operator">=</span> c<span class="token operator">++</span><span class="token punctuation">;</span>

						merge<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> first <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> node<span class="token punctuation">.</span>nodeIndex <span class="token operator">==</span> last <span class="token punctuation">)</span>
							add <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeIndex <span class="token operator">-</span> last<span class="token punctuation">)</span> <span class="token operator">%</span> first <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeIndex <span class="token operator">-</span> last<span class="token punctuation">)</span> <span class="token operator">/</span> first <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span>
						add <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> add <span class="token operator">^</span> not <span class="token punctuation">)</span>
						tmp<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> node <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				r <span class="token operator">=</span> tmp<span class="token punctuation">;</span>

			<span class="token comment">// Otherwise, find the expression to execute</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>expr<span class="token punctuation">[</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> fn <span class="token operator">==</span> <span class="token string">"object"</span> <span class="token punctuation">)</span>
					fn <span class="token operator">=</span> fn<span class="token punctuation">[</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> fn <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token punctuation">)</span>
					fn <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"false||function(a,i){return "</span> <span class="token operator">+</span> fn <span class="token operator">+</span> <span class="token string">";}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Execute it against the current filter</span>
				r <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">grep</span><span class="token punctuation">(</span> r<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> i<span class="token punctuation">,</span> m<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> not <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return an array of filtered elements (r)</span>
		<span class="token comment">// and the modified expression string (t)</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">r</span><span class="token operator">:</span> r<span class="token punctuation">,</span> <span class="token literal-property property">t</span><span class="token operator">:</span> t <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">dir</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> dir</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> matched <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			cur <span class="token operator">=</span> elem<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> cur <span class="token operator">&amp;&amp;</span> cur <span class="token operator">!=</span> document <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span>
				matched<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> cur <span class="token punctuation">)</span><span class="token punctuation">;</span>
			cur <span class="token operator">=</span> cur<span class="token punctuation">[</span>dir<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> matched<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">nth</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cur<span class="token punctuation">,</span>result<span class="token punctuation">,</span>dir<span class="token punctuation">,</span>elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		result <span class="token operator">=</span> result <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> cur<span class="token punctuation">;</span> cur <span class="token operator">=</span> cur<span class="token punctuation">[</span>dir<span class="token punctuation">]</span> <span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> cur<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">++</span>num <span class="token operator">==</span> result <span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> cur<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">sibling</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">n<span class="token punctuation">,</span> elem</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> n<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">!=</span> elem <span class="token punctuation">)</span>
				r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> n <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> r<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
 * A number of helper functions used for managing events.
 * Many of the ideas behind this code orignated from
 * Dean Edwards' addEvent library.
 */</span>

jQuery<span class="token punctuation">.</span>event <span class="token operator">=</span> <span class="token punctuation">{</span>

	<span class="token comment">// Bind an event to an element</span>
	<span class="token comment">// Original by Dean Edwards</span>
	<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">8</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token comment">// For whatever reason, IE has trouble passing the window object</span>
		<span class="token comment">// around, causing it to be cloned in the process</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">.</span>setInterval <span class="token punctuation">)</span>
			elem <span class="token operator">=</span> window<span class="token punctuation">;</span>

		<span class="token comment">// Make sure that the function being executed has a unique ID</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>handler<span class="token punctuation">.</span>guid <span class="token punctuation">)</span>
			handler<span class="token punctuation">.</span>guid <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>

		<span class="token comment">// if data is passed, bind to handler</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span> data <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Create temporary function pointer to original handler</span>
			<span class="token keyword">var</span> fn <span class="token operator">=</span> handler<span class="token punctuation">;</span>

			<span class="token comment">// Create unique handler function, wrapped around original handler</span>
			handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Pass arguments and context to original handler</span>
				<span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Store data in unique handler</span>
			handler<span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Init the element's event structure</span>
		<span class="token keyword">var</span> events <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">)</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			handle <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"handle"</span><span class="token punctuation">)</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"handle"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// Handle the second event of a trigger and when</span>
				<span class="token comment">// an event is called after a page has unloaded</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> jQuery <span class="token operator">!=</span> <span class="token string">"undefined"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>triggered <span class="token punctuation">)</span>
					<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>elem<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Add elem as a property of the handle function</span>
		<span class="token comment">// This is to prevent a memory leak with non-native</span>
		<span class="token comment">// event in IE.</span>
		handle<span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>

		<span class="token comment">// Handle multiple events separated by a space</span>
		<span class="token comment">// jQuery(...).bind("mouseover mouseout", fn);</span>
		jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Namespaced event handlers</span>
			<span class="token keyword">var</span> parts <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			type <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			handler<span class="token punctuation">.</span>type <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Get the current list of functions bound to this event</span>
			<span class="token keyword">var</span> handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Init the event handler queue</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handlers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				handlers <span class="token operator">=</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token comment">// Check for a special event handler</span>
				<span class="token comment">// Only use addEventListener/attachEvent if the special</span>
				<span class="token comment">// events handler returns false</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Bind the global event handler to the element</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span>
						elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handle<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span>
						elem<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">"on"</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Add the function to the element's handler list</span>
			handlers<span class="token punctuation">[</span>handler<span class="token punctuation">.</span>guid<span class="token punctuation">]</span> <span class="token operator">=</span> handler<span class="token punctuation">;</span>

			<span class="token comment">// Keep track of which events have been used, for global triggering</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>global<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Nullify elem to prevent memory leaks in IE</span>
		elem <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">guid</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Detach an event or set of events from an element</span>
	<span class="token function-variable function">remove</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> types<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// don't do events on text and comment nodes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">8</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> events <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ret<span class="token punctuation">,</span> index<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> events <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Unbind all events for the element</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> types <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> types <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> types<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"."</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> type <span class="token keyword">in</span> events <span class="token punctuation">)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token operator">+</span> <span class="token punctuation">(</span>types <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token comment">// types is actually an event object here</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> types<span class="token punctuation">.</span>type <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					handler <span class="token operator">=</span> types<span class="token punctuation">.</span>handler<span class="token punctuation">;</span>
					types <span class="token operator">=</span> types<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Handle multiple events seperated by a space</span>
				<span class="token comment">// jQuery(...).unbind("mouseover mouseout", fn);</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token comment">// Namespaced event handlers</span>
					<span class="token keyword">var</span> parts <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					type <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// remove the given handler for the given type</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> handler <span class="token punctuation">)</span>
							<span class="token keyword">delete</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>handler<span class="token punctuation">.</span>guid<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// remove all handlers for the given type</span>
						<span class="token keyword">else</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span> handler <span class="token keyword">in</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span>
								<span class="token comment">// Handle the removal of namespaced events</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>handler<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
									<span class="token keyword">delete</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>handler<span class="token punctuation">]</span><span class="token punctuation">;</span>

						<span class="token comment">// remove generic event handler if no more handlers exist</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span> ret <span class="token keyword">in</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>ret <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span>
									elem<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"handle"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
								<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span>
									elem<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">"on"</span> <span class="token operator">+</span> type<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"handle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
							ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
							<span class="token keyword">delete</span> events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Remove the expando if it's no longer used</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> ret <span class="token keyword">in</span> events <span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>ret <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> handle <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"handle"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> handle <span class="token punctuation">)</span> handle<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"events"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				jQuery<span class="token punctuation">.</span><span class="token function">removeData</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> <span class="token string">"handle"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> donative<span class="token punctuation">,</span> extra</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Clone the incoming data, if any</span>
		data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> type<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"!"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			type <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> exclusive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Handle a global trigger</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>elem <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Only trigger if we've ever bound an event for it</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>global<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>window<span class="token punctuation">,</span> document<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Handle triggering a single element</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// don't do events on text and comment nodes</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> elem<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">8</span> <span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> val<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> fn <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> elem<span class="token punctuation">[</span> type <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token comment">// Check to see if we need to provide a fake event, or not</span>
				event <span class="token operator">=</span> <span class="token operator">!</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>preventDefault<span class="token punctuation">;</span>

			<span class="token comment">// Pass along a fake event</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> event <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				data<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
					<span class="token literal-property property">target</span><span class="token operator">:</span> elem<span class="token punctuation">,</span>
					<span class="token function-variable function">preventDefault</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function-variable function">stopPropagation</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token literal-property property">timeStamp</span><span class="token operator">:</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// no need to fix fake event</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Enforce the right trigger type</span>
			data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> exclusive <span class="token punctuation">)</span>
				data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>exclusive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token comment">// Trigger the event, it is assumed that "handle" is a function</span>
			<span class="token keyword">var</span> handle <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"handle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> handle <span class="token punctuation">)</span>
				val <span class="token operator">=</span> <span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle triggering native .onfoo handlers (and on links since we don't call .click() for links)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">[</span><span class="token string">"on"</span><span class="token operator">+</span>type<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> elem<span class="token punctuation">[</span><span class="token string">"on"</span><span class="token operator">+</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> data <span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
				val <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token comment">// Extra functions don't get the custom event object</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> event <span class="token punctuation">)</span>
				data<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle triggering of extra function</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> extra <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> extra <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// call the extra function and tack the current return value on the end for possible inspection</span>
				ret <span class="token operator">=</span> <span class="token function">extra</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> val <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> data <span class="token operator">:</span> data<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span> val <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// if anything is returned, give it precedence and have it overwrite the previous value</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
					val <span class="token operator">=</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Trigger the native events (except for clicks on links)</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> fn <span class="token operator">&amp;&amp;</span> donative <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> val <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"click"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>triggered <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					elem<span class="token punctuation">[</span> type <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// prevent IE from throwing an error for some hidden elements</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span>triggered <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> val<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">handle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// returned undefined or false</span>
		<span class="token keyword">var</span> val<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> namespace<span class="token punctuation">,</span> all<span class="token punctuation">,</span> handlers<span class="token punctuation">;</span>

		event <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">fix</span><span class="token punctuation">(</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Namespaced event handlers</span>
		namespace <span class="token operator">=</span> event<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		event<span class="token punctuation">.</span>type <span class="token operator">=</span> namespace<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		namespace <span class="token operator">=</span> namespace<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token comment">// Cache this now, all = true means, any handler</span>
		all <span class="token operator">=</span> <span class="token operator">!</span>namespace <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>exclusive<span class="token punctuation">;</span>

		handlers <span class="token operator">=</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"events"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">[</span>event<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token keyword">in</span> handlers <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> handler <span class="token operator">=</span> handlers<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Filter the functions by class</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> all <span class="token operator">||</span> handler<span class="token punctuation">.</span>type <span class="token operator">==</span> namespace <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Pass in a reference to the handler function itself</span>
				<span class="token comment">// So that we can later remove it</span>
				event<span class="token punctuation">.</span>handler <span class="token operator">=</span> handler<span class="token punctuation">;</span>
				event<span class="token punctuation">.</span>data <span class="token operator">=</span> handler<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

				ret <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> val <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
					val <span class="token operator">=</span> ret<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> val<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fix</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> event<span class="token punctuation">;</span>

		<span class="token comment">// store a copy of the original event object</span>
		<span class="token comment">// and "clone" to set read-only properties</span>
		<span class="token keyword">var</span> originalEvent <span class="token operator">=</span> event<span class="token punctuation">;</span>
		event <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">originalEvent</span><span class="token operator">:</span> originalEvent <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token string">"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i<span class="token operator">=</span>props<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token punctuation">;</span> i<span class="token operator">--</span> <span class="token punctuation">)</span>
			event<span class="token punctuation">[</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> originalEvent<span class="token punctuation">[</span> props<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// Mark it as fixed</span>
		event<span class="token punctuation">[</span>expando<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// add preventDefault and stopPropagation since</span>
		<span class="token comment">// they will not work on the clone</span>
		event<span class="token punctuation">.</span><span class="token function-variable function">preventDefault</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// if preventDefault exists run it on the original event</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>originalEvent<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span>
				originalEvent<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// otherwise set the returnValue property of the original event to false (IE)</span>
			originalEvent<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		event<span class="token punctuation">.</span><span class="token function-variable function">stopPropagation</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// if stopPropagation exists run it on the original event</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>originalEvent<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span>
				originalEvent<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// otherwise set the cancelBubble property of the original event to true (IE)</span>
			originalEvent<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Fix timeStamp</span>
		event<span class="token punctuation">.</span>timeStamp <span class="token operator">=</span> event<span class="token punctuation">.</span>timeStamp <span class="token operator">||</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Fix target property, if necessary</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>target <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>target <span class="token operator">=</span> event<span class="token punctuation">.</span>srcElement <span class="token operator">||</span> document<span class="token punctuation">;</span> <span class="token comment">// Fixes #1925 where srcElement might not be defined either</span>

		<span class="token comment">// check if target is a textnode (safari)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">3</span> <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>

		<span class="token comment">// Add relatedTarget, if necessary</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>relatedTarget <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>fromElement <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>relatedTarget <span class="token operator">=</span> event<span class="token punctuation">.</span>fromElement <span class="token operator">==</span> event<span class="token punctuation">.</span>target <span class="token operator">?</span> event<span class="token punctuation">.</span>toElement <span class="token operator">:</span> event<span class="token punctuation">.</span>fromElement<span class="token punctuation">;</span>

		<span class="token comment">// Calculate pageX/Y if missing and clientX/Y available</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>pageX <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>clientX <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>pageX <span class="token operator">=</span> event<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>scrollLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span>clientLeft <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			event<span class="token punctuation">.</span>pageY <span class="token operator">=</span> event<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token punctuation">(</span>doc <span class="token operator">&amp;&amp;</span> doc<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> body <span class="token operator">&amp;&amp;</span> body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span>clientTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add which for key events</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>which <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>charCode <span class="token operator">||</span> event<span class="token punctuation">.</span>charCode <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> event<span class="token punctuation">.</span>charCode <span class="token operator">:</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span> <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>which <span class="token operator">=</span> event<span class="token punctuation">.</span>charCode <span class="token operator">||</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>

		<span class="token comment">// Add metaKey to non-Mac browsers (use ctrl for PC's and Meta for Macs)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>metaKey <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>ctrlKey <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>metaKey <span class="token operator">=</span> event<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">;</span>

		<span class="token comment">// Add which for click: 1 == left; 2 == middle; 3 == right</span>
		<span class="token comment">// Note: button is not normalized, so don't use it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>event<span class="token punctuation">.</span>which <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>button <span class="token punctuation">)</span>
			event<span class="token punctuation">.</span>which <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token number">3</span> <span class="token operator">:</span> <span class="token punctuation">(</span> event<span class="token punctuation">.</span>button <span class="token operator">&amp;</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> event<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">proxy</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn<span class="token punctuation">,</span> proxy</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// Set the guid of unique handler to the same of original handler, so it can be removed</span>
		proxy<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">=</span> fn<span class="token punctuation">.</span>guid <span class="token operator">||</span> proxy<span class="token punctuation">.</span>guid <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>guid<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token comment">// So proxy can be declared as an argument</span>
		<span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">special</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">ready</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Make sure the ready event is setup</span>
				<span class="token function">bindReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">mouseenter</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">"mouseover"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>mouseenter<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">"mouseover"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>mouseenter<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// If we actually just moused on to a sub-element, ignore it</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">withinElement</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token comment">// Execute the right handlers by setting the event type to mouseenter</span>
				event<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"mouseenter"</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">mouseleave</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">"mouseout"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>mouseleave<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">teardown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">"mouseout"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span>special<span class="token punctuation">.</span>mouseleave<span class="token punctuation">.</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// If we actually just moused on to a sub-element, ignore it</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">withinElement</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				<span class="token comment">// Execute the right handlers by setting the event type to mouseleave</span>
				event<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"mouseleave"</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> type <span class="token operator">==</span> <span class="token string">"unload"</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn <span class="token operator">||</span> data<span class="token punctuation">,</span> fn <span class="token operator">&amp;&amp;</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">one</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> one <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn <span class="token operator">||</span> data<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> one<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span>fn <span class="token operator">||</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> one<span class="token punctuation">,</span> fn <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">trigger</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">triggerHandler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Save reference to arguments for access in closure</span>
		<span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

		<span class="token comment">// link all the functions, so any of them can unbind this click handler</span>
		<span class="token keyword">while</span><span class="token punctuation">(</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span> fn<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Figure out which function to execute</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>lastToggle <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastToggle <span class="token operator">||</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">%</span> i<span class="token punctuation">;</span>

			<span class="token comment">// Make sure that clicks stop</span>
			event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// and execute the function</span>
			<span class="token keyword">return</span> args<span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastToggle<span class="token operator">++</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hover</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fnOver<span class="token punctuation">,</span> fnOut</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> fnOver<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> fnOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Attach the listeners</span>
		<span class="token function">bindReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If the DOM is already ready</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>isReady <span class="token punctuation">)</span>
			<span class="token comment">// Execute the function immediately</span>
			<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> document<span class="token punctuation">,</span> jQuery <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Otherwise, remember the function for later</span>
		<span class="token keyword">else</span>
			<span class="token comment">// Add the function to the wait list</span>
			jQuery<span class="token punctuation">.</span>readyList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token literal-property property">readyList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// Handle when the DOM is ready</span>
	<span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Make sure that the DOM is not already loaded</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>isReady <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Remember that the DOM is ready</span>
			jQuery<span class="token punctuation">.</span>isReady <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token comment">// If there are functions bound, to execute</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>readyList <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Execute all of them</span>
				jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>readyList<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> document <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Reset the list of functions</span>
				jQuery<span class="token punctuation">.</span>readyList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Trigger any bound ready events</span>
			<span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">triggerHandler</span><span class="token punctuation">(</span><span class="token string">"ready"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> readyBound <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">bindReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> readyBound <span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
	readyBound <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token comment">// Mozilla, Opera (see further below for it) and webkit nightlies currently support this event</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>addEventListener <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>opera<span class="token punctuation">)</span>
		<span class="token comment">// Use the handy event callback</span>
		document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ready<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// If IE is used and is not in a frame</span>
	<span class="token comment">// Continually check to see if the document is ready</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span> window <span class="token operator">==</span> top <span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>isReady<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// If IE is used, use the trick by Diego Perini</span>
			<span class="token comment">// http://javascript.nwbox.com/IEContentLoaded/</span>
			document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">doScroll</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> error <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// and execute any waiting functions</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>opera <span class="token punctuation">)</span>
		document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span> <span class="token string">"DOMContentLoaded"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>isReady<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">setTimeout</span><span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token comment">// and execute any waiting functions</span>
			jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> numStyles<span class="token punctuation">;</span>
		<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>isReady<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>readyState <span class="token operator">!=</span> <span class="token string">"loaded"</span> <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>readyState <span class="token operator">!=</span> <span class="token string">"complete"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> numStyles <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span>
				numStyles <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"style, link[rel=stylesheet]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">.</span>length <span class="token operator">!=</span> numStyles <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// and execute any waiting functions</span>
			jQuery<span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// A fallback to window.onload, that will always work</span>
	jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> window<span class="token punctuation">,</span> <span class="token string">"load"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ready <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token string">"blur,focus,load,resize,scroll,unload,click,dblclick,"</span> <span class="token operator">+</span>
	<span class="token string">"mousedown,mouseup,mousemove,mouseover,mouseout,change,select,"</span> <span class="token operator">+</span>
	<span class="token string">"submit,keydown,keypress,keyup,error"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token comment">// Handle event binding</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> fn <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fn<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Checks if an event happened on an element within another element</span>
<span class="token comment">// Used in jQuery.event.special.mouseenter and mouseleave handlers</span>
<span class="token keyword">var</span> <span class="token function-variable function">withinElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Check if mouse(over|out) are still within the same parent element</span>
	<span class="token keyword">var</span> parent <span class="token operator">=</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">;</span>
	<span class="token comment">// Traverse up the tree</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> parent <span class="token operator">!=</span> elem <span class="token punctuation">)</span> <span class="token keyword">try</span> <span class="token punctuation">{</span> parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> parent <span class="token operator">=</span> elem<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token comment">// Return true if we actually just moused on to a sub-element</span>
	<span class="token keyword">return</span> parent <span class="token operator">==</span> elem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Prevent memory leaks in IE</span>
<span class="token comment">// And prevent errors on refresh with events like mouseover in other browsers</span>
<span class="token comment">// Window isn't included so as not to unbind existing unload events</span>

<span class="token comment">// Yaakov: I disabled the following three lines: Without them, the bug</span>
<span class="token comment">// disappears.</span>

<span class="token comment">// jQuery(window).bind("unload", function() {</span>
<span class="token comment">// 	jQuery("*").add(document).unbind();</span>
<span class="token comment">// });</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// Keep a copy of the old load</span>
	<span class="token literal-property property">_load</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>load<span class="token punctuation">,</span>

	<span class="token function-variable function">load</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">typeof</span> url <span class="token operator">!=</span> <span class="token string">'string'</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_load</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> off <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> off <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> selector <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>off<span class="token punctuation">,</span> url<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
			url <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> off<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		callback <span class="token operator">=</span> callback <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token comment">// Default to a GET request</span>
		<span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token string">"GET"</span><span class="token punctuation">;</span>

		<span class="token comment">// If the second parameter was provided</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> params <span class="token punctuation">)</span>
			<span class="token comment">// If it's a function</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> params <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// We assume that it's the callback</span>
				callback <span class="token operator">=</span> params<span class="token punctuation">;</span>
				params <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

			<span class="token comment">// Otherwise, build a param string</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				params <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span> params <span class="token punctuation">)</span><span class="token punctuation">;</span>
				type <span class="token operator">=</span> <span class="token string">"POST"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

		<span class="token comment">// Request the remote document</span>
		jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">"html"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> params<span class="token punctuation">,</span>
			<span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// If successful, inject the HTML into all the matched elements</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">==</span> <span class="token string">"success"</span> <span class="token operator">||</span> status <span class="token operator">==</span> <span class="token string">"notmodified"</span> <span class="token punctuation">)</span>
					<span class="token comment">// See if a selector was specified</span>
					self<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span> selector <span class="token operator">?</span>
						<span class="token comment">// Create a dummy div to hold the results</span>
						<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"&lt;div/>"</span><span class="token punctuation">)</span>
							<span class="token comment">// inject the contents of the document in, removing the scripts</span>
							<span class="token comment">// to avoid any 'Permission Denied' errors in IE</span>
							<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>responseText<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;script(.|\s)*?\/script></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

							<span class="token comment">// Locate the specified elements</span>
							<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">:</span>

						<span class="token comment">// If not, just inject the full result</span>
						res<span class="token punctuation">.</span>responseText <span class="token punctuation">)</span><span class="token punctuation">;</span>

				self<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> callback<span class="token punctuation">,</span> <span class="token punctuation">[</span>res<span class="token punctuation">.</span>responseText<span class="token punctuation">,</span> status<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">serialize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">serializeArray</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">nodeName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"form"</span><span class="token punctuation">)</span> <span class="token operator">?</span>
				jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elements<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked <span class="token operator">||</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">select|textarea</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">||</span>
					<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">text|hidden|password</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> elem</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> val <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span>
				val<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token operator">?</span>
					jQuery<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> val<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val<span class="token punctuation">}</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> elem<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> val<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Attach a bunch of functions for handling common AJAX events</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token string">"ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend"</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>o<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> jsc <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// shift arguments if data argument was ommited</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			callback <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
			<span class="token literal-property property">success</span><span class="token operator">:</span> callback<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> type
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">getScript</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">getJSON</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">"json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">post</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			callback <span class="token operator">=</span> data<span class="token punctuation">;</span>
			data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
			<span class="token literal-property property">success</span><span class="token operator">:</span> callback<span class="token punctuation">,</span>
			<span class="token literal-property property">dataType</span><span class="token operator">:</span> type
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ajaxSetup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">settings</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span> settings <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">ajaxSettings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">url</span><span class="token operator">:</span> location<span class="token punctuation">.</span>href<span class="token punctuation">,</span>
		<span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token literal-property property">accepts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">xml</span><span class="token operator">:</span> <span class="token string">"application/xml, text/xml"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">"text/html"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">"text/javascript, application/javascript"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">"application/json, text/javascript"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">"text/plain"</span><span class="token punctuation">,</span>
			<span class="token literal-property property">_default</span><span class="token operator">:</span> <span class="token string">"*/*"</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Last-Modified header cache for next request</span>
	<span class="token literal-property property">lastModified</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">ajax</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">s</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Extend the settings, but re-extend 's' so that it can be</span>
		<span class="token comment">// checked again later (in the test suite, specifically)</span>
		s <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> s<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span>ajaxSettings<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> jsonp<span class="token punctuation">,</span> jsre <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">=\?(&amp;|$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> status<span class="token punctuation">,</span> data<span class="token punctuation">,</span>
			type <span class="token operator">=</span> s<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// convert data if not already a string</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>processData <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> s<span class="token punctuation">.</span>data <span class="token operator">!=</span> <span class="token string">"string"</span> <span class="token punctuation">)</span>
			s<span class="token punctuation">.</span>data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Handle JSONP Parameter Callbacks</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">==</span> <span class="token string">"jsonp"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">==</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>jsre<span class="token punctuation">)</span> <span class="token punctuation">)</span>
					s<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonp <span class="token operator">||</span> <span class="token string">"callback"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=?"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>jsre<span class="token punctuation">)</span> <span class="token punctuation">)</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">?</span> s<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>jsonp <span class="token operator">||</span> <span class="token string">"callback"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"=?"</span><span class="token punctuation">;</span>
			s<span class="token punctuation">.</span>dataType <span class="token operator">=</span> <span class="token string">"json"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Build temporary JSONP function</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">==</span> <span class="token string">"json"</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>jsre<span class="token punctuation">)</span> <span class="token operator">||</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>jsre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jsonp <span class="token operator">=</span> <span class="token string">"jsonp"</span> <span class="token operator">+</span> jsc<span class="token operator">++</span><span class="token punctuation">;</span>

			<span class="token comment">// Replace the =? sequence both in the query string and the data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token punctuation">)</span>
				s<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>jsre<span class="token punctuation">,</span> <span class="token string">"="</span> <span class="token operator">+</span> jsonp <span class="token operator">+</span> <span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			s<span class="token punctuation">.</span>url <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>jsre<span class="token punctuation">,</span> <span class="token string">"="</span> <span class="token operator">+</span> jsonp <span class="token operator">+</span> <span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// We need to make sure</span>
			<span class="token comment">// that a JSONP style response is executed properly</span>
			s<span class="token punctuation">.</span>dataType <span class="token operator">=</span> <span class="token string">"script"</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle JSONP-style loading</span>
			window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tmp</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				data <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
				<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// Garbage collect</span>
				window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
				<span class="token keyword">try</span><span class="token punctuation">{</span> <span class="token keyword">delete</span> window<span class="token punctuation">[</span> jsonp <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> head <span class="token punctuation">)</span>
					head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">==</span> <span class="token string">"script"</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>cache <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
			s<span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>cache <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> ts <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// try replacing _= if it is there</span>
			<span class="token keyword">var</span> ret <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\?|&amp;)_=.*?(&amp;|$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">"$1_="</span> <span class="token operator">+</span> ts <span class="token operator">+</span> <span class="token string">"$2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// if nothing was replaced, add timestamp to the end</span>
			s<span class="token punctuation">.</span>url <span class="token operator">=</span> ret <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>ret <span class="token operator">==</span> s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_="</span> <span class="token operator">+</span> ts <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If data is available, append data to url for get requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"GET"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			s<span class="token punctuation">.</span>url <span class="token operator">+=</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"&amp;"</span> <span class="token operator">:</span> <span class="token string">"?"</span><span class="token punctuation">)</span> <span class="token operator">+</span> s<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

			<span class="token comment">// IE likes to send both get and post data, prevent this</span>
			s<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Watch for a new set of requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> jQuery<span class="token punctuation">.</span>active<span class="token operator">++</span> <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxStart"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Matches an absolute URL, and saves the domain</span>
		<span class="token keyword">var</span> remote <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?:\w+:)?\/\/([^\/?#]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

		<span class="token comment">// If we're requesting a remote document</span>
		<span class="token comment">// and trying to load JSON or Script with a GET</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>dataType <span class="token operator">==</span> <span class="token string">"script"</span> <span class="token operator">&amp;&amp;</span> type <span class="token operator">==</span> <span class="token string">"GET"</span>
				<span class="token operator">&amp;&amp;</span> remote<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> remote<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> location<span class="token punctuation">.</span>host <span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">var</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			script<span class="token punctuation">.</span>src <span class="token operator">=</span> s<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span>scriptCharset<span class="token punctuation">)</span>
				script<span class="token punctuation">.</span>charset <span class="token operator">=</span> s<span class="token punctuation">.</span>scriptCharset<span class="token punctuation">;</span>

			<span class="token comment">// Handle Script loading</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jsonp <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

				<span class="token comment">// Attach handlers for all browsers</span>
				script<span class="token punctuation">.</span>onload <span class="token operator">=</span> script<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>done <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">||</span>
							<span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">"loaded"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span> script <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// We handle everything using the script element injection</span>
			<span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> requestDone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

		<span class="token comment">// Create the request object; Microsoft failed to properly</span>
		<span class="token comment">// implement the XMLHttpRequest in IE7, so we use the ActiveXObject when it is available</span>
		<span class="token keyword">var</span> xhr <span class="token operator">=</span> window<span class="token punctuation">.</span>ActiveXObject <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Open the socket</span>
		<span class="token comment">// Passing null username, generates a login popup on Opera (#2865)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span> s<span class="token punctuation">.</span>username <span class="token punctuation">)</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url<span class="token punctuation">,</span> s<span class="token punctuation">.</span>async<span class="token punctuation">,</span> s<span class="token punctuation">.</span>username<span class="token punctuation">,</span> s<span class="token punctuation">.</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url<span class="token punctuation">,</span> s<span class="token punctuation">.</span>async<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Need an extra try/catch for cross domain requests in Firefox 3</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// Set the correct header, if data is being sent</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>data <span class="token punctuation">)</span>
				xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Set the If-Modified-Since header, if ifModified mode.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>ifModified <span class="token punctuation">)</span>
				xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"If-Modified-Since"</span><span class="token punctuation">,</span>
					jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">"Thu, 01 Jan 1970 00:00:00 GMT"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Set header so the called script knows that it's an XMLHttpRequest</span>
			xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"X-Requested-With"</span><span class="token punctuation">,</span> <span class="token string">"XMLHttpRequest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Set the Accepts header for the server, depending on the dataType</span>
			xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Accept"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataType <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span> s<span class="token punctuation">.</span>dataType <span class="token punctuation">]</span> <span class="token operator">?</span>
				s<span class="token punctuation">.</span>accepts<span class="token punctuation">[</span> s<span class="token punctuation">.</span>dataType <span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">", */*"</span> <span class="token operator">:</span>
				s<span class="token punctuation">.</span>accepts<span class="token punctuation">.</span>_default <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

		<span class="token comment">// Allow custom headers/mimetypes</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>beforeSend <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">beforeSend</span><span class="token punctuation">(</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// cleanup active request counter</span>
			s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span>active<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token comment">// close opended socket</span>
			xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">"ajaxSend"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Wait for a response to come back</span>
		<span class="token keyword">var</span> <span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">isTimeout</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// The transfer is complete and the data is available, or the request timed out</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>requestDone <span class="token operator">&amp;&amp;</span> xhr <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">||</span> isTimeout <span class="token operator">==</span> <span class="token string">"timeout"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				requestDone <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

				<span class="token comment">// clear poll interval</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>ival<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">clearInterval</span><span class="token punctuation">(</span>ival<span class="token punctuation">)</span><span class="token punctuation">;</span>
					ival <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				status <span class="token operator">=</span> isTimeout <span class="token operator">==</span> <span class="token string">"timeout"</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"timeout"</span> <span class="token operator">||</span>
					<span class="token operator">!</span>jQuery<span class="token punctuation">.</span><span class="token function">httpSuccess</span><span class="token punctuation">(</span> xhr <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"error"</span> <span class="token operator">||</span>
					s<span class="token punctuation">.</span>ifModified <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">httpNotModified</span><span class="token punctuation">(</span> xhr<span class="token punctuation">,</span> s<span class="token punctuation">.</span>url <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"notmodified"</span> <span class="token operator">||</span>
					<span class="token string">"success"</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">==</span> <span class="token string">"success"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Watch for, and catch, XML document parse errors</span>
					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						<span class="token comment">// process the data (runs the xml through httpData regardless of callback)</span>
						data <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">httpData</span><span class="token punctuation">(</span> xhr<span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataType<span class="token punctuation">,</span> s<span class="token punctuation">.</span>dataFilter <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						status <span class="token operator">=</span> <span class="token string">"parsererror"</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Make sure that the request was successful or notmodified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> status <span class="token operator">==</span> <span class="token string">"success"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Cache Last-Modified header, if ifModified mode.</span>
					<span class="token keyword">var</span> modRes<span class="token punctuation">;</span>
					<span class="token keyword">try</span> <span class="token punctuation">{</span>
						modRes <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Last-Modified"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// swallow exception thrown by FF if header is not available</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>ifModified <span class="token operator">&amp;&amp;</span> modRes <span class="token punctuation">)</span>
						jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>s<span class="token punctuation">.</span>url<span class="token punctuation">]</span> <span class="token operator">=</span> modRes<span class="token punctuation">;</span>

					<span class="token comment">// JSONP handles its own success callback</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>jsonp <span class="token punctuation">)</span>
						<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span>
					jQuery<span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Fire the complete handlers</span>
				<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Stop memory leaks</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>async <span class="token punctuation">)</span>
					xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>async <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// don't attach the handler to the request, just poll it instead</span>
			<span class="token keyword">var</span> ival <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>onreadystatechange<span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Timeout checker</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>timeout <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token comment">// Check to see if the request is still happening</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> xhr <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Cancel the request</span>
						xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>requestDone <span class="token punctuation">)</span>
							<span class="token function">onreadystatechange</span><span class="token punctuation">(</span> <span class="token string">"timeout"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Send the data</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">handleError</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// firefox 1.5 doesn't fire statechange for sync requests</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>s<span class="token punctuation">.</span>async <span class="token punctuation">)</span>
			<span class="token function">onreadystatechange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// If a local callback was specified, fire it and pass it the data</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>success <span class="token punctuation">)</span>
				s<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span> data<span class="token punctuation">,</span> status <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Fire the global callback</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxSuccess"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// Process result</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>complete <span class="token punctuation">)</span>
				s<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span>xhr<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// The request was completed</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxComplete"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Handle the global AJAX counter</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token operator">--</span>jQuery<span class="token punctuation">.</span>active <span class="token punctuation">)</span>
				jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxStop"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// return XMLHttpRequest to allow aborting the request etc.</span>
		<span class="token keyword">return</span> xhr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">handleError</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">s<span class="token punctuation">,</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> e</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// If a local callback was specified, fire it</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>error <span class="token punctuation">)</span> s<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span> xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Fire the global callback</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> s<span class="token punctuation">.</span>global <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span> <span class="token string">"ajaxError"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>xhr<span class="token punctuation">,</span> s<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Counter for holding the number of active queries</span>
	<span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>

	<span class="token comment">// Determines if an XMLHttpRequest was successful or not</span>
	<span class="token function-variable function">httpSuccess</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450</span>
			<span class="token keyword">return</span> <span class="token operator">!</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&amp;&amp;</span> location<span class="token punctuation">.</span>protocol <span class="token operator">==</span> <span class="token string">"file:"</span> <span class="token operator">||</span>
				<span class="token punctuation">(</span> xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">1223</span> <span class="token operator">||</span>
				jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Determines if an XMLHttpRequest returns NotModified</span>
	<span class="token function-variable function">httpNotModified</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr<span class="token punctuation">,</span> url</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> xhrRes <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"Last-Modified"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Firefox always returns 200. check Last-Modified date</span>
			<span class="token keyword">return</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span> <span class="token operator">||</span> xhrRes <span class="token operator">==</span> jQuery<span class="token punctuation">.</span>lastModified<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token operator">||</span>
				jQuery<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>safari <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">httpData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">xhr<span class="token punctuation">,</span> type<span class="token punctuation">,</span> filter</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> ct <span class="token operator">=</span> xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			xml <span class="token operator">=</span> type <span class="token operator">==</span> <span class="token string">"xml"</span> <span class="token operator">||</span> <span class="token operator">!</span>type <span class="token operator">&amp;&amp;</span> ct <span class="token operator">&amp;&amp;</span> ct<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"xml"</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">,</span>
			data <span class="token operator">=</span> xml <span class="token operator">?</span> xhr<span class="token punctuation">.</span>responseXML <span class="token operator">:</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> xml <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">"parsererror"</span> <span class="token punctuation">)</span>
			<span class="token keyword">throw</span> <span class="token string">"parsererror"</span><span class="token punctuation">;</span>
			
		<span class="token comment">// Allow a pre-filtering function to sanitize the response</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span> filter <span class="token punctuation">)</span>
			data <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span> data<span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// If the type is "script", eval it in global context</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">==</span> <span class="token string">"script"</span> <span class="token punctuation">)</span>
			jQuery<span class="token punctuation">.</span><span class="token function">globalEval</span><span class="token punctuation">(</span> data <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Get the JavaScript object, if JSON is used.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> type <span class="token operator">==</span> <span class="token string">"json"</span> <span class="token punctuation">)</span>
			data <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Serialize an array of form elements or a set of</span>
	<span class="token comment">// key/values into a query string</span>
	<span class="token function-variable function">param</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">a</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token comment">// If an array was passed in, assume that it is an array</span>
		<span class="token comment">// of form elements</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> a<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token operator">||</span> a<span class="token punctuation">.</span>jquery <span class="token punctuation">)</span>
			<span class="token comment">// Serialize the form elements</span>
			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> a<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Otherwise, assume that it's an object of key/value pairs</span>
		<span class="token keyword">else</span>
			<span class="token comment">// Serialize the key/values</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> j <span class="token keyword">in</span> a <span class="token punctuation">)</span>
				<span class="token comment">// If the value is an array then the key names need to be repeated</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token punctuation">)</span>
					jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">else</span>
					s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Return the resulting serialization</span>
		<span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"&amp;"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%20</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> speed <span class="token operator">?</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">"show"</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"show"</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">:</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>oldblock <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"none"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">"&lt;"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tagName <span class="token operator">+</span> <span class="token string">" />"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// handle an edge condition where css is - div { display:none; } or similar</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">==</span> <span class="token string">"none"</span><span class="token punctuation">)</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
					elem<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> speed <span class="token operator">?</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">"hide"</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"hide"</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">:</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">":visible"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>oldblock <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>oldblock <span class="token operator">||</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Save the old toggle function</span>
	<span class="token literal-property property">_toggle</span><span class="token operator">:</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>toggle<span class="token punctuation">,</span>

	<span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">fn<span class="token punctuation">,</span> fn2</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span> <span class="token operator">?</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_toggle</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> arguments <span class="token punctuation">)</span> <span class="token operator">:</span>
			fn <span class="token operator">?</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"toggle"</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">"toggle"</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"toggle"</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> fn2<span class="token punctuation">)</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"show"</span> <span class="token operator">:</span> <span class="token string">"hide"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">slideDown</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"show"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">slideUp</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"hide"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">slideToggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"toggle"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fadeIn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"show"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fadeOut</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">"hide"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fadeTo</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span>to<span class="token punctuation">,</span>callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">opacity</span><span class="token operator">:</span> to<span class="token punctuation">}</span><span class="token punctuation">,</span> speed<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">animate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">prop<span class="token punctuation">,</span> speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> optall <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">speed</span><span class="token punctuation">(</span>speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span> optall<span class="token punctuation">.</span>queue <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">?</span> <span class="token string">"each"</span> <span class="token operator">:</span> <span class="token string">"queue"</span> <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> opt <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> optall<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">,</span>
				hidden <span class="token operator">=</span> <span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">":hidden"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span> p <span class="token keyword">in</span> prop <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"hide"</span> <span class="token operator">&amp;&amp;</span> hidden <span class="token operator">||</span> prop<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"show"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>hidden <span class="token punctuation">)</span>
					<span class="token keyword">return</span> opt<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> p <span class="token operator">==</span> <span class="token string">"height"</span> <span class="token operator">||</span> p <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Store display property</span>
					opt<span class="token punctuation">.</span>display <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token comment">// Make sure that nothing sneaks out</span>
					opt<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> opt<span class="token punctuation">.</span>overflow <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">"hidden"</span><span class="token punctuation">;</span>

			opt<span class="token punctuation">.</span>curAnim <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>

			jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> prop<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">jQuery<span class="token punctuation">.</span>fx</span><span class="token punctuation">(</span> self<span class="token punctuation">,</span> opt<span class="token punctuation">,</span> name <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">toggle|show|hide</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">)</span>
					e<span class="token punctuation">[</span> val <span class="token operator">==</span> <span class="token string">"toggle"</span> <span class="token operator">?</span> hidden <span class="token operator">?</span> <span class="token string">"show"</span> <span class="token operator">:</span> <span class="token string">"hide"</span> <span class="token operator">:</span> val <span class="token punctuation">]</span><span class="token punctuation">(</span> prop <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> parts <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([+-]=)?([\d+-.]+)(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						start <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span> parts <span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							unit <span class="token operator">=</span> parts<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">"px"</span><span class="token punctuation">;</span>

						<span class="token comment">// We need to compute starting value</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> unit <span class="token operator">!=</span> <span class="token string">"px"</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
							self<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>end <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> unit<span class="token punctuation">;</span>
							start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>end <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> e<span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> start<span class="token punctuation">;</span>
							self<span class="token punctuation">.</span>style<span class="token punctuation">[</span> name <span class="token punctuation">]</span> <span class="token operator">=</span> start <span class="token operator">+</span> unit<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// If a +=/-= token was provided, we're doing a relative animation</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
							end <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"-="</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> end<span class="token punctuation">)</span> <span class="token operator">+</span> start<span class="token punctuation">;</span>

						e<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> unit <span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span>
						e<span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> val<span class="token punctuation">,</span> <span class="token string">""</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// For JS strict compliance</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">queue</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span> type <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fn <span class="token operator">=</span> type<span class="token punctuation">;</span>
			type <span class="token operator">=</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>type <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">==</span> <span class="token string">"string"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token function">queue</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> fn<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Array <span class="token punctuation">)</span>
				<span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span> fn <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span>
					<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">clearQueue<span class="token punctuation">,</span> gotoEnd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>clearQueue<span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token comment">// go in reverse order so anything added to the queue during the loop is ignored</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> timers<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span> <span class="token punctuation">)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>elem <span class="token operator">==</span> <span class="token keyword">this</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span>
						<span class="token comment">// force the next step to be the last</span>
						timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// start the next in the queue if the last step wasn't forced</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gotoEnd<span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">queue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> type<span class="token punctuation">,</span> array</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span><span class="token punctuation">{</span>

		type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> q <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token operator">+</span> <span class="token string">"queue"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>q <span class="token operator">||</span> array <span class="token punctuation">)</span>
			q <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span> elem<span class="token punctuation">,</span> type <span class="token operator">+</span> <span class="token string">"queue"</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> q<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">dequeue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	type <span class="token operator">=</span> type <span class="token operator">||</span> <span class="token string">"fx"</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> q <span class="token operator">=</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>

		q<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> q<span class="token punctuation">.</span>length <span class="token punctuation">)</span>
			q<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

	<span class="token function-variable function">speed</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">speed<span class="token punctuation">,</span> easing<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> opt <span class="token operator">=</span> speed <span class="token operator">&amp;&amp;</span> speed<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Object <span class="token operator">?</span> speed <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">complete</span><span class="token operator">:</span> fn <span class="token operator">||</span> <span class="token operator">!</span>fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span>
				jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> speed <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">duration</span><span class="token operator">:</span> speed<span class="token punctuation">,</span>
			<span class="token literal-property property">easing</span><span class="token operator">:</span> fn <span class="token operator">&amp;&amp;</span> easing <span class="token operator">||</span> easing <span class="token operator">&amp;&amp;</span> easing<span class="token punctuation">.</span>constructor <span class="token operator">!=</span> Function <span class="token operator">&amp;&amp;</span> easing
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		opt<span class="token punctuation">.</span>duration <span class="token operator">=</span> <span class="token punctuation">(</span>opt<span class="token punctuation">.</span>duration <span class="token operator">&amp;&amp;</span> opt<span class="token punctuation">.</span>duration<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Number <span class="token operator">?</span>
			opt<span class="token punctuation">.</span>duration <span class="token operator">:</span>
			jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">[</span>opt<span class="token punctuation">.</span>duration<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>speeds<span class="token punctuation">.</span>def<span class="token punctuation">;</span>

		<span class="token comment">// Queueing</span>
		opt<span class="token punctuation">.</span>old <span class="token operator">=</span> opt<span class="token punctuation">.</span>complete<span class="token punctuation">;</span>
		opt<span class="token punctuation">.</span><span class="token function-variable function">complete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> opt<span class="token punctuation">.</span>queue <span class="token operator">!==</span> <span class="token boolean">false</span> <span class="token punctuation">)</span>
				<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">isFunction</span><span class="token punctuation">(</span> opt<span class="token punctuation">.</span>old <span class="token punctuation">)</span> <span class="token punctuation">)</span>
				opt<span class="token punctuation">.</span><span class="token function">old</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> opt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">linear</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">p<span class="token punctuation">,</span> n<span class="token punctuation">,</span> firstNum<span class="token punctuation">,</span> diff</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> firstNum <span class="token operator">+</span> diff <span class="token operator">*</span> p<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function-variable function">swing</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">p<span class="token punctuation">,</span> n<span class="token punctuation">,</span> firstNum<span class="token punctuation">,</span> diff</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>p<span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> diff <span class="token operator">+</span> firstNum<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">timers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">timerId</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

	<span class="token function-variable function">fx</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">elem<span class="token punctuation">,</span> options<span class="token punctuation">,</span> prop</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">=</span> prop<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>options<span class="token punctuation">.</span>orig <span class="token punctuation">)</span>
			options<span class="token punctuation">.</span>orig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>

	<span class="token comment">// Simple function for setting a style value</span>
	<span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>step <span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>now<span class="token punctuation">,</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">||</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">.</span>step<span class="token punctuation">.</span>_default<span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token keyword">this</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Set display property to block for height/width animations</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">==</span> <span class="token string">"height"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Get the current size</span>
	<span class="token function-variable function">cur</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">force</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">,</span> force<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> r <span class="token operator">&amp;&amp;</span> r <span class="token operator">></span> <span class="token operator">-</span><span class="token number">10000</span> <span class="token operator">?</span> r <span class="token operator">:</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Start an animation from one number to another</span>
	<span class="token function-variable function">custom</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">from<span class="token punctuation">,</span> to<span class="token punctuation">,</span> unit</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">=</span> from<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">=</span> to<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> unit <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>unit <span class="token operator">||</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token parameter">gotoEnd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span>gotoEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		t<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">;</span>

		jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>timerId <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span>timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">var</span> timers <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>timers<span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> timers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>timers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
						timers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>timers<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">clearInterval</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>timerId <span class="token punctuation">)</span><span class="token punctuation">;</span>
					jQuery<span class="token punctuation">.</span>timerId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Simple 'show' function</span>
	<span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// Remember where we started, so that we can go back to it later</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// Begin the animation</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Make sure that we start at a small width/height to avoid any</span>
		<span class="token comment">// flash of content</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">==</span> <span class="token string">"width"</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token operator">==</span> <span class="token string">"height"</span> <span class="token punctuation">)</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"1px"</span><span class="token punctuation">;</span>

		<span class="token comment">// Start by showing the element</span>
		<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Simple 'hide' function</span>
	<span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// Remember where we started, so that we can go back to it later</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

		<span class="token comment">// Begin the animation</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// Each step of an animation</span>
	<span class="token function-variable function">step</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">gotoEnd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> gotoEnd <span class="token operator">||</span> t <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim<span class="token punctuation">[</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

			<span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim <span class="token punctuation">)</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token boolean">true</span> <span class="token punctuation">)</span>
					done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> done <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>display <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Reset the overflow</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>overflow<span class="token punctuation">;</span>

					<span class="token comment">// Reset the display</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"none"</span> <span class="token punctuation">)</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Hide the element if the "hide" operation was done</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token punctuation">)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>

				<span class="token comment">// Reset the properties, if the item has been hidden or shown</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>hide <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>show <span class="token punctuation">)</span>
					<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> p <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>curAnim <span class="token punctuation">)</span>
						jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> p<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>orig<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span> done <span class="token punctuation">)</span>
				<span class="token comment">// Execute the complete function</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> n <span class="token operator">=</span> t <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startTime<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> n <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">;</span>

			<span class="token comment">// Perform the easing function, defaults to swing</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>pos <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>easing <span class="token operator">||</span> <span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span>easing<span class="token punctuation">.</span>swing <span class="token operator">?</span> <span class="token string">"swing"</span> <span class="token operator">:</span> <span class="token string">"linear"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Perform the next step of the animation</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>fx<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">speeds</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token literal-property property">slow</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">fast</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
 		<span class="token comment">// Default speed</span>
 		<span class="token literal-property property">def</span><span class="token operator">:</span> <span class="token number">400</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">step</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">scrollLeft</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">scrollTop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">opacity</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			jQuery<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token string">"opacity"</span><span class="token punctuation">,</span> fx<span class="token punctuation">.</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token function-variable function">_default</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			fx<span class="token punctuation">.</span>elem<span class="token punctuation">.</span>style<span class="token punctuation">[</span> fx<span class="token punctuation">.</span>prop <span class="token punctuation">]</span> <span class="token operator">=</span> fx<span class="token punctuation">.</span>now <span class="token operator">+</span> fx<span class="token punctuation">.</span>unit<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// The Offset Method</span>
<span class="token comment">// Originally By Brandon Aaron, part of the Dimension Plugin</span>
<span class="token comment">// http://jquery.com/plugins/project/dimensions</span>
jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function-variable function">offset</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> results<span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span> elem <span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span>browser <span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> parent       <span class="token operator">=</span> elem<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span>
		    offsetChild  <span class="token operator">=</span> elem<span class="token punctuation">,</span>
		    offsetParent <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent<span class="token punctuation">,</span>
		    doc          <span class="token operator">=</span> elem<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">,</span>
		    safari2      <span class="token operator">=</span> safari <span class="token operator">&amp;&amp;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">522</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">adobeair</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">,</span>
		    css          <span class="token operator">=</span> jQuery<span class="token punctuation">.</span>curCSS<span class="token punctuation">,</span>
		    fixed        <span class="token operator">=</span> <span class="token function">css</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"position"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"fixed"</span><span class="token punctuation">;</span>

		<span class="token comment">// Use getBoundingClientRect if available</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span> elem<span class="token punctuation">.</span>getBoundingClientRect <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> box <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Add the document scroll offsets</span>
			<span class="token function">add</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span>left <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span> doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">)</span><span class="token punctuation">,</span>
				box<span class="token punctuation">.</span>top  <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span>  doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// IE adds the HTML element's border, by default it is medium which is 2px</span>
			<span class="token comment">// IE 6 and 7 quirks mode the border width is overwritable by the following css html { border: 0; }</span>
			<span class="token comment">// IE 7 standards mode, the border is always 2px</span>
			<span class="token comment">// This border/offset is typically represented by the clientLeft and clientTop properties</span>
			<span class="token comment">// However, in IE6 and 7 quirks mode the clientLeft and clientTop properties are not updated when overwriting it via CSS</span>
			<span class="token comment">// Therefore this method will be off by 2px in IE while in quirksmode</span>
			<span class="token function">add</span><span class="token punctuation">(</span> <span class="token operator">-</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientLeft<span class="token punctuation">,</span> <span class="token operator">-</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientTop <span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Otherwise loop through the offsetParents and parentNodes</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			<span class="token comment">// Initial element offsets</span>
			<span class="token function">add</span><span class="token punctuation">(</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span> elem<span class="token punctuation">.</span>offsetTop <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Get parent offsets</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> offsetParent <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Add offsetParent offsets</span>
				<span class="token function">add</span><span class="token punctuation">(</span> offsetParent<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span> offsetParent<span class="token punctuation">.</span>offsetTop <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Mozilla and Safari > 2 does not include the border on offset parents</span>
				<span class="token comment">// However Mozilla adds the border for table or table cells</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> mozilla <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^t(able|d|h)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token operator">||</span> safari <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>safari2 <span class="token punctuation">)</span>
					<span class="token function">border</span><span class="token punctuation">(</span> offsetParent <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Add the document scroll offsets if position is fixed on any offsetParent</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>fixed <span class="token operator">&amp;&amp;</span> <span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">"position"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"fixed"</span> <span class="token punctuation">)</span>
					fixed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

				<span class="token comment">// Set offsetChild to previous offsetParent unless it is the body element</span>
				offsetChild  <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token operator">?</span> offsetChild <span class="token operator">:</span> offsetParent<span class="token punctuation">;</span>
				<span class="token comment">// Get next offsetParent</span>
				offsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Get parent scroll offsets</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span> parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>tagName <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body|html$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Remove parent scroll UNLESS that parent is inline or a table to work around Opera inline/table scrollLeft/Top bug</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^inline|table.*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token function">css</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">"display"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token comment">// Subtract parent scroll offsets</span>
					<span class="token function">add</span><span class="token punctuation">(</span> <span class="token operator">-</span>parent<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span> <span class="token operator">-</span>parent<span class="token punctuation">.</span>scrollTop <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Mozilla does not add the border for a parent that has overflow != visible</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span> mozilla <span class="token operator">&amp;&amp;</span> <span class="token function">css</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> <span class="token string">"overflow"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"visible"</span> <span class="token punctuation">)</span>
					<span class="token function">border</span><span class="token punctuation">(</span> parent <span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Get next parent</span>
				parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Safari &lt;= 2 doubles body offsets with a fixed position element/offsetParent or absolutely positioned offsetChild</span>
			<span class="token comment">// Mozilla doubles body offsets with a non-absolutely positioned offsetChild</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>safari2 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>fixed <span class="token operator">||</span> <span class="token function">css</span><span class="token punctuation">(</span>offsetChild<span class="token punctuation">,</span> <span class="token string">"position"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"absolute"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token punctuation">(</span>mozilla <span class="token operator">&amp;&amp;</span> <span class="token function">css</span><span class="token punctuation">(</span>offsetChild<span class="token punctuation">,</span> <span class="token string">"position"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"absolute"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
					<span class="token function">add</span><span class="token punctuation">(</span> <span class="token operator">-</span>doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span> <span class="token operator">-</span>doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>offsetTop <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Add the document scroll offsets if position is fixed</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span> fixed <span class="token punctuation">)</span>
				<span class="token function">add</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span> doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">)</span><span class="token punctuation">,</span>
					Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span>  doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Return an object with top and left properties</span>
		results <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> top<span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> left <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">border</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">add</span><span class="token punctuation">(</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"borderLeftWidth"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">curCSS</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">"borderTopWidth"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">l<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		left <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
		top <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> results<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function-variable function">position</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> results<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Get *real* offsetParent</span>
			<span class="token keyword">var</span> offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

			<span class="token comment">// Get correct offsets</span>
			offset       <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			parentOffset <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body|html$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">:</span> offsetParent<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Subtract element margins</span>
			<span class="token comment">// note: when an element has margin: auto the offsetLeft and marginLeft</span>
			<span class="token comment">// are the same in Safari causing offset.left to incorrectly be 0</span>
			offset<span class="token punctuation">.</span>top  <span class="token operator">-=</span> <span class="token function">num</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'marginTop'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			offset<span class="token punctuation">.</span>left <span class="token operator">-=</span> <span class="token function">num</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'marginLeft'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Add offsetParent borders</span>
			parentOffset<span class="token punctuation">.</span>top  <span class="token operator">+=</span> <span class="token function">num</span><span class="token punctuation">(</span> offsetParent<span class="token punctuation">,</span> <span class="token string">'borderTopWidth'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
			parentOffset<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token function">num</span><span class="token punctuation">(</span> offsetParent<span class="token punctuation">,</span> <span class="token string">'borderLeftWidth'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Subtract the two offsets</span>
			results <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">top</span><span class="token operator">:</span>  offset<span class="token punctuation">.</span>top  <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>top<span class="token punctuation">,</span>
				<span class="token literal-property property">left</span><span class="token operator">:</span> offset<span class="token punctuation">.</span>left <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>left
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> results<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function-variable function">offsetParent</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span> offsetParent <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^body|html$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> jQuery<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">,</span> <span class="token string">'position'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'static'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
			offsetParent <span class="token operator">=</span> offsetParent<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// Create scrollLeft and scrollTop methods</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token string">'Left'</span><span class="token punctuation">,</span> <span class="token string">'Top'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> method <span class="token operator">=</span> <span class="token string">'scroll'</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
	
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> val <span class="token operator">!=</span> <span class="token keyword">undefined</span> <span class="token operator">?</span>

			<span class="token comment">// Set the scroll offset</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">this</span> <span class="token operator">==</span> window <span class="token operator">||</span> <span class="token keyword">this</span> <span class="token operator">==</span> document <span class="token operator">?</span>
					window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>
						<span class="token operator">!</span>i <span class="token operator">?</span> val <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						 i <span class="token operator">?</span> val <span class="token operator">:</span> <span class="token function">jQuery</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">)</span> <span class="token operator">:</span>
					<span class="token keyword">this</span><span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span>

			<span class="token comment">// Return the scroll offset</span>
			<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> window <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> document <span class="token operator">?</span>
				self<span class="token punctuation">[</span> i <span class="token operator">?</span> <span class="token string">'pageYOffset'</span> <span class="token operator">:</span> <span class="token string">'pageXOffset'</span> <span class="token punctuation">]</span> <span class="token operator">||</span>
					jQuery<span class="token punctuation">.</span>boxModel <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">||</span>
					document<span class="token punctuation">.</span>body<span class="token punctuation">[</span> method <span class="token punctuation">]</span> <span class="token operator">:</span>
				<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span> method <span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create innerHeight, innerWidth, outerHeight and outerWidth methods</span>
jQuery<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">"Height"</span><span class="token punctuation">,</span> <span class="token string">"Width"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token keyword">var</span> tl <span class="token operator">=</span> i <span class="token operator">?</span> <span class="token string">"Left"</span>  <span class="token operator">:</span> <span class="token string">"Top"</span><span class="token punctuation">,</span>  <span class="token comment">// top or left</span>
		br <span class="token operator">=</span> i <span class="token operator">?</span> <span class="token string">"Right"</span> <span class="token operator">:</span> <span class="token string">"Bottom"</span><span class="token punctuation">;</span> <span class="token comment">// bottom or right</span>

	<span class="token comment">// innerHeight and innerWidth</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span><span class="token string">"inner"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"padding"</span> <span class="token operator">+</span> tl<span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"padding"</span> <span class="token operator">+</span> br<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">// outerHeight and outerWidth</span>
	jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">[</span><span class="token string">"outer"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">margin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">"inner"</span> <span class="token operator">+</span> name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"border"</span> <span class="token operator">+</span> tl <span class="token operator">+</span> <span class="token string">"Width"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"border"</span> <span class="token operator">+</span> br <span class="token operator">+</span> <span class="token string">"Width"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token punctuation">(</span>margin <span class="token operator">?</span>
				<span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"margin"</span> <span class="token operator">+</span> tl<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"margin"</span> <span class="token operator">+</span> br<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/bugs.jquery.com/raw-attachment/ticket/3055/jquery-modified.js">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2023
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/bugs.jquery.com/pagefind/pagefind-ui.js" type="text/javascript"></script>
    <script>
      window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({
          element: "#search",
          showImages: false,
          translations: {
            placeholder: '',
            zero_results: 'No matches found.'
          }
        })
      })
    </script>
  </body>
</html>
