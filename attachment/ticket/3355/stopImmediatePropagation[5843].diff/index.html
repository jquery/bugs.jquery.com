<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">stopImmediatePropagation[5843].diff on Ticket #3355 – Attachment – jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/PPcE5K0pdi.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          


<div class="flex-column attachment">
  <nav class="content-nav">
    <ul class="flex-row">
      <li>
        <a href="/ticket/3355">Back to Ticket #3355</a>
      </li>
    </ul>
  </nav>

  <h1>
    <a href="/ticket/3355">Ticket #3355</a>: stopImmediatePropagation[5843].diff
  
  <hr>

  <div class="attachment-info">
    <h6>File stopImmediatePropagation[5843].diff, 1.6 KB (added by flesler, September 10, 2008 09:35PM UTC)</h6>
    
      <p>Uses the expando to modify the event objects, doesn&#39;t break old code.</p>
    
  </div>

  
    <div class="attachment-preview">
      
      <pre class="language-diff" tabindex="0"><code class="language-diff">Index: src/event.js
===================================================================
<span class="token coord">--- src/event.js	(revision 5843)</span>
<span class="token coord">+++ src/event.js	(working copy)</span>
<span class="token coord">@@ -190,6 +190,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">					target: elem,
</span><span class="token prefix unchanged"> </span><span class="token line">					preventDefault: function(){},
</span><span class="token prefix unchanged"> </span><span class="token line">					stopPropagation: function(){},
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">					stopImmediatePropagation:stopImmediatePropagation,
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">					timeStamp: now()
</span><span class="token prefix unchanged"> </span><span class="token line">				});
</span><span class="token prefix unchanged"> </span><span class="token line">				data[0][expando] = true; // no need to fix fake event
</span></span><span class="token coord">@@ -271,6 +272,13 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">					event.preventDefault();
</span><span class="token prefix unchanged"> </span><span class="token line">					event.stopPropagation();
</span><span class="token prefix unchanged"> </span><span class="token line">				}
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">				if( event[expando] == -1 ){
</span><span class="token prefix inserted">+</span><span class="token line">					event[expando] = true;
</span><span class="token prefix inserted">+</span><span class="token line">					break;
</span><span class="token prefix inserted">+</span><span class="token line">				}
</span><span class="token prefix inserted">+</span><span class="token line">
</span><span class="token prefix inserted">+</span><span class="token line">				
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			}
</span><span class="token prefix unchanged"> </span><span class="token line">		}
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token coord">@@ -280,7 +288,7 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" "),
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">	fix: function(event) {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">		if ( event[expando] == true )
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		if ( event[expando] )
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			return event;
</span><span class="token prefix unchanged"> </span><span class="token line">
</span><span class="token prefix unchanged"> </span><span class="token line">		// store a copy of the original event object
</span></span><span class="token coord">@@ -313,6 +321,8 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">			originalEvent.cancelBubble = true;
</span><span class="token prefix unchanged"> </span><span class="token line">		};
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">		event.stopImmediatePropagation = stopImmediatePropagation;
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">		// Fix timeStamp
</span><span class="token prefix unchanged"> </span><span class="token line">		event.timeStamp = event.timeStamp || now();
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token coord">@@ -367,6 +377,11 @@</span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">	}
</span><span class="token prefix unchanged"> </span><span class="token line">};
</span><span class="token prefix unchanged"> </span><span class="token line">
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">function stopImmediatePropagation(){
</span><span class="token prefix inserted">+</span><span class="token line">	this[expando] = -1;
</span><span class="token prefix inserted">+</span><span class="token line">	this.stopPropagation();
</span><span class="token prefix inserted">+</span><span class="token line">}
</span><span class="token prefix inserted">+</span><span class="token line">
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">if ( !jQuery.browser.msie ){	
</span><span class="token prefix unchanged"> </span><span class="token line">	// Checks if an event happened on an element within another element
</span><span class="token prefix unchanged"> </span><span class="token line">	// Used in jQuery.event.special.mouseenter and mouseleave handlers</span></span></code></pre>
    </div>
  

  <div class="attachment-download flex-column flex-center">
    <h3>Download in other formats:</h3>
    <a class="attachment-download-link" download="" href="/raw-attachment/ticket/3355/stopImmediatePropagation[5843].diff">Original Format</a>
  </div>
</h1></div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
