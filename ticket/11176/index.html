<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11176 (Custom queue causes loss of event handler?) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11174/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11177/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11176</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 15, 2012 09:33AM UTC</p>
      
        <p>Closed February 27, 2012 03:07PM UTC</p>
      
      
        <p>Last modified March 14, 2012 10:05AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Custom queue causes loss of event handler?</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Nicole Chen &lt;nicole@speakrealenglish.com&gt;
      </td>
      <th>Owned by:</th>
      <td>Nicole Chen &lt;nicole@speakrealenglish.com&gt;</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>event</td>
      
        <th>Version:</th>
      
      <td>1.7.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>HTML file</p><pre class="wiki">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
div.numberBox { float: left; margin: 2%; width: 15%; height: 200px; }
div.active0 { background-color: #ff0000; }
div.active1 { background-color: #111111; }
div.active2 { background-color: #222222; }
div.active3 { background-color: #333333; }
div.active4 { background-color: #444444; }
div.active5 { background-color: #555555; }
div.active6 { background-color: #666666; }
div.active7 { background-color: #777777; }
div.active8 { background-color: #888888; }
div.active9 { background-color: #999999; }
div.active10 { background-color: #0000ff; }
&lt;/style&gt;
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"&gt;&lt;/script&gt;
&lt;script&gt;$.noConflict();&lt;/script&gt;
&lt;script type="text/javascript" src="customq.js"&gt;&lt;/script&gt;
&lt;!-- Using the standard fx queue presents no problems at all. --&gt;
&lt;!--&lt;script type="text/javascript" src="standardq.js"&gt;&lt;/script&gt;--&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;div class="anim"&gt;
  &lt;div class="numberBox active0"&gt;&lt;/div&gt;
  &lt;div class="numberBox active0"&gt;&lt;/div&gt;
  &lt;div class="numberBox active0"&gt;&lt;/div&gt;
  &lt;div class="numberBox active0"&gt;&lt;/div&gt;
  &lt;div class="numberBox active0"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;

</pre><p>Custom Queue JS</p><pre class="wiki">
jQuery(document).ready(function($) {
  var anim = {
    mouseenterFunc: function(e) {
      var elem = $(this), queueName = 'animq';
      elem.stop(queueName, true, true); // Stop animation first.
      // Check which animation state we're in, then start to fade in from there.
      var start = 1;
      if (elem.hasClass('active10')) { return true; }
      else if (elem.hasClass('active1')) { start = 1; }
      else if (elem.hasClass('active2')) { start = 2; }
      else if (elem.hasClass('active3')) { start = 3; }
      else if (elem.hasClass('active4')) { start = 4; }
      else if (elem.hasClass('active5')) { start = 5; }
      else if (elem.hasClass('active6')) { start = 6; }
      else if (elem.hasClass('active7')) { start = 7; }
      else if (elem.hasClass('active8')) { start = 8; }
      else if (elem.hasClass('active9')) { start = 9;}
      else { start = 0; }

      var remove = ['active0', 'active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9'],
      add = ['active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9', 'active10'],
      i = start,
      funcs = [function() { elem.switchClass(remove[0], add[0], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[1], add[1], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[2], add[2], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[3], add[3], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[4], add[4], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[5], add[5], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[6], add[6], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[7], add[7], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[8], add[8], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[9], add[9], 1); elem.dequeue(queueName); return true; }];
      for (i = start; i &lt; 10; i++) {
        elem.delay(50, queueName); // 20fps
        elem.queue(queueName, funcs[i]);
      }
      elem.dequeue(queueName);

      return true;
    },

    mouseleaveFunc: function(e) {
      var elem = $(this), queueName = 'animq';
      elem.stop(queueName, true, true); // Stop animation first.
      // Check which animation state we're in, then start to fade out from there.
      start = 0;
      if (elem.hasClass('active0')) { return true; }
      else if (elem.hasClass('active1')) { start = 1; }
      else if (elem.hasClass('active2')) { start = 2; }
      else if (elem.hasClass('active3')) { start = 3; }
      else if (elem.hasClass('active4')) { start = 4; }
      else if (elem.hasClass('active5')) { start = 5; }
      else if (elem.hasClass('active6')) { start = 6; }
      else if (elem.hasClass('active7')) { start = 7; }
      else if (elem.hasClass('active8')) { start = 8; }
      else if (elem.hasClass('active9')) { start = 9;} 
      else if (elem.hasClass('active10')) { start = 10; }

      var add = ['active0', 'active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9'],
      remove = ['active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9', 'active10'],
      i = start,
      funcs = [function() { elem.switchClass(remove[0], add[0], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[1], add[1], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[2], add[2], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[3], add[3], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[4], add[4], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[5], add[5], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[6], add[6], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[7], add[7], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[8], add[8], 1); elem.dequeue(queueName); return true; },
               function() { elem.switchClass(remove[9], add[9], 1); elem.dequeue(queueName); return true; }];
      for (i = start; i &gt; 0; i--) {
        elem.delay(50, queueName); // 20fps
        elem.queue(queueName, funcs[i - 1]);
      }
      elem.dequeue(queueName);

      return true;
    }
  };

  $("div.anim div").mouseenter(anim.mouseenterFunc);

  $("div.anim div").mouseleave(anim.mouseleaveFunc);
});

</pre><p>Standard Queue JS</p><pre class="wiki">
jQuery(document).ready(function($) {
  var anim = {
    mouseenterFunc: function(e) {
      var elem = $(this);
      elem.stop(true, true); // Stop animation first.
      // Check which animation state we're in, then start to fade in from there.
      var start = 1;
      if (elem.hasClass('active10')) { return true; }
      else if (elem.hasClass('active1')) { start = 1; }
      else if (elem.hasClass('active2')) { start = 2; }
      else if (elem.hasClass('active3')) { start = 3; }
      else if (elem.hasClass('active4')) { start = 4; }
      else if (elem.hasClass('active5')) { start = 5; }
      else if (elem.hasClass('active6')) { start = 6; }
      else if (elem.hasClass('active7')) { start = 7; }
      else if (elem.hasClass('active8')) { start = 8; }
      else if (elem.hasClass('active9')) { start = 9;}
      else { start = 0; }

      var remove = ['active0', 'active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9'],
      add = ['active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9', 'active10'],
      i = start,
      funcs = [function() { elem.switchClass(remove[0], add[0], 1); return true; },
               function() { elem.switchClass(remove[1], add[1], 1); return true; },
               function() { elem.switchClass(remove[2], add[2], 1); return true; },
               function() { elem.switchClass(remove[3], add[3], 1); return true; },
               function() { elem.switchClass(remove[4], add[4], 1); return true; },
               function() { elem.switchClass(remove[5], add[5], 1); return true; },
               function() { elem.switchClass(remove[6], add[6], 1); return true; },
               function() { elem.switchClass(remove[7], add[7], 1); return true; },
               function() { elem.switchClass(remove[8], add[8], 1); return true; },
               function() { elem.switchClass(remove[9], add[9], 1); return true; }];
      for (i = start; i &lt; 10; i++) {
        elem.delay(50); // 20fps
        funcs[i]();
      }

      return true;
    },

    mouseleaveFunc: function(e) {
      var elem = $(this);
      elem.stop(true, true); // Stop animation first.
      // Check which animation state we're in, then start to fade out from there.
      start = 0;
      if (elem.hasClass('active0')) { return true; }
      else if (elem.hasClass('active1')) { start = 1; }
      else if (elem.hasClass('active2')) { start = 2; }
      else if (elem.hasClass('active3')) { start = 3; }
      else if (elem.hasClass('active4')) { start = 4; }
      else if (elem.hasClass('active5')) { start = 5; }
      else if (elem.hasClass('active6')) { start = 6; }
      else if (elem.hasClass('active7')) { start = 7; }
      else if (elem.hasClass('active8')) { start = 8; }
      else if (elem.hasClass('active9')) { start = 9;} 
      else if (elem.hasClass('active10')) { start = 10; }

      var add = ['active0', 'active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9'],
      remove = ['active1', 'active2', 'active3', 'active4', 'active5', 'active6', 'active7', 'active8', 'active9', 'active10'],
      i = start,
      funcs = [function() { elem.switchClass(remove[0], add[0], 1); return true; },
               function() { elem.switchClass(remove[1], add[1], 1); return true; },
               function() { elem.switchClass(remove[2], add[2], 1); return true; },
               function() { elem.switchClass(remove[3], add[3], 1); return true; },
               function() { elem.switchClass(remove[4], add[4], 1); return true; },
               function() { elem.switchClass(remove[5], add[5], 1); return true; },
               function() { elem.switchClass(remove[6], add[6], 1); return true; },
               function() { elem.switchClass(remove[7], add[7], 1); return true; },
               function() { elem.switchClass(remove[8], add[8], 1); return true; },
               function() { elem.switchClass(remove[9], add[9], 1); return true; }];
      for (i = start; i &gt; 0; i--) {
        elem.delay(50); // 20fps
        funcs[i - 1]();
      }

      return true;
    }
  };

  $("div.anim div").mouseenter(anim.mouseenterFunc);

  $("div.anim div").mouseleave(anim.mouseleaveFunc);
});

</pre><p>According to jQuery UI Bug Tracker, this seems like a core bug, not a UI bug.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 15, 2012 09:56AM UTC by <span class="author">Nicole Chen &lt;nicole@speakrealenglish.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>So very very sorry for not reading instructions!!</p><p>Custom Queue: <a href="http://jsfiddle.net/q9fyx/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/q9fyx/1/</a></p><p>Standard Queue: <a href="http://jsfiddle.net/DCDrv/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/DCDrv/</a></p><p>Note how the custom queue loses the event handler after flicking the mouse wildly between the div's.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 08, 2012 01:05PM UTC by <span class="author">sindresorhus</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ Nicole Chen &lt;nicole@speakrealenglish.com&gt;</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project!</p><p>However, we do not have the resources to debug big copy/pasted testcases. Can you please resubmit a minimal testcase, reduced to as few lines as possible, showing the issue. We would also be grateful if you could describe the problem in more than one sentence. In addition, when hovering over one of the boxes, it behaves differently in both testcases.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 11, 2012 10:33AM UTC by <span class="author">Nicole Chen &lt;nicole@speakrealenglish.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi sindresorhus,</p><p>Sorry about that. I did post a jsfiddle testcase. Is that alright? It's as simplified as I can manage already. In brief, it's about starting and stopping and clearing event queues. Note the different behavior between custom queue and fx queue.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2012 03:07PM UTC by <span class="author">sindresorhus</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">event</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I suggest you try asking in the <a href="https://forum.jquery.com" class="ext-link"><span class="icon"></span>forums</a>, #jquery on Freenode, or on <a href="http://stackoverflow.com/" class="ext-link"><span class="icon"></span>StackOverflow</a>, to determine that it's actually a jQuery bug. If it's determined that it is a jQuery bug, feel free to resubmit a simplified testcase with and a more detailed explanation of the issue.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
