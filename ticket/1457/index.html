<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1457 (treeview does not display lastCollapsable) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1456/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1458/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#1457</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 02, 2007 06:23PM UTC</p>
      
        <p>Closed September 24, 2007 09:14PM UTC</p>
      
      
        <p>Last modified March 15, 2012 05:09PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">treeview does not display lastCollapsable</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jgriffin316
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.1.4">1.1.4</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>plugin</td>
      
        <th>Version:</th>
      
      <td>1.1.3</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>treeview</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>If the last item in a sublist is another sublist the lastCollapsable icon is not displayed. This has been tested on Firefox 2.0 and IE 6.0. In the example listed below Item 2.2 should have lastCollapsable as a class, instead it has last. I am using jQuery 1.1.3 and treeview 1.2.</p><p>&lt;!DOCTYPE html PUBLIC "-<em>W3C</em>DTD XHTML 1.0 Strict<em>EN" "http:</em>www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</p><p>&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;</p><p>&lt;head&gt;</p><p>    &lt;title&gt;Treeview Test&lt;/title&gt;</p><p>	&lt;meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/&gt;</p><p>	&lt;script src="jquery.js" type="text/javascript"&gt;&lt;/script&gt;</p><p>	&lt;script src="jquery.treeview.js" type="text/javascript"&gt;&lt;/script&gt;</p><p>	&lt;script type="text/javascript"&gt;</p><p>	$(document).ready(function(){</p><p>        $("ul").Treeview();</p><p>	});</p><p>	&lt;/script&gt;</p><p>    &lt;style type="text/css"&gt;</p><p>        .treeview, .treeview ul {  </p><p>            padding: 0; </p><p>            margin: 0; </p><p>            list-style: none; </p><p>        }     </p><p>        .treeview li {  </p><p>            margin: 0; </p><p>            padding: 4px 0 3px 20px; </p><p>        } </p><p>        .treeview li { background: url(images/tv-item.gif) 0 0 no-repeat; } </p><p>        .treeview .collapsable { background-image: url(images/tv-collapsable.gif); } </p><p>        .treeview .expandable { background-image: url(images/tv-expandable.gif); } </p><p>        .treeview .last { background-image: url(images/tv-item-last.gif); } </p><p>        .treeview .lastCollapsable { background-image: url(images/tv-collapsable-last.gif); } </p><p>        .treeview .lastExpandable { background-image: url(images/tv-expandable-last.gif); }</p><p>    &lt;/style&gt;</p><p>&lt;/head&gt;</p><p>&lt;body&gt;</p><p>&lt;ul&gt; </p><p>    &lt;li&gt;Item 1</p><p>        &lt;ul&gt; </p><p>            &lt;li&gt;Item 1.1&lt;/li&gt; </p><p>        &lt;/ul&gt;</p><p>    &lt;/li&gt; </p><p>    &lt;li&gt;Item 2</p><p>        &lt;ul&gt; </p><p>            &lt;li&gt;Item 2.1</p><p>                &lt;ul&gt; </p><p>                  &lt;li&gt;Item 2.1.1&lt;/li&gt; </p><p>                  &lt;li&gt;Item 2.1.2&lt;/li&gt; </p><p>                &lt;/ul&gt; </p><p>            &lt;/li&gt; </p><p>            &lt;li&gt;Item 2.2</p><p>                &lt;ul&gt; </p><p>                  &lt;li&gt;Item 2.2.1&lt;/li&gt; </p><p>                  &lt;li&gt;Item 2.2.2&lt;/li&gt; </p><p>                &lt;/ul&gt; </p><p>            &lt;/li&gt; </p><p>        &lt;/ul&gt; </p><p>    &lt;/li&gt; </p><p>&lt;/ul&gt;</p><p>&lt;/body&gt;</p><p>&lt;/html&gt;</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 30, 2007 08:17AM UTC by <span class="author">mbirth</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This can be solved by removing these lastCollapsable and lastExpandable appearances (lines# 113, 114, 187, 196, 216 and 221) from the treeview source code so that all last elements have both classes, "last" and "collapsable", assigned. You just have to change the CSS code to:</p><pre class="wiki">
.treeview .last.collapsable { background-image: url(img/treeview/tv-collapsable-last.gif); }
.treeview .last.expandable { background-image: url(img/treeview/tv-expandable-last.gif); }
</pre><p>Works fine for me. You can even replace the remaining few replaceClass() and swapClass()-calls by chained toggleClass() or removeClass().addClass() statements and then remove those two functions.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 30, 2007 08:33AM UTC by <span class="author">mbirth</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Just for the curious ones:</p><pre class="wiki">
0186: .swapClass( CLASSES.collapsable, CLASSES.expandable )
</pre><p>can be replaced by</p><pre class="wiki">
0186: .toggleClass( CLASSES.collapsable ).toggleClass( CLASSES.expandable )
</pre><p>and</p><pre class="wiki">
0195: .replaceclass( CLASSES.collapsable, CLASSES.expandable )
</pre><p>with</p><pre class="wiki">
0195: .filter( CLASSES.collapsable ).removeClass( CLASSES.collapsable ).addClass( CLASSES.expandable ).end()
</pre><p>Then you can remove lines 138 through 153 (swapClass and replaceClass).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 03, 2007 11:32AM UTC by <span class="author">gnattali</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>this problem occurs when the target "ul" is not specified uniquely.</p><p>so in this example case</p><pre class="wiki">
$(document).ready(function(){ $("ul").Treeview(); });
</pre><p>this part should be like following</p><pre class="wiki">
$(document).ready(function(){ $("body &gt; ul").Treeview(); });
</pre><p>or</p><p>if you don't like to care about these kind of trivial things,</p><p>change the source as follows</p><pre class="wiki">
0216: .swapClass(CLASSES.last, CLASSES.lastExpandable)
</pre><p>to</p><pre class="wiki">
0216: .replaceclass(CLASSES.last, CLASSES.lastExpandable)
</pre><p>and</p><pre class="wiki">
221: .swapClass(CLASSES.last, CLASSES.lastCollapsable)
</pre><p>to</p><pre class="wiki">
221: .replaceclass(CLASSES.last, CLASSES.lastCollapsable)
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 24, 2007 09:14PM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can't replicate the initial issue.</p><p>From the suggested code improvements, only the last one actually works. Commited in revision [3471].</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
