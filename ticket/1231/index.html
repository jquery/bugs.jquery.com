<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1231 (jQuery 1.1.3 testbuild breaks latest validation plugin in IE6) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1230/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1232/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#1231</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened May 21, 2007 09:11PM UTC</p>
      
        <p>Closed June 29, 2007 10:07PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery 1.1.3 testbuild breaks latest validation plugin in IE6</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        joern
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.1.3">1.1.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.1.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>An update from 1.1.2 to the latest revision in SVN breaks a lot of the validation plugin in IE6. The testsuite should be quite helpful tracking down the issues:</p><p><a href="http://jquery.bassistance.de/validate-113/demo-test/test.html" class="ext-link"><span class="icon"></span>http://jquery.bassistance.de/validate-113/demo-test/test.html</a></p><p>Plugin in svn:</p><p><a href="http://jqueryjs.googlecode.com/svn/trunk/plugins/validate" class="ext-link"><span class="icon"></span>http://jqueryjs.googlecode.com/svn/trunk/plugins/validate</a></p><p>A diff is not very useful due to the tons of changes since 1.1.2. I'll try to track down specific problems and report them here.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 21, 2007 10:09PM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I still have no real idea whats going wrong. At least I figured out that the testsuite outputs a slight different (not any better result) when messing with the required-validation-method (around line 828 of jquery.validate.js in svn).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 22, 2007 02:18PM UTC by <span class="author">DanSwitzer2</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Jörn,</p><p>After some testing, it looks like the problem may lie in the context selectors. Most of the errors being thrown in IE seems to be in the getLength function around the statement:</p><p>if( /radio|checkbox/i.test(element.type) )</p><p>	return jQuery(element.form || document).find('[@name="' + element.name + '"]:checked').length;</p><p>I tried changing the line to:</p><p>if( /radio|checkbox/i.test(element.type) )</p><p>	return jQuery('[@name="' + element.name + '"]:checked', element.form || document).length;</p><p>And jQuery still doesn't find any matches. However, if I change the line to:</p><p>if( /radio|checkbox/i.test(element.type) )</p><p>	return jQuery('[@name="' + element.name + '"]:checked').length;</p><p>All of the sudden it starts finding matches. This makes me think there's an issue in jQuery's selector code.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 22, 2007 04:31PM UTC by <span class="author">DanSwitzer2</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If you run the following code, I think it illustrates the problem:</p><pre class="wiki">
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;jQuery - Field Problem&lt;/title&gt;
	&lt;script type="text/javascript" src="./lib/jquery-1.1.3a.js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
	$(document).ready(
		function (){
			var aTest = [
				'$("#radio1", $("#frmExample"))'
				, '$("#radio1", document.getElementById("frmExample"))'
				, '$("#radio1")'
				, '$("#radio1", document.frmExample)'
				, '$("#frmExample").find("#radio1")'
				, '$(document.getElementById("frmExample")).find("#radio1")'
				, '$(document.frmExample).find("#radio1")'
				, '$("#radio1", $("#frmExample")[0])'
				, '$($("#frmExample")[0]).find("#radio1")'
				, '$(document.getElementById("debug"))'
			];

			var oDebug = $("#debug");

			for( var i=0; i &lt; aTest.length; i++ ){
				oDebug.append(
					$("&lt;div&gt;").html(aTest[i] + ".length = " + eval(aTest[i]).length)
				);
			}

		}
	);
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h3&gt;
	All of the below selector should return 1 element.
&lt;/h3&gt;

&lt;div id="debug"&gt;&lt;/div&gt;

&lt;form id="frmExample" action="formaction"&gt;
	&lt;input type="text" name="action" value="Test" id="text1"/&gt;
	&lt;input type="text" name="text2" value="T" id="text2"/&gt;
	&lt;input type="text" name="text2" value="TestTestTest" id="text3"/&gt;

	&lt;input type="text" name="action" value="0" id="value1"/&gt;
	&lt;input type="text" name="text2" value="10" id="value2"/&gt;
	&lt;input type="text" name="text2" value="1000" id="value3"/&gt;

	&lt;input type="radio" name="radio1" id="radio1"/&gt;
	&lt;input type="radio" name="radio2" id="radio2" checked="checked"/&gt;
	&lt;input type="radio" name="radio" id="radio3"/&gt;
	&lt;input type="radio" name="radio" id="radio4" checked="checked"/&gt;

	&lt;input type="checkbox" name="check" id="check1" checked="checked"/&gt;
	&lt;input type="checkbox" name="check" /&gt;

	&lt;input type="checkbox" name="check2" id="check2"/&gt;

	&lt;input type="checkbox" name="check3" id="check3" checked="checked"/&gt;
	&lt;input type="checkbox" name="check3" checked="checked"/&gt;
	&lt;input type="checkbox" name="check3" checked="checked"/&gt;
	&lt;input type="checkbox" name="check3" checked="checked"/&gt;
	&lt;input type="checkbox" name="check3" checked="checked"/&gt;

	&lt;input type="hidden" name="hidden" id="hidden1"/&gt;
	&lt;input type="text" style="display:none;" name="foo[bar]" id="hidden2"/&gt;

	&lt;input type="text" readonly="readonly" id="name" name="name" value="name" /&gt;

	&lt;button name="button"&gt;Button&lt;/button&gt;

	&lt;textarea id="area1"&gt;foobar&lt;/textarea&gt;


	&lt;textarea id="area2"&gt;&lt;/textarea&gt;

	&lt;select name="select1" id="select1"&gt;
		&lt;option id="option1a" value=""&gt;Nothing&lt;/option&gt;
		&lt;option id="option1b" value="1"&gt;1&lt;/option&gt;
		&lt;option id="option1c" value="2"&gt;2&lt;/option&gt;
		&lt;option id="option1d" value="3"&gt;3&lt;/option&gt;
	&lt;/select&gt;
	&lt;select name="select2" id="select2"&gt;
		&lt;option id="option2a" value=""&gt;Nothing&lt;/option&gt;
		&lt;option id="option2b" value="1"&gt;1&lt;/option&gt;
		&lt;option id="option2c" value="2"&gt;2&lt;/option&gt;
		&lt;option id="option2d" selected="selected" value="3"&gt;3&lt;/option&gt;
	&lt;/select&gt;
	&lt;select name="select3" id="select3" multiple="multiple"&gt;
		&lt;option id="option3a" value=""&gt;Nothing&lt;/option&gt;
		&lt;option id="option3b" selected="selected" value="1"&gt;1&lt;/option&gt;
		&lt;option id="option3c" selected="selected" value="2"&gt;2&lt;/option&gt;
		&lt;option id="option3d" value="3"&gt;3&lt;/option&gt;
	&lt;/select&gt;
	&lt;select name="select4" id="select4" multiple="multiple"&gt;
		&lt;option id="option3b" selected="selected" value="1"&gt;1&lt;/option&gt;
		&lt;option id="option3c" selected="selected" value="2"&gt;2&lt;/option&gt;
		&lt;option id="option3d" selected="selected" value="3"&gt;3&lt;/option&gt;
		&lt;option id="option3e" selected="selected" value="4"&gt;4&lt;/option&gt;
		&lt;option id="option3f" selected="selected" value="5"&gt;5&lt;/option&gt;
	&lt;/select&gt;
	&lt;select name="select5" id="select5" multiple="multiple"&gt;
		&lt;option id="option3a" value="0"&gt;0&lt;/option&gt;
		&lt;option id="option3b" value="1"&gt;1&lt;/option&gt;
		&lt;option id="option3c" value="2"&gt;2&lt;/option&gt;
		&lt;option id="option3d" value="3"&gt;3&lt;/option&gt;
	&lt;/select&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;

</pre><p>When you pass in a form element that's retrieved by the document.getElementById() method, jQuery does not properly convert that to a jQuery object. Referencing the element by using other DOM methods works as expected.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2007 12:52PM UTC by <span class="author">brandon</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This was the result of Rev [1892] which was rolled back in Rev [1961]</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2007 08:45PM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks Brandon, that fixed most issues I had with 1.1.3 and the validation plugin. But there is one quirk left, something else that worked fine with jQuery 1.1.2. A testpage is here: <a href="http://jquery.bassistance.de/validate-113/demo-test/test.html" class="ext-link"><span class="icon"></span>http://jquery.bassistance.de/validate-113/demo-test/test.html</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2007 10:08AM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok, the actual problem occurs in line 103 of the metadata plugin. I got there by removing the try-catch-block inside testrunner.js' test-function (around callback()) and using Microsofts Script Debugger. Adding "var el = this" before the line that causes the error shows that "this" points to a DOM element without any (interesting) properties set. It has a ownerDocument (the testsuite page) but no parentnode etc. The callstack contains jQuery.clean, I guess thats where the regression occured, because that method got a lot of attention in 1.1.3.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2007 10:07PM UTC by <span class="author">brandon</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It was with the clean method and it is now fixed in Rev [2192].</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
