<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#6748 (xhr.status === 0 should be treated as 304 (Not Modified) only in Opera) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/6747/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/6749/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#6748</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened July 01, 2010 01:00AM UTC</p>
      
        <p>Closed September 30, 2010 03:59PM UTC</p>
      
      
        <p>Last modified March 15, 2012 01:08PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">xhr.status === 0 should be treated as 304 (Not Modified) only in Opera</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        benjamn
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.4.3">1.4.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.4.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Consider the boolean expression returned by <code>httpSuccess()</code>:</p><pre class="wiki">
    return !xhr.status && location.protocol === "file:" ||
        // Opera returns 0 when status is 304
        ( xhr.status &gt;= 200 && xhr.status &lt; 300 ) ||
        xhr.status === 304 || xhr.status === 1223 || xhr.status === 0;
</pre><p>Opera may indeed return 0 when the status should be 304, but other browsers (notably, Chrome Mac) return 0 as a result of certain errors (e.g., same-origin restrictions).</p><p>Treating xhr.status === 0 as success is a special case that should apply only in Opera.  This subtle difference in behavior could be keeping folks from upgrading from 1.3.x, so it should be fixed if possible.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (1)</summary>

  <ul class="ticket-attachments">
    
      <li>
        <a href="/attachment/ticket/6748/0001-Treat-an-xhr.status-of-0-as-successful-only-in-Opera.patch/index.html">0001-Treat-an-xhr.status-of-0-as-successful-only-in-Opera.patch</a> (1.3 KB) - added by benjamn
        <strong>July 01, 2010 01:02AM UTC</strong>.<br>
        <p>Patch to make the Opera special case more Opera-specific.</p>
      </li>
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 02, 2010 02:42AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi, do you have any further information on this bug? We try hard to avoid use of jQuery.browser. Is there any doc or acknowledgment by Opera about it that you can find?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 02, 2010 06:24PM UTC by <span class="author">benjamn</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:1 dmethvin]:</p><blockquote> Hi, do you have any further information on this bug? We try hard to avoid use of jQuery.browser. Is there any doc or acknowledgment by Opera about it that you can find?</blockquote><p>The original code contains an explicit special case for Opera, as indicated by the existing comment.  Treating <code>xhr.status === 0</code> as success in any browser other than Opera is incorrect.  I would be happy for jQuery to drop support for this Opera quirk by removing the <code>xhr.status === 0</code> clause altogether, but if we're trying to pander to a single browser's bug, then we should at least be precise about it.  If there is any acceptable use of <code>jQuery.browser.opera</code>, this is such a case.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 02, 2010 06:27PM UTC by <span class="author">benjamn</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has come up before, without clear resolution:</p><p><a href="http://forum.jquery.com/topic/jquery-ajax-triggers-success-callback-on-readystate-4-status-0" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/jquery-ajax-triggers-success-callback-on-readystate-4-status-0</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 11, 2010 03:24PM UTC by <span class="author">execjosh</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:2 benjamn]:</p><blockquote> Replying to [comment:1 dmethvin]: &gt; Hi, do you have any further information on this bug? We try hard to avoid use of jQuery.browser. Is there any doc or acknowledgment by Opera about it that you can find?  The original code contains an explicit special case for Opera, as indicated by the existing comment.  Treating <code>xhr.status === 0</code> as success in any browser other than Opera is incorrect.  I would be happy for jQuery to drop support for this Opera quirk by removing the <code>xhr.status === 0</code> clause altogether, but if we're trying to pander to a single browser's bug, then we should at least be precise about it.  If there is any acceptable use of <code>jQuery.browser.opera</code>, this is such a case.</blockquote><p>I agree that there is a need to be precise ''in code'' and not only ''in comments''.</p><p>In my tests, I have found that this issue affects at least:</p> <ul><li>Chrome (v5.0.375.99)</li> <li>Firefox (v3.6.6)</li></ul><h2>Test Code</h2><h3>Setup</h3><p> 1. Make code accessible via http from ''server''</p><p> 1. Load html file in browser on ''client''</p><p>   a. Ensure ''client'' and ''server'' are different machines</p><p>   a. Ensure direct connection (i.e., _no proxy_) between ''client'' and ''server''</p><p>   a. I used VirtualBox locally, connected via host-only network </p><p> 1. Sever connection betweent ''client'' and ''server''</p><p> 1. Press button and wait for result</p><h3>Expected Results</h3><p><code>OnError["504", "error", ""]</code></p><h3>Actual Results</h3><p><code>OnSuccess["0", "success", ""]</code></p><h3>Code</h3><p>filename: ''jquery-bug-6748.html''</p><pre class="wiki">
&lt;!DOCTYPE html&gt;
&lt;title&gt;jQuery bug #6748&lt;/title&gt;
&lt;script src="http://code.jquery.com/jquery-1.4.2.min.js"&gt;&lt;/script&gt;
&lt;input id="b" type="button" value="jQuery-bug-6748"&gt;
&lt;div id="p"&gt;&lt;/div&gt;
&lt;script&gt;
(function($){
  $(document).ready(function(){
    function f(n,x,s,e){$('#p').html(['&lt;div&gt;',n,'["',x.status,'", "',s,'", "',e,'"]&lt;/div&gt;'].join(""))}
    $('#b').click(function(){
      $.ajax({
        async:true,
        cache:false,
        error:function(x,s,e){f('OnError',x,s,e)},
        success:function(d,s,x){f('OnSuccess',x,s)}
      });
    });
  });
})(jQuery);
&lt;/script&gt;
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 11, 2010 03:30PM UTC by <span class="author">execjosh</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> Expected Results <code>OnError["504", "error", ""]</code></blockquote><p>Woops, this was generated using a proxy...</p><p>It should read as follows <code>OnError["0","error",""]</code>.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 23, 2010 04:30AM UTC by <span class="author">curiousdannii</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/6060">#6060</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 22, 2010 01:06AM UTC by <span class="author">curiousdannii</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please close as <a href="/ticket/6060">#6060</a> has been fixed.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 30, 2010 03:59PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-new">→ undecided</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2010 04:55PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/7647">#7647</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
