<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#27 (.css() returns incorrect values) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/26/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/28/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#27</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened July 02, 2006 03:51PM UTC</p>
      
        <p>Closed November 18, 2006 01:16AM UTC</p>
      
      
        <p>Last modified April 23, 2017 11:29PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.css() returns incorrect values</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        dave.methvin@gmail.c
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/"></a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th class="missing">Version:</th>
      
      <td></td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>css</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The core .css() method does not return values that reflect the underlying css values for the element. The method attempts to convert many properties to raw numbers and loses the units in the process. Sample code:</p><pre class="wiki">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;!-- saved from url=(0014)about:internet --&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript" src="jquery-1.0a.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt; &lt;!--
function test()
{
 alert(document.getElementById("qq").style.height); // "200px"
 alert(document.getElementById("qq").style.borderBottomWidth); // "2px"
 alert(document.getElementById("qq").style.borderBottomColor); // "red"
 alert($("#qq").css("borderBottomWidth")); // 2 (number without units)
 alert($("#qq").css("borderBottomColor")); // NaN

 // IE6 quirks (doctype above removed): 200 (number without units)
 // IE6 standards (doctype strict): 230 (number without units)
 // Firefox 1.5: 230 (number without units)
 alert($("#qq").css("height"));
}
// --&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="test()"&gt;
 &lt;div id="qq" style="height:200px; border: 2px solid red; padding-top: 2em;"&gt;
 I can still hear you saying, you would never break the chain.
 &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>In a plugin I'm building, I need to obtain the border width/color and padding for each side separately, and I pass them back in later for other elements. Because of that, I really need any value returned by .css() to be usable as an input value later, e.g., $('#div1').css('borderBottomColor', $('#div2').css('borderBottomColor')). With all the conversions going on here that's not possible.</p><p>I suggest that .css() only return the actual css attributes (including the height and width cases) and not attempt any heroics. Conversion or canonicalization should happen elsewhere, including conversion from non-pixel units to pixels, or conversion of color spaces (e.g., #ff0, #ffff00, rgb(255,255,0), rgb(100%,100%,0), rgba(255,255,0,0) are all the same thing color-wise but they have to be converted to a common format for operations like blending).</p><p>Some of these breaking changes were made recently so I doubt there's much external code that depends on it. The biggest impact I see from this change is with height and width, since several plugins seem to have made use of the fact that .css('height') returns a raw pixel number (one that isn't the css height btw). However, I'm convinced that down this path lies madness; perhaps another way to do this is with .height() and .width() methods that take all the quirks into account?</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 05, 2006 04:20AM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok - I put a lot of work into this bug this evening, here is what I came up with:</p><ul><li>I no longer do any unecessary parseFloats or parseInts - so you will always get the string representation of the style (with the exception of height/width)</li><li>There were a mess of bugs with height/width reporting. IE 6 in Quirks, IE 6 in Standards, Firefox, and Safari all report 200 as being the height - both when the element has a display of none and has a display of block. This was, by far, the hardest part to fix, but it was worth it.</li></ul><p>For now, I'm not going to return the "true" height of the element, only this real pixel height, because it is terribly useful - and used by a lot of code (like the fx module, interface, and other fx plugins). I think this is a moderate concession to make, and I hope you'll agree (in favor of having accurate height reporting that works no matter what).</p><p>All of this is in SVN rev 124. Thanks for the great use-case, it certainly gave me something to do for the past couple hours ;-P</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 07, 2006 08:18PM UTC by <span class="author">dave.methvin</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think that's a good compromise, and the solution with $.swap was genius. I realize that a lot of stuff depends on height and width being returned as a raw pixel number, but it would be nice to fix it eventually. At least now I can safely throw "px" after that number and know it's right, so thanks!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 27, 2006 08:10AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-new">→ ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-new">→ blocker</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-new">→ bug</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 18, 2006 01:16AM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-new">→ ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-new">→ blocker</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-new">→ bug</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 23, 2017 11:29PM UTC by <span class="author">rjollos</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">&amp;#34;&amp;#34;</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">The core .css() method does not return values that reflect the underlying css values for the element. The method attempts to convert many properties to raw numbers and loses the units in the process. Sample code:&#92;
&#92;
{{{&#92;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;&#92;
&lt;!-- saved from url=(0014)about:internet --&gt;&#92;
&lt;html&gt;&#92;
&lt;head&gt;&#92;
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.0a.js&quot;&gt;&lt;/script&gt;&#92;
&lt;script type=&quot;text/javascript&quot;&gt; &lt;!--&#92;
function test()&#92;
{&#92;
 alert(document.getElementById(&quot;qq&quot;).style.height); // &quot;200px&quot;&#92;
 alert(document.getElementById(&quot;qq&quot;).style.borderBottomWidth); // &quot;2px&quot;&#92;
 alert(document.getElementById(&quot;qq&quot;).style.borderBottomColor); // &quot;red&quot;&#92;
 alert($(&quot;#qq&quot;).css(&quot;borderBottomWidth&quot;)); // 2 (number without units)&#92;
 alert($(&quot;#qq&quot;).css(&quot;borderBottomColor&quot;)); // NaN&#92;
&#92;
 // IE6 quirks (doctype above removed): 200 (number without units)&#92;
 // IE6 standards (doctype strict): 230 (number without units)&#92;
 // Firefox 1.5: 230 (number without units)&#92;
 alert($(&quot;#qq&quot;).css(&quot;height&quot;));&#92;
}&#92;
// --&gt;&#92;
&lt;/script&gt;&#92;
&lt;/head&gt;&#92;
&lt;body onload=&quot;test()&quot;&gt;&#92;
 &lt;div id=&quot;qq&quot; style=&quot;height:200px; border: 2px solid red; padding-top: 2em;&quot;&gt;&#92;
 I can still hear you saying, you would never break the chain.&#92;
 &lt;/div&gt;&#92;
&lt;/body&gt;&#92;
&lt;/html&gt;&#92;
}}}&#92;
&#92;
In a plugin I&#39;m building, I need to obtain the border width/color and padding for each side separately, and I pass them back in later for other elements. Because of that, I really need any value returned by .css() to be usable as an input value later, e.g., $(&#39;#div1&#39;).css(&#39;borderBottomColor&#39;, $(&#39;#div2&#39;).css(&#39;borderBottomColor&#39;)). With all the conversions going on here that&#39;s not possible.&#92;
&#92;
I suggest that .css() only return the actual css attributes (including the height and width cases) and not attempt any heroics. Conversion or canonicalization should happen elsewhere, including conversion from non-pixel units to pixels, or conversion of color spaces (e.g., #ff0, #ffff00, rgb(255,255,0), rgb(100%,100%,0), rgba(255,255,0,0) are all the same thing color-wise but they have to be converted to a common format for operations like blending).&#92;
&#92;
Some of these breaking changes were made recently so I doubt there&#39;s much external code that depends on it. The biggest impact I see from this change is with height and width, since several plugins seem to have made use of the fact that .css(&#39;height&#39;) returns a raw pixel number (one that isn&#39;t the css height btw). However, I&#39;m convinced that down this path lies madness; perhaps another way to do this is with .height() and .width() methods that take all the quirks into account?&#92;
</span> → <span class="change-field-new">The core .css() method does not return values that reflect the underlying css values for the element. The method attempts to convert many properties to raw numbers and loses the units in the process. Sample code:&#92;
&#92;
{{{&#92;
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;&#92;
&lt;!-- saved from url=(0014)about:internet --&gt;&#92;
&lt;html&gt;&#92;
&lt;head&gt;&#92;
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.0a.js&quot;&gt;&lt;/script&gt;&#92;
&lt;script type=&quot;text/javascript&quot;&gt; &lt;!--&#92;
function test()&#92;
{&#92;
 alert(document.getElementById(&quot;qq&quot;).style.height); // &quot;200px&quot;&#92;
 alert(document.getElementById(&quot;qq&quot;).style.borderBottomWidth); // &quot;2px&quot;&#92;
 alert(document.getElementById(&quot;qq&quot;).style.borderBottomColor); // &quot;red&quot;&#92;
 alert($(&quot;#qq&quot;).css(&quot;borderBottomWidth&quot;)); // 2 (number without units)&#92;
 alert($(&quot;#qq&quot;).css(&quot;borderBottomColor&quot;)); // NaN&#92;
&#92;
 // IE6 quirks (doctype above removed): 200 (number without units)&#92;
 // IE6 standards (doctype strict): 230 (number without units)&#92;
 // Firefox 1.5: 230 (number without units)&#92;
 alert($(&quot;#qq&quot;).css(&quot;height&quot;));&#92;
}&#92;
// --&gt;&#92;
&lt;/script&gt;&#92;
&lt;/head&gt;&#92;
&lt;body onload=&quot;test()&quot;&gt;&#92;
 &lt;div id=&quot;qq&quot; style=&quot;height:200px; border: 2px solid red; padding-top: 2em;&quot;&gt;&#92;
 I can still hear you saying, you would never break the chain.&#92;
 &lt;/div&gt;&#92;
&lt;/body&gt;&#92;
&lt;/html&gt;&#92;
}}}&#92;
&#92;
In a plugin I&#39;m building, I need to obtain the border width/color and padding for each side separately, and I pass them back in later for other elements. Because of that, I really need any value returned by .css() to be usable as an input value later, e.g., $(&#39;#div1&#39;).css(&#39;borderBottomColor&#39;, $(&#39;#div2&#39;).css(&#39;borderBottomColor&#39;)). With all the conversions going on here that&#39;s not possible.&#92;
&#92;
I suggest that .css() only return the actual css attributes (including the height and width cases) and not attempt any heroics. Conversion or canonicalization should happen elsewhere, including conversion from non-pixel units to pixels, or conversion of color spaces (e.g., #ff0, #ffff00, rgb(255,255,0), rgb(100%,100%,0), rgba(255,255,0,0) are all the same thing color-wise but they have to be converted to a common format for operations like blending).&#92;
&#92;
Some of these breaking changes were made recently so I doubt there&#39;s much external code that depends on it. The biggest impact I see from this change is with height and width, since several plugins seem to have made use of the fact that .css(&#39;height&#39;) returns a raw pixel number (one that isn&#39;t the css height btw). However, I&#39;m convinced that down this path lies madness; perhaps another way to do this is with .height() and .width() methods that take all the quirks into account?&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
