<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#12298 (A selector that begins or ends with a comma fails in 1.8 but works in 1.7.2) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/12297/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/12299/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#12298</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 14, 2012 02:57PM UTC</p>
      
        <p>Closed August 14, 2012 05:07PM UTC</p>
      
      
        <p>Last modified August 14, 2012 06:13PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">A selector that begins or ends with a comma fails in 1.8 but works in 1.7.2</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        uniqname
      </td>
      <th>Owned by:</th>
      <td>uniqname</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.8.0</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>In previous versions of jQuery (1.7.2 specifically) if a selector has a comma either at the beginning or end -- for instance if an empty array is joined and concatenated to a string -- the selector still matches correctly for other valid selectors in the list. This has failed to be the case in 1.8</p><p>Using jQuery 1.8, an error is thrown</p><p><a href="http://jsfiddle.net/qARJ8/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/qARJ8/1/</a></p><p>Using jQuery 1.7.2 the selector parses correctly</p><p><a href="http://jsfiddle.net/qARJ8/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/qARJ8/2/</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 03:55PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ uniqname</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>But ... isn't the 1.8 behavior correct? A leading or trailing comma would seem to be a syntax error. For your specific case in the fiddle, you could have just pushed <code>'[data-attr]'</code> onto <code>list_o_elements</code>. </p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 04:51PM UTC by <span class="author">uniqname</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Whether 1.8 behavior is correct is debatable. But it is different than 1.7.2 behavior and what &quot;worked&quot; before now fails rather inelegantly. My thought is that either Sizzle could trim commas from the ends or split the list of selectors on commas. If the jQuery method takes a comma separated list of selectors, it makes sense that it would work similarly to a string split on commas. After all $(&#39;&#39;) works just fine without throwing any errors. That could totally be a perception problem on my part though.</span> → <span class="change-field-new">1344963163550900</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Whether 1.8 behavior is correct is debatable. But it is different than 1.7.2 behavior and what &quot;worked&quot; before now fails rather inelegantly. My thought is that either Sizzle could trim commas from the ends or split the list of selectors on commas. If the jQuery method takes a comma separated list of selectors, it makes sense that it would work similarly to a string split on commas. After all $(&quot;&quot;) works just fine without throwing any errors. That could totally be a perception problem on my part though.</span> → <span class="change-field-new">1344963237021379</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Whether 1.8 behavior is correct is debatable. But it is different than 1.7.2 behavior and what "worked" before now fails rather inelegantly. My thought is that either Sizzle could trim commas from the ends or split the list of selectors on commas. If the jQuery method takes a comma separated list of selectors, it makes sense that it would work similarly to a string split on commas. After all $("") works just fine without throwing any errors. That could totally be a perception problem on my part though.</p><p>Also, getting around this issue is pretty easy, but it does mean it's not as plug and play as it could be.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 05:07PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">&gt; Whether 1.8 behavior is correct is debatable.&#92;
&#92;
Well, http://www.w3.org/TR/css3-selectors/#grouping says:&#92;
&#92;
&gt; Groups of selectors: A **comma-separated** list of selectors ...&#92;
&#92;
That doesn&#39;t seem unambiguous to me. &#92;
&#92;
&gt; If the jQuery method takes a comma separated list of selectors, it makes sense that it would work similarly to a string split on commas.&#92;
&#92;
`$(&#39;div, ul[data-list=&quot;a,b,c&quot;], p&#39;)`&#92;
&#92;
We can&#39;t always preserve old bugs, and normally we try to fix them. At times that will cause code that previously &quot;worked&quot; in some way to break. But I don&#39;t think this is a case where we&#39;d want to start rewriting invalid selectors by trimming off bits in the name of backcompat.&#92;
</span> → <span class="change-field-new">1344966597051707</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <blockquote> Whether 1.8 behavior is correct is debatable.</blockquote><p>Well, <a href="http://www.w3.org/TR/css3-selectors/#grouping" class="ext-link"><span class="icon"></span>http://www.w3.org/TR/css3-selectors/#grouping</a> says:</p><blockquote> Groups of selectors: A **comma-separated** list of selectors ...</blockquote><p>That doesn't seem ambiguous to me. </p><blockquote> If the jQuery method takes a comma separated list of selectors, it makes sense that it would work similarly to a string split on commas.</blockquote><p><code>$('div, ul[data-list="a,b,c"], p')</code></p><p>We can't always preserve old bugs, and normally we try to fix them. At times that will cause code that previously "worked" in some way to break. But I don't think this is a case where we'd want to start rewriting invalid selectors by trimming off bits in the name of backcompat.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 05:20PM UTC by <span class="author">Uniqname</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>'<code>$('div, ul[data-list="a,b,c"], p')</code></p><p>Touché</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 06:13PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm gonna throw in my 2c here to say that it is probably a perception problem. From a code-sanity perspective, it would make a lot more sense to push your addition class onto the array, and then join the whole thing with ", ", rather than join the array first, and concat a string with a leading comma onto that. The fact that the input worked before doesn't make the reasoning behind doing it like that any more sound, and occasionally we do have to break strange edge cases that used to "work" in order to solve real bugs, as is the case here.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
