<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7787 (Ajax abort triggers failure event) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7786/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7788/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7787</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened December 15, 2010 05:49PM UTC</p>
      
        <p>Closed December 27, 2010 01:19AM UTC</p>
      
      
        <p>Last modified March 14, 2012 02:26AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Ajax abort triggers failure event</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        kwooda@gmail.com
      </td>
      <th>Owned by:</th>
      <td>kwooda@gmail.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.6">1.6</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.4.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have an auto-suggest component that performs an Ajax look-up as you type, and it calls abort() if a previous look-up is already in progress.  However, now in version 1.4.4, this intermittently triggers an onFailure event.  The event handler gets error code 0 with an "unknown" error, which suggests to me the abort logic fails to detect that this was an intentional abort under some condition.</p><p>Unfortunately, I cannot provide my code, but it has been in use for a very long time, and this issue appeared when I upgraded from jQuery 1.4.2 to 1.4.4.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (12)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 15, 2010 05:50PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I forgot to mention this is in IE8</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 15, 2010 06:23PM UTC by <span class="author">kwooda@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This line looks wrong - is this double .call.call intentional?</p><p>Function.prototype.call.call( oldAbort, xhr );</p><p>If I change this to:</p><p>Function.prototype.call( oldAbort, xhr );</p><p>The problem I am having disappears.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 15, 2010 07:16PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ kwooda@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project by writing a bug report.</p><p>Your report is missing a test case thus I made one myself. <a href="http://jsfiddle.net/jitter/HHwrT/" class="ext-link"><span class="icon"></span>live test case</a>. But I couldn't reproduce your problem. Also what is the "onFailure" event (sounds like Prototype/Mootools).</p><p>Please read <a href="http://docs.jquery.com/How_to_Report_Bugs" class="ext-link"><span class="icon"></span>How to report bugs</a> (especially the "Try a newer version of jQuery" and the "What To Provide" section).</p><p>Also make a test case on <a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span>http://jsfiddle.net</a> which reproduces your problem (and no this doesn't mean to post your production code). Test also with the jQuery WIP version (as there are some big changes in the ajax code since the release of 1.4.4) to make sure this hasn't been fixed already.</p><p>Then please report back and provide more information (especially browser/os versions) and the link to the test case.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 07:41PM UTC by <span class="author">dhchow22@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm seeing the same behavior. I was able to repro the error with jitter's live test case (when you type in the input, the firebug console output shows "error undefined", showing that the error callback is called on every abort).  I was able to repro this in Safari, FF, and IE8.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 19, 2010 07:59AM UTC by <span class="author">kwooda@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The test case you have provided shows the error quite well.  The problem shows up in IE8 (I have not tried Safari).  Just type into the input box and see the error callback is called with every abort, as noted by dhchow22.  </p><p>As for "onFailure", that is simply the name of the callback function I assigned to the ajax error callback hook - sorry for the confusion.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 27, 2010 01:19AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the report, but this is not a jQuery bug.</p><p>The XHR spec does not provide a mechanism for determining whether or not a failed request was due to network error vs. an abortion, so it is not possible for jQuery to differentiate between them. There was a bug in 1.4.0-1.4.2 that caused error requests to be reported as successful; this was corrected in 1.4.3.</p><p>Unfortunately, because it’s impossible to override the abort handler in IE6, there is no way that jQuery can fix this issue in a fully cross-browser manner. Since both abortions and network failures do not result in a successful request, they both call the failure handler.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 27, 2010 04:23AM UTC by <span class="author">kwooda@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You guys have totally misinterpreted this issue.  It is a bug.  Aborting an Ajax event should not trigger an error event.  You have what looks like an invalid line of <a href="/wiki/JavaScript">JavaScript</a> in your code that, when corrected, fixes the problem.</p><p>Change Function.prototype.call.call( oldAbort, xhr );</p><p>to Function.prototype.call( oldAbort, xhr );</p><p>This is a bug and needs to be addressed.  If it is not re-opened, I will file a new one.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 27, 2010 03:05PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ajax has been highly re-architectured in the repository (1.4.5pre). The abort method of the native xhr is not dealt with like it used to be anymore.</p><p>Before crying "wolf", would you be so kind as to checkout jQuery from the repository and test your code against it or, at the very least, provide a minimal unit test we could include into jQuery's test chain to see if the issue is still there?</p><p>We want bugs to be solved as much as you do but you won't help us help you by refusing to provide a simple use case showing the bug.</p><p>You have to understand there are a lot of things that can go wrong in any Javascript code and, thus, *you* have to trim your code down to a minimal use case that makes it clear the problem is in ajax, not somewhere else. Then, we can use this code snippet, confirm the bug, include the test into our test suite, fix the issue and ensure it stays fixed for further releases. Saying "when I change line XXX, it's fixed" is not enough, seeing as you can't know what you're breaking by changing jQuery's code. On the other hand, we can assess that pretty easily... yet again, provided we have a usable test case.</p><p>So, to make it short: provide a use case that exhibits the bug against 1.4.5pre and the bug will be re-opened. In any other case, the bug stays invalid and closed.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 07, 2011 05:06PM UTC by <span class="author">kwooda@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There is a live test case for this issue that clearly shows the problem, which is why I do not understand the response here.  Also, there appears to be no option available in JSFIDDLE for "1.4.5pre".  I have also pointed out in my comments, if you care to read them, where the bug actually is in your code - again, bewilderment emerges in my mind.</p><p>Test case is at <a href="http://jsfiddle.net/jitter/HHwrT/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jitter/HHwrT/</a> and all you have to do is open it in Internet Explorer (8) and type into the input field.  You will see that whenever the Ajax update is aborted, the error handler is executed - which is incorrect behavior.</p><p>In jQuery 1.4.4 code, the following line can be found:</p><p>Function.prototype.call.call( oldAbort, xhr ); </p><p>If you change this to the following, the problem disappears:</p><p>Function.prototype.call( oldAbort, xhr );</p><p>If you can point me to where I can find 1.4.5pre, or make it available in Fiddle, I'll be happy to test it out.  In the meantime, however, the problem is there, clearly demonstrable, and with a solution on hand, so... please check it out.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 07, 2011 05:11PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The 0 GIT version is a build from the latest revision of jQuery and can be considered to be 1.next-pre at any given time.</p><p><a href="http://jsfiddle.net/ajpiano/HHwrT/8/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/ajpiano/HHwrT/8/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 07, 2011 05:33PM UTC by <span class="author">kwooda@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:10 ajpiano]:</p><p>Thanks for the info - much appreciated.</p><p>I see the problem still exists.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 03, 2011 09:20AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You just need to do proper ajax request</p><p>use $.ajax with global:false option</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
