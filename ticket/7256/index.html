<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7256 (gracefully handle bad user/intermediate input values) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7255/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7257/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7256</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 20, 2010 08:45AM UTC</p>
      
        <p>Closed April 04, 2011 06:32AM UTC</p>
      
      
        <p>Last modified March 14, 2012 01:35AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">gracefully handle bad user/intermediate input values</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        rene7705@gmail.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/"></a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>global</td>
      
        <th>Version:</th>
      
      <td>1.4.2</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>needsreview</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Hi..</p><p>jQuery has problems with bad userinput.</p><p>animate() can set elem.style[name]=BAD_VALUE, and thus throw a javascript error because there is no try {} catch {} structure in place. Depending on circumstances and the browser used this can be a big problem for an app, and it's hard to debug, even with firebug.</p><p>ideally, each catch{} would call $.log(msg), which calls console.log(timePassedSinceStartOfScript+msg) and console.trace() if available.</p><p>add a way to bind to the $.log() too, so i can display such warnings elsewhere aswell.</p><p>i built a set of free components that incorporates this fix (no logging though), a set that won't work without the try-catch fix.</p><p><a href="http://code.google.com/p/rene7705-assorted-libraries/downloads/list" class="ext-link"><span class="icon"></span>http://code.google.com/p/rene7705-assorted-libraries/downloads/list</a> </p><p>After installation in htdocs/code, browse to /code/libraries_rv/logAndHandler-x.y.z and check the html source to see that it uses a modified jquery core. Simply diff with the original.</p><p>there are 2 forum threads that mention this issue;</p><p><a href="http://forum.jquery.com/topic/bugfix-for-jquery-1-4-2-internet-explorer-8-jquery-fx-step" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/bugfix-for-jquery-1-4-2-internet-explorer-8-jquery-fx-step</a></p><p><a href="http://forum.jquery.com/topic/bugfix-illegal-argument-in-jquery-style-try-catch-fixes-it" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/bugfix-illegal-argument-in-jquery-style-try-catch-fixes-it</a></p><p>i'm willing to donate some of my time back to the jquery team and help identify and "fix" these "bugs"..</p><p>(I admit they're usually user created bugs, but also see it as an opportunity to make jquery more robust.)</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2010 08:49AM UTC by <span class="author">rene7705@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>My gut estimate is that there are about 5 to 20 of these potential bug spots in the jquery core.</p><p>Fixing them would add maybe 1 to 2kb to the source version.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2010 06:27PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ needsreview</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There are arguments on both sides for actually doing something about this.</p><p>On the for-side, we already discard errors to <code>.css</code> as of 1.4.3 to make IE match other browsers.</p><p>On the con-side, it’s a (relatively) lot of extra code to handle invalid user input like this, there are not many complaints about current behaviour, adding a try/catch is only going to make IE’s performance even worse, and the fix to <code>.css</code> was done to handle <strong>valid</strong> user input that IE just happens to not support (like rgba), not invalid input that nobody supports.</p><p>Marking for review.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 26, 2010 11:37PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">global</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If by review you mean, "share opinion", I believe developers should be held responsible for sanitizing their own values before passing them into .animate() or anything similar.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 02, 2010 02:58AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Here's the contract: Don't pass garbage to jQuery and jQuery won't barf. Using try/catch to swallow a bunch of programmer errors leads to code that is harder to debug. Rethrowing a specific error message for each mistaken input sounds great but nobody would want to pay the size/performance penalty.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 02, 2010 05:56AM UTC by <span class="author">rene7705@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixing these particular bugs would not add many KBs to the jquery sources. It's probably under 4kb, even under 3kb.</p><p>Any performancy penalty is also only hit when bad input is encountered. And a small one at that.</p><p>I also disagree with rwaldron, I believe components should be reporting bad userinput (or bad calculation results!) properly instead of silently failing.</p><p>The whole point of having a component "do the work" in an abstract manner is to isolate the app-programmer from the gritty details.</p><p>If we follow the paradigm put forth by rwaldron and dmethvin, then the programmer DOES need to know about the gritty details. Plus the whole stack of code that makes up the component.</p><p>On the other hand, if the component properly reports bad inputs, the app-programmer can spend way more time on his own level of detail rather than the API's that he's using through the component.</p><p>There is usually plenty of complexity in my components that use jquery, and frankly it's hard to keep the input sanitized at all times, especially when i'm experimenting with complicated animation sequences.</p><p>For a demo, see <a href="http://mediabeez.ws/lah" class="ext-link"><span class="icon"></span>http://mediabeez.ws/lah</a> in a non-ie browser. As you click on details, or click details away, there are several animation calls running at virtually but not exactly the same time in quick succession, followed by a final app-window resize.</p><p>If just 1 of the calls leads to bad DOM input, which can also happen in the intermediate jquery code i suspect, then the whole animation fails.</p><p>Because jquery does not report & trace it, it can take the whole day to check the userinput and intermediate-input values that make up the complete animation. It's that delay in dev of my app that's caused me to add the try-catch structure. I want to try out several different animation sequences in 1 day, not spend the full day fixing just 1 anim seq. (k, that's a simplification.)</p><p>A log entry and a console.trace() call would probably reduce hours of searching to mere minutes of fixing.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 02, 2010 05:59AM UTC by <span class="author">rene7705@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>And dont try to say that i could check which call causes the problem by evaluating what's still visible where and what isn't. Other animation calls may still get executed _after_ the error is encountered.</p><p>It's (more often than you think) virtually impossible to figure out which call it was by looking at the output.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 06:32AM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Although I do sympathize with rene7705, three team members have already expressed their opinions on this being a bad idea and I'll be adding a fourth vote with respect to our position on input sanitization. Whilst in a perfect world it might be 'nice' to include specific error messages for each mistaken input, there are 1) simply too many variants of what we've seen developers try to feed jQuery as valid input and 2) far too many points in the codebase that would require a try/catch/error output handler integrated for us to seriously consider doing this. Unfortunately, for the moment developers will need to ensure that they sanitize their data/values before feeding it into jQuery.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
