<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#6236 (jQuery incorreclty closes tags in the clean function when the last attribute value ends with a &amp;quot;/&amp;quot; character) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/6235/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/6237/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#6236</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 06, 2010 01:51PM UTC</p>
      
        <p>Closed June 26, 2012 02:24AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery incorreclty closes tags in the clean function when the last attribute value ends with a &quot;/&quot; character</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        rformato
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>manipulation</td>
      
        <th>Version:</th>
      
      <td>1.6b1</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>ie6 ie7 ie8</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>When adding HTML code retrieved with a call to html() with IE, because of the weirdness of IE parsed code, that is basically IE strip all the quotes around attribute values, the clean function may incorrectly close an element if the value of its last attribute ends with a "/" character.</p><p>test this in the IE8 console</p><p>$("&lt;div&gt;").html($("&lt;div&gt;&lt;form method=\\"post\\" action=\\"./\\"&gt;&lt;div&gt;&lt;/div&gt;&lt;/form&gt;&lt;/div&gt;").html()).html()</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (1)</summary>

  <ul class="ticket-attachments">
    
      <li>
        <a href="/attachment/ticket/6236/patch.diff/index.html">patch.diff</a> (0.9 KB) - added by rformato
        <strong>March 08, 2010 09:43AM UTC</strong>.<br>
        <p>proposed patch</p>
      </li>
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (24)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 12, 2010 03:25AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 01:36AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">1.4.3</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-new">→ low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">jQuery incorreclty closes tags in the clean function with IE when the last attribute value ends with a &quot;/&quot; character</span> → <span class="change-field-new">jQuery incorreclty closes tags in the clean function when the last attribute value ends with a &quot;/&quot; character</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.4.2</span> → <span class="change-field-new">1.4.4rc</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>So this is actually a bug in jQuery, it’s just exposed most easily by IE because it has a shitty HTML serializer.</p><p>HTML5 states that quotes are optional for strings that don’t contain any of "'!`=&lt;&gt; or spaces, but jQuery assumes that /&gt; means someone passing in some XHTML with a self-closing tag and tries to “correct” it, which breaks.</p><p><a href="http://jsfiddle.net/snover/7ZKat/" class="ext-link"><span class="icon"></span>improved test case</a></p>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2010 05:16AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/5998">#5998</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2010 05:19AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/4417">#4417</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 09, 2011 11:28PM UTC by <span class="author">shcodenick</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>FYI: in my case patch applied to 1.4.2 fixed the problem, but solution from 1.4.4 (line 4831) did not.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 09, 2011 12:21PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/8218">#8218</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 09, 2011 12:48PM UTC by <span class="author">mathias</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Here’s a simple test case that fails in all browsers: <a href="http://jsfiddle.net/mathias/9MgB4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/mathias/9MgB4/</a> (from bug <a href="/ticket/8218">#8218</a>)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 10, 2011 05:16AM UTC by <span class="author">shreekantbohra@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The bug still exists in 1.4.4 . Any plans to get the patch into the mainstream ? This should be of higher priority.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 10, 2011 05:24AM UTC by <span class="author">Shree Kant &lt;shreekantbohra@gmail.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>and in 1.5.2 as well.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 17, 2011 05:05PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">core</span> → <span class="change-field-new">manipulation</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.4.4rc</span> → <span class="change-field-new">1.6b1</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 17, 2011 05:43PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.next</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Confirmed</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 15, 2011 06:14PM UTC by <span class="author">alt255@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm unclear on what 1.next means. We are at 1.6.1 at the moment.  Does this mean 1.7? 1.6.2?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 15, 2011 06:57PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It means 1.next-release-with-no-specific-deadline</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 03:41PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Confirmed during bug triage.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 03:57PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>For reference, start tags that end with "/&gt;" are actually invalid, see: <a href="http://www.whatwg.org/specs/web-apps/current-work/#unquoted" class="ext-link"><span class="icon"></span>http://www.whatwg.org/specs/web-apps/current-work/#unquoted</a> and <a href="http://www.whatwg.org/specs/web-apps/current-work/#syntax-start-tag" class="ext-link"><span class="icon"></span>http://www.whatwg.org/specs/web-apps/current-work/#syntax-start-tag</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 05:42PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/9530">#9530</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 05:57PM UTC by <span class="author">Alan Hogan</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Test cases from <a href="/ticket/9530">#9530</a>:</p><p><a href="http://jsfiddle.net/alanhogan/Neznc/6/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/alanhogan/Neznc/6/</a></p><p><a href="http://dl.dropbox.com/u/105727/web/why_not_links.html" class="ext-link"><span class="icon"></span>http://dl.dropbox.com/u/105727/web/why_not_links.html</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 07:55PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/8939">#8939</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 08, 2011 08:44PM UTC by <span class="author">leoshklo</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This bug still exists in 1.6.2 - is there any way it could get some love for the next release?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 10, 2012 01:29PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/11576">#11576</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 13, 2012 06:13PM UTC by <span class="author">cmcnulty</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Just want to point out how evil this bug can be when using innerHTML:</p><p><a href="http://jsfiddle.net/cmcnulty/Q2psh/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/cmcnulty/Q2psh/</a></p><p>In that fiddle, I'm inserting a totally benign and compliant form tag, however, as someone else noted, IE, when using innerHTML *both* strips out the quotes *and* moves the action attribute to the last attr.  This means that when you use innerHTML for any form tag where the action ends with a forward slash (pretty common), IE will helpfully insert an *invalid, non-compliant* string.  If you then take the resulting innerHTML and do anything with it with jquery, you're going to have problems.</p><p>It's just a shame, because it should be a very rare problem, but IE's insanity makes it pretty common.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 13, 2012 06:51PM UTC by <span class="author">cmcnulty</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>One more comment about this:  we could fix the regex test easily for elements that have attributes by inserting [\\s'"] into the rxhtmlTag test:</p><pre class="wiki">
rxhtmlTag = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^&gt;]*)[\\s'"]\\/&gt;/ig,
</pre><p>and that will fix the &lt;form action=google.com/&gt; problem.  However, it will break in the pretty common practice of inserting self-closing tags that shouldn't be, for instance:</p><pre class="wiki">
$(foo).html('&lt;p/&gt;');
</pre><p>I'm not a regex pro though.  It seems like it should be possible to come up with a test that will only match in cases where the closing "/&gt;" is preceded with a singe/double quote or whitespace OR where the preceding characters are part of the opening tag.</p><p>Anyone want to take a shot at it?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 15, 2012 01:14PM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I&#39;ve thought about this one and vote &#39;&#39;&#39;against&#39;&#39;&#39; fixing it, for the following reasons:&#92;
* `$el.html( $other.html() )` is an odd approach... I&#39;d bet that 95% of such uses should instead be `$el.empty().append( $other.clone() )`&#92;
* Fixing this would mean breaking unusual but technically valid (for jQuery) manual input like `$(&quot;&lt;textarea name=description/&gt;&quot;)`&#92;
* The problem is not with our processing of purported HTML, it&#39;s IE&#39;s &#39;&#39;generation&#39;&#39; of invalid HTML from the DOM&#92;
* Legitimate use of the `.html( strInnerHTML )` pattern, if there is any, can insert preprocessing to ensure that all terminal attributes are quoted:&#92;
{{{#!js&#92;
.html( strInnerHTML.replace(&#92;
  // CDATA section; or&#92;
  // comment; or&#92;
  // element open tag (capturing assignment of an unquoted last attribute)&#92;
  /&lt;!&#92;&#92;[[^&#92;&#92;0]*?&#92;&#92;]&#92;&#92;]&gt;|&lt;!-&#92;&#92;-[^&#92;&#92;0]*?-&#92;&#92;-&gt;|(&lt;[^!](?:[^&#39;&quot;&gt;]*(&#39;|&quot;).*?&#92;&#92;2)*[^&gt;]*?)(=[^&#92;&#92;s&gt;]+)?&gt;/g,&#92;
  function( tag, elementStart, _, unquoted ) {&#92;
    return unquoted ?&#92;
      elementStart + &quot;=&#39;&quot; + unquoted.substring(1) + &quot;&#39;&gt;&quot; :&#92;
      tag;&#92;
  }&#92;
) )&#92;
}}}&#92;
&#92;
If anything, the above should be used to make `.html()` always produce parseable output, but it&#39;s a substantial addition (regular expression &#39;&#39;&#39;plus&#39;&#39;&#39; function &#39;&#39;&#39;plus&#39;&#39;&#39; support test) with little benefit.</span> → <span class="change-field-new">1334495970310593</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">I&#39;ve thought about this one and vote &#39;&#39;&#39;against&#39;&#39;&#39; fixing it, for the following reasons:&#92;
* `$el.html( $other.html() )` is an odd approach... I&#39;d bet that 95% of such uses should instead be `$el.empty().append( $other.clone() )`&#92;
* Fixing this would mean breaking unusual but technically valid (for jQuery) manual input like `$(&quot;&lt;textarea name=description/&gt;&quot;)`&#92;
* The problem is not with our processing of purported HTML, it&#39;s IE&#39;s &#39;&#39;generation&#39;&#39; of invalid HTML from the DOM&#92;
* Legitimate use of the `.html( strInnerHTML )` pattern, if there is any, can insert preprocessing to ensure that all terminal attributes are quoted:&#92;
{{{#!js&#92;
.html( strInnerHTML.replace(&#92;
  // CDATA section; or&#92;
  // comment; or&#92;
  // element open tag (capturing assignment of an unquoted last attribute)&#92;
  /&lt;!&#92;&#92;[[^&#92;&#92;0]*?&#92;&#92;]&#92;&#92;]&gt;|&lt;!-&#92;&#92;-[^&#92;&#92;0]*?-&#92;&#92;-&gt;|(&lt;[^!&#92;&#92;/](?:[^&#39;&quot;&gt;]*(&#39;|&quot;).*?&#92;&#92;2)*[^&gt;]*?)(=[^&#92;&#92;s&gt;]+)?&gt;/g,&#92;
&#92;
  // quote unquoted last attributes; return everything else unaltered&#92;
  function( tag, elementStart, _, unquoted ) {&#92;
    return unquoted ?&#92;
      elementStart + &quot;=&#39;&quot; + unquoted.substring(1) + &quot;&#39;&gt;&quot; :&#92;
      tag;&#92;
  }&#92;
) )&#92;
}}}&#92;
&#92;
If anything, the above should be used to make `.html()` always produce parseable output, but it&#39;s a substantial addition (regular expression &#39;&#39;&#39;plus&#39;&#39;&#39; function &#39;&#39;&#39;plus&#39;&#39;&#39; support test) with little benefit.</span> → <span class="change-field-new">1334496028142482</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>I've thought about this one and vote <strong>against</strong> fixing it, for the following reasons:</p><ul><li><code>$el.html( $other.html() )</code> is an odd approach... I'd bet that 95% of such uses should instead be <code>$el.empty().append( $other.clone() )</code></li><li>Fixing this would mean breaking unusual but technically valid (for jQuery) manual input like <code>$("&lt;textarea name=description/&gt;")</code></li><li>The problem is not with our processing of purported HTML, it's IE's ''generation'' of invalid HTML from the DOM</li><li>Legitimate use of the <code>.html( strInnerHTML )</code> pattern, if there is any, can insert preprocessing to ensure that all terminal attributes are quoted:</li></ul><pre class="wiki">.html( strInnerHTML.replace(
  // CDATA section; or
  // comment; or
  // element open tag (capturing assignment of an unquoted last attribute)
  /&lt;!\\[[^\\0]*?\\]\\]&gt;|&lt;!-\\-[^\\0]*?-\\-&gt;|(&lt;[\\w:](?:[^'"&gt;]*('|").*?\\2)*[^&gt;]*?)(=[^\\s&gt;]+)?&gt;/g,

  // quote unquoted last attributes; return everything else unaltered
  function( tag, elementStart, _, unquoted ) {
    return unquoted ?
      elementStart + "='" + unquoted.substring(1) + "'&gt;" :
      tag;
  }
) )
</pre><p>If anything, the above should be used to make <code>.html()</code> always produce parseable output, but it's a substantial addition (regular expression <strong>plus</strong> function <strong>plus</strong> support test) with little benefit.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 26, 2012 02:24AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ ie6 ie7 ie8</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I have to agree, this has stayed open so long because there is no reasonable fix.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
