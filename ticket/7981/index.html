<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7981 (Setting &amp;quot;selected&amp;quot; attribute to false should have no effect in single line &amp;lt;select&amp;gt;) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7980/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7982/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7981</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 15, 2011 08:19AM UTC</p>
      
        <p>Closed April 01, 2011 02:20AM UTC</p>
      
      
        <p>Last modified March 24, 2014 11:25AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Setting &quot;selected&quot; attribute to false should have no effect in single line &lt;select&gt;</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        anonymous
      </td>
      <th>Owned by:</th>
      <td>jitter</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.5.1">1.5.1</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>attributes</td>
      
        <th>Version:</th>
      
      <td>1.5</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Hi. I filed this bug (if it is one) also at the <a href="/wiki/WekKit">WekKit</a> Project (<a href="https://bugs.webkit.org/show_bug.cgi?id=52436" class="ext-link"><span class="icon"></span>https://bugs.webkit.org/show_bug.cgi?id=52436</a>) since I don't know who is responsible for this behaviour.</p><p>(I am using Ubuntu 10.04)</p><p>I got a &lt;select&gt; element with three &lt;option&gt; inside (my page ist XHTML 1.0 Transitional), looks like this:</p><pre class="wiki">
&lt;select&gt;
  &lt;option value="0"&gt;0&lt;/option&gt;
  &lt;option value="1"&gt;1&lt;/option&gt;
  &lt;option value="2"&gt;2&lt;/option&gt;
&lt;/select&gt;
</pre><p>None of those is selected manually (i.e. has the "selected='selected'" tag) but on first loading the page, the option "0" ist shown by default. When I use jQuery to delete all "selected" tags in all &lt;option&gt;-element (which are not there), suddenly no option is selected anymore. You can check it yourself with following (w3c validated) little code:</p><pre class="wiki">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de"&gt;
&lt;head&gt;
    &lt;title&gt;test&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"/&gt;
    &lt;script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;select id="s" size="1"&gt;
        &lt;option value="0"&gt;0&lt;/option&gt;
        &lt;option value="1"&gt;1&lt;/option&gt;
        &lt;option value="2"&gt;2&lt;/option&gt;
    &lt;/select&gt;
    &lt;input id="i" type="button" value="Remove 'selected'"/&gt;
    &lt;script type="text/javascript"&gt;
    $(document).ready(function() {
        $("#i").click(function() {
            $("#s").find("option").removeAttr("selected");
        });
    });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>This disappearing of a selected value happens in Google Chrome 8.0.552.237, Chromium 10.0.639.0 (71411) as well as Safari 5.0.3 (7533.19.4). You see, pretty new browsers. According to webkit.org the webkit version of Chromium is 534.16 but the newest webkit version is r75294. So I can't really tell if I got the newest one, it's a confusing name scheme.</p><p>This behaviour, however, does not appear in Firefox 3.6.13, Opera 11.00 or Internet Explorer 8.</p><p>I think that the way Firefox, Opera and IE handle this is the correct way. Could you please check if this is a bug in <a href="/wiki/WebKit">WebKit</a>?</p><p>Best regards,</p><p>Christian</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 15, 2011 01:31PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Thanks for taking the time to contribute to the jQuery project by writing a bug report.&#92;
&#92;
I looked into this and (as Alexey Proskuryakov on the webkit bug tracker already pointed out) this isn&#39;t an issue with `removeAttr()` directly but with WebKit acting strange when you set the `selected` property of a DOM option element to `false` (or `&quot;&quot;`).&#92;
&#92;
-----&#92;
&#92;
&#39;&#39;&#39;Why does jQuery do `jQuery.attr( this, name, &quot;&quot; );` in `removeAttr()`?&#39;&#39;&#39;&#92;
&#92;
jQuery does this to fix a bug in some IE versions which don&#39;t handle calls to `removeAttribute( name )` correctly. For more insight into this check the ticket #464 (corresponding [https://github.com/jquery/jquery/commit/94e59e287a9fde9425cd96713e8130aef06bc431 commit]). This was already done in December 2006 and has been in jQuery since version 1.0.4.&#92;
&#92;
Also this [http://jsfiddle.net/jitter/jzkT6/show test case] (with jQuery 1.0.3 which didn&#39;t yet include this fix) shows (e.g. in IE 6) that `.removeAttr()` needs this fix in IE. You can also check out the still active test case link in the original ticket.&#92;
&#92;
-----&#92;
&#92;
&#39;&#39;&#39;Is this really a jQuery issue?&#39;&#39;&#39;&#92;
&#92;
I don&#39;t think so. This can also be triggered in WebKit without the use of jQuery by plain javascript. The code also isn&#39;t artificial but a legitimate use case.&#92;
&#92;
[http://jsfiddle.net/jitter/bDmSP/3/show/ test case with a single option]&#92;&#92;&#92;&#92;&#92;
[http://jsfiddle.net/jitter/bDmSP/show/ test case with two options] (2nd has selected set)&#92;
&#92;
Both test cases show the same behavior in WebKit. On opening the page the correct option element is shown preselected. After clicking the button no option is shown as selected and the `selectedIndex` property of the parent `select` return -1.&#92;
&#92;
-----&#92;
&#92;
&#39;&#39;&#39;Is WebKit doing the wrong thing?&#39;&#39;&#39;&#92;
&#92;
That is a though call. If you look at the specifications of `select/option` in HTML 4.01 and DOM Level 2 this behavior could be seen as &quot;not incorrect&quot; (but neither are the other browsers incorrect). Check the following&#92;&#92;&#92;&#92;&#92;
[http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-85676760 DOM Level 2 - selectedIndex]&#92;&#92;&#92;&#92;&#92;
[http://www.w3.org/TR/html401/interact/forms.html#h-17.6.1 HTML 4.01 - Pre-selected options]&#92;
&#92;
You could argue that having no option shown selected and `selectedIndex` set to -1 is a correct way of reacting to all option DOM elements having set their `selected` property to false explicitly.&#92;
&#92;
-----&#92;
&#92;
If we look at the newer specifications [http://dev.w3.org/html5/spec/the-button-element.html#dom-select-selectedindex HTML5 select DOM Interface - selectedIndex] and the following text from [http://dev.w3.org/html5/spec/the-button-element.html#the-select-element HTML5 - 4.10.9 The select element]&#92;
&gt; If [...] the element&#39;s display size is 1, then whenever there are no option elements in the select element&#39;s list of options that have their selectedness set to true, the user agent must set the selectedness of the first option element in the list of options in tree order that is not disabled, if any, to true.&#92;
&#92;
I would argue that how Opera/FF,IE behave is the correct way to go. Of course I might have missed some very important points in the specifications as this was just a quick check. Feel free to correct me.&#92;
&#92;
-----&#92;
&#92;
&#39;&#39;&#39;Is this going to be fixed in jQuery&#39;&#39;&#39;&#92;
&#92;
Maybe. I might take some time to investigate which browsers really need this `.attr( this, name, &quot;&quot; )` workaround and build in a check to run this only for the browsers which need it. Because skipping this step would bring performance improvements if you call `.removeAttr()` on many elements. So the fix would be &quot;coincidental&quot; and the underlying &quot;issue&quot; with WebKit would remain. (e.g. `$(&quot;option&quot;).attr(&quot;selected&quot;, &quot;&quot;);`).&#92;
&#92;
So until we decide if the perf improvement to `removeAttr()` is worth it I leave this ticket open.</span> → <span class="change-field-new">1295098440383198</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">manipulation</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">Hi. I filed this bug (if it is one) also at the WekKit Project ([https://bugs.webkit.org/show_bug.cgi?id=52436]) since I don&#39;t know who is responsible for this behaviour.&#92;
&#92;
(I am using Ubuntu 10.04)&#92;
I got a &lt;select&gt; element with three &lt;option&gt; inside (my page ist XHTML 1.0 Transitional), looks like this:&#92;
&#92;
&lt;select&gt;&#92;
  &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&#92;
  &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&#92;
  &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&#92;
&lt;/select&gt;&#92;
&#92;
None of those is selected manually (i.e. has the &quot;selected=&#39;selected&#39;&quot; tag) but on first loading the page, the option &quot;0&quot; ist shown by default. When I use jQuery to delete all &quot;selected&quot; tags in all &lt;option&gt;-element (which are not there), suddenly no option is selected anymore. You can check it yourself with following (w3c validated) little code:&#92;
&#92;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&#92;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;de&quot; lang=&quot;de&quot;&gt;&#92;
&lt;head&gt;&#92;
    &lt;title&gt;test&lt;/title&gt;&#92;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=utf-8&quot;/&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js&quot;&gt;&lt;/script&gt;&#92;
&lt;/head&gt;&#92;
&lt;body&gt;&#92;
    &lt;select id=&quot;s&quot; size=&quot;1&quot;&gt;&#92;
        &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&#92;
        &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&#92;
        &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&#92;
    &lt;/select&gt;&#92;
    &lt;input id=&quot;i&quot; type=&quot;button&quot; value=&quot;Remove &#39;selected&#39;&quot;/&gt;&#92;
    &lt;script type=&quot;text/javascript&quot;&gt;&#92;
    $(document).ready(function() {&#92;
        $(&quot;#i&quot;).click(function() {&#92;
            $(&quot;#s&quot;).find(&quot;option&quot;).removeAttr(&quot;selected&quot;);&#92;
        });&#92;
    });&#92;
    &lt;/script&gt;&#92;
&lt;/body&gt;&#92;
&lt;/html&gt;&#92;
&#92;
This disappearing of a selected value happens in Google Chrome 8.0.552.237, Chromium 10.0.639.0 (71411) as well as Safari 5.0.3 (7533.19.4). You see, pretty new browsers. According to webkit.org the webkit version of Chromium is 534.16 but the newest webkit version is r75294. So I can&#39;t really tell if I got the newest one, it&#39;s a confusing name scheme.&#92;
This behaviour, however, does not appear in Firefox 3.6.13, Opera 11.00 or Internet Explorer 8.&#92;
&#92;
I think that the way Firefox, Opera and IE handle this is the correct way. Could you please check if this is a bug in WebKit?&#92;
&#92;
Best regards,&#92;
Christian</span> → <span class="change-field-new">Hi. I filed this bug (if it is one) also at the WekKit Project ([https://bugs.webkit.org/show_bug.cgi?id=52436]) since I don&#39;t know who is responsible for this behaviour.&#92;
&#92;
(I am using Ubuntu 10.04)&#92;
I got a &lt;select&gt; element with three &lt;option&gt; inside (my page ist XHTML 1.0 Transitional), looks like this:&#92;
{{{&#92;
&lt;select&gt;&#92;
  &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&#92;
  &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&#92;
  &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&#92;
&lt;/select&gt;&#92;
}}}&#92;
None of those is selected manually (i.e. has the &quot;selected=&#39;selected&#39;&quot; tag) but on first loading the page, the option &quot;0&quot; ist shown by default. When I use jQuery to delete all &quot;selected&quot; tags in all &lt;option&gt;-element (which are not there), suddenly no option is selected anymore. You can check it yourself with following (w3c validated) little code:&#92;
{{{&#92;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;&#92;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;de&quot; lang=&quot;de&quot;&gt;&#92;
&lt;head&gt;&#92;
    &lt;title&gt;test&lt;/title&gt;&#92;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=utf-8&quot;/&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js&quot;&gt;&lt;/script&gt;&#92;
&lt;/head&gt;&#92;
&lt;body&gt;&#92;
    &lt;select id=&quot;s&quot; size=&quot;1&quot;&gt;&#92;
        &lt;option value=&quot;0&quot;&gt;0&lt;/option&gt;&#92;
        &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;&#92;
        &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;&#92;
    &lt;/select&gt;&#92;
    &lt;input id=&quot;i&quot; type=&quot;button&quot; value=&quot;Remove &#39;selected&#39;&quot;/&gt;&#92;
    &lt;script type=&quot;text/javascript&quot;&gt;&#92;
    $(document).ready(function() {&#92;
        $(&quot;#i&quot;).click(function() {&#92;
            $(&quot;#s&quot;).find(&quot;option&quot;).removeAttr(&quot;selected&quot;);&#92;
        });&#92;
    });&#92;
    &lt;/script&gt;&#92;
&lt;/body&gt;&#92;
&lt;/html&gt;&#92;
}}}&#92;
This disappearing of a selected value happens in Google Chrome 8.0.552.237, Chromium 10.0.639.0 (71411) as well as Safari 5.0.3 (7533.19.4). You see, pretty new browsers. According to webkit.org the webkit version of Chromium is 534.16 but the newest webkit version is r75294. So I can&#39;t really tell if I got the newest one, it&#39;s a confusing name scheme.&#92;
This behaviour, however, does not appear in Firefox 3.6.13, Opera 11.00 or Internet Explorer 8.&#92;
&#92;
I think that the way Firefox, Opera and IE handle this is the correct way. Could you please check if this is a bug in WebKit?&#92;
&#92;
Best regards,&#92;
Christian</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project by writing a bug report.</p><p>I looked into this and (as Alexey Proskuryakov on the webkit bug tracker already pointed out) this isn't an issue with <code>removeAttr()</code> directly but with <a href="/wiki/WebKit">WebKit</a> acting ~~strange~~ differntly when you set the <code>selected</code> property of a DOM option element to <code>false</code> (or <code>""</code>).</p><p></p><hr><p></p><p><strong>Why does jQuery do <code>jQuery.attr( this, name, "" );</code> in <code>removeAttr()</code>?</strong></p><p>jQuery does this to fix a bug in some IE versions which don't handle calls to <code>removeAttribute( name )</code> correctly. For more insight into this check the ticket <a href="/ticket/464">#464</a> (corresponding <a href="https://github.com/jquery/jquery/commit/94e59e287a9fde9425cd96713e8130aef06bc431" class="ext-link"><span class="icon"></span>commit</a>). This was already done in December 2006 and has been in jQuery since version 1.0.4.</p><p>Also this <a href="http://jsfiddle.net/jitter/jzkT6/show" class="ext-link"><span class="icon"></span>test case</a> (with jQuery 1.0.3 which didn't yet include this fix) shows (e.g. in IE 6) that <code>.removeAttr()</code> needs this fix in IE. You can also check out the still active test case link in the original ticket.</p><p></p><hr><p></p><p><strong>Is this really a jQuery issue?</strong></p><p>I don't think so. This can also be triggered in <a href="/wiki/WebKit">WebKit</a> without the use of jQuery by plain javascript. The code also isn't artificial but a legitimate use case.</p><p><a href="http://jsfiddle.net/jitter/bDmSP/3/show/" class="ext-link"><span class="icon"></span>test case with a single option</a>\\\\</p><p><a href="http://jsfiddle.net/jitter/bDmSP/show/" class="ext-link"><span class="icon"></span>test case with two options</a> (2nd has selected set)</p><p>Both test cases show the same behavior in <a href="/wiki/WebKit">WebKit</a>. On opening the page the correct option element is shown preselected. After clicking the button no option is shown as selected and the <code>selectedIndex</code> property of the parent <code>select</code> return -1.</p><p></p><hr><p></p><p><strong>Is <a href="/wiki/WebKit">WebKit</a> doing the wrong thing?</strong></p><p>That is a though call. If you look at the specifications of <code>select/option</code> in HTML 4.01 and DOM Level 2 this behavior could be seen as "not incorrect" (but neither are the other browsers incorrect). Check the following\\\\</p><p><a href="http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-85676760" class="ext-link"><span class="icon"></span>DOM Level 2 - selectedIndex</a>\\\\</p><p><a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.6.1" class="ext-link"><span class="icon"></span>HTML 4.01 - Pre-selected options</a></p><p>You could argue that having no option shown selected and <code>selectedIndex</code> set to -1 is a correct way of reacting to all option DOM elements having set their <code>selected</code> property to false explicitly.</p><p></p><hr><p></p><p>If we look at the newer specifications <a href="http://dev.w3.org/html5/spec/the-button-element.html#dom-select-selectedindex" class="ext-link"><span class="icon"></span>HTML5 select DOM Interface - selectedIndex</a> and the following text from <a href="http://dev.w3.org/html5/spec/the-button-element.html#the-select-element" class="ext-link"><span class="icon"></span>HTML5 - 4.10.9 The select element</a></p><blockquote> If [...] the element's display size is 1, then whenever there are no option elements in the select element's list of options that have their selectedness set to true, the user agent must set the selectedness of the first option element in the list of options in tree order that is not disabled, if any, to true.</blockquote><p>I would argue that how Opera/FF,IE behave is the correct way to go. Of course I might have missed some very important points in the specifications as this was just a quick check. Feel free to correct me.</p><p></p><hr><p></p><p><strong>Is this going to be fixed in jQuery</strong></p><p>Maybe. I might take some time to investigate which browsers really need this <code>.attr( this, name, "" )</code> workaround and build in a check to run this only for the browsers which need it. Because skipping this step would bring performance improvements if you call <code>.removeAttr()</code> on many elements. So the fix would be "coincidental" and the underlying "issue" with <a href="/wiki/WebKit">WebKit</a> would remain. (e.g. <code>$("option").attr("selected", "");</code>).</p><p>So until we decide if the perf improvement to <code>removeAttr()</code> is worth it I leave this ticket open.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 16, 2011 05:58PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ needsreview</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 02, 2011 12:04AM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.5.1</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ jitter</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.4.4</span> → <span class="change-field-new">1.5</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 03, 2011 10:29AM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">manipulation</span> → <span class="change-field-new">attributes</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 07, 2011 09:20AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The underlying issue/bug in webkit was fixed in the newest release. So take your time. :)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 29, 2011 12:23PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>in jquery min you just need change line to:</p><p>a.setAttribute(c,e)</p><p>from a[c]=e</p><p>in not minified version:</p><p>elem[ name ] = value;</p><p>change with:</p><p>elem.setAttribute( name, value );</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 29, 2011 07:26PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It seems that webkit has fixed the issue for us: <a href="http://jsfiddle.net/timmywil/pRmQN/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/timmywil/pRmQN/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2011 02:20AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">needsreview</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 24, 2014 11:25AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>you can set it by  $("#select_id").prop("selectedIndex", 3); <em> Select index starts from zero.</em></p><p>read here for example.</p><p>http:kvcodes.com/2014/03/set-html-select-options-selected-value-using-jquery/</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
