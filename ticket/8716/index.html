<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8716 (getJSON - return object - Unexpected token :) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8712/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8717/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8716</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 30, 2011 08:31PM UTC</p>
      
        <p>Closed March 31, 2011 11:46PM UTC</p>
      
      
        <p>Last modified March 14, 2012 03:56PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">getJSON - return object - Unexpected token :</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        cameronjacobs@gmail.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.5.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>When doing a getJSON request after upgrading to jquery-1.5.1 that previously worked on jquery-1.4.4.  I am getting the response "Uncaught <a href="/wiki/SyntaxError">SyntaxError</a>: Unexpected token: in jquery-1.5.1.min.js at line 16".  Sorry I didn't have a chance to find the line number on the non-minified version.</p><p>The JSON response was {"LOGGEDIN":false}</p><p>This error occurred whether or not I had anything in my success handler.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (14)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 08:41PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Please provide a reduced test case on jsfiddle so that we could review your issue further.</span> → <span class="change-field-new">1301517673594526</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Please provide a reduced test case on jsfiddle.net so that we could review your issue further.</span> → <span class="change-field-new">1301517686735811</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">Please provide a reduced test case on [jsfiddle.net] so that we could review your issue further.</span> → <span class="change-field-new">1301517698283913</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Please provide a reduced test case on <a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span>jsfiddle</a> so that we could review your issue further.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 08:48PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:1 timmywil]:</p><blockquote> Please provide a reduced test case on <a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span>jsfiddle</a> so that we could review your issue further.</blockquote><p>a test you can run is:</p><p>$(document).ready(function(){</p><p>    $.getJSON("http://yountville.org/global/login.cfc?wsdl", {</p><p>        method: "getUser"</p><p>    }, function(result){</p><p>        alert('a');</p><p>    });</p><p>});</p><p>and run <a href="http://yountville.org/global/login.cfc?wsdl&method=getUser" class="ext-link"><span class="icon"></span>http://yountville.org/global/login.cfc?wsdl&method=getUser</a> to test the json response.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 09:03PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:2 cameronjacobs@…]:&#92;
  You cannot use getJSON for cross-domain json requests unless you provide a callback in the url.  If you do not want to provide a callback, use [http://api.jquery.com/jQuery.ajax jQuery.ajax]</span> → <span class="change-field-new">1301519015647586</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:2 cameronjacobs@…]:</p><p>  You cannot use getJSON for cross-domain json requests unless you provide a callback in the url.  If you do not want to provide a callback, use <a href="http://api.jquery.com/jQuery.ajax" class="ext-link"><span class="icon"></span>jQuery.ajax</a> and set the dataType to jsonp.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 09:39PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It's actually not cross-domain for me, but just to check, I did run this using a $.ajax call with dateType "json" and "jsonp" and received the same result.</p><p>I tried to copy in the code that I ran, but it keeps marking it as spam.... but I used the same url and datatype jsonp as you stated and recieved that exact same error.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 09:49PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Unfortunately, I am unable to reproduce your issue.  It could be many things, including issues separate from jQuery such as your server config, JSON validity, and others.  However, you can mock ajax requests on <a href="http://jsfiddle.net," class="ext-link"><span class="icon"></span>http://jsfiddle.net,</a> so if you can reproduce the issue, I'd be happy to take a look.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 09:56PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Understood, the question I have is getJSON works perfectly on jquery 1.4.4 and now doesn't work with 1.5.1.  I hate to get stuck at an old revision and would like to find the way to solve it, and the only thing that has changed on this server is the version of jquery.  This leads me to believe that it's definitely an issue with the version or how the new version validates the JSON.</p><p>Can you see anything with the following response that would cause an issue?</p><p>{"LOGGEDIN":false}</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 10:20PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yea that JSON looks valid.</p><p>The ajax component underwent a major rewrite in 1.5.  Expectantly, there have been bugs that have popped up due</p><p>to this.  However, there have also been corrections in the usage of ajax so there may be some things that used to work in 1.4.4 and no longer work that are intentional.   So it is difficult to know which it is, or if it is in fact an issue with jQuery, and what you can do to fix it without narrowing down your issue.  My suggestion would be to do some more research into your problem. I'd start by switching to an unminified version of 1.5.1 and ask for help in the #jquery support irc channel or the Using jQuery forums to get closer to a resolution.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 11:12PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You probably use an older version of the validation plugin or another plugin that messes with ajax. No matter the culprit, your json request is promoted as a jsonp request and, then, your json is executed as javascript... hence the Unexpected Token error.</p><p>Check your plugins and control they are 1.5 compatible.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 11:38PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I just re-ran a test using just jquery 1.5.1 and jqueryui 1.8.11 and encountered the same error.  However, I also found out that running the $.ajax request with dataType of jsonp under jquery 1.4.4 produced the exact same error.  So, is there a way to force it to interpret the request as json and not jsonp?</p><p>My requests are coming from the same domain and do not have the domain qualified on the url ("/global/login.cfc?wsdl"), so my understanding is that it should be valid as json and it should not need to be running as jsonp.</p><p>Thanks, I appreciate the responses.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 11:46PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yes, if you use $.ajax instead, you can set the jsonp option to false.  jQuery does automatic conversion to jsonp in certain use cases, specifically when a callback is provided.  For more, see <a href="http://api.jquery.com/jQuery.ajax." class="ext-link"><span class="icon"></span>http://api.jquery.com/jQuery.ajax.</a></p><p>Closing this ticket for now. We'd be glad to open again if this is an issue with jQuery.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 11:56PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thank you very much.  setting jsonp = false on a $.ajax request, solved my problem.  Also, it works properly if I set jsonp to false in ajaxSetup.</p><p>However, if I set jsonp to false in ajaxSetup, and jsonp to false in an $.ajax request, it throws the same error.  This sounds like a very minor problem to me, but I expect it's probably a minor bug in the $.ajax implementation.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2011 01:46AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:9 cameronjacobs@…]:</p><blockquote> I just re-ran a test using just jquery 1.5.1 and jqueryui 1.8.11 and encountered the same error.  However, I also found out that running the $.ajax request with dataType of jsonp under jquery 1.4.4 produced the exact same error.  So, is there a way to force it to interpret the request as json and not jsonp?  My requests are coming from the same domain and do not have the domain qualified on the url ("/global/login.cfc?wsdl"), so my understanding is that it should be valid as json and it should not need to be running as jsonp.  Thanks, I appreciate the responses.</blockquote><p>Then you're probably doing something as described in <a href="http://bugs.jquery.com/ticket/8084#comment:16" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/8084#comment:16</a></p><p>Also, Timmy's suggestion of setting the jsonp option to false just hides the real issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2011 06:16PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry, I really don't mean to be a pest, but I'm not sure how this applies (except to my comment about setting jsonp to false in ajaxSettings.  It seems to work perfectly in the jQuery.ajax call if I apply it, but since I'm currently using jQuery.getJSON everywhere and while I can change it to a jQuery.ajax call and will if that's the more appropriate solution, I would prefer just to modify the ajaxSettings to have the getJSON requests work properly.</p><p>However, I suppose my real question is, if setting jsonp to false is hiding a real issue, what is the real issue, because I would like to solve the issue, but it seems like my response is a valid json response, but an invalid jsonp response.  Or at least it is parsed as invalid, is this correct?</p><p>As I stated above, my current request is replying:</p><p>{"LOGGEDIN":false}</p><p>It appears to be appropriately structured, I just am not sure why it's having a problem parsing the colon, because it should be reading this as an object and returning the object.</p><p>Again, sorry to be a pest, but I do really appreciate the responses, I just do not want to get stuck on a non-current version of jQuery and am willing to make any changes necessary to move forward, I just need to know what they are.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2011 06:38PM UTC by <span class="author">cameronjacobs@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Well, I guess the most appropriate question, is if I wrap my current json response with padding (i.e. something( ... ); ) would this solve the problem.  But more directly, why is the request getting promoted to jsonp, since it really should be a json request without padding?</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
