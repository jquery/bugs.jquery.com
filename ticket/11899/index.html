<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11899 (Problems with .attr() and [attribute] selector in IE7, after event DOM manipulation.) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11898/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11900/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11899</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened June 12, 2012 07:12PM UTC</p>
      
        <p>Closed June 12, 2012 07:14PM UTC</p>
      
      
        <p>Last modified June 13, 2012 07:51PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Problems with .attr() and [attribute] selector in IE7, after event DOM manipulation.</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        samuel.h.r.nunes@gmail.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.7.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Manipulation of events using the DOM Event Model creates problems for <code>.attr()</code> and the <code>[attribute]</code> selector in IE7.</p><p>After you manipulate e.g. the "<code>element.onclick</code>" directly with the DOM:</p><ul><li><code>jQuery(element).attr('onclick')</code> will return <code>"undefined"</code>,</li><li><code>jQuery('[onclick]')</code> will not find the element anymore.</li></ul><p>Other browsers (FF, Chrome, IE8, IE9) work as expected.</p><p>See here for a detailed test case: <a href="http://jsfiddle.net/LXkhk/5/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/LXkhk/5/</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 12, 2012 07:14PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry, but this is outside of jQuery's scope</p><p><a href="http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 12, 2012 07:42PM UTC by <span class="author">samuel.h.r.nunes@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the fast response.</p><p>Well, inline event handlers may be outside of jQuery's scope, but let me present my arguments into why I think that this particular issue is an exception. After all the text does say "In nearly all cases, ..." ;)</p><ul><li>This problem is recent. In jsFiddle it only shows up with jQuery 1.7.1 or higher. Here's a working example using jQuery 1.6.4: <a href="http://jsfiddle.net/LXkhk/6/," class="ext-link"><span class="icon"></span>http://jsfiddle.net/LXkhk/6/,</a></li><li>It has the implication that the <code>[onclick]</code> attribute selector becomes unreliable when doing DOM event manipulation,</li><li>There is nothing wrong with using the DOM Event Model to manipulate events, is there?</li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2012 05:04PM UTC by <span class="author">samuel.h.r.nunes@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:1 rwaldron]:</p><blockquote> Sorry, but this is outside of jQuery's scope  <a href="http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers</a></blockquote><p>Bumping this, since I forgot to click "reply" when I commented back yesterday.</p><p>You seem to have closed this ticket very quickly, probably without even looking at the example (just 2 minutes after it was created). But I think that this deserves more consideration, and that the "out of scope" description doesn't apply:</p><ul><li>The main point here is that this is a <strong>regression</strong> in jQuery 1.7. See my previous comment for the jsFiddle link that proves it.</li><li>The issue itself is not about getting inline event handlers working, but that '''<code>.attr()</code> doesn't work as specified in the API'''. The expected behaviour would be to retrieve the ''initial (string) value of the attribute'', since the DOM manipulation should affect the property only. That's what happens on all tested browsers except IE7.</li><li>Additionally <strong>the <code>[attribute]</code> selector also fails in these conditions</strong>, which is probably related.</li><li>At the very least, a note detailing that <code>.attr()</code> and <code>[attribute]</code> fail under these special conditions would be expected in the documentation. Otherwise, there's no way to see this as not a bug.</li></ul><p>Please don't just ignore this feedback. It's highly unmotivating to contribute detailed bug reports with jsFiddle examples, if they're closed 2 minutes after creation without any chance of reconsideration.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2012 05:28PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 samuel.h.r.nunes@…]:</p><blockquote> Replying to [comment:1 rwaldron]: &gt; Sorry, but this is outside of jQuery's scope &gt;  &gt; <a href="http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers</a>  Bumping this, since I forgot to click "reply" when I commented back yesterday.  You seem to have closed this ticket very quickly, probably without even looking at the example (just 2 minutes after it was created). But I think that this deserves more consideration, and that the "out of scope" description doesn't apply: * The main point here is that this is a <strong>regression</strong> in jQuery 1.7. See my previous comment for the jsFiddle link that proves it.</blockquote><p>A regression is when supported functionality stops working. If you were using unsupported use cases for an API that were just happening to be working and now they are not, that is not a regression.</p><blockquote> * The issue itself is not about getting inline event handlers working, but that '''<code>.attr()</code> doesn't work as specified in the API'''. The expected behaviour would be to retrieve the ''initial (string) value of the attribute'', since the DOM manipulation should affect the property only. That's what happens on all tested browsers except IE7.</blockquote><p><a href="http://api.jquery.com/attr/" class="ext-link"><span class="icon"></span>http://api.jquery.com/attr/</a> states "Get the value of an attribute for the first element in the set of matched elements." It also says "Cross-browser consistency: The .attr() method reduces such inconsistencies." Notice it doesn't say "eliminates", but rather "reduces". If you're using unsupported functionality, we make no gaurantees.</p><blockquote> * Additionally <strong>the <code>[attribute]</code> selector also fails in these conditions</strong>, which is probably related. * At the very least, a note detailing that <code>.attr()</code> and <code>[attribute]</code> fail under these special conditions would be expected in the documentation. Otherwise, there's no way to see this as not a bug.</blockquote><p>We note in <a href="http://api.jquery.com/attr/" class="ext-link"><span class="icon"></span>http://api.jquery.com/attr/</a> "Note: Attribute values are strings with the exception of a few attributes such as value and tabindex." Perhaps we should link to the <a href="http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Won't_Fix#Inline_Event_Handlers</a> here as well.</p><blockquote>  Please don't just ignore this feedback. It's highly unmotivating to contribute detailed bug reports with jsFiddle examples, if they're closed 2 minutes after creation without any chance of reconsideration.</blockquote><p>Your feedback was not ignored. Rather, it was seen, and the appropriate response given. You're entitled to come here and plead your case all you want, but it was not ignored. We have a list of things we don't fix, specifically because there are better ways to do what you're trying to do, and because it wastes time for us trying to fix it. </p><p>You should not be unmotivated simply because we responded to your issue by closing it. We welcome any and all bug reports. We just close them quickly if they are invalid or a duplicate. Please don't mistake our curtness for rudeness. We got lots of bug reports per day, and we don't like invalid tickets piling up.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2012 05:46PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks Mike.</p><p>@samuel everything above is true ;)</p><p>ps. I totally looked at the fiddle. I even spent time afterward trying to figure out what you were hoping to accomplish with this approach :P</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2012 06:22PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry it seemed that we were too abrupt, but really once something is in the wontfix category it's not like we're doing regression tests to see how much we won't fix them. We test for the things where we are concerned about regressions and this isn't one of them. </p><p>When you're using inline event handlers you're outside jQuery's event system and we can't guarantee many of the things that we do for events attached by jQuery. IE7 has the "attroperty" problem where it confused attributes and properties. We fix that for the cases that we need to keep consistent, and it's quite a lot of work. Since inline event handlers are outside the envelope we're not looking for or fixing any changed behavior there.</p><p>I know it can be frustrating to find a problem that has caused issues for your code, spend some time documenting it, and then get this response. It doesn't change the fact that inline attributes have not been considered best practice in web development for years, and as a practical matter we can't support them as first-class event citizens within jQuery.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2012 07:51PM UTC by <span class="author">samuel.h.r.nunes@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the more in-depth replies :)</p><p>@mikesherov and @dmethvin:</p><p>Your explanations are clear, and I accept the reasonings behind them. Unfortunately, for a small team maintaining a large application, it's impossible to move away from inline event handlers any time soon.</p><p>So we're stuck with having to find workarounds after updating to the latest jQuery :(</p><p>To be clear, I never expected inline event handlers to be "fixed" as you do for events attached by jQuery. I'm aware of their limitations and that they are considered "bad practice" nowadays.</p><p>However, I really thought that it makes sense to keep fixing the IE7 "attroperty" problem for event attributes as long as IE7 is supported (especially since you did that up to 1.6.4). But of course only you can know the bad implications that this had, and why you decided to drop it from your code.</p><p>@rwaldron: Sorry if my frustration sounded as bitter before. To be honest, I don't have a specific thing that I'm trying to accomplish here. Instead, I have a bunch of regressions for things that were working before. A good example is the "[onclick]" selector which is used widely in our code. It seems that I will have to implement a custom filter to replace it.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
