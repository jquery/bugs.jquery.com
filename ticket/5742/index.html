<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#5742 (Consider RunJS for jQuery code loading) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/5741/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/5743/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#5742</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">feature</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 02, 2010 01:26AM UTC</p>
      
        <p>Closed September 30, 2010 05:45AM UTC</p>
      
      
        <p>Last modified March 09, 2012 05:11PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Consider RunJS for jQuery code loading</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jrburke
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.4">1.4</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.3.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This is an alternative proposal to a $.require() function.</p><p>Code loading in the browser is a cross-library concern, and I believe it is best served by something that can be a stand-alone script, something that can be used to load even jQuery itself.</p><p>I propose <a href="/wiki/RunJS">RunJS</a> as the code loader for jQuery. It is a standalone project and recently relicensed to be a tri-license like Sizzle:</p><p><a href="http://github.com/jrburke/runjs" class="ext-link"><span class="icon"></span>http://github.com/jrburke/runjs</a></p><p>Here are the requirements <a href="/wiki/RunJS">RunJS</a> is trying to meet:</p><p><a href="http://github.com/jrburke/runjs/blob/master/docs/requirements.md" class="ext-link"><span class="icon"></span>http://github.com/jrburke/runjs/blob/master/docs/requirements.md</a></p><p>Here are specific instructions that detail how it can be used with jQuery now (links to a downloadable sample at the end):</p><p><a href="http://github.com/jrburke/runjs/blob/master/docs/jquery.md" class="ext-link"><span class="icon"></span>http://github.com/jrburke/runjs/blob/master/docs/jquery.md</a></p><p>Here is a patch to jQuery that integrates <a href="/wiki/RunJS">RunJS</a>, in a similar fashion as Sizzle:</p><p><a href="http://github.com/jrburke/jquery/commit/8678f98a3a514f0a5f14a51edad970c616d46a6f" class="ext-link"><span class="icon"></span>http://github.com/jrburke/jquery/commit/8678f98a3a514f0a5f14a51edad970c616d46a6f</a></p><p>That is the bare-bones patch. I believe starting jQuery off using a stand-alone loader instead of something that is only accessible inside of jQuery (like via a $.require) will make it harder in the long term to have jquery code interoperate with other modules in the future.</p><p>Given the "no global modules" approach that is supported by <a href="/wiki/RunJS">RunJS</a>, it would be possible to construct jQuery so that it would not need to create a global jQuery object. This makes it nice if multiple versions of jQuery needed to be loaded in the page with their own dependencies.</p><p>The build tools with <a href="/wiki/RunJS">RunJS</a> could allow each piece of jQuery to be used on its own -- each component JS file can specify its dependencies and the <a href="/wiki/RunJS">RunJS</a> build will make it easy to create custom versions of jQuery.</p><p>I am happy to make changes to <a href="/wiki/RunJS">RunJS</a> if there is something that would help make it easier to integrate jQuery.</p><p>I am working with Dojo to get <a href="/wiki/RunJS">RunJS</a> integrated in any future efforts for that toolkit. I can already convert the Dojo 1.4.0 code to use it, but the i18n bundles for layers is are not fully optimized yet. <a href="/wiki/RunJS">RunJS</a> is capable enough to handle larger Dojo projects with many nested dependencies. I also plan on approaching other toolkits to try to get it as the baseline code loader that works well in the browser. However, with this ticket, jQuery would be the first one to integrate <a href="/wiki/RunJS">RunJS</a>, if jQuery chooses to do so.</p><p>With the baseline build of <a href="/wiki/RunJS">RunJS</a> integrated with today's jQuery master, the file sizes break out like so:</p><p>minified:</p> <ul><li>no <a href="/wiki/RunJS">RunJS</a>:  68,459 bytes</li> <li>w/ <a href="/wiki/RunJS">RunJS</a>:  74,224 bytes</li></ul><p>gzipped:</p> <ul><li>no <a href="/wiki/RunJS">RunJS</a>: 23,100 bytes</li> <li>w/ <a href="/wiki/RunJS">RunJS</a>: 25,214 bytes</li></ul><p>These numbers were generated by typing in "make" and looking in the dist directory.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 04, 2010 01:21AM UTC by <span class="author">jrburke</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I have changed <a href="/wiki/RunJS">RunJS</a> to <a href="/wiki/RequireJS">RequireJS</a> now:</p><p><a href="http://github.com/jrburke/requirejs" class="ext-link"><span class="icon"></span>http://github.com/jrburke/requirejs</a></p><p>It implements the Transport/C proposal for <a href="/wiki/CommonJS">CommonJS</a>:</p><p><a href="http://wiki.commonjs.org/wiki/Modules/Transport/C" class="ext-link"><span class="icon"></span>http://wiki.commonjs.org/wiki/Modules/Transport/C</a></p><p><a href="/wiki/RequireJS">RequireJS</a> has better support for <a href="/wiki/CommonJS">CommonJS</a> modules by providing a conversion script that converts <a href="/wiki/CommonJS">CommonJS</a> modules to <a href="/wiki/RequireJS">RequireJS</a> format, but still provides an easy way to ease into modular code loading:</p><p><a href="http://github.com/jrburke/requirejs/blob/master/docs/jquery.md" class="ext-link"><span class="icon"></span>http://github.com/jrburke/requirejs/blob/master/docs/jquery.md</a></p><p>My fork of jQuery has the changes:</p><p><a href="http://github.com/jrburke/jquery" class="ext-link"><span class="icon"></span>http://github.com/jrburke/jquery</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 13, 2010 11:35PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 22, 2010 07:47AM UTC by <span class="author">jrburke</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I submitted a pull request that demonstrates how a simple integration might work without having to build require() functionality into jQuery itself:</p><p><a href="http://github.com/jrburke/jquery/commit/0178972afb7c125b36c690d483be84cbff0fcc61" class="ext-link"><span class="icon"></span>http://github.com/jrburke/jquery/commit/0178972afb7c125b36c690d483be84cbff0fcc61</a></p><p>Some notes from the pull request:</p><p>This is a possible way to tie in a require function for jQuery without having to build it in directly to jQuery. The require function is provided by <a href="http://requirejs.org" class="ext-link"><span class="icon"></span>RequireJS</a>. This has the following advantages:</p> <ul><li>Allows jQuery to be required, meaning a page can have a small bootstrap via <a href="/wiki/RequireJS">RequireJS</a> and load jQuery after page load.</li> <li>The require.def in <a href="/wiki/RequireJS">RequireJS</a> allows multiple versions of jQuery to exist on the page in a more flexible way than jQuery.noConflict().</li> <li>Only jQuery users who care about modular script loading have to take the require() cost.</li></ul><p>Ideally these sorts of changes would not be needed in the jQuery source, but I do not see another way to do them, particularly since jQuery could be inlined with some other scripts that may register ready callbacks. It is not very robust to try to monkey patch jQuery after it loads. The monkey patch would also be very ugly.</p><p>The changes in src/core.js:</p> <ul><li>Make sure jQuery ready callbacks are not fired until any scripts require is tracking finish loading. Since require uses dynamically created, async script tag loading, the scripts can finish after DOMContentLoaded.</li> <li>Allow ready callbacks to be registered and fired after DOMContentLoaded. This is needed since require() can be called after DOMContentLoaded (for instance, loading more modules when a button is clicked), and the user may want to keep with the normal idiom of registering jQuery ready callbacks.</li> <li>Register jQuery as a module, which allows the multiple versions of jQuery in a page to work, and for other script modules to get a direct reference to jQuery.</li></ul><p>I completely understand if you feel this does not fit in with jQuery's goals for script loading. I am just giving an option particularly since there are many choices with how a require function could be designed. This approach tries to allow the minimum set of changes to allow more real world experimentation with a working and deployed require() approach. If you have another approach you would like me to try, I am happy to help.</p><p>I believe <a href="/wiki/RequireJS">RequireJS</a> <a href="http://tagneto.blogspot.com/2010/04/require-for-jquery.html" class="ext-link"><span class="icon"></span>meets the requirements</a> I have heard for a require() in jQuery, <a href="http://tagneto.blogspot.com/2010/05/requirejs-0110-released.html" class="ext-link"><span class="icon"></span>as of <a href="/wiki/RequireJS">RequireJS</a> 0.11</a>, with some notable features:</p> <ul><li><a href="/wiki/RequireJS">RequireJS</a> tracks <a href="/wiki/CommonJS">CommonJS</a>, but is optimized for the browser. It is possible to reuse modules written in <a href="/wiki/CommonJS">CommonJS</a> via <a href="/wiki/RequireJS">RequireJS</a>, allowing jQuery users the ability to leverage more code.</li> <li><a href="/wiki/RequireJS">RequireJS</a> can run in multiple environments: Rhino, Node, Jetpack and inside Web Workers.</li> <li>Only uses dynamically created script tags for loading scripts in the browser: works across domains (for loading from CDNs) and is the most robust, browser-friendly, debug-friendly loading approach.</li> <li>It encourages very modular, scoped code that works well with JSLint.</li> <li>The optimization tool in <a href="/wiki/RequireJS">RequireJS</a> gives a server-agnostic way to optimize code for best delivery.</li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 30, 2010 05:45AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Superseded by <a href="/ticket/7102">#7102</a>. Closing as per jrburke.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
