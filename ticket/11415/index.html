<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11415 (Silently ignore negative CSS values where they are illegal) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11414/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11416/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11415</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 28, 2012 09:27PM UTC</p>
      
        <p>Closed March 02, 2012 03:32AM UTC</p>
      
      
        <p>Last modified March 17, 2012 01:25AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Silently ignore negative CSS values where they are illegal</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        SineSwiper
      </td>
      <th>Owned by:</th>
      <td>SineSwiper</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.7.2">1.7.2</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>effects</td>
      
        <th>Version:</th>
      
      <td>1.7.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Currently, there is a browser normalization problem with the way negative values are treated between IE and Firefox.  Firefox will silently ignore negative CSS values where they are not appropriate.  IE will error out.  </p><p>While "allowing" an illegal value for a property may seem something less to do with jQuery and more to do with the JS programmer, these kind of problems can occur in a single frame of animation, and go unnoticed until a check in IE reveals the problem.  One such example is the <a href="http://bugs.jqueryui.com/ticket/8142" class="ext-link"><span class="icon"></span>jQuery UI bug <a href="/ticket/8142">#8142</a></a>, which uses an easing of 'easeInOutElastic' to inadvertently cause a negative height problem.</p><p>There have been some fixed bugs in the past to take care of these piecemeal and has been a source of dupe bugs, such as <a href="/ticket/3881">#3881</a>, <a href="/ticket/4413">#4413</a>, <a href="/ticket/5051">#5051</a>, <a href="/ticket/5588">#5588</a>, <a href="/ticket/10294">#10294</a>, <a href="/ticket/10582">#10582</a>.  However, the css(), prop(), and animate() should go ahead and take care of all of the potential cases for this problem and eliminate all of them at the same time.</p><p>Based on my research, the following CSS properties cannot contain negative values, according to the W3C CSS2.1 standard (and certain CSS3 modules):</p><ul><li>border-spacing</li><li>padding-top, padding-right, padding-bottom, padding-left, and padding</li><li>border-top-width, border-right-width, border-bottom-width, border-left-width, and border-width</li><li>border-top, border-right, border-bottom, border-left, and border (if specifying a width)</li><li>font-size and font (if specifying a size)</li><li>width and height</li><li>min-width, max-width, min-height, and max-height</li><li>line-height</li><li>outline-width and outline (if specifying a width)</li><li>widows </li></ul><p>CSS3:</p><ul><li>column-gap and column-rule-width</li><li>device-width, device-height, color, color-index, monochrome</li><li>marquee-play-count</li><li>background-size, border-image-slice, border-image-width, border-image-outset, box-shadow (only the blur radius)</li></ul></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 28, 2012 09:38PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">As a thought exercise, if it were Chrome or Firefox that was picky would you want this behavior? Is IE wrong about the error or is the code wrong in a possibly-benign way and other browsers ignored it?&#92;
&#92;
With `.css(&quot;border: 1px 1px -1px 4px&quot;)`, are we supposed to parse the shorthand property and look for negative numbers? A more horrifying fix IMO would be to wrap it all in a try/catch and ignore any hint of an error coming out of the property assignment. &#92;
&#92;
I think our goals for cross-browser consistency should cover valid inputs, not invalid ones. Invalid inputs are errors and should be fixed.&#92;
</span> → <span class="change-field-new">1330465149890173</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ SineSwiper</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>As a thought exercise, if it were Chrome or Firefox that was picky would you want this behavior? Is IE wrong about the error or is the code wrong in a possibly-benign way and other browsers ignored it?</p><p>With <code>.css("border", "1px 1px -1px 4px")</code>, are we supposed to parse the shorthand property and look for negative numbers? A more horrifying fix IMO would be to wrap it all in a try/catch and ignore any hint of an error coming out of the property assignment. </p><p>I think our goals for cross-browser consistency should cover valid inputs, not invalid ones. Invalid inputs are errors and should be fixed.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 29, 2012 02:58PM UTC by <span class="author">SineSwiper</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The fact that it's a browser inconsistency does add weight to the problem.  However, even if Chrome/Firefox did the same thing, we'd still want to make sure that the automations of animations and the like are as painless as possible.  Part of jQuery's magic is being able to do stuff to even zero elements and not giving you an "Object required" error.  The same should apply to this problem.</p><p>A string like </p><pre class="wiki">.css("border", "1px 1px -1px 4px")</pre> would be unlikely to be used in repeating patterns, and it would be more likely that "border-left-width" would be changed.  We can ignore the harder-to-catch and less-likely-to-be-invalid shorthand properties: border, border-TRBL, padding, border-width, font, outline, box-shadow.<p></p><p>Instead, a simple one-liner (with a complex RE) can catch the others.  Something like:</p><pre class="wiki">if (/^(border-(spacing|-(top|right|bottom|left)(-width)?|image-(slice|width|outset))|padding-(top|right|bottom|left)|font|(font|background)-size|((min|max|device)-)?(width|height)|(outline|column-rule)-width|line-height|widows|column-gap|color(-index)?|monochrome|marquee-play-count)$/.test(prop) && /^\\s*-/.test(val)) return $obj;</pre><p>Heck, even the other ones aren't difficult to parse.  I already included above the ones that feature the negative illegal on the front end.</p><pre class="wiki">else if (/^(border(-(top|right|bottom|left))?|padding|outline)$/.test(prop) && /(^|\\s+)-\\d+/.test(val)) return $obj;</pre><p>That covers all of them except for box-shadow, which likely isn't going to be used, anyway.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2012 03:04AM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We should handle the properties from fxAttrs, and leave the rest to another plugin or the end user.</p><p>The implementation would be really small. We're already guarding against this for width and height, so we can just change:</p><p><code>jQuery.each([ "width", "height" ], function( i, prop ) {</code></p><p>to:</p><p><code>jQuery.each( fxAttrs.concat.apply( [], fxAttrs ), function( i, prop ) {</code></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2012 03:32AM UTC by <span class="author">Dave Methvin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/11415">#11415</a>: Stop non-negative prop undershoot on animation.</p><p>This doesn't fix *all* of them (see the ticket for a supposedly complete list) but these were already handy so it was relatively cheap to fix them. If you need others fixed, add a custom step function as was done here. Thanks @scott_gonzalez! </p><p> Changeset: 56426261f0ee97d6d2f903d08b137a6f5f2c0916</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2012 04:12PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">effects</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">None</span> → <span class="change-field-new">1.7.2</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">bug</span> → <span class="change-field-new">enhancement</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 17, 2012 01:25AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Good, good.  Thanks for your help on this from both JQ/UI sides.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
