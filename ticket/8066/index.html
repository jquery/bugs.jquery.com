<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8066 (Element order not maintained correctly if chaining find and parents) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8065/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8067/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8066</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 26, 2011 08:05PM UTC</p>
      
        <p>Closed January 27, 2011 10:01PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Element order not maintained correctly if chaining find and parents</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        hwadechandler-jq@yahoo.com
      </td>
      <th>Owned by:</th>
      <td>hwadechandler-jq@yahoo.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>traversing</td>
      
        <th>Version:</th>
      
      <td>1.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Element order not maintained correctly if chaining find and parents. That is, if one has a set of elements which they must narrow down, then find a specific parent element, and then access different children, they must currently handle all the iteration themselves after the call to find because after a call to parents is made, the order will not be maintained correctly.</p><p>Image a DOM including:</p><pre class="wiki">
&lt;div class="some-parent"&gt;
   &lt;h3&gt;Title 1&lt;/h3&gt;
   &lt;div class="some-other-parent"&gt;
       &lt;input class="cmpnId" type="hidden" value="2"/&gt;
       &lt;input class="cmpnType" type="hidden" value="IMAGE"/&gt;
   &lt;/div&gt;
&lt;/div&gt;
&lt;div class="some-parent"&gt;
   &lt;h3&gt;Title 2&lt;/h3&gt;
   &lt;div class="some-other-parent"&gt;
       &lt;input class="cmpnId" type="hidden" value="3"/&gt;
       &lt;input class="cmpnType" type="hidden" value="IMAGE"/&gt;
   &lt;/div&gt;
&lt;/div&gt;
&lt;div class="some-parent"&gt;
   &lt;h3&gt;Title 3&lt;/h3&gt;
   &lt;div class="some-other-parent"&gt;
       &lt;input class="cmpnId" type="hidden" value="6"/&gt;
       &lt;input class="cmpnType" type="hidden" value="TASK"/&gt;
   &lt;/div&gt;
&lt;/div&gt;
</pre><p>Next imagine jQuery JS:</p><pre class="wiki">
    $(window.document).find('.some-parent .some-other-parent input.cmpnType[value="IMAGE"]').parents('.some-parent');
</pre><p>as to give one the top level parents of all the image component wrappers so to speak. It seems logical to assume:</p><pre class="wiki">
    $($(window.document).find('.some-parent .some-other-parent input.cmpnType[value="IMAGE"]').parents('.some-parent')[0]).find('input.cmpnId').val()==='2';
</pre><p>But this is not the case. It can be the latter, and thus far, seems to be the case always as if a reverse iterator is used for parents. I'm currently using 1.4.2, and I don't see anything in the change logs which shows this being fixed. I will try 1.4.4 and report more information, but I wanted to go ahead and file this while it was on my mind as it seems a big deal.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 26, 2011 08:12PM UTC by <span class="author">hwadechandler-jq@yahoo.com</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I downloaded 1.4.4 and it has the same issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 26, 2011 08:20PM UTC by <span class="author">hwadechandler-jq@yahoo.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Just so I'm completely clear here. The order is reversed after the call to parents. Thus, the order is not maintained as seems one would logically expect.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 26, 2011 10:48PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ hwadechandler-jq@yahoo.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>.parents() is ordered by closesness of the parent to the original element, so I am pretty sure this is intended behaviour.  If you do believe this is a bug, please create a testcase on <a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span>jsFiddle</a> and make sure to test against the 0 GIT version (which is jQuery 1.5 RC1+ at the moment).   Thanks for your time!</p><p>PS, you may want to consider using <a href="http://api.jquery.com/closest/" class="ext-link"><span class="icon"></span>closest</a> instead of parents() or you could get a lot of duplicate iterations ...</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 27, 2011 02:59PM UTC by <span class="author">hwadechandler-jq@yahoo.com</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>What does closeness mean in this context? When I read that I still think the order would be preserved, and I think this because I'm thinking of the parents of the original elements. In other words, I have a list of elements which I'm asking for the parents. In each case, it would be the parents of that element as it pertains to its location in the list, and thus I have elements 1,2,3 and then I'm wanting 1-&gt;parent, 2-&gt;parent, and 3-&gt;parent, and the order is based on that which is being requested or the parents of these elements which are in an order. I can write up a test case which will get the elements, and then make a list of the parents and compare them individually to see if the order of the parents matches that of the original elements from find, and fail if that is not the case, but I wanted to better understand exactly what you meant by closeness.</p><p>Thank you.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 27, 2011 03:01PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Wanted to add that I have no idea why this tracker forces me to leave as new after you changed it to pending, but I can't change that as there is a single radio/option button which I can not deselect. Just a heads up on why it changed that back to new.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 27, 2011 05:38PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>By closeness I mean that the immediate parent will be the first in the set, that element's parent will be the second in the set, the second element's parent will be the third in the set, etc.  That is the opposite of what you'd get if you searched from a parent downwards to find all its nested children.  </p><p>Again, if you do think there is a legit bug here please file a test case, but I am reasonably confident there isn't one.  Don't worry about Trac quirkiness - thanks for getting back to us!  "Pending" is just our way of putting the ball back in your court, and when you reply it goes back to "new."</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 27, 2011 10:01PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">traversing</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.4.2</span> → <span class="change-field-new">1.4</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think the reporter understand that <code>.parents()</code> returns the elements in reverse DOM order as shown here <a href="http://jsfiddle.net/nbSZP/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/nbSZP/</a> .</p><p>What he is getting at with his report is that - if there is more then one element in the set of matched elements then - the parents of the individual elements aren't returned in the DOM order relative to the position of the elements in the set.</p><p>This is difficult to explain. Just look at this <a href="http://jsfiddle.net/jitter/P69VY/" class="ext-link"><span class="icon"></span>test case</a> and check how the order of the parents returned changes from 1.3.2 to 1.4+.</p><pre class="wiki">
1.3.2 : [div#i1.1, div#i1, div#i0, div#i2.1, div#i2]
1.4+  : [div#i2.1, div#i2, div#i1.1, div#i1, div#i0]
</pre><p>The reversed dom-order of the parents is still ok, but the order in which the parents get returned no longer matches the dom order of their children.</p><p></p><hr><p></p><p>Now what I'm a little unsure off is if this should be fixed at all. The behavior changed with 1.4 but has stayed identical since then. So we are much more likely to break things by fixing this then by leaving it as it is.</p><p>This part of the behavior also isn't specified in the documentation and thus shouldn't be relied upon. Additionally when using <code>.parents()</code> on multiple elements in general you can't know how many elements are going to be returned or which elements are a "parent-chain" or which elements are the parent of which element in the matched set. If you would (need to) know all of this you shouldn't be using <code>.parents()</code>.</p><p>Thus by looking at your original test case I suggest another way of doing this. Which has the benefit of being more readable and making clear what your intent is and doesn't rely on an unspecified behavior of <code>.parents()</code>.</p><pre class="wiki">
$('.some-parent').has('.some-other-parent input.cmpnType[value="IMAGE"]').first();
</pre><p>Considering all of this I close this ticket. So unless you make a really good point why this indeed needs fixing the behavior won't be changed.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
