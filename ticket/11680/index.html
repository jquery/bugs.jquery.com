<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11680 (Cross-Domain ajax request error handler does not get called) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11679/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11681/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11680</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(patchwelcome)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened May 01, 2012 08:34PM UTC</p>
      
        <p>Closed May 11, 2012 05:31PM UTC</p>
      
      
        <p>Last modified February 21, 2013 01:50PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Cross-Domain ajax request error handler does not get called</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        geoffreyk
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.7.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>jaubourg</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Revisiting, and expanding <a href="http://bugs.jquery.com/ticket/11575" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/11575</a></p><p>Using this code with 1.7.2 and edge</p><p>   $.ajax({</p><p>          type: 'get',</p><p>          url: 'http://openapi.ro/api/companies/123456789.json',</p><p>          dataType: 'jsonp',</p><p>          success: function(data) {</p><p>              alert('success 404');</p><p>          },</p><p>          error: function(data) {</p><p>              alert('fail 404')</p><p>          }</p><p>      });</p><p>   $.ajax({</p><p>          type: 'get',</p><p>          url: 'http://widgets.membership.s-msft.com/v1/user/usercard/?id=badID',</p><p>          dataType: 'jsonp',</p><p>          success: function(data) {</p><p>              alert('success 500');</p><p>          },</p><p>          error: function(data) {</p><p>              alert('fail 500')</p><p>          }</p><p>      });</p><p>jsfiddle link:</p><p><a href="http://jsfiddle.net/geoffreyk/GTNX8/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/geoffreyk/GTNX8/</a></p><p>The first ajax call is to a page that will return a 404 error code. </p><p>The second ajax call is to a page that will return a 500 error code. </p><p>I am seeing in the following browsers, all on win7:</p><p>FF12:</p><p>    404 and 500 error functions are <strong>NOT</strong> called</p><p>Chrome 18:</p><p>    500 error function is <strong>NOT</strong> called</p><p>    404 error funciton is called</p><p>Chrome 18:</p><p>    500 error function is <strong>NOT</strong> called</p><p>    404 error funciton is called</p><p>IE8:</p><p>    404 and 500 error functions are called</p><p>IE9:</p><p>    404 and 500 error functions are called</p><p>Opera 11:</p><p>    404 and 500 error functions are <strong>NOT</strong> called</p><p>bummer :(</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (11)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 01, 2012 08:38PM UTC by <span class="author">geoffreyk</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>arr, dropped a br. should be a break between "all on win7: " and "FF12:"</p><p>Just to clarify, </p><p>All of these tests were on windows 7. </p><p>The first test was on FF12.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 01, 2012 09:04PM UTC by <span class="author">geoffreyk</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>One more test</p><p>IE7 on Vista:</p><p>404 and 500 error functions are called </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 05, 2012 03:57PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ jaubourg</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>This is basically a dup of <a href="/ticket/10256">#10256</a>, but at minimum the docs need some clarification about when the error callback may occur. </p><p>For example, it looks to me that the script transport is being used in Chrome and the script tag's <code>.onload()</code> fires even though the script URL is 404. Since there was no actual script content the jsonp callback didn't get called, so the error callback fires since there is no json to parse. </p><p>@jaubourg can you weigh in on this? Seems like we can't say the error callback will *not* be called, but only that it isn't called reliably on all browsers.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 05, 2012 10:16PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We can be more precise in the docs but last time I checked onload didn't trigger for chrome in case of a 404. It's more likely that onerror doesn't trigger for a 500.</p><p>If people need reliable error handling for jsonp, they'd better use jQuery-JSONP ( <a href="https://github.com/jaubourg/jquery-jsonp" class="ext-link"><span class="icon"></span>https://github.com/jaubourg/jquery-jsonp</a> ) and, if there are bugs there, to open issues against it.</p><p>I hope to be able to bring jQuery's jsonp implementation up to speed with the plugin but:</p><p>1. it has a cost in size</p><p>2. until Opera ticks to a new version, there is sniffing involved</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 08, 2012 11:48PM UTC by <span class="author">geoffreyk</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>IMHO, this is exactly what jQuery has always been and should continue to be about. Making difficult things simple and unifying the differences between browsers. </p><p>JSONP is not simple to implement, but the interface that jQuery has created makes using it so simple, that there are no reasons not to use it. </p><p>Except that to have really robust AJAX, you have to have good error handling. Stuff just breaks on internet, and those errors must be handled. </p><p>All smiles and rainbows, except once again, the browsers are handling errors differently. This is where jQuery has always shined. Bringing all the different browser implementations together so that we lowly devs can go out and create great code without worrying about the incompatibilities. </p><p>If jQuery is going to provide JSONP, then I believe it also needs to handle errors states correctly too. This should not be handed off to a plug in.</p><p>My $0.02</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 08, 2012 11:49PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@geoffreyk, looking forward to your patch!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 09, 2012 12:06AM UTC by <span class="author">geoffreyk</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Replying to [comment:6 dmethvin]:&#92;
&gt; @geoffreyk, looking forward to your patch!&#92;
&#92;
I am only qualified to use it, cheerlead for it, but not create it :)&#92;
&#92;
I will give it a look though, but I think it may be over my head...&#92;
</span> → <span class="change-field-new">1336522103357427</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:6 dmethvin]:</p><blockquote> @geoffreyk, looking forward to your patch!</blockquote><p>I am only qualified to use it, cheerlead for it, beg for it, but not create it :)</p><p>I will give it a look though, but I think it may be over my lowly head...</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 09, 2012 12:24AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is an open source project, if you want something to happen you can make it happen. We're not opposed to this change at all, just not convinced it can be done given the state of browser support.</p><p>Honestly I think you are halfway there. For the browsers that don't yet support error events on script elements, create a non-jQuery test case and file a bug report with them, or find an existing one and vote it up. Then put the links here so they can be easily tracked. The good news is that the older browsers like IE8 do what you want already. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2012 05:31PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ patchwelcome</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>To reiterate, we're open to standardizing behavior here but don't think the browser support is able to do it. If someone notices in the future that browsers have cleaned up their act, or thinks up another way to do this, please let us know.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 01:38PM UTC by <span class="author">guitarsolo92@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>$.ajax({</p><p>	url:'http://maps.googleapis.com/maps/api/geocode/json',</p><p>	data:{'sensor':'true', 'address':search},</p><p>	type:'GET',</p><p>	cache:true,</p><p>	dataType:'jsonp',</p><p>	beforeSend: function (jqXHR, settings) {</p><p>		alert(settings.url); <em>Show-me if is a valid URL, for tests</em></p><p>	},</p><p>	success: function(r) {</p><p>		alert((r).toSource());</p><p>	},</p><p>	error: function (jqXHR, textStatus, errorThrown) {</p><p>		alert(textStatus + '\\n' + errorThrown);</p><p>	}</p><p>});</p><p>Alert Response#1</p><p>http:maps.googleapis.com/maps/api/geocode/json?callback=jQuery19107215280201753225_1361453726673&sensor=true&address=rua+araguari+118+bh+mg</p><p>Alert Response#2</p><p>parsererror</p><p>Error: jQuery19107215280201753225_1361453726673 was not called</p><p>Whyyy?? i search all the web for that soluction and nobody know!!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 01:50PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:10 guitarsolo92@…]:</p><blockquote> Whyyy?? i search all the web for that soluction and nobody know!!</blockquote><p>You need to brush up on those searching skills: <a href="http://stackoverflow.com/questions/5359224/parsererror-after-jquery-ajax-request-with-jsonp-content-type" class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/5359224/parsererror-after-jquery-ajax-request-with-jsonp-content-type</a></p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
