<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7504 (Very slow selector in jQuery &amp;gt; 1.4.2) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7503/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7505/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7504</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 13, 2010 10:26PM UTC</p>
      
        <p>Closed November 13, 2010 11:12PM UTC</p>
      
      
        <p>Last modified November 20, 2010 01:10AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Very slow selector in jQuery &gt; 1.4.2</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        ktecho@ktecho.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.5">1.5</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.4.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I was using jQuery 1.4.2 to develop a very big and complex form where I must show and hide some fields between 3000+ elements. I have used previous versions as well, but 1.4.2 is the latest one to work ok. When 1.4.3 was released, I was very excited with the speed improvements shown in the jquery blog, as iterating through 3000 fields is sometimes a bit slow, but when I tried 1.4.3 I realized that it's a lot slower (some order of magnitude, or like 5 - 7 times slower). </p><p>The browser I have to use (it's used in the client PCs) is IE7, and with 1.4.3 (and 1.4.4) IE7 show 4 or 5 times the message 'Script is taking too much time, do you want to cancel it?'</p><p>I'm going to describe how the elements are and how I'm iterating them:</p><p>This is a common element:</p><p></p><hr><p></p><p>&lt;tr tab="ta_1" dim="en_A,re_V,se_2,tsk" id_col="AVNSEG_SAR_MEMBER" style="display: none;"&gt;</p><p>[...]</p><p>A lot of table info... links and a form element (textarea, input, etc.)</p><p>&lt;/tr&gt;</p><p></p><hr><p></p><p>This is an example selector used to show and hide groups of elements:</p><p></p><hr><p></p><p>var tabCache = $(tabCacheGet(1));</p><p>$(tabCache).filter(</p><p>'[dim^=en_A][dim*=re_V],' +</p><p>'[dim^=en_G][dim*=re_G],' +</p><p>'[dim^=en_T][dim*=re_G],' +</p><p>'[dim^=en_G][dim*=re_I]'</p><p>).filter(selectorSeccionesActivadas).filter(':not([dim*=adv])').show();</p><p></p><hr><p></p><p>The first filter parameter (tab="ta_1") is something like a super-group of elements that I cache to improve speed (it really saves time after the first search) using the function tabCacheGet(1). Once I have the supergroup of elements, I do the rest of the filtering with "filter" and the different 'dim' literals.</p><p>If you want for me to test some patch or something, I can do it, as speed difference is so big that I don't need a profiler or anything.</p><p>Thanks a lot.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 13, 2010 11:12PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>compounded filter statements using multiple attri bute selectors are going to perform very poorly. Please post on the jquery forums for help with selector performance.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 13, 2010 11:30PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yes, jQuery could always be "faster" when it comes to element manipulation, but the performance roadblock here is not jQuery, it is the fundamental choice you are making to manipulate the style attribute of thousands of elements, instead of using CSS to impart the state. If you have a table with thousands of rows that need to be hid and shown conditionally, setting classes on the table - or even the rows - that set the display, rather than manipulating the style property, will perform considerably better.</p><p>There is not a really clear "bug" here, and this bug tracker is only for succint, duplicable issues that affect jQuery core. Selectors that cannot utilise QSA or other native methods, like getElementsByTagName, are inherently slower than those that do. Selectors that do regex tests, like [foo*=bar], are much slower than those that don't. Also, with attribute selectors, you'll pick up a perfgain - outside of IE - by quoting the attributes, so that that selector can be passed into QSA.</p><p>For what it's worth, there's no point in wrapping a jQuery object in another jQuery object. var tabCache = $(tabCacheGet(1)); tabCache.filter(expr);</p><p>The bottom line is this: while we understand that you are experiencing a performance bottleneck in your application, (and we've all been there), there is not a simple "fix" for "repeatedly filtering thousands and thousands of elements using nothing but nested attribute selectors and then manipulating their style attributes." As I've intimated thus far, the best "fix" in this situation is to understand what causes performance bottlenecks and how to refactor your application to avoid them. The support forums ( <a href="http://forum.jquery.com)" class="ext-link"><span class="icon"></span>http://forum.jquery.com)</a> and #jquery IRC channel on freenode, are a better venue for this type of discussion to continue than the bug tracker.</p><p>Thanks for your time and interest in improving jQuery!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 20, 2010 01:10AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Well, I was not stating that jquery is slow executing my code. I was stating that with jQuery 1.4.2 or less, my selector works reasonably well. With 1.4.3 and 1.4.4 it's a lot slower. It lasts 5 or 6 times the amount of time to do the same traversing.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
