<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7404 (getScript does not wait until code has finished executing before callback is triggered) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7403/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7405/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7404</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 04, 2010 10:13PM UTC</p>
      
        <p>Closed November 04, 2010 10:21PM UTC</p>
      
      
        <p>Last modified August 14, 2012 09:21AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">getScript does not wait until code has finished executing before callback is triggered</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        darrel.grant@neverblue.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.5">1.5</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.4.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>$.getScript("mylib.js", function() {</p><p> thingFromMyLib();</p><p>});</p><p>Result: </p><p>thingFromMyLib() is not a function</p><p>Affects Firefox 3.6.3 but I've been reading about the issue and other browsers are affected, inconsistently.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 10:21PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Tested: &lt;br&gt;&#92;
FF3.0.12,3.6.12,4b6 (sorry, no 3.6.3)&lt;br&gt;&#92;
Chrome 5,6,7,8&lt;br&gt;&#92;
Safari 5&lt;br&gt;&#92;
IE6,7,8&lt;br&gt;&#92;
Opera10.60&lt;br&gt;&#92;
&#92;
&#92;
http://jsfiddle.net/rwaldron/Tqybd/1/</span> → <span class="change-field-new">1288909345926134</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Tested: </p><ul><li>FF3.0.12,3.6.12,4b6 (sorry, no 3.6.3)</li><li>Chrome 5,6,7,8</li><li>Safari 5</li><li>IE6,7,8</li><li>Opera10.60</li></ul><p><a href="http://jsfiddle.net/rwaldron/Tqybd/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/Tqybd/1/</a></p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 10:32PM UTC by <span class="author">darrel.grant@neverblue.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm not sure how to trigger it exactly. In my case the files I'm including contain one object with many methods and more often than not, they objects are undefined when I try to use them in the callback.</p><p>Seriously, don't just close it because you couldn't reproduce it. I didn't report the bug just for fun.</p><p>I hope this is appreciated and worked on by the team, but here's the least offensive of all possible workarounds I've encountered:</p><p>var timer = setInterval( function()</p><p>{</p><p>	<em> Unfortunately hacky fact: We must add another case here for</em></p><p>	 each object being preloaded by one of the dependencies.</p><p>	if ( window.UI !== undefined )</p><p>	{</p><p>		clearInterval( timer );</p><p>		init(); // init now runs when window.UI is loaded</p><p>	}</p><p>}, 100 );</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 10:42PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm sorry, but I didn't just close it because I couldn't reproduce it. I closed it because it's not a bug with jQuery and if it were I would've come across it while I was testing in those browsers. Additionally, I was requesting resources over network, so if something was going to be wrong, I gave it plenty of opportunity.</p><p>Lastly, you ignored the notice that says all bugs should be filed with a jsFiddle test case - I had to make up a test case for your bug.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 10:50PM UTC by <span class="author">darrel.grant@neverblue.com</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jQuery normalizes interactions with browsers. The function of getScript() is to include libraries and right now, I have a case where it doesn't do that. </p><p>Discussion of the issue:</p><p><a href="http://stackoverflow.com/questions/1130921/is-the-callback-on-jquerys-getscript-unreliable-or-am-i-doing-something-wrong" class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/1130921/is-the-callback-on-jquerys-getscript-unreliable-or-am-i-doing-something-wrong</a></p><p>Note the comments near the bottom of this page:</p><p><a href="http://api.jquery.com/jQuery.getScript/" class="ext-link"><span class="icon"></span>http://api.jquery.com/jQuery.getScript/</a></p><p>The workaround I poorly wrote above, is to use setInterval() and check if the objects you are trying load are defined or not. It's not an ideal api but it has solved the problem which may or may not technically be a jquery bug.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 04, 2010 10:55PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Can you please create a jsFiddle that calls in your library remotely using $.getScript()?</p><p>"jQuery normalizes interactions with browsers." You're totally right - I got the same non-broken behaviour across all the browsers I tested in.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 06:32PM UTC by <span class="author">vitaliy@tungle.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="http://bugs.jquery.com/ticket/7404" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/7404</a></p><p>There is a solution in there as well.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 06:32PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:6 vitaliy@…]:</p><blockquote> Duplicate of <a href="http://bugs.jquery.com/ticket/7404" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/7404</a> There is a solution in there as well.</blockquote><p>Sorry, I meant:</p><p><a href="http://bugs.jquery.com/ticket/7130" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/7130</a></p><p>fail.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 14, 2012 09:21AM UTC by <span class="author">MGJP</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ran into this recently when using the Youtube API, when trying to get data from from gdata json. This is the outline of the code that did not work:</p><pre class="wiki">
function getscriptcallback(data) {
    //callback function to output data from the video
}

function inputonchange() {
    //some code to determine and catch the video ID.
    //Then finally:
    $.getScript('http://gdata.youtube.com/feeds/api/videos/' + videoId + '?v=2&alt=json-in-script&callback=getscriptcallback');
}

input.change(function(){
    inputonchange();
});
</pre><p>The Above code would invariable return "getscriptcallback is not defined" (and I was using Chrome). So the way I fixed it was to make sure that the getScript only fired on document.ready by wrapping it in: $(function(){}), like so:</p><pre class="wiki">
function getscriptcallback(data) {
    //callback function to output data from the video
}

function inputonchange() {
    //some code to determine and catch the video ID.
    //Then finally:
    $(function(){
        $.getScript('http://gdata.youtube.com/feeds/api/videos/' + videoId + '?v=2&alt=json-in-script&callback=getscriptcallback');
    });
}

input.change(function(){
    inputonchange();
});
</pre><p>And this seems to do the trick.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
