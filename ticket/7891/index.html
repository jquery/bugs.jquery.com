<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7891 (jQuery.blur() and focus() don&amp;#39;t behave as expected, behave differently than HTMLInputElement.blur() and focus()) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7890/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7892/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7891</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 03, 2011 11:10PM UTC</p>
      
        <p>Closed January 04, 2011 07:32PM UTC</p>
      
      
        <p>Last modified May 11, 2012 09:44PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery.blur() and focus() don&#39;t behave as expected, behave differently than HTMLInputElement.blur() and focus()</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jmm
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.6">1.6</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.4.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I'm having problems where jQuery.blur() and focus() are not producing the expected effect, and not producing the same effect as HTMLInputElement.blur() and focus().</p><p>I brought this up on the forum first to try to confirm it's a bug, but I received no feedback:</p><p><a href="http://forum.jquery.com/topic/jquery-blur-not-producing-intended-effect-same-effect-as-dom-blur-in-firefox" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/jquery-blur-not-producing-intended-effect-same-effect-as-dom-blur-in-firefox</a></p><h1>I) Blur</h1><p>I have a text INPUT. When the INPUT has focus and the enter key is pressed, I want to blur the INPUT and if the change event fires I want to handle that and perform some actions. I want to blur the field even if the value hasn't changed and the change event doesn't fire, so I'm handling keydown to detect the enter key and calling jQuery.blur() in the keydown handler, which I expect to blur the INPUT and possibly make the change event fire. But it's not working as expected.</p><h2>Example 1:</h2><p><a href="http://jsfiddle.net/feXRh/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/1/</a></p><h3>Instructions:</h3><p>1) Type something in the text box then tab or click out of it to blur it.  </p><p>2) Focus the INPUT again, change the text, and press enter.</p><h3>Expected results:</h3><p>1) Name and Blurs values should update.</p><p>2a) Name and Blurs values should update.</p><p>2b) INPUT should blur.</p><h3>Actual results:</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = <a href="/ticket/2">#2</a>a fails</li><li>Safari 5.0.3 Win XP Home SP3 = <a href="/ticket/2">#2</a>a fails</li><li>Opera 11.00 Win XP Home SP3 = works</li></ul><h2>Example 2:</h2><p><a href="http://jsfiddle.net/feXRh/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/2/</a></p><h3>Instructions:</h3><p>Same as !#1.</p><h3>Expected results:</h3><p>Same as !#1.</p><h3>Actual results:</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = works</li><li>Safari 5.0.3 Win XP Home SP3 = works</li><li>Opera 11.00 Win XP Home SP3 = works</li></ul><p>The only difference is that instead of calling jQuery.blur() I'm calling the DOM HTMLInputElement.blur() method directly.</p><h2>Example 3:</h2><p><a href="http://jsfiddle.net/feXRh/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/3/</a></p><h3>Instructions:</h3><p>Same as !#1.</p><h3>Expected results:</h3><p>Unknown.</p><h3>Actual results (see expected results for !#1):</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = <a href="/ticket/2">#2</a>b fails</li><li>Safari 5.0.3 Win XP Home SP3 = <a href="/ticket/2">#2</a>b fails</li><li>Opera 11.00 Win XP Home SP3 = <a href="/ticket/2">#2</a>b fails</li></ul><p>If I call jQuery.blur(), then event.preventDefault() in the blur handler, then the change event fires in Firefox and Safari, but the INPUT isn't blurred.</p><h2>Example 4:</h2><p><a href="http://jsfiddle.net/feXRh/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/4/</a></p><h3>Instructions:</h3><p>Same as !#1.</p><h3>Expected results:</h3><p>Unknown.</p><h3>Actual results (see expected results for !#1):</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = works</li><li>Safari 5.0.3 Win XP Home SP3 = works</li><li>Opera 11.00 Win XP Home SP3 = works</li></ul><p>If I call HTMLInputElement.blur(), then event.preventDefault() in the blur handler, then the change event fires in Firefox and Safari, and the INPUT is blurred (just like example 2 where event.preventDefault() wasn't called):</p><h1>II) Focus</h1><p>I'm experiencing a similar problem with jQuery.focus().</p><h2>Example 1:</h2><p><a href="http://jsfiddle.net/a7Yks/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/a7Yks/1/</a></p><h3>Instructions:</h3><p>1) Open the testcase.  </p><p>2) jsfiddle steals focus after loading the page, so click "Run".</p><h3>Expected results:</h3><p>1) The blur handler for radio button "One" should execute, resulting in it ''not having'' the 'focused' class and ''having'' a transparent background.</p><h3>Actual results:</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = fails</li><li>Safari 5.0.3 Win XP Home SP3 = fails</li><li>Opera 11.00 Win XP Home SP3 = fails</li></ul><h2>Example 2:</h2><p><a href="http://jsfiddle.net/a7Yks/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/a7Yks/2/</a></p><h3>Instructions:</h3><p>Same as !#1.</p><h3>Expected results:</h3><p>Same as !#1.</p><h3>Actual results:</h3><ul><li>Firefox 3.6.13 Win XP Home SP3 = works</li><li>Safari 5.0.3 Win XP Home SP3 = works</li><li>Opera 11.00 Win XP Home SP3 = works</li></ul><p>The only difference is that to focus radio button "Two", I call HTMLInputElement.focus() instead of jQuery.focus().</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 04, 2011 08:05AM UTC by <span class="author">danheberden</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Possible duplicate of <a href="/ticket/7768">#7768</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 04, 2011 06:43PM UTC by <span class="author">jmm</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I saw bug <a href="/ticket/7768">#7768</a> before I filed this report and I don't think it has anything to do with this issue.</p><p><a href="/ticket/7768">#7768</a> complains of 'focus' not firing in <a href="/wiki/WebKit">WebKit</a> (in response to the 'click' event apparently).</p><p>My report is about:</p><ul><li>'change' events not firing when programmatically blurring using jQuery.blur().  That happens in <a href="/wiki/WebKit">WebKit</a>, AND Gecko.</li></ul><ul><li>'change' / 'blur' events not firing when programmatically focusing using jQuery.focus().  That happens in <a href="/wiki/WebKit">WebKit</a>, and Gecko, and Presto.</li></ul><p>Conversely, calling HTMLInputElement.blur() / HTMLInputElement.focus() works as expected and doesn't block the 'change' / 'blur' events from firing.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 04, 2011 07:32PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the report, but this is not a jQuery bug, just a confusing quirk of the hell that is HTML forms.</p><p>The <code>blur</code> and <code>focus</code> methods on an <code>HTMLInputElement</code> are action methods that call code that actively change the state of the DOM element. The <code>blur</code> and <code>focus</code> methods in jQuery, however, are just event dispatchers. They perform two completely different functions.</p><p>For example, a focus event is normally dispatched <strong>after</strong> an element is focused—this is why, for instance, you cannot prevent an element from focusing by calling preventDefault from inside a focus event. You can still dispatch a focus event whenever you want, but it will never actually ''focus'' the element, because that’s not what a focus event does. Maybe it should, but that’s a discussion for the spec authors, not jQuery.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 04, 2011 08:57PM UTC by <span class="author">jmm</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 snover]:</p><blockquote> The blur and focus methods in jQuery, however, are just event dispatchers. They perform two completely different functions.</blockquote><p>That's not consistent with the documented or actual behavior of jQuery.blur() and jQuery.focus().  See:</p><ul><li>Last example here ("Example: To focus on a login input box with id 'login' on page startup, try:"):</li></ul><p><a href="http://api.jquery.com/focus/" class="ext-link"><span class="icon"></span>http://api.jquery.com/focus/</a></p><ul><li><a href="http://jsfiddle.net/64AFS/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/64AFS/</a> (click Run after page loads)</li></ul><blockquote> You can still dispatch a focus event whenever you want, but it will never actually focus the element, because that's not what a focus event does.</blockquote><p>jQuery.focus() actually focuses the element.  In the versions of Firefox, Safari, and Opera I listed previously, the INPUT is focused in the testcase above (64AFS).</p><p>Have you even looked at the testcases from my original report?  In the focus testcase it's not even in question that jQuery.focus() actually focuses the target element, the issue is that it prevents 'blur' and 'change' events from firing on the element that is blurred when focus() is called.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2012 07:32PM UTC by <span class="author">jmm</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The "blur example 1" and "focus example 1" testcases still fail to behave as expected in Firefox 7 Win, but work as expected when updated to jQuery 1.5.2 (the next version after 1.4.4 available on jsfiddle), so obviously something <em>was</em> wrong with 1.4.4 and it was changed by 1.5.2.</p><h1>Blur example</h1><h2>Original (1.4.4)</h2><p><a href="http://jsfiddle.net/feXRh/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/1/</a></p><h2>Updated (1.5.2)</h2><p><a href="http://jsfiddle.net/feXRh/41/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/feXRh/41/</a></p><h1>Focus example</h1><p>This one had to be updated slightly, since jsfiddle now does something with focus that makes it impossible to run the original testcase.  The "click Run" part of the original instructions referred to jsfiddle's Run button.  That no longer works.  It's now necessary to click the "Run test" link in the output panel, but it otherwise performs as before with jQuery 1.4.4.</p><h2>Original (1.4.4)</h2><p><a href="http://jsfiddle.net/a7Yks/11/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/a7Yks/11/</a></p><h2>Updated (1.5.2)</h2><p><a href="http://jsfiddle.net/a7Yks/12/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/a7Yks/12/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2012 08:33PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The test case itself is somewhat complex, so before I start to investigate can you update to jQuery-git (or at least jQuery 1.7.2) to see if anything has changed, and give a clear explanation of the behavior you expected vs the behavior you observed? Be sure to explain which browsers you used for testing.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2012 09:43PM UTC by <span class="author">jmm</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for your reply.  To be clear, this does not work as expected in 1.4.4, but does work as expected in 1.5.2 and 1.7.2 (and perhaps everything in between) -- at least in Firefox (I haven't retested all of the browsers I did originally).  So whatever was wrong in 1.4.4 was changed by 1.5.2, despite my report getting short shrift and marked as invalid.</p><p>But since the report was marked invalid, who knows what happened, e.g. if it was even fixed deliberately, or accidentally.</p><p>If you're going to investigate (perhaps to make sure there are tests for whatever the problem was so it doesn't reoccur?), I will provide whatever you need.</p><p>Blur Example !#1 from the original report would illustrate the problem and has a test case with only 2 steps to reproduce (I did it today in Firefox 7 Win), and includes expected and actual results.  But if that isn't something you can work with, I'll make a new test case and / or description that is as clear and minimal as I can.</p><p>Basically, if you try blur example !#1 and follow the 2 steps to reproduce, when you press <code>Enter</code> at the end of step 2, the "Name:" and "Blurs:" parts of the output should both update.  In 1.4.4, only the "Blurs:" part does. <code>jQuery.blur()</code> prevents the <code>change</code> event from firing on the INPUT. If I instead call DOM <code>HTMLInputElement.blur()</code> or use jQuery 1.5.2, it works as expected.</p><p>If you're going to investigate, I will create a new test case / description if you want.</p><p>Thanks</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2012 09:44PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The only version we support at the moment is the latest one, so if 1.7.2 works fine then all we have to do is avoid breaking it in 1.8. :)</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
