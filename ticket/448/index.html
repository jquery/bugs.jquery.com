<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#448 (Handling Parameter Arrays) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/447/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/449/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#448</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 29, 2006 01:39AM UTC</p>
      
        <p>Closed November 30, 2006 08:52PM UTC</p>
      
      
        <p>Last modified June 20, 2007 01:27AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Handling Parameter Arrays</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        squinn
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/"></a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.1a</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have a situation where I have a bunch of form elements that all have the same name, and I need to submit their values to the server as a unit using that name.  I also have other data that I need to submit as part of the same request, so I'm using syntax like the following:</p><p>$.post("myurl", {</p><p>  someName: [1, 2, 3],</p><p>  regularThing: "blah"</p><p>});</p><p>I would expect for jQuery to turn that into a URL something like:</p><p>myurl?someName=1&someName=2&someName=3&regularThing=blah</p><p>in order to follow the "normal" HTML form submission rules when more then one input element has the same name (the server side technology - in my case JSP - then normally converts the values back into an array since it sees more then one value with the same key name).  Instead, jQuery is currently turning that request it into something like:</p><p>myurl?someName=1,2,3&regularThing=blah</p><p>I've changed the "param" function in my version of jQuery to handle this, and it seems to work well.  Could this be added to the main distribution?  The following is my updated "param" function:</p><p><em> Serialize an array of form elements or a set of</em></p><p> key/values into a query string</p><p>param: function(a) {</p><p>  var s = [];</p><p>  <em> If an array was passed in, assume that it is an array</em></p><p>   of form elements</p><p>  if ( a.constructor == Array || a.jquery ) {</p><p>    <em> Serialize the form elements</em></p><p>    for ( var i = 0; i &lt; a.length; i++ )</p><p>      s.push( a[i].name + "=" + encodeURIComponent( a[i].value ) );</p><p>   Otherwise, assume that it's an object of key/value pairs</p><p>  } else {</p><p>    // Serialize the key/values</p><p>    for ( var j in a ) {</p><p>    	<em> If the value is an array then the key names need to be repeated</em></p><p>      if(a[j].constructor == Array) {</p><p>        for ( var i = 0; i &lt; a[j].length; i++ )</p><p>          s.push( j + "=" + encodeURIComponent( a[j][i] ) );</p><p>      } else {   </p><p>        s.push( j + "=" + encodeURIComponent( a[j] ) );</p><p>      }</p><p>    }</p><p>  }</p><p>   Return the resulting serialization</p><p>  return s.join("&");</p><p>}</p><p>Thanks,</p><p>     -Shawn</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2006 01:55AM UTC by <span class="author">squinn</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Wow, that code got formatted real ugly.  Here it the recommendation again more cleary:</p><pre class="wiki">
// Serialize an array of form elements or a set of
// key/values into a query string
param: function(a) {
  var s = [];

  // If an array was passed in, assume that it is an array
  // of form elements
  if ( a.constructor == Array || a.jquery ) {
    // Serialize the form elements
    for ( var i = 0; i &lt; a.length; i++ )
      s.push( a[i].name + "=" + encodeURIComponent( a[i].value ) );

  // Otherwise, assume that it's an object of key/value pairs
  } else {
    // Serialize the key/values
    for ( var j in a ) {
      // If the value is an array then the key names need to be repeated
      if(a[j].constructor == Array) {
        for ( var i = 0; i &lt; a[j].length; i++ )
          s.push( j + "=" + encodeURIComponent( a[j][i] ) );
      } else {   
        s.push( j + "=" + encodeURIComponent( a[j] ) );
      }
    }
  }

  // Return the resulting serialization
  return s.join("&");
}
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2006 08:38PM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.1</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Looks good to me. If no one disagrees, it will be added to jQuery 1.1.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2006 09:49PM UTC by <span class="author">aaron.heimli</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sounds like a good addition.</p><p>Some quick tests (don't worry, all of them check out):</p><pre class="wiki">
var params = {foo:"bar", baz:42, quux:"All your base are belong to us"};
//foo=bar&baz=42&quux=All%20your%20base%20are%20belong%20to%20us

var params = {someName: [1, 2, 3], regularThing: "blah" };
//someName=1&someName=2&someName=3&regularThing=blah

var params = {"foo[]":["baz", 42, "All your base are belong to us"]};
foo[]=baz&foo[]=42&foo[]=All%20your%20base%20are%20belong%20to%20us

var params = {"foo[bar]":"baz", "foo[beep]":42, "foo[quux]":"All your base are belong to us"};
//foo[bar]=baz&foo[beep]=42&foo[quux]=All%20your%20base%20are%20belong%20to%20us
</pre><p>For those wondering about the brackets, when PHP processes the param string, it will turn</p><pre class="wiki">
foo[]=baz&foo[]=42&foo[]=All%20your%20base%20are%20belong%20to%20us
</pre><p>into</p><p>an array named "foo" that looks like this:</p><pre class="wiki">
#!php
$foo[0] = "baz"
$foo[1] = 42
$foo[2] = "All your base are belong to us"
</pre><p>and</p><pre class="wiki">
foo[bar]=baz&foo[beep]=42&foo[quux]=All%20your%20base%20are%20belong%20to%20us
</pre><p>into an associative array named "foo" that looks like this:</p><pre class="wiki">
#!php
$foo['bar'] = "baz"
$foo['beep'] = 42
$foo['quux'] = "All your base are belong to us"
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 30, 2006 02:13AM UTC by <span class="author">andrea ercol</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>good</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 30, 2006 08:52PM UTC by <span class="author">joern</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixed in SVN.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
