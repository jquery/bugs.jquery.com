<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#13494 (Object.defineProperty not supported on DOM Objects in Android &amp;lt; 4.0) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/13493/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/13495/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#13494</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 21, 2013 03:16PM UTC</p>
      
        <p>Closed February 27, 2013 03:40AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Object.defineProperty not supported on DOM Objects in Android &lt; 4.0</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        anonymous
      </td>
      <th>Owned by:</th>
      <td>rwaldron</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>git</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>According to <a href="http://kangax.github.com/es5-compat-table/#define-property-webkit-note," class="ext-link"><span class="icon"></span>http://kangax.github.com/es5-compat-table/#define-property-webkit-note,</a> and confirmed by my own tests, Android Browsers &lt; 4.0 do not support defineProperty on DOM Objects.</p><p>However, according to Googles stats, they account for 55% of all Android devices. (<a href="http://developer.android.com/about/dashboards/index.html)." class="ext-link"><span class="icon"></span>http://developer.android.com/about/dashboards/index.html).</a></p><p>So I would recommend to revert <a href="https://github.com/jquery/jquery/commit/1d5d959ee0c03ceb938b85576d130b7b3c510845" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/commit/1d5d959ee0c03ceb938b85576d130b7b3c510845</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 04:08PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ rwaldron</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 04:53PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">The opposite is true of IE8 (which we consider an archaic, or non-modern browser) where Object.definePropert(y|ies) is actually limited to DOM nodes. jQuery 2.0&#39;s support is focused on modern browsers that correctly implement ES5 and DOM APIs per standards. </span> → <span class="change-field-new">1361466745295918</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>The opposite is true of IE8 (which we consider an archaic, or non-modern browser) where Object.definePropert(y|ies) is actually limited to DOM nodes. jQuery 2.0's support is focused on modern browsers that correctly implement ES5 and DOM APIs per standards; jQuery 1.9.x should be used for browsers that do not meet these basic requirements.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 05:26PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If we're not going to support half of the Android installed base in 2.0, there will be more to do here. Our message will need to be that 1.9 is the go-to version not only for oldIE, but for any code that needs to be run on older systems. I *think* that still makes a lot of sense but it changes the message from the public perception that "jQuery 2.0 is the same as 1.9 but without oldIE support."</p><p>I'll reopen this ticket so the issue won't get lost, but tend to agree with rwaldron that we don't want to lobotomize and bloat 2.0 further to support ancient browsers, no matter their source. Other thoughts? </p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 09:32PM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It seems to me like support for 2.0 has always been a question of guidelines and rules-of-thumb rather than hard and fast principles—how much must we do suboptimally (in terms of size/performance/security/etc.) to get a sufficiently accessible build.</p><p>Supporting old Android wouldn't cost many bytes, but might cost performance (if going back to the <code>indexOf</code> cache lookups) or clean interfaces (if going back to expandos).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 11:37PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Man, this is a wonderfully revealing bug. I'd like to make an argument very close to Rick's thoughts on the topic. Richard's concern about an accessible build has been our overarching concern since the beginning. I don't think that concern should go away, but I would argue that the achievement of an accessible build should not be at the impending expense of the evangelistic promotion of ES5. jQuery 2.0 can make javascript easier by heavily leaning on the future of web standards, with the side-effect of spreading a natural inclination towards the use of the future-proof. As you all know, I don't want to forget those who have to support old browsers and lacking environments, but we now have a reasonable venue for acknowledging those environments that have support for the progressive. We have an opportunity for a more widespread vision for jQuery 2.0 and it can start with the decision we make on this ticket.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 12:48AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I hate to be the one always peeing on the parade but we'd better make sure we have a decent solution for people who wish to use 2.0 for modern browsers and 1.x for oldies on the same page, and that no matter what we decide "oldies" finally means.</p><p>When it's old IE vs the world, it's quite easy and non-intrusive (conditional comments) but when trying to differentiate between different webkits, we may very well have to resort to feature inference if not browser sniffing, a clear show-stopper.</p><p>Also, I find it really really strange we're considering a browser that has more than half the shares of a widespread OS to be "old". Let's keep in mind we're talking cellphones, a market where a 18 months old device won't get any more update. We'll have devices with this version of webkit for years.</p><p>Regarding this specific issue, the bug here is not about the browser not implementing ES5 but about it not supporting <code>defineProperty</code> on DOM objects, huge difference. It's a bug all-right, but the browser *is* modern (it does implement the ES5 and the DOM APIs... just not at the same time it seems :P)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 01:06AM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> ...we'd better make sure we have a decent solution for people who wish to use 2.0 for modern browsers and 1.x for oldies on the same page...</blockquote><p>I feel like this is a nice-to-have, not a requirement. I'll reiterate this as much as I have to: jQuery 1.x is a first-class citizen. Actually, it is THE first class citizen of the jQuery world. jQuery 1.x should be everybody's FIRST choice; it is !#1 after all ;-)</p><p>jQuery 2.x is what jQuery will be at some unknown point in the future. The fact that we've started on it already is just a bonus. Honestly, we could probably get away with not having any guarantee about what environment it works in. It's obviously beneficial to actually have a concise, explicit answer for the environments in which it will work; and having that answer result in the largest number of environments is ideal. But the goal for 2.x should definitely be to embrace properly implemented newer standards. We should slash as much code as possible and use 2.x as something to point to and yell at standards bodies and browser vendors about. "Why is this so difficult?" "Why is there so much code?" "This is inefficient." "Browsers are incompatible on this feature." etc. etc.</p><p>jQuery 1.x is where it's at. Stop hating.</p><p>&lt;/rant&gt;</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 01:17AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm going to try to summarize some points here... </p><p>Returning to the indexOf approach, which will kill performance (O(1) -&gt; O(n)) is not an option. Returning to the 1.9.x implementation for the sake of an incomplete browser (that could just as easily use a 1.9.x release) is an option, but one that we should reject—why punish the entire modern desktop ecosystem for the sake of a old mobile browser? We've never done that before and we shouldn't start now. </p><p>I'd go so far as to say that ES5 implementation completeness should be part of the browser (desktop and mobile) grading system, with severe penalties for not being in compliance.</p><p>We need to stop looking at this like 1.9.x vs 2.0.x and be "ok" with shipping both—they have compatible APIs, that's all that matters.</p><p>@jaubourg...</p><blockquote> Regarding this specific issue, the bug here is not about the browser not implementing ES5 but about it not supporting defineProperty on DOM objects, huge difference. It's a bug all-right, but the browser *is* modern (it does implement the ES5 and the DOM APIs... just not at the same time it seems :P)</blockquote><p>That's completely contradictory to the facts. The implementation is broken and incomplete: Object.definePropert(y|ies) specification does not have normative prose that allows implementations the discretion to "pick and choose" what object's can have properties defined on it. It was broken when IE8 limited the implementation to DOM Nodes and it's broken when old <a href="/wiki/WebKit">WebKit</a> limits to non-DOM Nodes.</p><p>That said, @gibson042 just had an idea... we'll get back to you all shortly</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 01:23AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@gibson042 and I have worked out the solution, which basically boils down to:</p><pre class="wiki">
var shimDefine = Object.defineProperties || jQuery.extend;
</pre><p>Patch to follow.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 27, 2013 03:40AM UTC by <span class="author">Richard Gibson</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/13494">#13494</a>: Fallback defineProperties to jQuery.extend. Close gh-1182.</p><p>Android&lt;4 (ancient <a href="/wiki/WebKit">WebKit</a>) doesn't have full ES5 support. </p><p> Changeset: 85f1985f2444da01054800d6f41c3a6057da2e16</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
