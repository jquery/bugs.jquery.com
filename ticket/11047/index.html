<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11047 (If you trigger a custom event you can NOT catch it using the addEventListener function) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11046/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11048/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11047</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(patchwelcome)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened December 17, 2011 12:14AM UTC</p>
      
        <p>Closed December 17, 2011 12:48AM UTC</p>
      
      
        <p>Last modified September 19, 2013 05:56PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">If you trigger a custom event you can NOT catch it using the addEventListener function</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        anonymous
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.7.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The trigger function should also dispatch custom events such that code using addEventListener can catch the custom event. However, that is not happening. In fact, that is the only of the 8 combinations listed below that does not work. We should fix this to allow better interoperability between jQuery event functions and W3C DOM event functions.</p><p>1. PASS: If you trigger a DOM event you can catch it using the bind function</p><p>2. PASS: If you trigger a DOM event you can catch it using the addEventListener function</p><p>3. PASS: If you trigger a custom event you can catch it using the bind function</p><p>4. FAIL: If you trigger a custom event you can NOT catch it using the addEventListener function</p><p>5. PASS: If you dispatch a DOM event you can catch it using the bind function</p><p>6. PASS: If you dispatch a DOM event you can catch it using the addEventListener function</p><p>7. PASS: If you dispatch a custom event you can catch it using the bind function</p><p>8. PASS: If you dispatch a custom event you can catch it using the addEventListener function</p><p>The code below shows all the combinations listed above, including the failing case. It reproes under all major browsers in Windows 7. There is also a jsFiddle at: <a href="http://jsfiddle.net/Jqeza/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Jqeza/3/</a></p><pre class="wiki">
&lt;html&gt;
&lt;head&gt;
  &lt;script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button id="idButtonTrigger" onmouseover="TriggerEvent()"&gt;Hover to Trigger Event&lt;/button&gt;
  &lt;button id="idButtonDispatch" onmouseover="DispatchEvent()"&gt;Hover to Dispatch Event&lt;/button&gt;
  &lt;p&gt;ClickListener: &lt;a id="idClickListener"&gt;&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;ClickBind: &lt;a id="idClickBind"&gt;&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;CustomListener: &lt;a id="idCustomListener"&gt;&lt;/a&gt;&lt;/p&gt;
  &lt;p&gt;CustomBind: &lt;a id="idCustomBind"&gt;&lt;/a&gt;&lt;/p&gt;

  &lt;script type="text/javascript"&gt;

    document.addEventListener('click', function(event) {
      document.getElementById('idClickListener').innerHTML = "Fired!";
      $('#idClickListener').fadeIn('slow').fadeOut('slow');
    });

    $(document).bind('click', function(event) {
      document.getElementById('idClickBind').innerHTML = "Fired!";
      $('#idClickBind').fadeIn('slow').fadeOut('slow');
    });

    document.addEventListener('custom', function(event) {
      document.getElementById('idCustomListener').innerHTML = "Fired!";
      $('#idCustomListener').fadeIn('slow').fadeOut('slow');
    });

    $(document).bind('custom', function(event) {
      document.getElementById('idCustomBind').innerHTML = "Fired!";
      $('#idCustomBind').fadeIn('slow').fadeOut('slow');
    });

    function TriggerEvent() {
      $('#idButtonTrigger').trigger('click');
      $('#idButtonTrigger').trigger('custom'); // CANNOT catch with addEventListener
    }

    function DispatchEvent() {
      var clickEvent = document.createEvent("MouseEvents");
      clickEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
      document.getElementById('idButtonDispatch').dispatchEvent(clickEvent);

      var customEvent = document.createEvent('Event');
      customEvent.initEvent('custom', true, true);
      document.getElementById('idButtonDispatch').dispatchEvent(customEvent);
    }

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 17, 2011 12:48AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ patchwelcome</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jQuery's event system is a level *above* the native one, we're not trying to shim the browser functionality. </p><p>For example case 2, we actually "fail" that for custom event names. The only reason it works for most browser events is that calling the corresponding DOM method name fires the event. </p><p>Doing what you describe is pretty difficult, especially when you take IE&lt;9 into account with .attachEvent/.fireEvent. Your examples aren't doing that so they aren't cross-browser compatible. And you have to still retain the current semantics (like optional trigger data) to avoid breaking all the thousands of sites and plugins out there.</p><p>Experiment with it in your own branch and see if you agree it's pretty tough.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 17, 2011 11:21AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>All that's being said here is that the trigger method should do a dispatchEvent (where supported) on custom events so that listeners using addEventListener can catch the custom event. For instance, something similar to the following piece of code at the end of the trigger method would be enough.</p><pre class="wiki">
if (isCustomEvent(event) && elem.dispatchEvent) {
  var customEvent = document.createEvent('Event');  
  customEvent.initEvent(event.type, true, true);  
  if (data != null) {
    customEvent.data = data;
  }
  elem.dispatchEvent(customEvent);  
}
</pre><p>Where isCustomEvent(event) is a function that would return true if the event type is not one of the standard DOM events. This way, clients that are written purely using W3C's DOM Event model could still listen to custom events (in addition to standard DOM Events) fired by jQuery without having to modify any code (and without having to take a dependency on jQuery either).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 17, 2011 03:01PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> do a dispatchEvent (where supported) </blockquote><p>In general we haven't tried to implement functionality that only works on some browsers (and some events) but not all, since someone will immediately file a bug that it doesn't work right.</p><blockquote> Where isCustomEvent(event) is a function that would return true if the event type is not one of the standard DOM events.</blockquote><p>Can you post a cross-browser implementation of that? </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 23, 2013 09:44AM UTC by <span class="author">nelson@fittopage.org</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This seems to be a cross-browser implementation:</p><p><a href="http://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript/2490876#2490876" class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript/2490876#2490876</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 19, 2013 05:56PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You can use this plugin which has a method <code>betterTrigger</code></p><p><a href="https://github.com/sandeep45/betterTrigger" class="ext-link"><span class="icon"></span>https://github.com/sandeep45/betterTrigger</a></p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
