<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8412 (Ajax problem on iOS with HTML5 applicationCache and web-app mode) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8411/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8413/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8412</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 01, 2011 01:13PM UTC</p>
      
        <p>Closed March 10, 2011 01:07AM UTC</p>
      
      
        <p>Last modified January 04, 2013 08:34PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Ajax problem on iOS with HTML5 applicationCache and web-app mode</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        mfkahn@gmail.com
      </td>
      <th>Owned by:</th>
      <td>mfkahn@gmail.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.5.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This may not be a jQuery bug, however without a workaround it will affect projects such as jQuery mobile and adoption of jQuery in HTML5 apps.</p><p>On iOS (iphone/ipad etc), when a $.get is done for a resource that has been cached in the HTML5 applicationCache (applicationCache.status == 1), *and* the application is running in "web-app" mode (where the &lt;meta name="apple-mobile-web-app-capable" content="yes"&gt; is present in the main page, as opposed to normal "safari"/browser mode), the http status of a successful request will be set to 0 (zero), not 200.  </p><p>This forces the jQuery error handler to be called.  We have had to work around this by using a low-level <a href="/wiki/XmlHttpRequest">XmlHttpRequest</a> instead of the jquery ajax object (not just in 1.5.1, this has been an issue for a while).  It might be a significant issue for developer usability on iOS, esp for jQueryMobile.  Not sure if there is a bug logged at ADC about this or not.</p><p>Steps to reproduce:</p><p></p><hr><p></p><ul><li>create an HTML5 app with a cache-manifest file, using an index.html page with the &lt;meta name="apple-mobile-web-app-capable" content="yes"&gt; tag.  </li><li>create a second something.html file, listing it in the CACHE section (or default section) of the manifest</li><li>onReady (or whenever), do a $('#something').load('something.html').  </li><li>try this on any compatible desktop browser (safari, chrome, firefox) - should Works</li><li>try this on iOS safari (iPad/iPod) - should work</li><li>in iOS/safari, click "bookmark", then "add to home screen".  Go to the device home screen and launch the app in full screen mode by tapping the tile.  - won't work, the content won't be loaded and if you attach an error handler you'll see the http status from the xhr was 0, but the correct content was returned (last reproduced in iOS 4.1.2 on iPad).  </li></ul></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (16)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 01, 2011 09:35PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ mfkahn@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for submitting a ticket to the jQuery Bug Tracker. </p><p>With respect to us evaluating this particular issue, are you able to supply us with a test case (either on jsFiddle or probably more suitably in this scenario a zip/attachment incl cache manifests) that demonstrates what you've reported? </p><p>If so, this would greatly decrease the amount of time before we're able to confirm whether or not this is an issue we may address with jQuery core.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2011 06:50AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You could try and set the isLocal global ajax settings to true in that case:</p><pre class="wiki">
jQuery.ajaxSetup({
    isLocal: true
});
</pre><p>These environment where every request, successful or not, always return a 0 status code are, simply put, impossible to deal with in a general fashion (if we fix for them, we break all the others). So, until the devs behind these totally absurd xhr implementations get back to their senses, I'm afraid there will be some need for trickeries on the part of users, sadly. ;)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2011 12:15PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the feedback - I have sent the issue to ADC as well, but no reply yet.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 05, 2011 06:33PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has been logged to apple as ADC bug # 9092131</p><p>There is a working example attached in a zipfile that demonstrates the issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 10, 2011 01:07AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, so we'll wait and see if and when this is fixed in iOS.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 14, 2011 06:59PM UTC by <span class="author">dominic@bearded.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>mfkahn, do you have a work-around that you could share? We're hitting the wall on this issue too.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 14, 2011 07:52PM UTC by <span class="author">mfkahn@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>No, sorry.  We've been using two design-around approaches:</p><p>1) low-level XMLHttpRequest, when we're certain the resource will be cached properly and absolutely must AJAX load it</p><p>2) using navigator.onLine detection and storing resources fetched with $.ajax while online in the localStorage,  thereby avoiding the $.ajax call altogether when offline.  This actually works better anyways since you can re-use dumbed-down, more generic manifest files for multiple pages that need to work offline.</p><p>I have cross-reported this bug to the jQuery Mobile team, I think this will be worth looking into for them, its a pretty nasty issue to support and explain to users.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2011 06:51PM UTC by <span class="author">mfkahn@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Here is the update from ADC on this issue, who claim the behaviour is correct according to the HTML5 spec, and so they do not intend to fix.  So I think this should be re-opened as a jQuery core bug, as nobody will be able to use jQuery or jqMobile to write ajax apps for iOS or any other device else that interprets the spec in this way.</p><p>Hi,</p><p>This is a follow-up to Bug ID# 9092131.   </p><p>Engineering has determined that this issue behaves as intended based on the following information:</p><p>This is the correct behavior.  In offline mode, there is no actual HTTP request being made, so it would be incorrect to report a status as if there was one.  For this to change, we'd have to get this behavior written into the appropriate spec (ie: HTML5).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 30, 2011 10:50PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There's a very simple solution for this. Add this to your DOM "ready" event function:</p><pre class="wiki">
 if (window.navigator.standalone) jQuery.ajaxSetup({isLocal:true});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 31, 2011 01:01AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The fix works on iOS, not certain if there is any effect on other platforms.  NETWORK: sections in a cache manifest still load properly too.</p><p>Thanks for isLocal in jQuery 1.5.1!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 31, 2011 09:19AM UTC by <span class="author">jammus@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>A similar issue is being discussed on jQueryMobile. One possible problem with the workaround posted is that the appcache can be used when not in standalone mode (at least as far as I understand) therefore a check for navigator.standalone might not be sufficient. Has anyone else experienced the issue when in browser mode?</p><p>jqm ticket: <a href="https://github.com/jquery/jquery-mobile/issues/1579#comment_1264369" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-mobile/issues/1579#comment_1264369</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 24, 2011 07:31PM UTC by <span class="author">jfalter0</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I am experiencing a similar problem, which has had me stumped for days. I am working with jQuery 1.6.4, on an iPad 1, using Safari on iOS 5.0. I have set up my app to be stored in the application storage on the iPad. However, I have a number of Ajax calls which must get information from PHP on the web server, information that cannot be cached on the device. When the app runs on any of the desktop browsers, including Safari on Windows 7 emulating an iPad running Safari iOS 4.3.3, it works as expected. However, on the iPad, it does not.</p><p>When I check the web server system logs, the iPad is not issuing an Ajax call (using $.ajax()) to the server. I am getting status = 0, as mentioned in other notes on this ticket, but with an empty string for responseText (which I assume is because the PHP file in question is not on the local device.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 13, 2012 04:59AM UTC by <span class="author">digitalfreak</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I encounter the similar problem, but I have solved it by adding the following to the manifest file, see if this could apply to your case</p><pre class="wiki">
NETWORK:
*
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 31, 2012 01:35AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>As mentioned on <a href="http://stackoverflow.com/questions/5824549/," class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/5824549/,</a> you can also test jqXHR.responseText in the error handler to see if there was a response. When I design using applicationCache, I now routinely just test the jqXHR.responseText in the case that status==0 (which it will when the files are fetched from the cache). </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 25, 2012 04:41AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Adding the NETWORK wildcard also worked for me on <a href="/wiki/FireFox">FireFox</a> 16.0.2.  This is weird behavior for sure.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 04, 2013 08:34PM UTC by <span class="author">soundspawn@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:15 anonymous]:</p><blockquote> Adding the NETWORK wildcard also worked for me on <a href="/wiki/FireFox">FireFox</a> 16.0.2.  This is weird behavior for sure.</blockquote><p>I too ran in to this today, had been fighting it for hours.  Once I managed to get the manifest to update in Chromium things started working as expected.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
