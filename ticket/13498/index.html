<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#13498 (New Traversing Methods; .nextFirst() .prevFirst()) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/13497/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/13499/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#13498</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">feature</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 21, 2013 09:51PM UTC</p>
      
        <p>Closed February 21, 2013 10:05PM UTC</p>
      
      
        <p>Last modified February 22, 2013 07:54PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">New Traversing Methods; .nextFirst() .prevFirst()</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Panman8201
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>git</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I'd like to propose a couple new traversing methods to provide a solution to common misconceptions.</p><p>When using the <code>.next()</code> and <code>.prev()</code> traversing methods with a <code>[Selector]</code> I thought they would give me the next/previous sibling that matched the selector. No, the give the directly adjacent sibling if it matches the selector.</p><p>After doing some Googling, I found that this is somewhat of a common misconception (for those who didn't read the documentation clearly enough). The workaround seemed strait forward, use <code>.prevAll([Selector]:first)</code>.</p><p>Ok, that works for one matched element in the calling set. However, if there are multiple elements to apply the <code>.prevAll()</code> to then it only returns the <code>:first</code> matched element of the entire list. Basically, the <code>:first</code> part of the <code>[Selector]</code> is applied at the end, against the entire list of next/previous siblings.</p><p>What I would like to see are "jQuery Official" traversing methods to get the next/previous sibling that match a Selector. The following is a plug-in that mimics this feature request but I feel that it could be done better in the jQuery core (which I did dig into but found myself clueless in the traversing.js file).</p><pre class="wiki">
(function( $ ) {
	$.fn.nextFirst = function( type ) {
		return this.map(function() {
			return $(this).nextAll( type + ":first" );
		});
	};
	$.fn.prevFirst = function( type ) {
		return this.map(function() {
			return $(this).prevAll( type + ":first" );
		});
	}
})(jQuery);
</pre><p>Here is some test code to provide an example how this works:</p><pre class="wiki">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;title&gt;jQuery .prevFirst() Example&lt;/title&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;script src="//code.jquery.com/jquery-1.9.1.min.js"&gt;&lt;/script&gt;
	&lt;script&gt;
	(function( $ ) {
		$.fn.nextFirst = function( type ) {
			return this.map(function() {
				return $(this).nextAll( type + ":first" );
			});
		};
		$.fn.prevFirst = function( type ) {
			return this.map(function() {
				return $(this).prevAll( type + ":first" );
			});
		}
	})(jQuery);

	$(function(){
		var	prevResult = $(".mydivider").prev(".divider"),
			prevAllResult = $(".mydivider").prevAll(".divider:first"),
			prevFirstResult = $(".mydivider").prevFirst(".divider");
		$("#prev-result").html(prevResult.text());
		$("#prevAll-result").html(prevAllResult.text());
		$("#prevFirst-result").html(prevFirstResult.text());
	});
	&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Setup List&lt;/h1&gt;
&lt;ul&gt;
	&lt;li class="divider"&gt;Divider A &lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li class="mydivider"&gt;Sub Text&lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li class="divider"&gt;Divider B &lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li class="divider"&gt;Divider C &lt;/li&gt;
	&lt;li class="mydivider"&gt;Sub Text&lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
	&lt;li&gt;Sub Text&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Expected Result&lt;/h1&gt;
&lt;p&gt;Divider A Divider C &lt;/p&gt;
&lt;h1&gt;Actual Results&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;.prev()&lt;/code&gt; Misconception&lt;/strong&gt; - &lt;span id="prev-result"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;.prevAll()&lt;/code&gt; Workaround&lt;/strong&gt; - &lt;span id="prevAll-result"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;.prevFirst()&lt;/code&gt; Solution&lt;/strong&gt; - &lt;span id="prevFirst-result"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>At the very least, I would expect this to be a bug of the <code>.prevAll()</code> workaround. Thoughts?</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 09:58PM UTC by <span class="author">Panman8201</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok, apparently I'm not very good at fully reading the directions... Here is the test case on jsFiddle: <a href="http://jsfiddle.net/jc4sV/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jc4sV/</a></p><p>P.S. I tried modifying the ticket to remove my pasted example but could not find an option to do so.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2013 10:05PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>These would make a great plugin: <a href="http://plugins.jquery.com/" class="ext-link"><span class="icon"></span>http://plugins.jquery.com/</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 02:40PM UTC by <span class="author">Panman8201</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Well, that was a swift "No". Care to give a more technical reason? Maybe a second, honest opinion? I just feel that it's a better fit for core as other plugin creators can rely on the feature being there, and it would be far more useful to end users if in the core. Any chance it would have a better chance if I manage to find a way to add it to traversing.js? Thanks</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 02:48PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> Care to give a more technical reason?</blockquote><p>It's uncommon, possible, and easily abstracted into a plugin. Accepting all little features like this would bloat the core to twice its size (just look through the history of tickets if you want).</p><blockquote> Maybe a second, honest opinion?</blockquote><p>Honestly, the naming is confusing and this doesn't belong in core.</p><blockquote> I just feel that it's a better fit for core as other plugin creators can rely on the feature being there</blockquote><p>Not too many plugins need this. Those that do, can already accomplish it very easily.</p><blockquote> ...it would be far more useful to end users if in the core.</blockquote><p>It's exactly as useful to end users in the core and in a plugin. Where code is defined is orthogonal to usefulness.</p><blockquote> Any chance it would have a better chance if I manage to find a way to add it to traversing.js?</blockquote><p>No.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 03:09PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Also,  using .first() instead of the :first pseudoselector would be wildly advantageous in an implementation. These types of "I think this is a useful traversal shortcut" requests come up often, and generally they are better left in the applications that do in fact require them, rather than us providing saccharin in core for every traversal pattern that anyone has needed to write their own $.fn method for.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 03:38PM UTC by <span class="author">Panman8201</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:4 scott.gonzalez]:</p><blockquote> It's uncommon, possible, and easily abstracted into a plugin. Accepting all little features like this would bloat the core to twice its size (just look through the history of tickets if you want).</blockquote><p>Fair enough.</p><blockquote> Honestly, the naming is confusing and this doesn't belong in core.</blockquote><p>I agree, the name isn't perfect. Just tried to come up with another name that mimics how I would think <code>.prev([Selector])</code> should naturally lead to.</p><blockquote> Not too many plugins need this. Those that do, can already accomplish it very easily.</blockquote><p>True, if I need this I'll add it to my own code base. However, I was working on a Pull Request for jQuery Mobile where this would have been helpful.</p><blockquote> It's exactly as useful to end users in the core and in a plugin. Where code is defined is orthogonal to usefulness.</blockquote><p>Maybe usefulness was the wrong word, "Used" would probably be better. Hardly anyone is going to actively search for such a plugin, but if it was built-in obviously they'd use it.</p><p>One last question if you don't mind, do you feel that they way <code>.prevAll()</code> applies the <code>[Selector]</code> (at the end) is correct? To me it should be applied to each matched element in the calling "result set". I can start another ticket if needed. Thanks again!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 03:49PM UTC by <span class="author">Panman8201</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:5 ajpiano]:</p><blockquote> Also,  using .first() instead of the :first pseudoselector would be wildly advantageous in an implementation.</blockquote><p>Thanks, I have updated my plugin to use <code>.first()</code>. However, I know that won't work in the <code>.prevAll()</code> workaround.</p><blockquote> These types of "I think this is a useful traversal shortcut" requests come up often,</blockquote><p>I wasn't aware that other traversing options were a common request. In my opinion, I think it might be a good idea to take a look at some of the most requested and possible performance improvements if included into core. Again, just my opinion. I can understand the difficulties managing an open source project..</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 04:52PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> When using the .next() and .prev() traversing methods with a [Selector] I thought they would give me the next/previous sibling that matched the selector.</blockquote><p>Even though the documentation says this?</p><blockquote> Get the immediately following sibling of each element in the set of matched elements. If a selector is provided, it retrieves the next sibling only if it matches that selector -- <a href="http://api.jquery.com/next/" class="ext-link"><span class="icon"></span>http://api.jquery.com/next/</a></blockquote><blockquote> The workaround seemed strait forward, use .prevAll([Selector]:first).</blockquote><p>Yes, or add a class name to the markup for example. That might be a better solution depending on the situation. If I was reading code I'd certainly prefer that to a custom traversal method.</p><p>The whole reason we created a dead-simple way to extend jQuery was so that people could adapt it to their own needs. Our API is already difficult to learn completely because of its size. Kinda-like-that-but-slightly-different methods just make it more difficult. If anything we've been trying to pare down the rarely used things in the last few versions in favor of them being plugins.</p><p>Plugins let you create a dialect with slang that makes sense for your usage and coding patterns. To convince people that your jQuery dialect is great, please publish your plugin at plugins.jquery.com and evangelize it somewhere (other than the bug tracker). The jQuery core file is not the plugin repository.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 22, 2013 07:54PM UTC by <span class="author">Panman8201</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:8 dmethvin]:</p><blockquote> Even though the documentation says this?</blockquote><p>I don't want to drag this out too much farther because I understand this won't make it anywhere. But I'd like to clarify this point.</p><p>The documentation is clear once you read it, no problem there. However, when I first looked at the function signature I read it as "return the next sibling that is of type.." Ex: .**next**(**".divider"**) However, it's actually "return the adjacent (next/previous) sibling IF it is of type.." So to me the "natural english" of the signature is off. Again, IMO.</p><p>Thanks again for the feedback. I appreciate a response, even if it's not one I want to hear.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
