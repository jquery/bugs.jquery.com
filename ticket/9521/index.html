<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9521 (XSS with $(location.hash) and $(#&amp;lt;tag&amp;gt;) is needed?) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9520/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9522/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#9521</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened June 06, 2011 05:16AM UTC</p>
      
        <p>Closed June 19, 2012 03:30PM UTC</p>
      
      
        <p>Last modified April 17, 2013 11:31PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">XSS with $(location.hash) and $(#&lt;tag&gt;) is needed?</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jquery@ma.la
      </td>
      <th>Owned by:</th>
      <td>dmethvin</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        blocker
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.7">1.7</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.6.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I found and reported this xss pattern in evernote.com, skype.com and many famous websites.</p><p>see <a href="http://ma.la/jquery_xss/" class="ext-link"><span class="icon"></span>http://ma.la/jquery_xss/</a></p><p>and many jQuery plugin has this XSS pattern. </p><p><a href="https://github.com/rodbegbie/threequarters/blob/master/htdocs/design/threequarters.js#L4-5" class="ext-link"><span class="icon"></span>https://github.com/rodbegbie/threequarters/blob/master/htdocs/design/threequarters.js#L4-5</a></p><p><a href="https://github.com/vitch/jScrollPane/blob/master/script/jquery.jscrollpane.js#L1013-1016" class="ext-link"><span class="icon"></span>https://github.com/vitch/jScrollPane/blob/master/script/jquery.jscrollpane.js#L1013-1016</a></p><p><a href="https://github.com/kastner/audio-sinner/blob/master/public/javascripts/app.js#L19" class="ext-link"><span class="icon"></span>https://github.com/kastner/audio-sinner/blob/master/public/javascripts/app.js#L19</a></p><p><a href="https://github.com/steadicat/labels/blob/master/tabs.js#L5-7" class="ext-link"><span class="icon"></span>https://github.com/steadicat/labels/blob/master/tabs.js#L5-7</a></p><p>"$(location.hash)" expected CSS selector in many case, but this code also can create html element.</p><p>the quick patch by jquery is here</p><pre class="wiki">
-       quickExpr = /^(?:[^&lt;]*(&lt;[\\w\\W]+&gt;)[^&gt;]*$|#([\\w\\-]*)$)/,
+       quickExpr = /^(?:[^#&lt;]*(&lt;[\\w\\W]+&gt;)[^&gt;]*$|#([\\w\\-]*)$)/,
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (30)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 08, 2011 05:26PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.6.1</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yep: <a href="http://jsfiddle.net/UyuBx/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/UyuBx/</a></p><p>However, I am not sure how we can generally protect against this. The hash symbol is just text, and the string is valid HTML. Users should not be passing untrusted input to <code>$()</code> that could contain script. </p><p>I guess the question is whether this is such a common bone-headed move that we need to prioritize an id selector over HTML for this case. I could be convinced. </p><p>In any case, if people wait for us to plug the holes then the problem won't be fixed until we release 1.7 AND all the vulnerable web pages upgrade.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 10, 2011 07:01PM UTC by <span class="author">jquery@ma.la</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jQuery Mobile is also vulnerable</p><p><a href="https://github.com/jquery/jquery-mobile/pull/1789" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-mobile/pull/1789</a></p><p><a href="https://github.com/jquery/jquery-mobile/blob/1.0a3/js/jquery.mobile.navigation.js#L474" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery-mobile/blob/1.0a3/js/jquery.mobile.navigation.js#L474</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 11, 2011 05:14AM UTC by <span class="author">jquery@ma.la</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi again, </p><p>jQuery Mobile's case is $(":jqm(url=' + location.hash.replace(/^#/,"") + ')")</p><p>so my quick patch can't fix XSS in this case.</p><p>I suggest these</p><pre class="wiki">
 quickExpr = /^(?:\\s*(&lt;[\\w\\W]+&gt;)[^&gt;]*$|#([\\w\\-]*)$)/,
 $("   \\t  &lt;img&gt;") is OK
 $("anychar&lt;img&gt;") is NG
</pre><p>and </p><pre class="wiki">
 if( $.safetyMode == true ) { // or more cute name
 	// code for disable create html with $ function
 }

 $("&lt;img&gt;"); // throw error
 $.html("&lt;img&gt;"); // create Element
</pre><p>This changes clarifies what we are doing. And it will become easy to inspect DOM XSS.</p><p>Of course upgrade jQuery is needed.</p><p>Thanks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 03:53PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.7</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">high</span> → <span class="change-field-new">blocker</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We're going to change this for 1.7</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 04:00PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/9776">#9776</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 04:13PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>FYI, We're aware that this isn't a "dupe" of 9776, per se, but fixing 9521 will address this problem.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 25, 2011 04:04PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ john</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 01, 2011 04:16PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.7</span> → <span class="change-field-new">1.6.3</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 25, 2011 02:40PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-old">john</span> → <span class="change-field-new">dmethvin</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 25, 2011 07:16PM UTC by <span class="author">Dave Methvin</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Merge pull request <a href="/ticket/474">#474</a> from dmethvin/fix-9521-xss-hash</p><p>Fixes <a href="/ticket/9521">#9521</a>. Prioritize #id over &lt;tag&gt; to avoid XSS via location.hash. </p><p> Changeset: db9e023e62c1ff5d8f21ed9868ab6878da2005e9</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2011 04:26PM UTC by <span class="author">mikeycgto@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Saw the jQuery 1.6.3 update in JSWeekly. I too have noticed the potential XSS issue with selectors. I wrote about it a few months ago here and dubbed it "jQuery Selector Injection": <a href="http://www.mjcblog.net/2011/06/jquery-selector-injection" class="ext-link"><span class="icon"></span>http://www.mjcblog.net/2011/06/jquery-selector-injection</a></p><p>As you likely know, the potential for XSS is still present if the selector is not #id based. See my second PoC at the end of that blog post. </p><p>My post just tired to emphasize the need, as a developer, to be mindful of user-input and security considerations. It did not suggest any solutions. </p><p>Thanks!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2011 04:51PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We've done the best we can do with a generic solution for the very common but unwise case of <code>$(location.hash)</code>. Other exploits are possible but not as widespread.</p><p>I agree that developers need to be aware of any case where they are passing untrusted input to methods that can create HTML, such as <code>$()</code> or <code>$().html()</code> or the DOM's <code>.innerHTML</code> property for that matter. We cannot solve the problem inside jQuery because we cannot judge the trustworthiness of the string being passed. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 02, 2011 06:00PM UTC by <span class="author">mikeycgto@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Couldn't agree more, no sense in sacrificing performance or functionality in order to solve every possible attack vector. </p><p>Perhaps the documentation should have some information regarding this, such as some sort of security notes section. Regardless though, you can't secure against stupid ;)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 12, 2011 05:41PM UTC by <span class="author">jquery@ma.la</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>FYI</p><p><a href="http://twitter.com/#!/kkotowicz/status/113226491373961216" class="ext-link"><span class="icon"></span>http://twitter.com/#!/kkotowicz/status/113226491373961216</a></p><p><a href="http://twitter.com/#!/DOMXss/status/113208406986342400" class="ext-link"><span class="icon"></span>http://twitter.com/#!/DOMXss/status/113208406986342400</a></p><p>Please consider again</p><pre class="wiki">
quickExpr = /^(?:\\s*(&lt;[\\w\\W]+&gt;)[^&gt;]*$|#([\\w\\-]*)$)/
</pre><p>and remember <a href="/ticket/9776">#9776</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 02:07PM UTC by <span class="author">jdalton</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there seems to still an issue w/ 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326205152851388</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there seems to still be an issue w/ 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as @dmethvin points out, but I figured I would log the reported issue.&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326205232025013</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment10:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
var param = unescape((/[#&amp;]p=([^&amp;]+)/.exec(location.hash) || 0)[1]);&#92;
$(&#39;.sub a[href*=&quot;&#39; + param + &#39;&quot;]:first&#39;); // returns [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + param + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326211752819654</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there seems to still be an issue w/ 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326205394238553</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment3:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326206299584783</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment4:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
&#92;
`var $query_param = &#39;&lt;img src/ onerror=alert(1)&gt;&#39;;`&#92;
&#92;
`$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;); // return [&lt;img ...&gt;]`&#92;
&#92;
`$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1`&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326206408425807</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment5:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
var $query_param = &#39;&lt;img src/ onerror=alert(1)&gt;&#39;;&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;); // return [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326206421679738</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment6:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
&#92;
var $query_param = &#39;&lt;img src/ onerror=alert(1)&gt;&#39;;&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;); // return [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326206460557070</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment7:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;); // return [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326206553652768</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment8:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;); // returns [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + unescape(location.hash) + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326209862967228</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment9:</th>
                  <td>
                    
                      <span class="change-field-old">Ok so there may be an issue with 1.7:&#92;
http://twitter.com/bulkneets/statuses/156620076160786432&#92;
&#92;
The `location.hash` in the example is `#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;` which may make it less of a concern as `@dmethvin` points out, but I figured I would log the reported issue.&#92;
&#92;
A reduced example would be:&#92;
{{{&#92;
var param = unescape((/[?&amp;]p=([^&amp;]+)/.exec(location.hash) || 0)[1]);&#92;
$(&#39;.sub a[href*=&quot;&#39; + param + &#39;&quot;]:first&#39;); // returns [&lt;img ...&gt;]&#92;
$(&#39;.sub a[href*=&quot;&#39; + param + &#39;&quot;]:first&#39;).appendTo(&#39;body&#39;) // alerts 1&#92;
}}}&#92;
&#92;
The old patch:&#92;
https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</span> → <span class="change-field-new">1326209918451218</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Ok so there may be an issue with 1.7:</p><p><a href="http://twitter.com/bulkneets/statuses/156620076160786432" class="ext-link"><span class="icon"></span>http://twitter.com/bulkneets/statuses/156620076160786432</a></p><p>The <code>location.hash</code> in the example is <code>#p=&lt;img src%3D/%20onerror%3Dalert(1)&gt;</code> which may make it less of a concern as <code>@dmethvin</code> points out, but I figured I would log the reported issue.</p><p>A reduced example would be:</p><pre class="wiki">
var param = unescape((/[#&]p=([^&]+)/.exec(location.hash) || 0)[1]);
$('.sub a[href*="' + param + '"]:first'); // returns [&lt;img ...&gt;] and alerts 1
</pre><p>The old patch:</p><p><a href="https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/commit/749dbad981f040bd65cbb50c10e9aa6e44bd26ff</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 02:25PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <blockquote> Here is <a href="http://bit.ly/yuVD9b" class="ext-link"><span class="icon"></span>#XSS</a> caused by <code>$('.sub a[href*=" $query_param "]:first')</code></blockquote><p>The practice of blindly feeding untrusted strings to jQuery really has to be fixed at the site level. If you can control $query_param, why not close the string and inject arbitrary Javascript directly?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 02:37PM UTC by <span class="author">mathias</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">@dmethvin It’s not actually PHP or anything. The string is concatenated via JS.&#92;
&#92;
Here’s the uncompressed JS: http://jqapi.com/js/main.js&#92;
&#92;
And here’s the insecure part:&#92;
&#92;
{{{&#92;
    $(window).bind(&#39;hashchange&#39;, function(event) {&#92;
      var state = event.getState();      &#92;
      if(state.p) loadPage($(&#39;.sub a[href*=&quot;/&#39; + state.p + &#39;/&quot;]:first&#39;));&#92;
    }).trigger(&#39;hashchange&#39;);&#92;
}}}</span> → <span class="change-field-new">1326207088819787</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>@dmethvin It’s not actually PHP or anything. The string is concatenated via JS.</p><p>Here’s the uncompressed JS: <a href="http://jqapi.com/js/main.js" class="ext-link"><span class="icon"></span>http://jqapi.com/js/main.js</a></p><p>And here’s the insecure part:</p><pre class="wiki">
    $(window).bind('hashchange', function(event) {
      var state = event.getState();      
      if(state.p) loadPage($('.sub a[href*="/' + state.p + '/"]:first'));
    }).trigger('hashchange');
</pre><p>Note that <code>event.getState()</code> is an addition by <a href="https://raw.github.com/cowboy/jquery-bbq/master/jquery.ba-bbq.js" class="ext-link"><span class="icon"></span>jQuery BBQ</a>.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 02:48PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@mathias, OK, that makes more sense. But the problem is still that the caller is using untrusted data. Am I missing some simple fix we can apply at the jQuery/Sizzle level to fix this in a general way?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 02:59PM UTC by <span class="author">jdalton</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">@dmethvin The bug is that passing `$(someSelectorNotHtml)` will create a new element when it isn&#39;t intended to.</span> → <span class="change-field-new">1326208413955114</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p><code>@dmethvin</code> The bug is that passing <code>$(someSelectorNotHtml)</code> will create a new element when it isn't intended to.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 03:49PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.6.3</span> → <span class="change-field-new">1.8</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@jdalton and I talked about this, and I don't think it can be solved in a general way unless we make breaking changes to the "looks like HTML" rule. </p><p>Right now we look deep into the string for tags using a regexp (quickExpr), which means <code>"'.sub a[href*="&lt;img src=/ onerror=alert(1)&gt;"]:first'</code> looks like HTML with some other text nodes around it. Since top-level text nodes are generally discarded in a jQuery collection it only leaves the image.</p><p>The proposed solution would be to only allow strings beginning (and ending?) in angle brackets to be recognized as HTML.</p><p>An alternative solution would be to create some sort of "looks like a selector" rule but that would seem to be a lot more troublesome.</p><p>In any case this is no doubt a big breaking change to some poorly-written code out there.</p><p>Thoughts?</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2012 04:06PM UTC by <span class="author">jquery@ma.la</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@dmethvin, that is this.</p><pre class="wiki">
quickExpr = /^(?:\\s*(&lt;[\\w\\W]+&gt;)[^&gt;]*$|#([\\w\\-]*)$)/
</pre><p>that means create html elements must start with "&lt;" or "\\s*&lt;".</p><p>$("sometext&lt;img&gt;") is useless, that create just &lt;img&gt; tag, same as $("&lt;img&gt;")</p><p>The patch will make very very few incompatibility that can ignore.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 11, 2012 03:44PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Why bother with this complex regexp at all? It seems like we are saying the string must have optional leading spaces and a <code>&lt;</code> to be considered HTML. </p><blockquote> The patch will make very very few incompatibility that can ignore.</blockquote><p>If there is one thing I have learned over 5 years on this project, it is that one man's bug is another man's feature. Any change in behavior, documented or not, causes stuff to break.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 12, 2012 03:24AM UTC by <span class="author">mala &lt;jquery@ma.la&gt;</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi @dmethvin,</p><p>I agree and I know how backward-compatibility is important.</p><pre class="wiki">
var tmpl = $("#template_element").val(); // textarea, script, etc.
var element = $(tmpl); // "\\s*&lt;" will accept "\\n\\t\\s&lt;tags&gt;text&lt;/tags&gt;"
</pre><p>If this change will break someone's code, that is already wrong code or vulnerable code.</p><p>I've never seen $("sometext&lt;tag&gt;&lt;/tag&gt;") snippets over 5 years.</p><p>I found many XSS on famous web-sites or web-applications caused by this issue.</p><p>All of them expected that "wrong css selector will return empty element",</p><p>so I finally think this is a jQuery's vulnerability.</p><p>"wrong css selector" is just a bug, but "create unexpected html tag" is a vulnerability.</p><p>Dangerous operation must be performed explicitly. It will be clear which operation should have priority.</p><p>I would like to also hear other people's opinions.</p><p>Thanks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 12, 2012 08:48AM UTC by <span class="author">mala &lt;jquery@ma.la&gt;</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>To throw away complex quickExpr, it's time to refactoring.</p><pre class="wiki">
if (/^#[\\w\\-]*$/.test(selector)) { // HANDLE: $("#id")
    ...
} else if (/^\\s*&lt;[\\w\\W]&gt;.*/.test(selector)) { // HANDLE: $(html)
    ...
} else { // HANDLE: $(expr)
    ...
}
</pre><p>How about this? Full section is here <a href="https://gist.github.com/1599411" class="ext-link"><span class="icon"></span>https://gist.github.com/1599411</a></p><p>Two test was failed.</p><pre class="wiki">
equal( jQuery(" a&lt;div/&gt;b ").length, 1, "Make sure whitespace and other characters are trimmed." );
equal( jQuery(" a&lt;div&gt;" + long + "&lt;/div&gt;b ").length, 1, "Make sure whitespace and other characters are trimmed on long strings." );
</pre><p>and other test was passed.</p><p>For more loose rule for html is</p><pre class="wiki">
 /^\\s*&lt;[\\w\\W]&gt;.*|^\\s+[\\w\\s]*&lt;[\\w\\W]&gt;.*/
</pre><p>space and alphabet chars will be trimmed,</p><pre class="wiki">
$(" a &lt;img&gt;") // to create &lt;img&gt;
$("a &lt;img&gt;") // throw error.
</pre><p>Then all test was passed.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 28, 2012 11:32PM UTC by <span class="author">vidmich@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>you will not be able to save humans from own stupidity and you definitely should not increase code complexity and decrease performance of jQuery because  or them.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 15, 2012 04:54PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>What about splitting the functionality of $() into two pieces? One that has the current behavior, and a new method whose sole purpose is to accept a selector. And this new method would NOT generate a new HTML element no matter what is passed in. That way, developers would have an alternate safe method they could use instead, and this would also not break backward compatibility since it wouldn't change the behavior of $().</p><p>The real problem here, in my opinion, is that the $() function is trying to do too many things at once, and since one of those things is unsafe when provided untrusted user input, all other uses of $() are unsafe too, even though those uses should normally be safe no matter what input is provided.</p><p>An additional change that could be considered would be to add some kind of optional 'safe' mode, where when it was on, if you passed a selector to $() it would throw an error and tell you that you should use the new 'safe' selector method. This would help people quickly identify unsafe uses of the $() with selectors so they could port their applications to the new safer model. But since its off by default, it wouldn't affect existing jQuery users.</p><p>Dave Wichers</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 19, 2012 03:30PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.8</span> → <span class="change-field-new">1.7</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We've already fixed the issue described in this ticket. The comments bring up a separate issue, which is a duplicate of <a href="/ticket/11290">#11290</a>.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 19, 2012 05:42PM UTC by <span class="author">mala &lt;jquery@ma.la&gt;</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@timmywil Good work, but some XSS will still work like that</p><p><a href="http://jsfiddle.net/VqFWJ/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/VqFWJ/</a></p><pre class="wiki">
var param = "]&lt;img src='/' onerror='alert(1)'&gt;[";
$("a[rel=" + param + "]")
</pre><p>​</p><p>How do you think?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:29">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 19, 2012 06:19PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:29">comment:29</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>True, but I think we are mainly concerned with valid input. There is still an issue open to address the remaining xss issues and that is here:</p><p><a href="http://bugs.jquery.com/ticket/11617" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/11617</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:30">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 17, 2013 11:31PM UTC by <span class="author">augustd</span></span>
        <a class="ticket-change-link" href="#comment:30">comment:30</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Also affects jQuery v1.4.2</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
