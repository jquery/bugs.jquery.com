<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#15204 (Binding an event from an iframe content to its parent.window not working properly) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/15203/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/15205/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#15204</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(cantfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 07, 2014 08:21PM UTC</p>
      
        <p>Closed August 08, 2014 01:29PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Binding an event from an iframe content to its parent.window not working properly</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        cm0s
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>event</td>
      
        <th>Version:</th>
      
      <td>2.1.1</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>iframe, event</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>If we bind an event from an iframe content to its parent window and use a property set on the iframe content window in order to update a counter (eg. window.counter), whenever we refresh the iframe page the counter property doesn't seem to be correctly reinitialized. The iframe page should set the window.counter to 0 each time the page is reloaded, but the counter property seems to keep previous value.</p><p>I've been able to reproduce this issue on Chrome and Opera. On IE and Firefox there is no issue.</p><p>To better expose this issue I created a fiddle snippet:</p><p><a href="http://jsfiddle.net/cm0s/WYy6U/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/cm0s/WYy6U/3/</a></p><p>To reproduce the issue, first try to click outside the iframe: the counter will increment by 1 each time a click event is triggered. Then, click multiple times on the "Reload this page" link and then click outside the iframe. You will see the counter is now incremented by the number of times you clicked on the link not by 1 as it should.</p><p>The same snippet with the use of standard javascript onclick event instead of the $.on() function perfectly works on Chrome, Opera, IE, Firefox :</p><p><a href="http://jsfiddle.net/cm0s/D6j5G/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/cm0s/D6j5G/1/</a></p><p>Tested browser :</p><ul><li>Opera 23.0.1522.60 (doesn't work)</li><li>Chrome 36.0.1985.125 (doesn't work)</li><li>IE 11.0.9600.17207 (work correctly)</li><li>Firefox 31 (work correctly)</li></ul><p>All jQuery versions seem to be impacted (branches 2.x and 1.x)</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (1)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 08, 2014 01:29PM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ cantfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>You appear to have found an unusual browser behavior (I don't even know if it's a bug) appearing in more than one browser. First, note that <code>.off</code> does not remove event handlers added by distinct copies of jQuery (e.g., those from before the frame was reloaded): <a href="http://jsfiddle.net/qz8jwtxr/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/qz8jwtxr/</a>. With that in mind, it looks like the <code>parent.window.onclick = incrementCounter</code> in your <a href="http://jsfiddle.net/cm0s/D6j5G/1/" class="ext-link"><span class="icon"></span>working case</a> is destroying the old event handler (as expected), but that the <code>$(parent.window).on('click', incrementCounter)</code> in your <a href="http://fiddle.jshell.net/cm0s/44sT5/" class="ext-link"><span class="icon"></span>nonworking case</a> is not (again, as expected). The ''problem'' is that the iframe <code>window</code> and its contents seem to be the same between reloads, when in fact <code>$('.counter').html(window.counter)</code> of the old handler should have no visible effects (<a href="http://jsfiddle.net/su46fr9t/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/su46fr9t/</a>).</p><p>I recommend storing your data in a closure variable instead of a property on <code>window</code>, since (among other reasons) <code>window</code> survives reloads.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
