<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#2207 (serializeArray should treat elements with [braces] as arrays) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/2206/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/2208/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#2207</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">feature</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened January 21, 2008 11:55PM UTC</p>
      
        <p>Closed July 28, 2008 06:14PM UTC</p>
      
      
        <p>Last modified March 15, 2012 10:09AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">serializeArray should treat elements with [braces] as arrays</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        dubhunter
      </td>
      <th>Owned by:</th>
      <td>flesler</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.3">1.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.2.6</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>serialize array</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>serializeArray should treat elements with [braces] as arrays.</p><p>I understand that serialize (which returns a get query string) needs the [] braces left by serializeArray, but since on the receiving end, the query string would be parsed back into an array....shouldn't serializeArray do the same?</p><p>Could it be that $().val() never returns type of array?</p><p>I've tried with checkboxes, selects, select multiples... and I cannot get it to figure things out.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 25, 2008 10:59PM UTC by <span class="author">davidserduke</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">bug</span> → <span class="change-field-new">feature</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 11, 2008 11:30PM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ flesler</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This sounds like a fun feature, let me handle :)</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 14, 2008 10:15PM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, I think I missunderstood this, I thought it was something like <a href="/ticket/2726">#2726</a>.</p><p>But seems it isn't.</p><p>Could you please rephrase your ticket a bit ?</p><p>Thanks</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 10, 2008 08:46PM UTC by <span class="author">ygirouard</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I see what he means: If you have multiple inputs with names like "check[1]", "check[2]", "check[3]", etc...</p><p>The $.serializeArray() function should convert those inputs into an array of "check" as it would be done by server-side parser when the data is passed via POST or GET...</p><p>But instead it creates an array like this:</p><pre class="wiki">
array(
 0 =&gt; array("check[1]" =&gt; value1),
 1 =&gt; array("check[2]" =&gt; value2),
 2 =&gt; array("check[3]" =&gt; value3)
)
</pre><p>instead of...</p><pre class="wiki">
array(
 0 =&gt; array("check" =&gt;  array("1" =&gt; value1, "2" =&gt; value2, "3" =&gt; value3))
)
</pre><p>... which is what passing inputs that have braces in their names would become after being passed with POST or GET once they get parsed by the server.</p><p>I believe it does fall within the same subject as the closed ticket you referenced however.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 01, 2008 03:16AM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">core</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.2.3</span> → <span class="change-field-new">1.3</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2008 04:29PM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This does work for me, see <a href="/ticket/2377">#2377</a>.</p><p>This html:</p><pre class="wiki">
&lt;form&gt;
	&lt;input type="text" name="name[0]" value="aaaa" /&gt;
	&lt;input type="text" name="name[1]" value="bbbb" /&gt;
	&lt;input type="text" name="name[2]" value="cccc" /&gt;
&lt;/form&gt;
</pre><p>With this PHP:</p><pre class="wiki">
&lt;?php
	print_r($_POST);
?&gt;
</pre><p>I ran this code:</p><pre class="wiki">
$.ajax({ url:'foo.php', data:$('form').serialize(), type:'post'});
</pre><p>And the response was:</p><pre class="wiki">
Array(
    [name] =&gt; Array(
      [0] =&gt; aaaa
      [1] =&gt; bbbb
      [2] =&gt; cccc
    )
)
</pre><p>Tried this with Firefox 2, both POST and GET.</p><p>Do reopen this with a concise test case that reproduces the error.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2008 09:31PM UTC by <span class="author">dubhunter</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, this took me a while to remember what is going on.</p><p>You are right, your example works perfectly...but only because there is an extra step.</p><p>When the serializeArray() return is passed as the data arg for $.ajax();, it is then passed through $.param(); which does the dirty work. This is fine when always using it for form submissions, but what I am after is just the serializedArray, not a array of strings to be complied into a get string.</p><p>The problem is on the client side, not the PHP side. Except it does become a PHP problem if I am passing data to the server without using $.ajax(); or $.param();</p><p>My Solution to this problem has been to create a method called $.serializeAssoc(); It will recursively serialize heterogeneous form arrays into a neat array like package. (I say array like, since JS will not support associative arrays, but objects work almost as well.)</p><p>I have attached my markup, js, php output, and my extension file (includes logging function and $.serializeAssoc()). I did not inlcude the debug output, because its hard to copy from firebug.</p><p>ygirouard  is right though on the format of the JS object returned by $.serializeArray();</p><p>Here is my markup:</p><pre class="wiki">

	&lt;form name="jquery" id="jquery" action="/index/jqueryPost" method="post"&gt;
		&lt;input type="checkbox" name="check[]" id="check0" value="aaaa" /&gt;
		&lt;input type="checkbox" name="check[]" id="check1" value="bbbb" /&gt;
		&lt;input type="checkbox" name="check[]" id="check2" value="cccc" /&gt;
		&lt;input type="submit" name="button" id="button" value="submit" /&gt;
	&lt;/form&gt;
</pre><p>Here is the JS:</p><pre class="wiki">
$(function (){
	$('form :submit').click(function (e){
		e.preventDefault();
		var f = $(this).parents('form').get(0);

		$.log(f.action);

		var data = $(f).find(':input').serialize();
		data.fun = 'serialize';
		$.log(data);
		$.ajax({url: f.action, data: data, type: 'post', success: function (data){$.log(data);}});

		var data = $(f).find(':input').serializeArray();
		data.fun = 'serializeArray';
		$.log(data);
		$.ajax({url: f.action, data: data, type: 'post', success: function (data){$.log(data);}});

		var data = $(f).find(':input').serializeAssoc();
		data.fun = 'serializeAssoc';
		$.log(data);
		$.ajax({url: f.action, data: data, type: 'post', success: function (data){$.log(data);}});
	}).addClass("formBound");
});
</pre><p>And the responses:</p><pre class="wiki">
Array
(
    [check] =&gt; Array
        (
            [0] =&gt; aaaa
            [1] =&gt; bbbb
            [2] =&gt; cccc
        )

)
Array
(
    [check] =&gt; Array
        (
            [0] =&gt; aaaa
            [1] =&gt; bbbb
            [2] =&gt; cccc
        )

)
Array
(
    [check] =&gt; Array
        (
            [0] =&gt; aaaa
            [1] =&gt; bbbb
            [2] =&gt; cccc
        )
    [fun] =&gt; serializeAssoc
)
</pre><p>Here is my JQ Lib file (jquery.ext.js):</p><pre class="wiki">
(function($){
	$.extend({
		cssFile: function (f, m){
			$('&lt;link&gt;')
				.attr('href', f)
				.attr('type', 'text/css')
				.attr('rel', 'stylesheet')
				.attr('media', m || 'screen')
				.appendTo('head');
		},
		isArray: function (arr){
			if (typeof arr == 'object'){
				if (arr.constructor == Array){
					return true;
				}
			}
			return false;
		},
		arrayMerge: function (){
			var a = {};
			var n = 0;
			var argv = $.arrayMerge.arguments;
			for (var i = 0; i &lt; argv.length; i++){
				if ($.isArray(argv[i])){
					for (var j = 0; j &lt; argv[i].length; j++){
						a[n++] = argv[i][j];
					}
					a = $.makeArray(a);
				} else {
					for (var k in argv[i]){
						if (isNaN(k)){
							var v = argv[i][k];
							if (typeof v == 'object' && a[k]){
								v = $.arrayMerge(a[k], v);
							}
							a[k] = v;
						} else {
							a[n++] = argv[i][k];
						}
					}
				}
			}
			return a;
		},
		count: function (arr){
			if ($.isArray(arr)){
				return arr.length;
			} else {
				var n = 0;
				for (var k in arr){
					if (!isNaN(k)){
						n++;
					}
				}
				return n;
			}
		},
		log: function (msg){
			if (window.console)
				console.log(msg);
			else
				alert(msg);
		}
	});
	$.fn.extend({
		serializeAssoc: function (){
			var o = {
				aa: {},
				add: function (name, value){
					var tmp = name.match(/^(.*)\\[([^\\]]*)\\]$/);
					if (tmp){
						var v = {};
						if (tmp[2])
							v[tmp[2]] = value;
						else
							v[$.count(v)] = value;
						this.add(tmp[1], v);
					}
					else if (typeof value == 'object'){
						if (typeof this.aa[name] != 'object'){
							this.aa[name] = {};
						}
						this.aa[name] = $.arrayMerge(this.aa[name], value);
					}
					else {
						this.aa[name] = value;
					}
				}
			};
			var a = $(this).serializeArray();
			for (var i = 0; i &lt; a.length; i++){
				o.add(a[i].name, a[i].value);
			}
			return o.aa;
		}
	});
})(jQuery);
</pre>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2008 03:50PM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>need:</th>
                  <td>
                    
                      <span class="change-field-old">Review</span> → <span class="change-field-new">Test Case</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>version:</th>
                  <td>
                    
                      <span class="change-field-old">1.2.2</span> → <span class="change-field-new">1.2.6</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok, I see your function...</p><p>Now, both serialize() and serializeArray() are meant for server side posting.</p><p>The way the array is serialized by param() is perfectly understood by the servers.</p><p>If you need a different serialization, for client side, you should indeed write your own.</p><p>Unless you can show a concrete situation (with a test case) where this is actually needed for ajax requests, this won't be taken into account.</p><p>I'll leave this open for now, please reply.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2008 07:51PM UTC by <span class="author">dubhunter</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I guess I just see a lot of value in the ability to work with the data structure before its sent to the server or not to send it to the server at all. This is essentially why I originally list the component to be the "core" and not "ajax" because I agree that that functionality works perfectly.</p><p>My dream scenario would be for serializeArray() to return the proper data structure and then have param() take care of the rest when using it in an ajax context. Otherwise why even expose serializeArray(), when serialize() does everything you need for server-side processing.</p><p>I am personally fine with using my own function, but I just see value in this for other people.</p><p>While you are at it...any chance on getting any of my other methods into the core? cssFile(), isArray(), arrayMerge(), count(), log()???</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 28, 2008 06:14PM UTC by <span class="author">flesler</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The answer is always the same, if you provide a test case where any of these functions help improve perfomance or reduce code size, they will be added.</p><p>If they're just useful for the common user, but not for the core, then no.</p><p>They can always be put into a plugin.</p><p>My opinion:</p><p>cssFile: it's cool but has no use for the core.</p><p>isArray: we just use obj.constructor == Array.</p><p><a href="/wiki/ArrayMerge">ArrayMerge</a>: Seems like a special case of $.extend. We use that method and for now, no complaints.</p><p>console & log: definitely useful, but not for the core.</p><p>Don't get me wrong, I like your code, but we're really cautious about new features. That's how we keep the filesize low.</p><p>Cheers</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
