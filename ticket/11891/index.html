<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11891 (catch-all event handler) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11890/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11892/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11891</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened June 11, 2012 10:29AM UTC</p>
      
        <p>Closed June 12, 2012 03:11PM UTC</p>
      
      
        <p>Last modified June 14, 2012 04:17PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">catch-all event handler</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        faassen
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.7.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>In jQuery 1.6.4, registering an event handler on $(document) or $(window) would work as a catch-all event handler, even for events on elements that</p><p>are not attached to the DOM. In jQuery 1.7 this changed</p><p><a href="http://bugs.jquery.com/ticket/10489" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/10489</a></p><p>See also this jsFiddle demonstrating the difference between 1.7 and 1.6.4; in 1.6.4 this fires twice, but if you switch to 1.7.2 it'll fire only once.</p><p><a href="http://jsfiddle.net/jzESV/14/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jzESV/14/</a></p><p>My code was relying on this catch-all event handling behavior, but broke. I understand why this fix was made, but would it be possible to add a feature to jQuery that would allow the developer to register a catch-all event handler that will be triggered if no element-level (or document level or window level) event handler can be found? This would simplify my code; now I have to check whether the event was handled at all, and if not, trigger the catch-all handler, which is more ugly than I'd like it to be. I don't know what "this" should be in such a handler, but ev.target is still available to do something interesting.</p><p>(I tried to look for such a feature in the code but I couldn't find anything - sorry if I missed something.)</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (7)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 12, 2012 03:11PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That's not at all in keeping with the DOM event model, where events bubble to the document. It sounds like you are trying to implement pub/sub or a callback queue. Look at $.Callbacks or Google for jQuery pub/sub. For more discussion please use the forums.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 03:01PM UTC by <span class="author">faassen</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I want the events to be issued to DOM nodes and to bubble up the DOM tree to the document. But there are two special cases:</p><ul><li>the node may not be connected to the document.</li></ul><ul><li>there is still no event handler on the document.</li></ul><p>I want the option to catch the event after all in these cases. I.e. a global event handler that gets called if no specific event handler can be found. In jQuery 1.6 I could get away with putting an event handler on the document itself to catch even those events sent to unconnected nodes, but this was changed in 1.7. Now there's no equivalent functionality.</p><p>I now solve this by putting a special flag on the event object that indicates whether this is handled at all. The DOM event handlers then set this flag. If the flag isn't set, I trigger the global handler. Since for my use case I'm in charge of triggering the event I can get away with this, that won't work for events triggered by the browser. It also isn't very clean.</p><p>I'll take this to the forums too, by referring to this issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 03:30PM UTC by <span class="author">faassen</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>See this forum topic:</p><p><a href="http://forum.jquery.com/topic/catch-all-event-handler-for-unconnected-dom-nodes" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/catch-all-event-handler-for-unconnected-dom-nodes</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 03:37PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Add a listener to document and propagate it to your disconnected elements.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 03:53PM UTC by <span class="author">faassen</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm not sure what you're saying. </p><p>If you mean to also bind the handler to the disconnected elements, in this case I want *every* element to be able to respond to my custom event. That's what I am doing with a document-level handler. I could create a new element factory that made sure my event handler is attached to each and every created element, but I want this to work with elements created anywhere.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 03:55PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If it is not in the document it cannot receive a bubbled event. Not in jQuery, and not in bare DOM. We are not preventing something that is already in the DOM, you are asking for special-case functionality so expect to write your own special-case code. We're not adding it.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 14, 2012 04:17PM UTC by <span class="author">faassen</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I&#39;m not suggesting the document should receive the bubbled event; this was the behavior in jQuery 1.6, but this was fixed in jQuery 1.7.&#92;
&#92;
I thought for a moment you said that event bubbling doesn&#39;t work for unattached nodes at all and shouldn&#39;t, but this jsFiddle demonstrates it does:&#92;
&#92;
http://jsfiddle.net/kXFM8/2/&#92;
&#92;
the &#39;outer&#39; element handles the event triggered on the &#39;inner&#39; element, so the event appears to bubble up from outer to inner even though none of these elements are connected. But when these elements bubble up beyond &#39;outer&#39; without them being handled, there is no way to attach a handler that will catch them.&#92;
&#92;
I realize I&#39;m asking for a new feature, not reporting a bug. This is why this is issue is marked &#39;enhancement&#39;. &#92;
&#92;
Again, ironically doing this was supported by jQuery 1.6 as the aforementioned bug. Upgrading to 1.7 led to the insight that yes, this is bug, but it&#39;s useful to be able to do this nonetheless.&#92;
&#92;
I&#39;ve totally written special case code already; this is not about me having to write less code, just cleaner code. There is a potential use case where someone wants an external library to be able to issue events on disconnected DOM nodes and still handle them in a fallback; in such a case my workaround wouldn&#39;t work, as it relies on being in charge of the code that triggers the event.&#92;
</span> → <span class="change-field-new">1339690747997893</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>I'm not suggesting the document should receive the bubbled event; this was the behavior in jQuery 1.6, but this was fixed in jQuery 1.7.</p><p>I thought for a moment you said that event bubbling doesn't work for unattached nodes at all and shouldn't, but this jsFiddle demonstrates it does:</p><p><a href="http://jsfiddle.net/kXFM8/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/kXFM8/2/</a></p><p>the 'outer' element handles the event triggered on the 'inner' element, so the event appears to bubble up from outer to inner even though none of these elements are connected. But when these elements bubble up beyond 'outer' without them being handled, there is no way to attach a handler that will catch them.</p><p>I realize I'm asking for a new feature, not reporting a bug. This is why this issue is marked 'enhancement'. </p><p>Again, ironically doing this was supported by jQuery 1.6 as the aforementioned bug. Upgrading to 1.7 led to the insight that yes, this is bug, but it's useful to be able to do this nonetheless.</p><p>I've totally written special case code already; this is not about me having to write less code, just cleaner code. There is a potential use case where someone wants an external library to be able to issue events on disconnected DOM nodes and still handle them in a fallback; in such a case my workaround wouldn't work, as it relies on being in charge of the code that triggers the event.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
