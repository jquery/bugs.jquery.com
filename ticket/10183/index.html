<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10183 (Strange results for getting height of hidden div.) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10182/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10184/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#10183</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened September 01, 2011 01:36AM UTC</p>
      
        <p>Closed September 20, 2011 04:49PM UTC</p>
      
      
        <p>Last modified March 14, 2012 09:09AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Strange results for getting height of hidden div.</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jonnew@gmail.com
      </td>
      <th>Owned by:</th>
      <td>jonnew@gmail.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>dimensions</td>
      
        <th>Version:</th>
      
      <td>1.6.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>If I have 2 identical divs, each containing a &lt;p&gt; tag with text.  The only difference is that the first one has display:none.</p><p>I would expect that when using jQuery to get the height() of each div the results would be the same but they are not.  When debugging, I noticed that jQuery would add "position:absolute; display:block; visiblity:hidden;"  However, weirdly, it seems that the position:absolute part adds unnecessary height.  What's also weird, is that this error does not occur in jsFiddle so, I pasted the HTML/Javascript below.</p><p>This occurs in Firefox 6, Chrome 15.0.865.1000, and Safari 5.1.  </p><p>This works fine in IE9.</p><pre class="wiki">
&lt;html&gt;
	&lt;head&gt;&lt;/head&gt;
	&lt;body&gt;
		&lt;div id="d1"&gt;&lt;p id="p1"&gt;blah!&lt;/p&gt;&lt;/div&gt;
		&lt;div id="d2" style='display:none;'&gt;&lt;p id="p2"&gt;blah!&lt;/p&gt;&lt;/div&gt;
		&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"&gt;&lt;/script&gt;
		&lt;script&gt;
			$(document).ready(function(){
			    //visible
				console.log($("#d1").height());
				console.log($("#p1").height());

				//invisible
				console.log($("#d2").height());
				console.log($("#p2").height());

			});

		&lt;/script&gt;

	&lt;/body&gt;

&lt;/html&gt;

</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 19, 2011 04:13PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">dimensions</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ jonnew@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project! Please provide a complete reduced test case on jsFiddle to help us assess your ticket!</p><p>Additionally, be sure to test against the jQuery Edge version to ensure the issue still exists. To get you started, use this boilerplate: <a href="http://jsfiddle.net/FrKyN/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/FrKyN/</a>  </p><p>Open the link and click to "Fork" (in the top menu) to get started.</p><p>(Even though you've stated the issue cannot be reproduced, it will still be useful for comparison, thanks!)</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 19, 2011 04:30PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 19, 2011 11:06PM UTC by <span class="author">jonnew@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This issue still exists on jQuery Edge.</p><p>I created a fiddle, even though the problem doesn't manifest itself in this context: <a href="http://jsfiddle.net/Fny7P/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Fny7P/1/</a></p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 20, 2011 04:49PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jsfiddle is a normal environment.  If the issue cannot be reproduced there, it usually means there is problem with the OP's environment and not with jQuery.  If the issue can be reproduced on jsfiddle, we can reopen this ticket.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 20, 2011 05:26PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm sorry, I've reproduced this on several browsers across several computers. I understand it's very odd that I can't repro on jsFiddle, but give me a chance.  If you copy the code I posted and ran it from notepad, you should be able to reproduce the bug.  I would be more than happy to help in any way I can.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 20, 2011 05:26PM UTC by <span class="author">jonnew@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Last comment was from me, the original submitter.  Forgot to login. Sorry about that.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 21, 2011 04:52PM UTC by <span class="author">joelanmaqn@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>In this example, I don't understand jQuery's behaviour finding the height of hidden elements.</p><p>When the parent (#d2) is hidden, the correct height is reported for #d2, but the height of the child (#p2) is reported as 0. Why is this, considering neither is visible. Surely they should both either:</p><p>a) report the height they would have if visible, or</p><p>b) report 0 as they have no 'height'.</p><p>for the record, I'd prefer a) - this issue of jQuery not reporting consistent height of an element based on the *parent* visibility is hard to work with.</p><p>Joe Lanman</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 21, 2011 04:53PM UTC by <span class="author">joelanman@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>sorry - that's joelanman@gmail.com</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 21, 2011 10:47PM UTC by <span class="author">jonnew@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>joelanman, thanks for taking the time to respond!</p><p>I'm actually seeing incorrect height for #d2. Instead of using the jsFiddle link, if you copy and paste the code into notepad and run it, you'll see a console output of 20, 20, 52, 0.  The '52' for #d2 is particularly confusing, and it's doubly confusing that the result is different in jsFiddle than in notepad.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 27, 2011 12:52AM UTC by <span class="author">jonnew@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I chatted with Eviltwin about this in the Jquery IRC room.  JQuery sets the hidden node to display:block and position:absolute, grabs the height, and then resets.  It turns out, not resetting the default stylesheet, (specifically margin:0), is responsible for this behavior.  JSFiddle resets the stylesheet.</p><p>Here's the conversation:</p><p>&lt;Eviltwin&gt; newtang: I know exactly what it's happening</p><p> &lt;Eviltwin&gt; They have a CSS reset and you don't</p><p> &lt;Eviltwin&gt; <a href="http://fiddle.jshell.net/css/normalize.css" class="ext-link"><span class="icon"></span>http://fiddle.jshell.net/css/normalize.css</a></p><p> &lt;newtang&gt; Nice find!</p><p> &lt;Eviltwin&gt; Probably the div { margin: 0; padding: 0; }</p><p> &lt;newtang&gt; Oh, that makes sense</p><p> &lt;newtang&gt; So, when jquery sets position to absolute, it should probably also adjust padding/margin</p><p> &lt;Eviltwin&gt; Well technicalyl the padding/margin are part of the element</p><p> &lt;Eviltwin&gt; It's the margin on the &lt;p&gt; tag that's causing the oddity</p><p> &lt;Eviltwin&gt; p { margin: 0; } fixes it</p><p> &lt;newtang&gt; What purpose does the position:absolute serve?</p><p> &lt;Eviltwin&gt; Not causing all your shit to shift when it makes the swap</p><p> &lt;Eviltwin&gt; Otherwise it might flash occupy that space for an instant</p><p> &lt;newtang&gt; I see, got it</p><p> &lt;Eviltwin&gt; If you set just position:absolute on the element, you get this: <a href="http://cl.ly/2t2L2n1O1s2z2j1M1Z1J" class="ext-link"><span class="icon"></span>http://cl.ly/2t2L2n1O1s2z2j1M1Z1J</a></p><p> &lt;Eviltwin&gt; Compared to the other one: <a href="http://cl.ly/2r0V3u1d3K3N3A0R1O2L" class="ext-link"><span class="icon"></span>http://cl.ly/2r0V3u1d3K3N3A0R1O2L</a></p><p> &lt;newtang&gt; But why does the P have the margin when it's within an absolutely positioned div?</p><p> &lt;Eviltwin&gt; User agent stylesheets are sucky and built for HTML4 days, that's why people use CSS resets</p><p> &lt;newtang&gt; Eviltwin, I appreciate the help.  I'm confused about one thing: I wouldn't think the styles of a p would be affected if its parent container was absolutely positioned or not.  Regrdless of a user agent stylesheet</p><p> &lt;Eviltwin&gt; Well it's definitely the browser causing the problem, not jQuery</p><p> &lt;Eviltwin&gt; Something you might want to report as a <a href="/wiki/WebKit">WebKit</a> bug</p><p> &lt;newtang&gt; Hmm, it happens in Firefox too</p><p> &lt;Eviltwin&gt; I think I know what's going on, maybe</p><p> &lt;Eviltwin&gt; p tags have p { display: block; -webkit-margin-before: 1em; -webkit-margin-after: 1em; -webkit-margin-start: 0px; -webkit-margin-end: 0px; } in the user agent stylesheet for <a href="/wiki/WebKit">WebKit</a></p><p> &lt;Eviltwin&gt; In a normal text environment, this margin is effectively ignored</p><p> &lt;Eviltwin&gt; But if you have p tags one after another</p><p> &lt;Eviltwin&gt; The margins collapse and you have a line between the two</p><p> &lt;Eviltwin&gt; If you have this: &lt;div id="d1"&gt;&lt;p id="p1"&gt;blah!&lt;/p&gt;&lt;/div&gt;&lt;div id="d2" style="position: absolute"&gt;&lt;p id="p2"&gt;blah!&lt;/p&gt;&lt;/div&gt;</p><p> &lt;Eviltwin&gt; And you inspect the two, you'll see the p's are the same size with the same padding</p><p> &lt;Eviltwin&gt; Same margin*</p><p> &lt;Eviltwin&gt; But the margin is *outside* the first div and *inside* the second</p><p> &lt;Eviltwin&gt; It even pushed the second down to below the first</p><p> &lt;Eviltwin&gt; Kind of reminds me of some of the UL/LI behavior</p><p> &lt;newtang&gt; Interesting</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
