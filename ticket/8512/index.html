<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8512 (jQuery(&amp;quot;SELECT&amp;quot;).val(null) : inconsistent results in different browsers) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8511/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8513/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8512</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(patchwelcome)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 13, 2011 01:58AM UTC</p>
      
        <p>Closed March 18, 2011 01:19AM UTC</p>
      
      
        <p>Last modified March 14, 2012 05:37PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery(&quot;SELECT&quot;).val(null) : inconsistent results in different browsers</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        shehriyari
      </td>
      <th>Owned by:</th>
      <td>shehriyari</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>attributes</td>
      
        <th>Version:</th>
      
      <td>1.5.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p><a href="http://jsfiddle.net/jf7t2/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jf7t2/1/</a></p><p>Please run it on the latest versions of all browsers, and see for yourself. When the button is clicked, on:</p><p>1. on <a href="/wiki/WebKit">WebKit</a> browsers (Chrome, Safari) it just doesn't select anything, instead creates some ghostly empty option</p><p>2. on Firefox and Opera, it works the way I expect and want it to work, de-selects all options of the element</p><p>3. on Explorer, it does nothing</p><p>jQuery 1.5.1 source code also tells us that, in this case jQuery sets selectedIndex = -1.</p><p><a href="http://stackoverflow.com/questions/5286424/jqueryformelement-valnull-inconsistent-results-in-different-browsers/5286643#5286643" class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/5286424/jqueryformelement-valnull-inconsistent-results-in-different-browsers/5286643#5286643</a></p><p>But since browsers mess it up in this case. Shouldn't jQuery force it to behave the way Firefox and Opera does, de-select all child options?</p><p>Thanks.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 13, 2011 03:00AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">attributes</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ shehriyari</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">bug</span> → <span class="change-field-new">enhancement</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There is no documented behavior for <code>.val(null)</code>, are you asking for that to be an enhancement to select no options then? The W3C has this to say about the case where nothing is selected initially:</p><p><a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.6" class="ext-link"><span class="icon"></span>http://www.w3.org/TR/html401/interact/forms.html#h-17.6</a></p><blockquote> If no OPTION element has the selected attribute set, user agent behavior for choosing which option is initially selected is undefined. Note. Since existing implementations handle this case differently, the current specification differs from RFC 1866 ([RFC1866] section 8.1.3), which states: The initial state has the first option selected, unless a SELECTED attribute is present on any of the &lt;OPTION&gt; elements. Since user agent behavior differs, authors should ensure that each menu includes a default pre-selected OPTION.</blockquote><p>It's not clear whether browsers want you to deselect all options on a select-one element, but the behavior seems to be poorly defined in any case.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 14, 2011 02:24AM UTC by <span class="author">shehriyari</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I would prefer that, yes, to select no options.&#92;
&#92;
HOWEVER, my wishes are irrelevant: Although it is NOT documented, the CODE is written that way [jQuery source 1.5.1 - check the stackoverflow.com discussion I referred you to, in original report]. What I say, is that you should make a decision, and implement it. Having selectedIndex = -1 doesn&#39;t solve problems, it creates them. jQuery&#39;s primary objective (I believe) should be &quot;to be standards-compliant AND cross-browser, useful tool that DOES function&quot;, not just &quot;to be standards-compliant tool that follows those standards to no end&quot;. selectedIndex = -1 doesn&#39;t serve anyone...&#92;
&#92;
And again, YES, I would recommend having all options de-selected. That would solve a lot of problems and would be quite useful shortcut for us, developers.&#92;
&#92;
Thanks for all the effort you guys putting forward, jQuery is an awesome tool! Good luck!</span> → <span class="change-field-new">1300069559869788</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">I would prefer that, yes, to select no options.&#92;
&#92;
HOWEVER, my wishes are irrelevant: Although it is NOT documented, the CODE is written that way [jQuery source 1.5.1 - check the stackoverflow.com discussion I referred you to, in original report]. What I say, is that you should make a decision, and implement it. Having selectedIndex = -1 doesn&#39;t solve problems, it creates them. jQuery&#39;s primary objective (I believe) should be &quot;to be standards-compliant AND cross-browser, useful tool that DOES function&quot;, not just &quot;to be standards-compliant tool that follows those standards blindly, to no end&quot;. selectedIndex = -1 doesn&#39;t serve anyone...&#92;
&#92;
And again, YES, I would recommend having all options de-selected. That would solve a lot of problems and would be quite useful shortcut for us, developers.&#92;
&#92;
Thanks for all the effort you guys putting forward, jQuery is an awesome tool! Good luck!</span> → <span class="change-field-new">1300069652782598</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">I would prefer that, yes, to select no options.&#92;
&#92;
HOWEVER, my wishes are irrelevant: Although it is NOT documented, the CODE is written that way [jQuery source 1.5.1 - check the stackoverflow.com discussion I referred you to, in original report]. What I say, is that you should make a decision, and implement it. Having selectedIndex = -1 doesn&#39;t solve problems, it creates them. jQuery&#39;s primary objective (I believe) should be &quot;to be standards-compliant AND cross-browser, useful tool that DOES function&quot;, not just &quot;to be standards-compliant tool that follows those standards blindly, to no end&quot;. selectedIndex = -1 doesn&#39;t serve anyone...&#92;
&#92;
And again, YES, I would recommend having all options de-selected. That would solve a lot of problems and would be quite useful shortcut for us, developers.&#92;
&#92;
Thanks for all the effort you guys putting forward, jQuery is an awesome tool! Good luck!&#92;
&#92;
P.S.: That&#39;s why I would call this report a BUG, not ENHANCEMENT, since this little feature doesn&#39;t do anything useful for front-end designers.</span> → <span class="change-field-new">1300090791727077</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>I would prefer that, yes, to select no options.</p><p>HOWEVER, my wishes are irrelevant: Although it is NOT documented, the CODE is written that way [jQuery source 1.5.1 - check the stackoverflow.com discussion I referred you to, in original report]. What I say, is that you should make a decision, and implement it. Having selectedIndex = -1 doesn't solve problems, it creates them. jQuery's primary objective (I believe) should be "to be standards-compliant AND cross-browser, useful tool that DOES function", not just "to be standards-compliant tool that follows those standards blindly, to no end". selectedIndex = -1 doesn't serve anyone...</p><p>And again, YES, I would recommend having all options de-selected. That would solve a lot of problems and would be quite useful shortcut for us, developers.</p><p>Thanks for all the effort you guys putting forward, jQuery is an awesome tool! Good luck!</p><p>P.S.: That's why I would call this report a BUG, not an ENHANCEMENT, since this little feature doesn't do anything useful for front-end designers.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 18, 2011 01:19AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">&#92;
http://jsfiddle.net/jf7t2/1/&#92;
&#92;
Please run it on the latest versions of all browsers, and see for yourself. When the button is clicked, on:&#92;
&#92;
1. on WebKit browsers (Chrome, Safari) it just doesn&#39;t select anything, instead creates some ghostly empty option&#92;
2. on Firefox and Opera, it works the way I expect and want it to work, de-selects all options of the element&#92;
3. on Explorer, it does nothing&#92;
&#92;
jQuery 1.5.1 source code also tells us that, in this case jQuery sets selectedIndex = -1.&#92;
&#92;
http://stackoverflow.com/questions/5286424/jqueryformelement-valnull-inconsistent-results-in-different-browsers/5286643#5286643&#92;
&#92;
But since browsers mess it up in this case. Shouldn&#39;t jQuery force it to behave the way Firefox and Opera does, de-select all child options?&#92;
&#92;
Thanks.</span> → <span class="change-field-new">http://jsfiddle.net/jf7t2/1/&#92;
&#92;
Please run it on the latest versions of all browsers, and see for yourself. When the button is clicked, on:&#92;
&#92;
1. on WebKit browsers (Chrome, Safari) it just doesn&#39;t select anything, instead creates some ghostly empty option&#92;
2. on Firefox and Opera, it works the way I expect and want it to work, de-selects all options of the element&#92;
3. on Explorer, it does nothing&#92;
&#92;
jQuery 1.5.1 source code also tells us that, in this case jQuery sets selectedIndex = -1.&#92;
&#92;
http://stackoverflow.com/questions/5286424/jqueryformelement-valnull-inconsistent-results-in-different-browsers/5286643#5286643&#92;
&#92;
But since browsers mess it up in this case. Shouldn&#39;t jQuery force it to behave the way Firefox and Opera does, de-select all child options?&#92;
&#92;
Thanks.</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ patchwelcome</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
