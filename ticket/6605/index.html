<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#6605 (Regexp for TRIM can freeze browser) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/6604/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/6606/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#6605</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened May 28, 2010 06:09AM UTC</p>
      
        <p>Closed June 29, 2010 03:39AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">Regexp for TRIM can freeze browser</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        poppyto
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.4.3">1.4.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.4.2</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>trim freeze catastrophic backtracking</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have a problem with the trim function in jquery 1.4.2</p><p>try the replacing regexp(rtrim) /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g</p><p>with the string below, and the browser will freeze !</p><pre class="wiki">
" x\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0\\u00A0x ".replace(/^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g,"")
</pre><p>Lastest Firefox & Chrome are freezing !</p><p></p><hr><p></p><p>WHY ?</p><p></p><hr><p></p><p>Because of the large number of \\u00A0, regexbuddy says it's a case of "catastrophic backtracking"</p><p></p><hr><p></p><p>Patch :</p><p></p><hr><p></p><p>change </p><pre class="wiki">
rtrim = /^(\\s|\\u00A0)+|(\\s|\\u00A0)+$/g,
</pre><p>by</p><pre class="wiki">
rtrim = /(?:^[\\s\\u00A0]+)|(?:[\\s\\u00A0]+$)/g,
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 31, 2010 02:09PM UTC by <span class="author">benpbenp</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Came across the same problem. The suggested patch does fix the problem in that it prevents freezing, however a warning to anyone who wants to try using it: lots of stuff probably relies on the original behavior of trim and will be broken by this. For example, and without digging into the why of it, the slider plugin for jquery ui will add classes to the slider handle unbroken by spaces: "ui-slider-handleui-state-defaultui-corner-all" instead of "ui-slider-handle ui-state-default ui-corner-all".</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 28, 2010 01:43PM UTC by <span class="author">Pointy</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Note: both the original value of "rtrim" and the replacement - as quoted in this bug report, that is - are incorrect. Both should have the initial "leading string" matcher anchored with and uparrow character. Unfortunately, Trac seems to be eating those, so they don't show up in the bug report text!  Therefore, if you're reading this bug report and (as benpbenp apparently did) trying the fix, make sure you include an uparrow character at the start of the new regex; you'll see the uparrow in the 1.4.2 value of rtrim if you check the source.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2010 03:39AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">I have a problem with the trim function in jquery 1.4.2&#92;
&#92;
try the replacing regexp(rtrim) /^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g&#92;
with the string below, and the browser will freeze !&#92;
&#92;
&quot; x&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0x &quot;.replace(/^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g,&quot;&quot;)&#92;
&#92;
Lastest Firefox &amp; Chrome are freezing !&#92;
-----------&#92;
WHY ?&#92;
-----------&#92;
Because of the large number of &#92;&#92;u00A0, regexbuddy says it&#39;s a case of &quot;catastrophic backtracking&quot;&#92;
&#92;
-----------&#92;
Patch :&#92;
-----------&#92;
change &#92;
rtrim = /^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g,&#92;
by&#92;
rtrim = /(?:^[&#92;&#92;s&#92;&#92;u00A0]+)|(?:[&#92;&#92;s&#92;&#92;u00A0]+$)/g,</span> → <span class="change-field-new">I have a problem with the trim function in jquery 1.4.2&#92;
&#92;
try the replacing regexp(rtrim) /^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g&#92;
with the string below, and the browser will freeze !&#92;
{{{&#92;
&quot; x&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0&#92;&#92;u00A0x &quot;.replace(/^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g,&quot;&quot;)&#92;
}}}&#92;
Lastest Firefox &amp; Chrome are freezing !&#92;
-----------&#92;
WHY ?&#92;
-----------&#92;
Because of the large number of &#92;&#92;u00A0, regexbuddy says it&#39;s a case of &quot;catastrophic backtracking&quot;&#92;
&#92;
-----------&#92;
Patch :&#92;
-----------&#92;
change &#92;
{{{&#92;
rtrim = /^(&#92;&#92;s|&#92;&#92;u00A0)+|(&#92;&#92;s|&#92;&#92;u00A0)+$/g,&#92;
}}}&#92;
by&#92;
{{{&#92;
rtrim = /(?:^[&#92;&#92;s&#92;&#92;u00A0]+)|(?:[&#92;&#92;s&#92;&#92;u00A0]+$)/g,&#92;
}}}</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The trim function was changed in 1.4 to remove this regexp.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
