<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1911 (jQuery-bound events don&amp;#39;t have access to jQuery-accessable items) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1910/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1912/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#1911</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 09, 2007 10:53PM UTC</p>
      
        <p>Closed November 14, 2007 03:10PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery-bound events don&#39;t have access to jQuery-accessable items</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        mike503
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.2.2">1.2.2</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>event</td>
      
        <th>Version:</th>
      
      <td>1.2.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I can see this happening in Firefox 2.0.0.9 with <a href="/wiki/FireBug">FireBug</a> and YSlow.</p><p>I tried to find any related tickets, this is the only one it *might* be related to: <a href="http://dev.jquery.com/ticket/1320" class="ext-link"><span class="icon"></span>http://dev.jquery.com/ticket/1320</a></p><p>Otherwise, I think this is unreported so far.</p><p>If you try the code below, when the page is loading, mouse over the tabs - you don't need to click or anything. The mouseover alone will trigger the "$ is undefined"</p><p>Live example:</p><p><a href="http://mikehost.com/~mike/tmp/jquery/jquery5.html" class="ext-link"><span class="icon"></span>http://mikehost.com/~mike/tmp/jquery/jquery5.html</a> (note that one of the links is broken, but it's the mouseover action that is what is a concern)</p><p>Example code:</p><p>&lt;!DOCTYPE html PUBLIC "-<em>W3C</em>DTD XHTML 1.0 Transitional<em>EN" "http:</em>www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</p><p>&lt;html&gt;</p><p> &lt;head&gt;</p><p>  &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /&gt;</p><p>  &lt;meta content="Wed, 26 Feb 1997 08:21:57 GMT" http-equiv="expires" /&gt;</p><p>  &lt;meta content="no-cache" http-equiv="Pragma" /&gt;</p><p>  &lt;script src="jquery.js" type="text/javascript"&gt;&lt;/script&gt;</p><p>  &lt;style type="text/css"&gt;</p><p>  .tab {</p><p>   float: left;</p><p>   padding:3px;</p><p>   padding-right: 30px;</p><p>   border-right:1px solid #fff;</p><p>   background-color: #ff9900;</p><p>   min-width: 110px;</p><p>  }</p><p>  #allEntries, #createNew, #content {</p><p>   border: solid 1px <a href="/ticket/7">#7</a>dbeee;</p><p>   padding: 5px;</p><p>   width: 975px;</p><p>  }</p><p>  &lt;/style&gt;</p><p>  &lt;title&gt;Test&lt;/title&gt;</p><p> &lt;/head&gt;</p><p> &lt;body&gt;</p><p>  &lt;div id="bodyContainerWide"&gt;</p><p>   &lt;h2&gt;Test&lt;/h2&gt;</p><p>   &lt;div id="tabs"&gt;</p><p>    &lt;div class="tab" id="allEntriesTab"&gt;page1&lt;/div&gt;</p><p>    &lt;div class="tab" id="createNewTab"&gt;page2&lt;/div&gt;</p><p>   &lt;/div&gt;</p><p>   &lt;div style="clear: both"&gt;&lt;/div&gt;</p><p>   &lt;div id="main"&gt;</p><p>    This is page <a href="/ticket/1">#1</a></p><p>    click on a tab and mouseover both of the back and forth quick, should throw an error</p><p>   &lt;/div&gt;</p><p>  &lt;/div&gt;</p><p>  &lt;script type="text/javascript"&gt;&lt;!--</p><p>   $(document).ready(function() {</p><p>      $("#allEntriesTab").mouseover(function() {</p><p>            $("#allEntriesTab").css("background-color", "#7dbeee").css("cursor", "pointer");</p><p>      });</p><p>      $("#allEntriesTab").mouseout(function() {</p><p>         $("#allEntriesTab").css("background-color", "#ff9900").css("cursor", "default");</p><p>      });</p><p>      $("#createNewTab").mouseover(function() {</p><p>         $("#createNewTab").css("background-color", "#7dbeee").css("cursor", "pointer");</p><p>      });</p><p>      $("#createNewTab").mouseout(function() {</p><p>         $("#createNewTab").css("background-color", "#ff9900").css("cursor", "default");</p><p>      });</p><p>      $("#allEntriesTab").click(function() {</p><p>         location.href = "jquery5.html";</p><p>      });</p><p>      $("#createNewTab").click(function() {</p><p>         location.href = "jquery6.html";</p><p>      });</p><p>   });</p><p>   // --&gt;</p><p>  &lt;/script&gt;</p><p> &lt;/body&gt;</p><p>&lt;/html&gt;</p><p>Here's the email thread:</p><p><a href="http://groups.google.com/group/jquery-en/browse_thread/thread/8570c3a4347c6592/4418e9c7360e245f" class="ext-link"><span class="icon"></span>http://groups.google.com/group/jquery-en/browse_thread/thread/8570c3a4347c6592/4418e9c7360e245f</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 09, 2007 10:54PM UTC by <span class="author">mike503</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>sorry, here it is in a proper code block:</p><pre class="wiki">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /&gt;
  &lt;meta content="Wed, 26 Feb 1997 08:21:57 GMT" http-equiv="expires" /&gt;
  &lt;meta content="no-cache" http-equiv="Pragma" /&gt;
  &lt;script src="jquery.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;style type="text/css"&gt;
  .tab {
   float: left;
   padding:3px;
   padding-right: 30px;
   border-right:1px solid #fff;
   background-color: #ff9900;
   min-width: 110px;
  }
  #allEntries, #createNew, #content {
   border: solid 1px #7dbeee;
   padding: 5px;
   width: 975px;
  }
  &lt;/style&gt;
  &lt;title&gt;Test&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;div id="bodyContainerWide"&gt;
   &lt;h2&gt;Test&lt;/h2&gt;
   &lt;div id="tabs"&gt;
    &lt;div class="tab" id="allEntriesTab"&gt;page1&lt;/div&gt;
    &lt;div class="tab" id="createNewTab"&gt;page2&lt;/div&gt;
   &lt;/div&gt;
   &lt;div style="clear: both"&gt;&lt;/div&gt;
   &lt;div id="main"&gt;
    This is page #1
    click on a tab and mouseover both of the back and forth quick, should throw an error
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;script type="text/javascript"&gt;&lt;!--
   $(document).ready(function() {
      $("#allEntriesTab").mouseover(function() {
            $("#allEntriesTab").css("background-color", "#7dbeee").css("cursor", "pointer");
      });
      $("#allEntriesTab").mouseout(function() {
         $("#allEntriesTab").css("background-color", "#ff9900").css("cursor", "default");
      });
      $("#createNewTab").mouseover(function() {
         $("#createNewTab").css("background-color", "#7dbeee").css("cursor", "pointer");
      });
      $("#createNewTab").mouseout(function() {
         $("#createNewTab").css("background-color", "#ff9900").css("cursor", "default");
      });
      $("#allEntriesTab").click(function() {
         location.href = "jquery5.html";
      });
      $("#createNewTab").click(function() {
         location.href = "jquery6.html";
      });
   });
   // --&gt;
  &lt;/script&gt;
 &lt;/body&gt;
&lt;/html&gt;
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 11, 2007 09:39AM UTC by <span class="author">mike503</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>perhaps this concept could help:</p><p><a href="http://remysharp.com/2007/10/01/catch-click-events-before-the-dom-is-loaded" class="ext-link"><span class="icon"></span>http://remysharp.com/2007/10/01/catch-click-events-before-the-dom-is-loaded</a></p><p>adding some sort of check inside of the binding code in jquery's core to ensure no errors are thrown or something, for objects that get bound with events but perhaps the actual callback function can't access $ or jquery stuff quite yet...?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 11, 2007 09:06PM UTC by <span class="author">davidserduke</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Interesting.  This appears to me to be a <a href="/wiki/FireFox">FireFox</a> only reload problem.  I can't get it to happen the first time it loads after I restart the browser but can get it to happen every time on reload.  I put a js script that takes 2 seconds to load (using php) before the jquery script load to make it easier to reproduce.</p><p>Another interesting test was I put an alert here: </p><pre class="wiki">
alert("set ready function now")
$(document).ready(function() {
  /* ... */
</pre><p>And when the problem happens that alert isn't called.  This suggests to me that the event handlers were set from the previous load and were not cleared by the reload.</p><p>Notice, that even in <a href="/wiki/FireFox">FireFox</a> with <a href="/wiki/FireBug">FireBug</a> if you change out the event handlers and instead have:</p><pre class="wiki">
  $("#allEntriesTab").mouseover(function() {
    console.log("do handler");
  });
</pre><p>Then you still get the error but 'console' is undefined.  So this isn't just '$' or 'jQuery' problem.  I have to admit, I don't understand why all the event code is working like fix() such.  And of course it is difficult to test since console is undefined.</p><p>One last clue is if you add:</p><pre class="wiki">
  window.onunload = function () {
    $("*").unbind();
  };
</pre><p>Then the problem goes away.  I'm not sure if that's the best fix or not.  With the svn version IE is already doing that to correct IE handler memory leaks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 14, 2007 04:31AM UTC by <span class="author">brandon</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">core</span> → <span class="change-field-new">event</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is pretty much outside the scope of jQuery. You should bind events that have the potential to be triggered before the page is loaded within $(window).bind('load', fn). This will insure that the page is ready to accept your events ... otherwise the browser just isn't ready for you to interact with the page.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 14, 2007 05:21AM UTC by <span class="author">mike503</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>i'm sorry but i don't see how this is outside of jquery's scope.</p><p>i am using jquery to bind to the events. why can't there be some sort of check to see if the page is ready for interaction prior to binding, or prior to attempting to trigger the action that is already bound?</p><p>seems to me something that could easily be put inside of jquery. otherwise i am writing code to work around a limitation... i believe i've already tried $(window).load(function() { foo }); with the same failure as well.</p><p>jquery already works to adjust cross-browser issues and wrap common javascript incompatibilities, david's example above shows that this is an overall issue with binding events inside of jquery. what about mouseover/mouseout/other events based on some sort of move that could pre-page load become bound to window.load instead of document.ready or whatever the existing event is? that sounds like a library-wide fix that makes sense...</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 14, 2007 03:10PM UTC by <span class="author">brandon</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Try using the built-in browser methods to attach/bind the events (no jQuery). It will result in the same error.</p><p>However I was wrong that I thought the page wasn't ready to interact with your events. I did some more investigating and <strong>David is correct</strong> that it appears the events are being retained on page unload and that is causing the issues.</p><p>In Rev [3822] I've opened up the removal of events on window.unload to all browsers and removed window from the list of elements to unbind events from to prevent the premature remove of an existing unload event before it gets fired.</p><p>This fixes the issue in my testing. Thanks for re-opening ... I was a little quick to close this one. :)</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
