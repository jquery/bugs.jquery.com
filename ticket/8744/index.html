<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8744 (.ajax() jsonp requests are not handled correctly when hitting timeout) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8743/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8745/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8744</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(cantfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened April 01, 2011 04:46PM UTC</p>
      
        <p>Closed January 26, 2013 09:35PM UTC</p>
      
      
        <p>Last modified April 01, 2013 03:51AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.ajax() jsonp requests are not handled correctly when hitting timeout</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        Dynalon
      </td>
      <th>Owned by:</th>
      <td>jaubourg</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        high
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.5.2</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>jsonp timeout</td>
      
        <th>Cc:</th>
      
      <td>jaubourg</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The $.ajax() call does not handle cross-domain JSONP requests correctly if the request fails because of a timeout.</p><p>As soon as the timeout was reached, the corresponding callbacks error/complete/success are fired correctly. However, the xhr is not canceled and after response (even if its too late now) jQuery jumps into the callback handler of the jsonp, even so the function does not exists (anymore). You will hit an error like "jQuery152008986116735648775_1301675055297 is not a function" in your error console.</p><p>(quite) minimal testcase which will always timeout:</p><pre class="wiki">
function doTest() {
    $.ajax({
        url: 'http://jsfiddle.net/echo/jsonp/',
        timeout: 5,
        dataType: "jsonp",
        data: { echo: "Hello World!" },
        error: function(jqxhr, textStatus) {
            console.log("failed with error: " + textStatus);
        },
        success: function(data, jqxhr, textStatus) {
            alert(data.echo);   
        }
    });
}
$("document").ready(doTest);

// attention: you cannot run that  testcase on jsFiddle because
// it will then not be a cross-domain request!
</pre><p>If you set the timeout in the code above to a reasonable timeframe, i.e. 5000, the cross-domain request will finish properly.</p><p>Expected behaviour: jQuery should correctly cancel the XHR when hitting the timeout.</p><p>Tested Browser: Firefox 4 and Opera 11 are both affected, Safari 5 however seems not to be (all tested on Mac).</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (38)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 02, 2011 05:17PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ jaubourg</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ jsonp timeout</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Unfortunately, and jaubourg can correct me on this, but I don't think it can be cancelled since jsonp is not xhr.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 02, 2011 08:02PM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've digged into this a little more and yes, it seems the problem is not easily solveable. The JSONP request is done via injection of a &lt;script&gt; tag into the DOM and I don't think (?) there is a way to cancel the request once its triggered. The problem is, the callback function is removed from the window context by jquery right after hitting the timeout. If the request does finish later, the jsonp response is run by the browser as a standalone-script and thus first hits an undefined function, causing the "unknown function" exception.</p><p>However, it turns out that this bug is a really minor one. As the exception is thrown in the standalone script of the jsonp response, it should not affect any other scripts running, causing no damage at all except for the error messge in the error console.</p><p>I've come up with a simple hack in jquery so that the callback function is not cleaned up and remains within the window object. This resolves the problem but is surely no feasible solution for upstream since the window object would be cluttered with (afterwards useless) functions over time when doing lots of jsonp requests.</p><p>To have this completeley fixed a better way for callback handling would be needed, but considering that the bug itself doesn't raise serious issues I think its not worth the effort.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 02, 2011 11:03PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">I find this behaviour very strange. I&#39;m not on my dev box right now but afaik, jqXHR.abort (which is used by timeout) will remove the script tag from the node... so is it that FF4 and Opera 11 don&#39;t cancel script loading in that case or is something wrong in the script tag removal code?&#92;
&#92;
I&#39;ll look into this on my dev box once I&#39;m back on it.</span> → <span class="change-field-new">1301785434593249</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ jaubourg</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>I find this behaviour very strange. I'm not on my dev box right now but afaik, jqXHR.abort (which is used by timeout) will remove the script tag from the document... so is it that FF4 and Opera 11 don't cancel script loading in that case or is something wrong in the script tag removal code?</p><p>I'll look into this on my dev box once I'm back on it.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 03:41PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixes <a href="/ticket/8744">#8744</a>. Makes sure script transport abort method actually removes the script tag even if readyState exists. </p><p> Changeset: 2ed81b44be958b5f2b5569ab15f22bde262b4eb6</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 03:42PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Dynalon, can you confirm this fixes your issue?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 03:51PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.6</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 04:15PM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yes, I confirm with the recent git version the problem is gone, bug is fixed. Thanks!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 04:26PM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Stop, that one was to quick: The Bugfix in Git works for Opera 11 (Mac & Linux tested), but is still present in Firefox 3.6.13 (Linux) and Firefox 4 (Mac). So the Fix does not seem to work on Firefox at all.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 07:05PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think jaubourg had the right idea about firefox script loading.  Once the script tag is injected, I believe it loads the script regardless of whether the tag gets removed before completion.  Another thought I had was that I think async is set to true by default for injected script tags in Firefox 4.  I'm not sure if that could have an impact on removals.  Again, I defer to jaubourg on these issues.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2011 11:36PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Dynalon: could you set a test case on jsFiddle (calling the twitter public api or whatnot). I'd like to see this with my own eyes because, if that's the case and what timmywil says is right then it's clearly a bug in Firefox. I highly doubt it though, so I'll need a test case clearly showing the behaviour to re-open this (are you sure you didn't have some caching issues when you tested in FF?).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 05, 2011 12:06AM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Yes, actually it seems if you enforce dataType:jsonp as ajax option, the bug appears not matter if cross-domain or not. So I now have set up a testcase on jsFiddle:&#92;
&#92;
http://jsfiddle.net/XtVWT/&#92;
&#92;
Please note the HTML Commentin jsFiddle, it seems there is a problem with git-edge on jsFiddle / code.jquery.com/jquery-git.js&#92;
&#92;
As already said, with you fix in jquery-git the Bug does not occur in Opera, but is still present in FF when testing with this fiddle.</span> → <span class="change-field-new">1301962046487691</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Yes, actually it seems if you enforce dataType:jsonp as ajax option, the bug appears no matter if cross-domain or not. So I now have set up a testcase on jsFiddle:</p><p><a href="http://jsfiddle.net/XtVWT/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/XtVWT/</a></p><p>Please note the HTML Commentin jsFiddle, it seems there is a problem with git-edge on jsFiddle / code.jquery.com/jquery-git.js</p><p>As already said, with you fix in jquery-git the Bug does not occur in Opera, but is still present in FF when testing with this fiddle.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 05, 2011 04:25AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">jsonp timeout</span> → <span class="change-field-new">jsonp timeout needsdocs</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, so I checked this under FF and it seems timmy is right: once the script tag has been appended, there seems to be no way to cancel loading. This is quite daunting seeing as it means there is no mean to abort cross-domain script requests in FF. I tried with and without async to no avail :(</p><p>This is clearly a bug in the browser. We need to document the issue.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 23, 2011 06:10PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2011 03:30PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">1.6</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2011 03:32PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@jaubourg: as this ticket has been open for two months, can you re-confirm whether it's been fixed or if any fixes are currently being worked on for it? thanks!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2011 04:10PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It's a FF bug. The script tag is removed, yet the script is still loaded and executed... didn't check if this was fixed in FF5.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 29, 2011 07:20PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 30, 2011 03:58PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/9687">#9687</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 08, 2011 03:37PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">jsonp timeout needsdocs</span> → <span class="change-field-new">jsonp timeout neededdocs</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Docs updated: <a href="http://api.jquery.com/jQuery.ajax/" class="ext-link"><span class="icon"></span>http://api.jquery.com/jQuery.ajax/</a></p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 11, 2011 04:46PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.next</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 15, 2011 05:25PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/9782">#9782</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 18, 2011 01:48PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/9853">#9853</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 12:46AM UTC by <span class="author">blair</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>When i load this jsfiddle code: <a href="http://jsfiddle.net/XtVWT/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/XtVWT/</a></p><p>I always get an error in IE9 stating "Object expected".  Clicking debug error points me to this line:</p><p>jQuery1604361509936638372_1322095521345({"_": "1322095521358", "echo": "Hello World!"});</p><p>This is a huge issue for us and hope it can get fixed soon.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 05:32AM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@blair: the jsFiddle you posted uses an old version of jquery, because at the time i reported the bug, jsFiddle has had issues with using jquery-edge, which is was likely fixed weeks ago.</p><p>I set up a new fiddle here: <a href="http://jsfiddle.net/HEsL2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/HEsL2/</a> which you can use to test against jquery-edge. Can you confirm IE9 is affected, and if so, whether or not you are getting the "failed with error: timeout" message?</p><p>If you get the "right" error message  that means the error() event is correctly triggered when hitting the timeout. If thats the case, the bug should not be a huge issue as the code will work as expected - the only drawback is the somewhat confusing error message that is displayed on the error console.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 06:00AM UTC by <span class="author">blair</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@Dynalon</p><p>With your new example I still get the "Object Expected" error in IE9:</p><p>jQuery1725116137489204307943349415308069850127750664_1322114277554({"_": "1322114277629", "echo": "Hello World!"});</p><p>Also note that IE9 does not print its errors to the console, the error comes in the form of a modal alert dialog.  This is a critical error that should be fixed asap as users with error messaging enabled in IE9 will always see this issue if the timeout hits, providing a less than ideal user experience.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 07:45AM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>so you say IE9 will fail completely if the timeout hits? I agree, in this case this is a major issue. However, the whole thing isn't really jquery's fault, but specific to the browser implementations. To really fix the bug, one must nag the IE & FF developers to fix this in their code.</p><p>I don't think there is a *good* way to work around this in jquery for those browsers. The only workaround I came up with, is to prevent jquery from deleting the jsonp callback function when the timeout is encountered. Instead, upon timeout hit, the callback function is replaced by an empty dummy function which does nothing. So if - at a later time- the ajax request completes (even if the timeout was hit already) the browser actually finds the function.</p><p>This is UGLY AS HELL,  as references to the callback functions are stored PERMANENTLY in the window object, thus cluttering the heap more and more everytime you do a jsonp request that exceeds its timeout.</p><p>If you can live with that and only do a limited amount of requests on a page, I've uploaded a patch that implements this workaround, grab it here: <a href="http://www.stud.uni-karlsruhe.de/~urblr/jquery-ugly/workaround-bug8744.diff" class="ext-link"><span class="icon"></span>http://www.stud.uni-karlsruhe.de/~urblr/jquery-ugly/workaround-bug8744.diff</a></p><p>To test jquery with applied patch see: <a href="http://jsfiddle.net/D5YUZ/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/D5YUZ/</a></p><p>At least it fixes the issues in FF for me (can't test in IE since I don't have a windows box around).</p><p>Once again, this is not a good solution and the patch is not meant to be put into upstream jquery, so you've been warned!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 07:54AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Dynalon thanks for the reply, to clarify, the error callback is called into, but in addition, there is the "Object expected" error alert.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 07:58AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Dynalon, your patch also fixes IE9 from throwing the "Object expected" error. It also correctly executes the ajax error callback.</p><p>I agree that cluttering the global namespace with callback functions is not a good solution, wondering if there is a better way.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:29">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 09:05AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:29">comment:29</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yeah, this is a nasty nasty bug but Dynalon is spot on: the right fix is browser-side :(</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:30">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 09:32AM UTC by <span class="author">Dynalon</span></span>
        <a class="ticket-change-link" href="#comment:30">comment:30</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Turns out the bug is known since 2007 in FF but due to lack of reporter corresponding it never got fixed: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=394908" class="ext-link"><span class="icon"></span>https://bugzilla.mozilla.org/show_bug.cgi?id=394908</a></p><p>Also, the Dojokit is aware of this bug, see: <a href="http://archive.dojotoolkit.org/nightly/dojotoolkit/dojo/tests/io/scriptTimeout.html" class="ext-link"><span class="icon"></span>http://archive.dojotoolkit.org/nightly/dojotoolkit/dojo/tests/io/scriptTimeout.html</a></p><p>I've resurrected the bugreport in mozillas bugzilla and hopefully it can be worked out in FF.</p><p>Since I have no access to a windows machine to verify IE8/9 behaviour, could someone with windows report that bug to Microsoft and have them work it out?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:31">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 09:51AM UTC by <span class="author">BennyTheSnitch</span></span>
        <a class="ticket-change-link" href="#comment:31">comment:31</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The following work-around was suggested a few months back in <a href="http://bugs.jquery.com/ticket/9782#comment:2" class="ext-link"><span class="icon"></span>a different post</a>:</p><pre class="wiki">
window.jQuery16207753935731721285_1310374972748 = function() {

    delete window.jQuery16207753935731721285_1310374972748;

}
</pre><p>Although the global namespace would still be littered with redundant callbacks at least the ones that DO eventually return would be removed.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:32">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 10:50AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:32">comment:32</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:31 <a href="/wiki/BennyTheSnitch">BennyTheSnitch</a>]:</p><blockquote> The following work-around was suggested a few months back in <a href="http://bugs.jquery.com/ticket/9782#comment:2" class="ext-link"><span class="icon"></span>a different post</a>:  <pre class="wiki">
&gt; window.jQuery16207753935731721285_1310374972748 = function() {
&gt; 
&gt;     delete window.jQuery16207753935731721285_1310374972748;
&gt; 
&gt; }
&gt; </pre>  Although the global namespace would still be littered with redundant callbacks at least the ones that DO eventually return would be removed. </blockquote><p>On browsers that do handle removing a script tag properly or, in all browsers when you have a server error or the jsonp response is illformed and never calls the function, these would stay in the global namespace.</p><p>So it's still not an acceptable solution.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:33">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2011 01:30AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:33">comment:33</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi, what is the best workaround for this issue?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:34">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2012 11:02AM UTC by <span class="author">e.marin.izquierdo@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:34">comment:34</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>My solution:</p><pre class="wiki">
 // JSON Request
   var auxTime = new Date();
   var jQueryCallbackRandom = auxTime.getTime();
		
   var callParameters = {
      url: myUrl,
      dataType: "jsonp",			
      jsonp: "myServerParamCallback",
      jsonpCallback: "jQueryRandom_" + jQueryCallbackRandom,
      crossDomain : true,
      success: f_success,
      timeout: myCriticTimeOut,
      error: function(jqXHR, textStatus){
         console.log("failed with error: " + textStatus);
         window["jQueryRandom_" + jQueryCallbackRandom] = function( {window["jQueryRandom_" + jQueryCallbackRandom] = null;};
      },
      data: params			
   }
   
   $.ajax(callParameters);
	
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:35">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 26, 2012 05:24PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:35">comment:35</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've found this to still be an issue on at least IE9 and Windows Chrome. Replies <a href="/ticket/26">#26</a>, <a href="/ticket/32">#32</a>, and <a href="/ticket/34">#34</a> successfully address it, but all will leave empty functions... Because I don't want to amend jQuery as in <a href="/ticket/26">#26</a>, I modified the answers in <a href="/ticket/32">#32</a> and <a href="/ticket/34">#34</a>, see the following jsfiddle. Also, this doesn't require pre-defined jsonpCallback as in <a href="/ticket/34">#34</a>. Note this still leaves empty functions in the namespace...</p><p><a href="http://jsfiddle.net/2qnrU/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/2qnrU/</a></p><p>Note that there's probably a there a better way to grab the pre-defined AJAX callback? I just found the callback as a property of the object, so I pulled the name with a for-in loop.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:36">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 26, 2012 05:26PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:36">comment:36</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry I didn't realize using a # sign triggered links to tickets. I was referring to comment numbers.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:37">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 26, 2013 09:35PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:37">comment:37</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">jsonp timeout neededdocs</span> → <span class="change-field-new">jsonp timeout</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ cantfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It's pretty clear we can't make this work cross-browser, it will have to be solved by the browser makers.  some workarounds are listed above. The related Firefox ticket is here:</p><p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=707154" class="ext-link"><span class="icon"></span>https://bugzilla.mozilla.org/show_bug.cgi?id=707154</a></p><p>Docs ticket is here:</p><p><a href="https://github.com/jquery/api.jquery.com/issues/235" class="ext-link"><span class="icon"></span>https://github.com/jquery/api.jquery.com/issues/235</a></p><p>Please don't add more comments to the ticket unless they contribute **significantly** to the discussion.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:38">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 01, 2013 03:51AM UTC by <span class="author">markelog</span></span>
        <a class="ticket-change-link" href="#comment:38">comment:38</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/13693">#13693</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
