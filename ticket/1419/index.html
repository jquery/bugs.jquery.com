<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1419 (Can&amp;#39;t modify XML/Iframe documents in IE) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1418/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1420/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#1419</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened July 23, 2007 04:23PM UTC</p>
      
        <p>Closed December 05, 2007 05:05AM UTC</p>
      
      
        <p>Last modified March 15, 2012 04:25PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Can&#39;t modify XML/Iframe documents in IE</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        john
      </td>
      <th>Owned by:</th>
      <td>john</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.2.2">1.2.2</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.1.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Two separate reports of this occurring:</p><pre class="wiki">
$(document).ready(function(){
       var fred="&lt;hi&gt;&lt;/hi&gt;";
       console.log(fred);
       // Push through XML processor
       xml = loadXML(fred);

       var b = $("hi:first", xml);
       var node = $("&lt;div class='group' &gt;xxx&lt;/div&gt;");
       node.appendTo(b);

});
</pre><p></p><hr><p></p><p>I'm having a similar problem in IE.  However, my code looks like this</p><p>(using your syntax for creating the XML document):</p><pre class="wiki">
var hiNode = $("hi", xml);
hiNode.text("foo");
</pre><p>When I run this in Firefox, the hi node in the XML document gets a</p><p>text node with a value of "foo" appended to it.  However, I get a type</p><p>mismatch error in IE.</p><p>I can use the .text() function to retrieve text nodes from XML</p><p>documents - can I also use it to set text nodes?</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2007 04:24PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">Two separate reports of this occurring:&#92;
&#92;
{{{&#92;
(document).ready(function(){&#92;
       var fred=&quot;&lt;hi&gt;&lt;/hi&gt;&quot;;&#92;
       console.log(fred);&#92;
       // Push through XML processor&#92;
       xml = loadXML(fred);&#92;
&#92;
       var b = $(&quot;hi:first&quot;, xml);&#92;
       var node = $(&quot;&lt;div class=&#39;group&#39; &gt;xxx&lt;/div&gt;&quot;);&#92;
       node.appendTo(b);&#92;
&#92;
});&#92;
}}}&#92;
&#92;
----&#92;
&#92;
I&#39;m having a similar problem in IE.  However, my code looks like this&#92;
(using your syntax for creating the XML document):&#92;
&#92;
{{{&#92;
var hiNode = $(&quot;hi&quot;, xml);&#92;
hiNode.text(&quot;foo&quot;);&#92;
}}}&#92;
&#92;
When I run this in Firefox, the hi node in the XML document gets a&#92;
text node with a value of &quot;foo&quot; appended to it.  However, I get a type&#92;
mismatch error in IE.&#92;
&#92;
I can use the .text() function to retrieve text nodes from XML&#92;
documents - can I also use it to set text nodes?</span> → <span class="change-field-new">Two separate reports of this occurring:&#92;
&#92;
{{{&#92;
$(document).ready(function(){&#92;
       var fred=&quot;&lt;hi&gt;&lt;/hi&gt;&quot;;&#92;
       console.log(fred);&#92;
       // Push through XML processor&#92;
       xml = loadXML(fred);&#92;
&#92;
       var b = $(&quot;hi:first&quot;, xml);&#92;
       var node = $(&quot;&lt;div class=&#39;group&#39; &gt;xxx&lt;/div&gt;&quot;);&#92;
       node.appendTo(b);&#92;
&#92;
});&#92;
}}}&#92;
&#92;
----&#92;
&#92;
I&#39;m having a similar problem in IE.  However, my code looks like this&#92;
(using your syntax for creating the XML document):&#92;
&#92;
{{{&#92;
var hiNode = $(&quot;hi&quot;, xml);&#92;
hiNode.text(&quot;foo&quot;);&#92;
}}}&#92;
&#92;
When I run this in Firefox, the hi node in the XML document gets a&#92;
text node with a value of &quot;foo&quot; appended to it.  However, I get a type&#92;
mismatch error in IE.&#92;
&#92;
I can use the .text() function to retrieve text nodes from XML&#92;
documents - can I also use it to set text nodes?</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2007 06:52PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">Can&#39;t modify XML documents in IE</span> → <span class="change-field-new">Can&#39;t modify XML/Iframe documents in IE</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Some relevant bugs:</p><p><a href="/ticket/968">#968</a>: $('&lt;tag&gt;') needs optional document parameter to ease cross-frame DOM wrangling</p><p><a href="/ticket/1264">#1264</a>: Cross-frame DOM manipulation</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 27, 2007 04:42PM UTC by <span class="author">cdivilly</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I worked around this problem by patching jquery-1.2.1.js as follows:</p><pre class="wiki">
--- jquery-1.2.1.js	
+++ jquery-1.2.1.js	
@@ -151,8 +151,10 @@
 	},
 
 	text: function(e) {
-		if ( typeof e != "object" && e != null )
-			return this.empty().append( document.createTextNode( e ) );
+		if ( typeof e != "object" && e != null ) {
+		    d = this[0].ownerDocument || document;
+			return this.empty().append( d.createTextNode( e ) );
+		}
 
 		var t = "";
 		jQuery.each( e || this, function(){

</pre><p>The existing code uses the page's DOM to create the text node and then attempts to append the text node to the XML document's DOM. IE does not allow adding a node from one DOM into another. The above patch checks if the current element has an ownerDocument and if so uses that to create the text node instead. Other places where a similar fix might be required, lines: 398 and 2261</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2007 05:05AM UTC by <span class="author">davidserduke</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.1.4</span> → <span class="change-field-new">1.2.2</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixed in [4031] and [4029].  Thanks cdivilly for the patch which I only optimized slightly.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 10, 2011 03:11PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The following code sample may be helpful to others who reach this page who are having the problem with the fact that IE does not allow adding a node from one DOM into another.</p><p><em>create a pop up window</em></p><p><a href="/wiki/PopUp">PopUp</a> = window.open('', 'MyPopUp', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=1,resizable=1,width=800,height=600,left = 340,top = 112');</p><p>create a div element within the document of the pop up window</p><p>var item_div = <a href="/wiki/PopUp">PopUp</a>.document.createElement('div');</p><p><em>make a copy of it as a Jquery object on the document of the main page </em></p><p>(Note: the pop up does not have the Jquery js file referenced). </p><p><em>Use jquery to manipulate the item.</em></p><p>var jq_item_div = $(item_div).addClass('item_div').html("Hello World");</p><p>return the jquery element into the pop up element</p><p>item_div = jq_item_div;</p><p>//append the item to the pop up document body</p><p>$(<a href="/wiki/PopUp">PopUp</a>.document.body).append(item_div);</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 10, 2011 03:13PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The following code sample may be helpful to others who reach this page who are having the problem with the fact that IE does not allow adding a node from one DOM into another. </p><pre class="wiki">

//create a pop up window 
PopUp = window.open(, 'MyPopUp', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=1,resizable=1,width=800,height=600,left = 340,top = 112'); 

//create a div element within the document of the pop up window 
var item_div = PopUp.document.createElement('div');
 
//make a copy of it as a Jquery object on the document of the main page 
//(Note: the pop up does not have the Jquery js file referenced). 
//Use JQuery to manipulate the item. 
var jq_item_div = $(item_div).addClass('item_div').html("Hello World");

//return the jquery element into the pop up element 
item_div = jq_item_div; 

//append the item to the pop up document body 
$(PopUp.document.body).append(item_div);
</pre>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
