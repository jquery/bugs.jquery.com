<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#1228 (IE pseudo memory leak) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/1227/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/1229/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#1228</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened May 21, 2007 07:48PM UTC</p>
      
        <p>Closed May 21, 2007 09:11PM UTC</p>
      
      
        <p>Last modified June 19, 2007 10:16AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">IE pseudo memory leak</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jackysee
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.1.3">1.1.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>event</td>
      
        <th>Version:</th>
      
      <td>1.1.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I'm making a page which would make ajax called periodically. The page itself would not be fresh. The callback will remove all table rows and refresh them to new one to the new data.</p><p>Regardless of the ajax part, I found that there will be memory leak in IE when using jQuery to clear table rows and insert again. MS called it 'pseudo leak' as it would be cleared after page refresh. (some detail: <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/IETechCol/dnwebgen/ie_leak_patterns.asp" class="ext-link"><span class="icon"></span>http://msdn.microsoft.com/library/default.asp?url=/library/en-us/IETechCol/dnwebgen/ie_leak_patterns.asp</a>  ) But as the page will stay, such leak would gradually increase the browser's memory.</p><p>Following is an simple example demonstrating it. I use the tools IESieve (<a href="http://home.wanadoo.nl/jsrosman/)" class="ext-link"><span class="icon"></span>http://home.wanadoo.nl/jsrosman/)</a> to detect IE's memory and dom usage. You can repeat the test by:</p><p>1. open IESieve and load the test page</p><p>2. click on 'refreshes all rows', you should notice increase in dom object in use.</p><p>3. click on 'remove all rows', the dom usage is not decreased </p><p>OR</p><p>1. click on 'start interval', you will see the memory and dom usage both increase</p><pre class="wiki">
&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Test Mem Leak in IE6&lt;/title&gt;
		&lt;script type="text/javascript" src="jquery-1.1.2.js"&gt;&lt;/script&gt;
		&lt;script type="text/javascript"&gt;
			var datas = [
				[1,2,3,4,5],
				[1,2,3,4,5],
				[1,2,3,4,5],
				[1,2,3,4,5],
				[1,2,3,4,5],
				[1,2,3,4,5]
			];
			
			
			$(document).ready(function(){
				$("#remove").click(removeAllRows);
				$("#refresh").click(refreshRows);
				$("#interval").click(startRefresh);
				
			});
			
			function startRefresh(){
				var interval = setInterval(refreshRows,5*1000);
			}
			
			function refreshRows(){
				removeAllRows();
				for(var i=0; i&lt;datas.length; i++){
					var tr = document.createElement("tr");
					for(var j=0; j&lt;datas[i].length; j++){
						var td = document.createElement("td");
						var d = datas[i][j]*Math.floor(Math.random()*100+1);
						td.innerHTML = 
							"&lt;a href='#' onclick='return false;'&gt;"+d+"&lt;/a&gt;" +
							"&lt;input type='button' onclick='buttonClick(this)' value='"+datas[i][j]+"'/&gt;";
						$(tr).append(td);
						td = null;
						d = null;
					}
					var tb = $("#test&gt;tbody").append(tr);
				}
			}
			
			function removeAllRows(){
				var tb = $("#test&gt;tbody")
					.find("*").unbind().end()
					.html("");
			}
			
			function buttonClick(obj){
				obj.value = 'btn';
			}
			
			
		&lt;/script&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;table id="test" border="1"&gt;
			&lt;thead&gt;
				&lt;tr&gt;
					&lt;th&gt;th1&lt;/th&gt;
					&lt;th&gt;th2&lt;/th&gt;
					&lt;th&gt;th3&lt;/th&gt;
					&lt;th&gt;th4&lt;/th&gt;
					&lt;th&gt;th5&lt;/th&gt;
				&lt;/tr&gt;
			&lt;/thead&gt;
			&lt;tbody&gt;
				
			&lt;/tbody&gt;
		&lt;/table&gt;
		&lt;input type="button" value="remove all rows" id="remove"/&gt;
		&lt;input type="button" value="refresh all rows" id="refresh"/&gt;
		&lt;input type="button" value="start interval" id="interval"/&gt;
	
	&lt;/body&gt;

&lt;/html&gt;
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (1)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 21, 2007 09:11PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/1226">#1226</a>.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
