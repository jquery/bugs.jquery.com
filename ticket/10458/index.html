<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10458 (jQuery.isPlainObject() always returns false when Object.prototype has a properties) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10457/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10459/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#10458</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 09, 2011 06:49AM UTC</p>
      
        <p>Closed October 09, 2011 02:31PM UTC</p>
      
      
        <p>Last modified April 06, 2013 09:50AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery.isPlainObject() always returns false when Object.prototype has a properties</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        vovan-ve@yandex.ru
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.6.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>jQuery.isPlainObject() finally enumerates all propertyes of an object. If the last property is own, then function relies that it is an Object. As the result, it is not allowed to have any properties in prototype. So, if we extend Object.prototype with at least one property, jQuery.isPlainObject() will always return false for new objects, created after.</p><p>jsFiddle: <a href="http://jsfiddle.net/kqe95/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/kqe95/</a></p><pre class="wiki">
alert(jQuery.isPlainObject({})); // true
Object.prototype.foo = function(){};
alert(jQuery.isPlainObject({})); // false
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 09, 2011 02:31PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="http://docs.jquery.com/Won't_Fix" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Won't_Fix</a></p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 07:18PM UTC by <span class="author">laurentiu.macovei@dotnetwise.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is still not fixed!</p><p>Besides the function does a lot of "stuff" and its performance is very low!</p><p>It is extensively used by $.extend when creating deep copies!</p><p>Why not simply comparing either object.__proto__ == Object.prototype or in IE Object.getPrototypeOf(object) == Object.prototype</p><p>if Object.getPrototypeOf is missing as well, the current implementation could be good enough</p><p>Tests are here: <a href="http://jsfiddle.net/LLKET/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/LLKET/1/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2013 11:02PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Right... it's not fixed because I closed it as "won't fix", because jQuery won't fix bugs that are caused by user code that does stupid things like extending Object.prototype</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2013 11:32AM UTC by <span class="author">vovan-ve</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 rwaldron]:</p><blockquote> ... user code that does stupid things like extending Object.prototype</blockquote><p>I still think, that You are not right. Can you give a prooflink to confirm this words?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2013 01:15PM UTC by <span class="author">laurentiu.macovei@dotnetwise.com</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Why my above approach is not a good fix for all modern browsers?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 04, 2013 01:44PM UTC by <span class="author">vovan-ve</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:5 laurentiu.macovei@…]:</p><blockquote> Why my above approach is not a good fix for all modern browsers?</blockquote><p>1. <a href="http://jsfiddle.net/FdSwc/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/FdSwc/</a></p><pre class="wiki">
function Foo() {};
Foo.prototype = Object.prototype;
alert( new Foo().__proto__ === Object.prototype );
</pre><p>2. one_window.Object !== another_window.Object;</p><pre class="wiki">
/* this is window A */
window.FooBar = {};
open('&lt;url to run next code in B&gt;');

/* this is window B opened by window.open() in A */
alert( opener.Object === Object ); // false
alert( opener.FooBar.__proto__ === Object.prototype ); // false
alert( opener.FooBar.__proto__ === opener.Object.prototype ); // true
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 05, 2013 10:21AM UTC by <span class="author">laurentiu.macovei@dotnetwise.com</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That's correct but I think you really don't care about that. It may be useful in 0.001% of cases, whereas you could use the current option.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 05, 2013 03:03PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:4 vovan-ve]:</p><blockquote> Replying to [comment:3 rwaldron]: &gt; ... user code that does stupid things like extending Object.prototype I still think, that You are not right. Can you give a prooflink to confirm this words?</blockquote><p>jQuery's Won't Fix: <a href="http://contribute.jquery.org/wont-fix/" class="ext-link"><span class="icon"></span>http://contribute.jquery.org/wont-fix/</a></p><p>The problem with adding properties to Object.prototype is that all Object's will then inherit those properties, whether they want to or not—and these properties will appear in for-in loops. </p><p>Since ES5, Object.prototype can be safely augmented with Object.definePropert(y|ies) by creating a properties and specifying that its [[enumerable]] field is false.</p><ul><li>"Object.prototype is verboten" <a href="http://erik.eae.net/archives/2005/06/06/22.13.54/" class="ext-link"><span class="icon"></span>http://erik.eae.net/archives/2005/06/06/22.13.54/</a></li><li>"Deep-extending objects in <a href="/wiki/JavaScript">JavaScript</a>" <a href="http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/" class="ext-link"><span class="icon"></span>http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/</a></li><li>"Extending <a href="/wiki/JavaScript">JavaScript</a> Natives" <a href="http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/" class="ext-link"><span class="icon"></span>http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/</a></li><li>"Extending built-in native objects. Evil or not?" <a href="http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/" class="ext-link"><span class="icon"></span>http://perfectionkills.com/extending-built-in-native-objects-evil-or-not/</a></li></ul>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 05, 2013 04:30PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:8 rwaldron]:</p><blockquote> Replying to [comment:4 vovan-ve]:  - "Object.prototype is verboten" <a href="http://erik.eae.net/archives/2005/06/06/22.13.54/" class="ext-link"><span class="icon"></span>http://erik.eae.net/archives/2005/06/06/22.13.54/</a> ...</blockquote><p>Thanks for the links. Now I see I'm not right.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 06, 2013 09:50AM UTC by <span class="author">DotNetWise</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Even so, jQuery will simply fail when Object.prototype will have something added.</p><p>But that can be sorted out with ES5 Object.defineProperty("someProperty", { enumerable: false});</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
