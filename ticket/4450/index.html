<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#4450 (&amp;lt;base&amp;gt; tag causes .append() to fail in  IE) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/4449/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/4451/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#4450</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 30, 2009 12:30PM UTC</p>
      
        <p>Closed November 20, 2010 09:07PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">&lt;base&gt; tag causes .append() to fail in  IE</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        paresh
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.4">1.4</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>manipulation</td>
      
        <th>Version:</th>
      
      <td>1.3.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>IE</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Hi,</p><p>   In asp.net i want the image to  resize to  the browser window size for which iam using the following code which works fine in mozilla but in IE it does'nt append the resize image:</p><pre class="wiki">
&lt;asp:Content ContentPlaceHolderID="head" runat="server"&gt;
      &lt;script type="text/javascript" src="&lt;%=Url.Content("~/Scripts/jquery-1.3.2.js")%&gt;"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="&lt;%=Url.Content("~/Scripts/jquery.cookie.js")%&gt;"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="&lt;%=Url.Content("~/Scripts/jquery.timers.js")%&gt;"&gt;&lt;/script&gt;    
    &lt;script type="text/javascript"&gt;               
        function loadImage()  
        {
            var image = new Image();
            
            //Code added to find height and width of the client window for different browser 
            var myWidth = 0, myHeight = 0;
            if (typeof (window.innerWidth) == 'number') {
                //Non-IE
                myWidth  = window.innerWidth;
                myHeight = window.innerHeight;
            } else if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
                //IE 6+ in 'standards compliant mode'
                myWidth  = document.documentElement.clientWidth;
                myHeight = document.documentElement.clientHeight;
            } else if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
                //IE 4 compatible
                myWidth  = document.body.clientWidth;
                myHeight = document.body.clientHeight;
            }
           
           image.width  = myWidth  - 10;
           image.height = myHeight - 20;  
                     

            var url = '&lt;%=Url.Action("DisplayMap")%&gt;?t=' + new Date().getTime();

            $(image).load(function()
            {
                $('#map').empty().append(image);
                triggerRefresh();
            }).attr('src', url);
        }

        function triggerRefresh()
        {
            var connectionTypeValue = $.cookie('WebUI.ConnectionValue');
            
            // Default value
            if (connectionTypeValue == null)
            {
                connectionTypeValue = 1;
            }
            
            $('#map').oneTime(parseInt(connectionTypeValue), function()
            {
                loadImage();
            });
        }

        $(document).ready(function() {
            loadImage();           
        });

    &lt;/script&gt;
        
&lt;/asp:Content&gt;
&lt;asp:Content ContentPlaceHolderID="body" runat="server"&gt;
    &lt;div id="map"&gt;
    &lt;/div&gt;
&lt;/asp:Content&gt;
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (4)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2009 10:44PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Can you attach a simple test case that is just plain HTML and Javascript that doesn't require ASP.NET to test?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 03, 2009 12:31PM UTC by <span class="author">maxb</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I have the same problem (not only $.append but also appendChild).</p><p>In my test the problem is caused by tag &lt;base /&gt; </p><p><a href="http://maxb.net/scripts/base/bug-on.html" class="ext-link"><span class="icon"></span>http://maxb.net/scripts/base/bug-on.html</a></p><p><a href="http://maxb.net/scripts/base/bug-off.html" class="ext-link"><span class="icon"></span>http://maxb.net/scripts/base/bug-off.html</a></p><p><a href="http://maxb.net/scripts/base/base.html" class="ext-link"><span class="icon"></span>http://maxb.net/scripts/base/base.html</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 12, 2010 02:19PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ IE</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">manipulation</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>summary:</th>
                  <td>
                    
                      <span class="change-field-old">.append () not working properly in  Internet Explorer</span> → <span class="change-field-new">&lt;base&gt; tag causes .append() to fail in  IE</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>The test case shows this is a bug below jQuery in IE, but there may be a way to work around it.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 20, 2010 09:07PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">Hi,&#92;
&#92;
   In asp.net i want the image to  resize to  the browser window size for which iam using the following code which works fine in mozilla but in IE it does&#39;nt append the resize image:&#92;
&#92;
&lt;asp:Content ContentPlaceHolderID=&quot;head&quot; runat=&quot;server&quot;&gt;&#92;
      &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery-1.3.2.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery.cookie.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery.timers.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;    &#92;
    &lt;script type=&quot;text/javascript&quot;&gt;               &#92;
        function loadImage()  &#92;
        {&#92;
            var image = new Image();&#92;
            &#92;
            //Code added to find height and width of the client window for different browser &#92;
            var myWidth = 0, myHeight = 0;&#92;
            if (typeof (window.innerWidth) == &#39;number&#39;) {&#92;
                //Non-IE&#92;
                myWidth  = window.innerWidth;&#92;
                myHeight = window.innerHeight;&#92;
            } else if (document.documentElement &amp;&amp; (document.documentElement.clientWidth || document.documentElement.clientHeight)) {&#92;
                //IE 6+ in &#39;standards compliant mode&#39;&#92;
                myWidth  = document.documentElement.clientWidth;&#92;
                myHeight = document.documentElement.clientHeight;&#92;
            } else if (document.body &amp;&amp; (document.body.clientWidth || document.body.clientHeight)) {&#92;
                //IE 4 compatible&#92;
                myWidth  = document.body.clientWidth;&#92;
                myHeight = document.body.clientHeight;&#92;
            }&#92;
           &#92;
           image.width  = myWidth  - 10;&#92;
           image.height = myHeight - 20;  &#92;
                     &#92;
&#92;
            var url = &#39;&lt;%=Url.Action(&quot;DisplayMap&quot;)%&gt;?t=&#39; + new Date().getTime();&#92;
&#92;
            $(image).load(function()&#92;
            {&#92;
                $(&#39;#map&#39;).empty().append(image);&#92;
                triggerRefresh();&#92;
            }).attr(&#39;src&#39;, url);&#92;
        }&#92;
&#92;
        function triggerRefresh()&#92;
        {&#92;
            var connectionTypeValue = $.cookie(&#39;WebUI.ConnectionValue&#39;);&#92;
            &#92;
            // Default value&#92;
            if (connectionTypeValue == null)&#92;
            {&#92;
                connectionTypeValue = 1;&#92;
            }&#92;
            &#92;
            $(&#39;#map&#39;).oneTime(parseInt(connectionTypeValue), function()&#92;
            {&#92;
                loadImage();&#92;
            });&#92;
        }&#92;
&#92;
        $(document).ready(function() {&#92;
            loadImage();           &#92;
        });&#92;
&#92;
    &lt;/script&gt;&#92;
        &#92;
&lt;/asp:Content&gt;&#92;
&lt;asp:Content ContentPlaceHolderID=&quot;body&quot; runat=&quot;server&quot;&gt;&#92;
    &lt;div id=&quot;map&quot;&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/asp:Content&gt;&#92;
  </span> → <span class="change-field-new">Hi,&#92;
&#92;
   In asp.net i want the image to  resize to  the browser window size for which iam using the following code which works fine in mozilla but in IE it does&#39;nt append the resize image:&#92;
&#92;
{{{&#92;
&lt;asp:Content ContentPlaceHolderID=&quot;head&quot; runat=&quot;server&quot;&gt;&#92;
      &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery-1.3.2.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery.cookie.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;&#92;
    &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=Url.Content(&quot;~/Scripts/jquery.timers.js&quot;)%&gt;&quot;&gt;&lt;/script&gt;    &#92;
    &lt;script type=&quot;text/javascript&quot;&gt;               &#92;
        function loadImage()  &#92;
        {&#92;
            var image = new Image();&#92;
            &#92;
            //Code added to find height and width of the client window for different browser &#92;
            var myWidth = 0, myHeight = 0;&#92;
            if (typeof (window.innerWidth) == &#39;number&#39;) {&#92;
                //Non-IE&#92;
                myWidth  = window.innerWidth;&#92;
                myHeight = window.innerHeight;&#92;
            } else if (document.documentElement &amp;&amp; (document.documentElement.clientWidth || document.documentElement.clientHeight)) {&#92;
                //IE 6+ in &#39;standards compliant mode&#39;&#92;
                myWidth  = document.documentElement.clientWidth;&#92;
                myHeight = document.documentElement.clientHeight;&#92;
            } else if (document.body &amp;&amp; (document.body.clientWidth || document.body.clientHeight)) {&#92;
                //IE 4 compatible&#92;
                myWidth  = document.body.clientWidth;&#92;
                myHeight = document.body.clientHeight;&#92;
            }&#92;
           &#92;
           image.width  = myWidth  - 10;&#92;
           image.height = myHeight - 20;  &#92;
                     &#92;
&#92;
            var url = &#39;&lt;%=Url.Action(&quot;DisplayMap&quot;)%&gt;?t=&#39; + new Date().getTime();&#92;
&#92;
            $(image).load(function()&#92;
            {&#92;
                $(&#39;#map&#39;).empty().append(image);&#92;
                triggerRefresh();&#92;
            }).attr(&#39;src&#39;, url);&#92;
        }&#92;
&#92;
        function triggerRefresh()&#92;
        {&#92;
            var connectionTypeValue = $.cookie(&#39;WebUI.ConnectionValue&#39;);&#92;
            &#92;
            // Default value&#92;
            if (connectionTypeValue == null)&#92;
            {&#92;
                connectionTypeValue = 1;&#92;
            }&#92;
            &#92;
            $(&#39;#map&#39;).oneTime(parseInt(connectionTypeValue), function()&#92;
            {&#92;
                loadImage();&#92;
            });&#92;
        }&#92;
&#92;
        $(document).ready(function() {&#92;
            loadImage();           &#92;
        });&#92;
&#92;
    &lt;/script&gt;&#92;
        &#92;
&lt;/asp:Content&gt;&#92;
&lt;asp:Content ContentPlaceHolderID=&quot;body&quot; runat=&quot;server&quot;&gt;&#92;
    &lt;div id=&quot;map&quot;&gt;&#92;
    &lt;/div&gt;&#92;
&lt;/asp:Content&gt;&#92;
}}}</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for the report, but this is not a jQuery bug. IE treats the <code>&lt;base&gt;</code> tag like a tag that requires a closing tag, and if you don’t do so, bad things happen. Replacing the base tag with <code>&lt;base href="foo"&gt;&lt;!--[if LT IE 8]&gt;&lt;/base&gt;&lt;![endif]--&gt;</code> fixes the problem.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
