<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#13505 (jquery#add: seems to get items in collection out of order on larger lists) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/13504/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/13506/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#13505</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 24, 2013 12:26AM UTC</p>
      
        <p>Closed February 25, 2013 04:24AM UTC</p>
      
      
        <p>Last modified May 24, 2013 01:43PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jquery#add: seems to get items in collection out of order on larger lists</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        getify
      </td>
      <th>Owned by:</th>
      <td>getify</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        high
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.10/2.0">1.10/2.0</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>selector</td>
      
        <th>Version:</th>
      
      <td>1.9.1</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>mkwst, timmywil</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Test case (in chrome, canary on mac): <a href="http://jsfiddle.net/HHL3m/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/HHL3m/</a></p><p>Notice that the JS list has "Rhonda" as the first item, but the DOM output (in Chrome) is "Clayton", then "Victor", etc (at least for me). Rhonda shows up somewhere like 10 items down the list. And it doesn't appear to be anything about the alphabetical sorting or anything like that.</p><p>Tested on Firefox (aurora, mac) worked fine.</p><p>Tested on Saf6 on mac, also broken, but in a different order ("Keely", "Sloane", etc) than Chrome.</p><p>NOTE: The third example in the "Examples" section of the <code>add()</code> documentation page suggests that you should be able to <code>add()</code> a new element (not yet in a document) to an existing collection, and expect the collection order to be kept in the sensible appending order (not silently re-ordered under the covers).</p><p>I realize there are other ways to accomplish what I'm trying to do here in this simple test, but my more complex code called for this approach more naturally (keeping a simple collection around instead of, say, a dummy container element like a &lt;div&gt; with <code>children()</code> in it).</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (29)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 12:33AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Confirmed. Seems to appear in 1.9.x and up</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 12:41AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ getify</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Did you try jquery-git? gibson042 put in a fix for this, which is caused by Chrome screwing up its document position operators for disconnected elements.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 12:48AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@dmethvin, I tested against jsfiddle's 2.0.x and 1.9.x... Just looked at edge and its fixed. <a href="http://jsfiddle.net/rwaldron/HHL3m/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/HHL3m/1/</a></p><p>...I couldn't find any other tickets filed.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 12:52AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 12:53AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/13331">#13331</a>.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 01:01AM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Haha, I didn't look on the second page because I thought that was too far back. Go me.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 02:06AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Is this supposed to be fixed in 1.9.2-pre (from git)? I just tried that version in my app, and I'm still getting bad ordering behavior in chrome.</p><p>In addition, I just tried this <a href="http://jsfiddle.net/rwaldron/HHL3m/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/HHL3m/1/</a> (which says it's using jquery-edge) in Chrome (canary, mac), and it's broken.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 02:18AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Honestly I'd prefer to put this into the "unsupported behavior" category.</p><p>If you want a jQuery object in that order, push the elements onto an array and  <code>$(array)</code>.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 02:21AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Well, I wish that wasn't the case. But... if you're going to move this into unsupported behavior, please change the docs to remove the example that makes it seem like it is supported behavior. A special note that this is what's happened would be nice, too.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 02:27AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Also, I just tried what you suggested, @dmethvin, here: <a href="http://jsfiddle.net/HHL3m/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/HHL3m/2/</a> Unless I misunderstood what you meant, that throws a JS error. :/</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 03:44AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:10 getify]:</p><blockquote> Also, I just tried what you suggested, @dmethvin, here: <a href="http://jsfiddle.net/HHL3m/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/HHL3m/2/</a> Unless I misunderstood what you meant, that throws a JS error. :/</blockquote><p>Close, but don't wrap the array before sending it to <code>.append</code>: <a href="http://jsfiddle.net/HHL3m/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/HHL3m/3/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 03:59AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>thanks for the clarification.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 04:06AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ mkwst, timmywil</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">selector</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">None</span> → <span class="change-field-new">1.9.2</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:7 getify]:</p><blockquote> Is this supposed to be fixed in 1.9.2-pre (from git)? I just tried that version in my app, and I'm still getting bad ordering behavior in chrome.  In addition, I just tried this <a href="http://jsfiddle.net/rwaldron/HHL3m/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/HHL3m/1/</a> (which says it's using jquery-edge) in Chrome (canary, mac), and it's broken.</blockquote><p>Oh, brother. I'm betting that mkwst's <a href="http://trac.webkit.org/changeset/143239" class="ext-link"><span class="icon"></span>fix</a> has exposed us to some unstable sorting, but just to dot the <code>i</code>s and cross the <code>tt</code>s, can you report both the <a href="/wiki/WebKit">WebKit</a> version of your browser and the results from pointing it at <a href="http://swarm.jquery.org/build/jquery/5e29ff7e59a0c97bae02b7512b40486df0f44022/test/index.html?module=Sizzle" class="ext-link"><span class="icon"></span>http://swarm.jquery.org/build/jquery/5e29ff7e59a0c97bae02b7512b40486df0f44022/test/index.html?module=Sizzle</a>?</p><p>As for support, I really would like to fix this for good. Something like <a href="https://github.com/gibson042/sizzle/blob/83284b9729f0bbe5138f831f7150db495f796413/sizzle.js#L621-L625" class="ext-link"><span class="icon"></span>https://github.com/gibson042/sizzle/blob/83284b9729f0bbe5138f831f7150db495f796413/sizzle.js#L621-L625</a> oughtta do it. Collections containing disconnected elements will incur <code>indexOf</code> calls, basically making the <a href="/wiki/WebKit">WebKit</a> fix universal.</p><p>...And all because we fixed <code>.add</code> for <a href="https://github.com/jquery/jquery/commit/420dcc58423dcfd3848fb62586da184b914cff22" class="ext-link"><span class="icon"></span>mixed connectedness</a>.</p>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 04:14AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Running the test in my Chrome canary mac, 2 tests failed:&#92;
&#92;
http://gyazo.com/7dfffd67b07e120ec9c6fed7530bfdf6&#92;
&#92;
Running it in Saf6, works fine. Also, running the actual test-case of this bug (http://jsfiddle.net/rwaldron/HHL3m/1/) with jquery-edge works in Saf6 but not Chrome.&#92;
&#92;
Here&#39;s my chrome info:&#92;
&#92;
&#92;
Google Chrome	27.0.1421.0 (Official Build 184293) canary&#92;
OS	Mac OS X &#92;
WebKit	537.32 (@143784)&#92;
JavaScript	V8 3.17.2&#92;
Flash	11.6.602.171&#92;
User Agent	Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.32 (KHTML, like Gecko) Chrome/27.0.1421.0 Safari/537.32&#92;
&#92;
</span> → <span class="change-field-new">1361679313186349</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Running the test suite, as requested, in my Chrome canary mac, 2 tests failed:</p><p><a href="http://gyazo.com/7dfffd67b07e120ec9c6fed7530bfdf6" class="ext-link"><span class="icon"></span>http://gyazo.com/7dfffd67b07e120ec9c6fed7530bfdf6</a></p><p>Running it in Saf6, works fine. Also, running the actual test-case of this bug (<a href="http://jsfiddle.net/rwaldron/HHL3m/1/)" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/HHL3m/1/)</a> with jquery-edge works in Saf6 but not Chrome.</p><p>Here's my chrome info:</p><p>Google Chrome	27.0.1421.0 (Official Build 184293) canary</p><p>OS	Mac OS X </p><p><a href="/wiki/WebKit">WebKit</a>	537.32 (@143784)</p><p><a href="/wiki/JavaScript">JavaScript</a>	V8 3.17.2</p><p>Flash	11.6.602.171</p><p>User Agent	Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) <a href="/wiki/AppleWebKit">AppleWebKit</a>/537.32 (KHTML, like Gecko) Chrome/27.0.1421.0 Safari/537.32</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 04:45AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">r143784, huh? That&#39;d do it. At least our unit test is good.</span> → <span class="change-field-new">1361681156719025</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p><a href="http://trac.webkit.org/changeset/143784" class="ext-link"><span class="icon"></span>r143784</a>, huh? That'd do it. At least our unit test is good.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 05:50PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:13 gibson042]:</p><blockquote> As for support, I really would like to fix this for good. Something like <a href="https://github.com/gibson042/sizzle/blob/83284b9729f0bbe5138f831f7150db495f796413/sizzle.js#L621-L625" class="ext-link"><span class="icon"></span>https://github.com/gibson042/sizzle/blob/83284b9729f0bbe5138f831f7150db495f796413/sizzle.js#L621-L625</a> oughtta do it. Collections containing disconnected elements will incur <code>indexOf</code> calls, basically making the <a href="/wiki/WebKit">WebKit</a> fix universal. </blockquote><p>We already landed a version of this. Doesn't seem to have done the job.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 05:52PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Unless...is the difference that you want to remove the support test and open up the fix to all browsers?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 06:26PM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@timmywil exactly. Note that @getify is using Chrome Canary, which has @mkwst's hot-off-the-presses <code>compareDocumentPosition</code> fix. So we're now back to returning <code>0</code> for disconnected nodes, which exposes us to unstable native sort algorithms. Forcing stability with the <code>indexOf</code> checks works, so I'd like to do it <strong>every</strong> time we see a disconnected node, regardless of user agent.</p><p>Any objections?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 07:30PM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>For the record, this is the <a href="http://en.wikipedia.org/wiki/Sorting_algorithm#Stability" class="ext-link"><span class="icon"></span>unstable sorting</a> I'm talking about: <a href="http://jsfiddle.net/vU2uB/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/vU2uB/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 24, 2013 10:04PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Yea, sounds like we don't have much of a choice. My concern here is performance, but this will likely be shorter.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 01:14AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">WebKit ticket: https://bugs.webkit.org/show_bug.cgi?id=110718</span> → <span class="change-field-new">1361760505280334</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p><a href="/wiki/WebKit">WebKit</a> ticket: <a href="https://bugs.webkit.org/show_bug.cgi?id=110718" class="ext-link"><span class="icon"></span>https://bugs.webkit.org/show_bug.cgi?id=110718</a></p><p><strong>Edit</strong>: disregard; as @getify points out, this is fundamentally a V8 issue, not <a href="/wiki/WebKit">WebKit</a>.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 02:10AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It'd be nice if they did fix it. But I doubt it's gonna get fixed, if this thread is any indication: <a href="http://code.google.com/p/v8/issues/detail?id=90" class="ext-link"><span class="icon"></span>http://code.google.com/p/v8/issues/detail?id=90</a></p><p>FWIW, I have, temporarily, fixed my own "dammit this is not stable" sorting issues in webkit/chrome by using this JS merge-sort algorithm instead of the built-in sort, so maybe jquery could consider the same (even if just temporarily)?</p><p><a href="http://stackoverflow.com/a/7730507/228852" class="ext-link"><span class="icon"></span>http://stackoverflow.com/a/7730507/228852</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 03:33AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It still frustrates me that people are using <code>.add()</code> and expecting it to work like a <code>push()</code> operator. We work hard to keep the set in document order; if someone needs a specific order for cases like this <code>$(array)</code> or <code>$(selector).append(array)</code> works great.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 04:02AM UTC by <span class="author">gibson042</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That's fair, but this is another bed we made for ourselves... multiple times, in fact. :\\</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 04:24AM UTC by <span class="author">Richard Gibson</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/13505">#13505</a>: Yet another detached add patch </p><p> Changeset: 44340c889bbf6d78511f27ebef5786c639010a52</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 04:24AM UTC by <span class="author">Richard Gibson</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/13505">#13505</a>: Yet another detached add patch </p><p> Changeset: 6256c614fd36596debbf52ddcc2c9660705b3d8f</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 04:35AM UTC by <span class="author">getify</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">@dmethvin--&#92;
&#92;
with all due respect, the docs (as I mentioned above) make it seem like you can add a new element *after* an existing element, in a collection, and have it be added to the DOM in that collection order. Nothing about that example says &quot;be careful, these might not end up in the order you expect, depending on which browser you use.&quot;&#92;
&#92;
```&#92;
&lt;body&gt;&#92;
&lt;p&gt;Hello&lt;/p&gt;&#92;
&lt;script&gt;$(&quot;p&quot;).clone().add(&quot;&lt;span&gt;Again&lt;/span&gt;&quot;).appendTo(document.body);&lt;/script&gt;&#92;
&lt;/body&gt;&#92;
```&#92;
&#92;
If it&#39;s not intended that we should be able to rely on the order of items in a collection made partially or entirely by `add()`, then please just consider changing the documentation (removing that example) so we don&#39;t keep getting the wrong idea. &#92;
&#92;
For my part, I had no idea there was any back-story (as you clearly share) to `add()`, and I just showed up and tried to use if (for the first time) based on the docs.</span> → <span class="change-field-new">1361767118556246</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">@dmethvin--&#92;
&#92;
with all due respect, the docs (as I mentioned above) make it seem like you can add a new element *after* an existing element, in a collection, and have it be added to the DOM in that collection order. Nothing about that example says &quot;be careful, these might not end up in the order you expect, depending on which browser you use.&quot;&#92;
&#92;
```&#92;
&lt;body&gt;&#92;
&lt;p&gt;Hello&lt;/p&gt;&#92;
&lt;script&gt;$(&quot;p&quot;).clone().add(&quot;&lt;span&gt;Again&lt;/span&gt;&quot;).appendTo(document.body);&lt;/script&gt;&#92;
&lt;/body&gt;&#92;
```&#92;
&#92;
If it&#39;s not intended that we should be able to rely on the order of items in a collection made partially or entirely by `add()`, then please just consider changing the documentation (removing that example) so we don&#39;t keep getting the wrong idea. &#92;
&#92;
For my part, I had no idea there was any back-story (as you clearly share) to `add()`, and I just showed up and tried to use ii (for the first time) based on the docs.</span> → <span class="change-field-new">1361767132355168</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>@dmethvin--</p><p>with all due respect, the docs (as I mentioned above) make it seem like you can add a new element *after* an existing element, in a collection, and have it be added to the DOM in that collection order. Nothing about that example says "be careful, these might not end up in the order you expect, depending on which browser you use."</p><p>```</p><p>&lt;body&gt;</p><p>&lt;p&gt;Hello&lt;/p&gt;</p><p>&lt;script&gt;$("p").clone().add("&lt;span&gt;Again&lt;/span&gt;").appendTo(document.body);&lt;/script&gt;</p><p>&lt;/body&gt;</p><p>```</p><p>If it's not intended that we should be able to rely on the order of items in a collection made partially or entirely by <code>add()</code>, then please just consider changing the documentation (removing that example) so we don't keep getting the wrong idea. </p><p>For my part, I had no idea there was any back-story (as you clearly share) to <code>add()</code>, and I just showed up and tried to use it (for the first time) based on the docs.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 25, 2013 09:30PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry if it came off as whining...I guess it was. The issue is that there are multiple conflicting goals here. Intuitively I suspect everyone would like the disconnected element case to have <code>.add()</code> just tack things on the end. But for similar intuitive reasons most people want connected elements to be in document order. </p><p>The problem is that the <code>.add()</code> method has no information about which case to expect (or more pathological cases such as a mix of connected and disconnected elements, even elements from different documents). So doing things "the right way" for every case means ugly workarounds and still may not meet everyone's definition of "right".</p><p>If we can declare some cases out of bounds, jQuery can stay faster and smaller. There are still several good ways to accomplish the goal, so we haven't made it any worse for the jQuery user. In fact, I suspect the revised code is faster and easier for most people to follow.</p><p>I agree the docs are misleading about several of these issues, we've fallen behind a bit on the docs and now that the release is out I'm planning on getting things in sync. We may yet still support set ordering as described there on all browsers, but I think it's a misuse of <code>.add()</code> and again the revised code is better.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:29">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 24, 2013 01:43PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:29">comment:29</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.9.2</span> → <span class="change-field-new">1.10/2.0</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Bulk update to milestone 1.10/2.0</p>
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
