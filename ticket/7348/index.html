<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7348 (Current &amp;quot;set&amp;quot; of Matched Elements: jQuery.self or jQuery.last) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7347/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7349/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7348</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 29, 2010 06:38AM UTC</p>
      
        <p>Closed October 29, 2010 10:36PM UTC</p>
      
      
        <p>Last modified April 25, 2012 06:36PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Current &quot;set&quot; of Matched Elements: jQuery.self or jQuery.last</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        anonymous
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/"></a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th class="missing">Version:</th>
      
      <td></td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I am constantly finding myself wanting to reference the current set of elements inside a chain of commands. Let me explain with a couple of examples:</p><pre class="wiki">
var r = $('#test');
var g = r.find('span[data-Name=Name]');
g.css('width', g.width() + 10);
var i = r.find('input[name=Date]');
i.attr('data-OldValue', i.val()).val('now');
</pre><p>As you can see, both g and i needed to reference themselves within the methods executed against them. There's no way for me to turn this into a chain of commands using the end() method because of this. I think jQuery needs a variable that holds the current set of elements (e.g. $.$, $._, $.self, $.last, ...); the above code then could be written like so:</p><pre class="wiki">
$('#test').find('span[data-Name=Name]')
   .css('width', $.$.width() + 10)
.end().find('input[name=Date]')
   .attr('data-OldValue', $.$.val()).val('now')
.end();
</pre><p>It's more for convenience than reducing code length, however, if you keep this reference name small (such as $.$ or $._), it would be both a convenience and reduce the overall code length slightly. It just seems like this would be a great compliment to the end() method.</p><p>I apologize ahead of time if there's already a feature for this or someone knows of a way to do it without breaking a chain.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2010 12:42PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">1.5</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Pardon me if I've misunderstood, but are looking for this: <a href="http://api.jquery.com/andself/" class="ext-link"><span class="icon"></span>http://api.jquery.com/andself/</a></p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2010 07:33PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>What I am trying to get at is a way to reference the current object so that one doesn't have to break a chain in the case that a property of the current object is needed inside of the chain. Here's one more simple example that hopefully conveys what I mean.</p><pre class="wiki">
&lt;script&gt;
$(function () {
$('body').find('input[name=abc]')
   .val($._.val() + ' World!')
.end().find('input[name=123]')
   .val($._.val() + 'bar')
.end();
})();
&lt;/script&gt;
&lt;body&gt;
&lt;input name="abc" value="Hello" /&gt;
&lt;input name="123" value="foo" /&gt;
&lt;/body&gt;
</pre><p>After this document loads, the first INPUT element should say "Hello World!" and the second should say "foobar" because $._ always references the last jQuery set (which would be whatever elements were found with the find() method).</p><p>Now that I have reiterated this again, I do realize that the above example could be rewritten with the each() method, like so...</p><pre class="wiki">
&lt;script&gt;
$(function () {
$('body').find('input[name=abc]')
   .each(function () {$(this).val($(this).val() + ' World!');})
.end().find('input[name=123]')
   .each(function () {$(this).val($(this).val() + ' bar!');})
.end();
})();
&lt;/script&gt;
&lt;body&gt;
&lt;input name="abc" value="Hello" /&gt;
&lt;input name="123" value="foo" /&gt;
&lt;/body&gt;
</pre><p>As you can probably see, this way has a little more code to it, but it allows me to create one chain of commands in the current context without having to break it up into variables like so...</p><pre class="wiki">
&lt;script&gt;
$(function () {
var a = $('input[name=abc]');
a.val(a.val() + ' World!');
a = $('input[name=123]');
a.val(a.val() + ' bar!');

// or even more lenghty...
$('input[name=abc]').val($('input[name=abc]') + ' World'!');
$('input[name=123]').val($('input[name=123]') + ' bar!');

})();
&lt;/script&gt;
&lt;body&gt;
&lt;input name="abc" value="Hello" /&gt;
&lt;input name="123" value="foo" /&gt;
&lt;/body&gt;
</pre><p>By having a variable that always contains the last set of elements of whatever method is called, you are able to keep one chain that is also a  little condensed as far as code. This is kind of similar to how <a href="/wiki/RegExp">RegExp</a> is handled in <a href="/wiki/JavaScript">JavaScript</a>; <a href="/wiki/RegExp">RegExp</a>.lastMatch always contains the last match, so jQuery.last or jQuery._ would always contain the last set of elements matched.</p><p>Again, this is just for convenience. I don't think it's going to be a feature used by many.</p><p>Thank you for the time, rwaldron.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 29, 2010 10:36PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Most of the code you’ve written for this example wouldn’t work properly anyway unless your selectors only ever match a single object. Use <code>.each</code>, and don’t be afraid to break chains when you need references.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 18, 2011 02:25PM UTC by <span class="author">tjm</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi, sorry to bring up a fairly old ticket but I have also found a need for this recently and have come up with the following simple plugin to allow it. I post it here hopefully to help anyone else that has the same need but also to get confirmation (or not as they case may be) that this method won't break anything else in jQuery. I'm not sure if the use of '$.$' is the best choice but that can easily be modified. Heres what I've got:</p><pre class="wiki">
(function($) {
    'use strict';
 
    var 
    oldfninit = $.fn.init;
    
    ($.fn.init = function() {

        oldfninit.apply($.$=this,arguments);
        return $.$;

    }).prototype = oldfninit.prototype;

}(jQuery));
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 19, 2011 10:51AM UTC by <span class="author">tjm</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Just to note, the return in my previous example is redundant but i also think the content of the new $.fn.init, should read,</p><pre class="wiki">
    return $.$ = oldfninit.apply(this,arguments);
</pre><p>since the original does not just modify this but may return another object. In the case that no element has explicitly been selected, for example, the previous code was returning the wrong object.</p><p>I'm still not sure if this won't break other things though!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed April 25, 2012 06:36PM UTC by <span class="author">leorou@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If you want to maintain chain-ability and to reference an object in it you can do something like this and then use the variable in the following chain:</p><pre class="wiki">
$(selector).toVariable('theObject').html(theObject.attr('title'));
</pre><p>Otherwise, without the plugin:</p><pre class="wiki">
var theObject = $(selector);
theObject.html(theObject.attr('title'));
</pre><p>Here is the plugin:</p><pre class="wiki">
(function( $ ){

  $.fn.toVariable = function( variableName ) {  
	
	window[variableName] = this;
	
	return $(this);

  };
})( jQuery );
</pre>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
