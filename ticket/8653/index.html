<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8653 (jQuery.param outputs &amp;quot;null&amp;quot; and &amp;quot;undefined&amp;quot; in the query string) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8649/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8657/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8653</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened March 26, 2011 01:01PM UTC</p>
      
        <p>Closed May 16, 2012 06:04PM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery.param outputs &quot;null&quot; and &quot;undefined&quot; in the query string</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        d@3vq.net
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.8">1.8</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.5.1</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>1.8-discuss</td>
      
        <th>Cc:</th>
      
      <td>dmethvin</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>This ticket is a followup to the discussion in <a href="http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param" class="ext-link"><span class="icon"></span>http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param</a> where I am using jQuery.ajax to send data to a web service.</p><p>Given</p><pre class="wiki">
jQuery.param({"string":"foo","null":null,"undefined":undefined})
</pre><p>the output is </p><pre class="wiki">
"string=foo&null=null&undefined=undefined"
</pre><p>which the server will interpret as the strings </p><pre class="wiki">"null"</pre> and <pre class="wiki">"undefined"</pre> rather than as empty values.<p></p><p>My expected output would be:</p><pre class="wiki">
"string=foo&null=&undefined"
</pre><p>where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (29)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 01:05PM UTC by <span class="author">d@3vq.net</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Working example: <a href="http://jsfiddle.net/YuWXy/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/YuWXy/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 03:24PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for submitting a ticket to the jQuery Bug Tracker!</p><p>In my opinion, the current behavior is correct and .param() should not be expected to automagically reassign values being passed to it. As per kboudloche, I too don't think the scenario referenced is something a lot of people run into either.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 03:39PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I beg to differ with addy here.</p><p>null and undefined are perfectly acceptable values for input data. Their meaning is quite obviously: "in the structure, yet empty"... and the only way to express that in a query string is with an empty parameter.</p><p>Current behaviour is not correct: a parameter with values null or undefined will be serialized the same as "null" or "undefined" (string) which is wrong imo.</p><p>Not sure I agree with the original poster regarding the solution... I would expect: string=foo&null. That way, people have a mean to prevent serialization (undefined) and a mean to transmit empty values (null).</p><p>While you can always pass an empty string, do we really want people to inspect their data structure prior to giving to serialize just to clean up nulls and undefineds and replace them with an empty string? Not sure I do knowing code calling serialize can have very good reasons to differentiate between null and "" internally.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 04:02PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">That&#39;s alright :) &#92;
&#92;
With respect to us expecting users to inspect their data structures prior to serialization, I don&#39;t think it&#39;s completely unreasonable but.. I&#39;m all for making things as easy as possible to use. &#92;
&#92;
I could get down with a string=foo&amp;null solution as jaubourg suggests. </span> → <span class="change-field-new">1301176933246321</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>With respect to us expecting users to inspect their data structures prior to serialization, I don't think it's completely unreasonable but.. I'm all for making things as easy as possible to use. I could get down with a string=foo&null solution as jaubourg suggests. </p><p>Keeping this open for now to allow dmethvin an opportunity to comment. He was more closely tied in with the discussions on the forum and may have some further insights.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 09:12PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 26, 2011 10:21PM UTC by <span class="author">gnarf</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This has returned this result for a LONG time and changing it would probably break somebody's application.</p><p>There was a stack overflow question <a href="http://stackoverflow.com/questions/1403963/getjson-call-with-null-parameters-to-mvc-controller-action/1404053#1404053" class="ext-link"><span class="icon"></span>http://stackoverflow.com/questions/1403963/getjson-call-with-null-parameters-to-mvc-controller-action/1404053#1404053</a> a while ago that has an answer equally applicable to "fixing" this bug for yourself.   Nowadays you could probably even use an ajaxPrefilter (unless you are calling $.param() manually) .</p><p>In my opinion, it boils down to asking why you are passing null/undefined data as url parameters in the first place... </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 27, 2011 11:51PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ dmethvin, davemethvin</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>CC'ing davemethvin for his thoughts in case he hasn't reviewed this as yet.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 28, 2011 01:01PM UTC by <span class="author">d@3vq.net</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>When a property is set to undefined, hasOwnProperty still returns true, so I'm not sure about skipping them while writing out the query string.</p><p>Removing the </p><pre class="wiki">=</pre> would cause me problems. I am calling an asp.net <pre class="wiki">WebMethod</pre> which selects which handler to use based on keys in the query string, but it ignores parameters without an <pre class="wiki">=</pre>. With the <pre class="wiki">"string=foo&null"</pre> solution, a call to <pre class="wiki">jQuery.ajax(webMethodUrl, { data : { key : value } })</pre> may or may not call the web method at webMethodUrl, since the <pre class="wiki">=</pre> might be missing. I would be back to checking each data object in ajaxPrefilter, and the change could break existing code.<p></p><p>Writing out empty string for null and undefined, </p><pre class="wiki">"string=foo&null=&undefined="</pre>, would be safer.<p></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 07, 2011 11:04AM UTC by <span class="author">oliver.dungey@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1 for a change in this area. I have just bumped into this with a Java RESTful backend (Jersey) whereby the server side is expecting a UUID or null but it is getting a string of "null" or "undefined", both of which are a problem as it is sending a string instead of a null. From my point of view the fix is either:</p><p>1. don't bother sending null values at all (on the basis that null = nothing to send).</p><p>2. send "parameter="</p><p>The only workaround I have at the moment is to put null checks before pushing in each parameter which is very verbose.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 07, 2011 03:05AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-old">dmethvin, davemethvin</span> → <span class="change-field-new">dmethvin</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.8=discuss</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Are there any fans of the current behavior? I suppose the problem is that none of them will arrive to defend it until we change it. </p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 07, 2011 03:05AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">1.8=discuss</span> → <span class="change-field-new">1.8-discuss</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 19, 2011 11:20PM UTC by <span class="author">smart@prescreen.com</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>According to <a href="http://tools.ietf.org/html/rfc3986," class="ext-link"><span class="icon"></span>http://tools.ietf.org/html/rfc3986,</a> the "%00" percent-encoding *could* be used.  Nowhere does it say anything about using the string "null" for null values.  Clearly, as URL is an encoding, the current behavior is broken.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 23, 2011 10:36PM UTC by <span class="author">exxizt@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This behaviour is definitely not right. I'm sure many are eager to see it fixed.</p><p>For those interested, this is the part from SO answer that removes the properties that are set to null:</p><pre class="wiki">
function stripNull(obj) {
  for (var i in obj) {
    if (obj[i] === null) delete obj[i];
  }
  return obj;
}
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2011 05:47PM UTC by <span class="author">Douglas &lt;rampant@gmail.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>exxizt: stripNull removes null properties from an object, but jQuery.param should not modify the object passed in. The solution proposed by jaubourg in comment 3 still appears to be the correct one.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2011 01:37PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span> → <span class="change-field-new">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, This makes sense, and I'm not sure who would rely on this buggy behavior. </p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2011 03:59PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, we just need to iron out what the fix is (see my comment <a href="/ticket/3">#3</a>). Current behaviour doesn't make sense and I shudder to think who would rely on it.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2011 05:04PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span> → <span class="change-field-new">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, I am not a fan of the current behavior. I think we should totally skip undefined values and use "name=" for the null case.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 13, 2011 05:27PM UTC by <span class="author">jzaefferer</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span> → <span class="change-field-new">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 14, 2011 04:00PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 19, 2011 05:12PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span> → <span class="change-field-new">This ticket is a followup to the discussion in http://forum.jquery.com/topic/should-null-be-passed-in-query-strings-generated-by-jquery-param where I am using jQuery.ajax to send data to a web service.&#92;
&#92;
Given&#92;
&#92;
{{{&#92;
jQuery.param({&quot;string&quot;:&quot;foo&quot;,&quot;null&quot;:null,&quot;undefined&quot;:undefined})&#92;
}}}&#92;
&#92;
the output is &#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=null&amp;undefined=undefined&quot;&#92;
}}}&#92;
&#92;
which the server will interpret as the strings {{{&quot;null&quot;}}} and {{{&quot;undefined&quot;}}} rather than as empty values.&#92;
&#92;
My expected output would be:&#92;
&#92;
{{{&#92;
&quot;string=foo&amp;null=&amp;undefined&quot;&#92;
}}}&#92;
&#92;
where null values are coerced to empty string, and undefined values have no value. (This is the behaviour in Prototype 1.7, which seems reasonable.)&#92;
&#92;
</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+0, I've never experienced an issue with this... wouldn't it break BC?</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 12, 2012 01:36PM UTC by <span class="author">sindresorhus</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/11329">#11329</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 13, 2012 10:01PM UTC by <span class="author">wardrop</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>By my duplicate ticket above, I clearly agree. The only types a controller for a web application should care about, is String - there's no place or need for sending the variable state, plus it means any server-side passing of null and undefined values would mean that any user that inputs these string values ("null" and "undefined") would not get the result they expected. An empty string communicates a undefined/null/empty/default value. The exact meaning of an empty string depends on the controller that handles it.</p><p>I think not fixing for the sake of backwards compatibility is a poor excuse. First of all, I'm of the opinion that anyone that depends on this behaviour ought to have their application break (nasty, I know), but more importantly, no one should be upgrading jQuery on a production application and expect it to work every time. The sooner this is changed, the less of a pain it will be in the future.</p><p>In the meantime, I've overridden the built-in encodeURIComponent function to return empty strings for null and undefined. This is what jQuery uses that results in the "null" and "undefined" strings.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 14, 2012 12:15AM UTC by <span class="author">Douglas &lt;rampant@gmail.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Array.prototype.join sets a precedent for treating null and undefined as empty strings while serialising a structure to a string (<a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf" class="ext-link"><span class="icon"></span>EMCA spec 15.4.4.5</a>). The param utility should behave in the same way since the use case is so similar.</p><p>The trade off on the receiving end is either to be able to distinguish null and undefined, or to be able to distinguish null from the string "null". The latter appears to be more useful.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 14, 2012 12:18AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.8</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm not sure why there's so much activity on this ticket now. The ticket is open and has been voted for action in 1.8. There is no need for further discussion on this unless you are one of <a href="http://bugs.jquery.com/ticket/8653#comment:10" class="ext-link"><span class="icon"></span>these people</a> and want to retain the current behavior.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2012 07:25PM UTC by <span class="author">tks2103</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>submitted pull request for behavior as outlined in comment 3:</p><p><a href="https://github.com/jquery/jquery/pull/714" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/pull/714</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2012 07:48PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>On github you also cited <a href="http://bugs.jquery.com/ticket/8653#comment:17" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/8653#comment:17</a> - so which is it? The missing <code>=</code> just looks odd, as it breaks the notion of <code>key = val</code>. Especially in this context:</p><p><code>foo=bar&baz&huh=what-the</code></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2012 07:52PM UTC by <span class="author">tks2103</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>reasoning for "key" over "key=" in the null case is that "key=" does not distinguish empty string from null case. thats why i favored "key".</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 23, 2012 08:12PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I discussed with tks2103 and we're just going to turn null/undefined into empty strings, the behavior advocated by @Douglas above. It's the simplest and smallest to implement. Trying to distinguish between special values is not advisable, the main use case of <code>jQuery.param</code> is to take a form element value and serialize it, these cases are not defined. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:29">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 16, 2012 06:04PM UTC by <span class="author">tsinha</span></span>
        <a class="ticket-change-link" href="#comment:29">comment:29</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/8653">#8653</a>, .param() undefined/null values become empty strings </p><p> Changeset: 36d2d9ae937f626d98319ed850905e8d1cbfd078</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
