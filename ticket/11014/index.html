<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#11014 (.Clone Behaviour Changes in IE7 After Installing KB2497640) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/11013/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/11015/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#11014</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened December 13, 2011 05:03PM UTC</p>
      
        <p>Closed December 14, 2011 03:59AM UTC</p>
      
      
        <p>Last modified February 02, 2012 02:57PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.Clone Behaviour Changes in IE7 After Installing KB2497640</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        dsmith@covarity.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.5.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Using IE7 on Window XP SP3 after installing the KB2497640 (MS11-018) security update, cloning of items with jQuery 1.5 appears to work incorrectly.  Downgrading to jQuery to 1.4 or removing KB2497640, appears to resolve the problem.  The issue is not reproducible on other browsers. Upgrading to 1.6+ is not an option due to <a href="/ticket/9777">#9777</a> which actually makes the problem worse in some situations.  </p><p>Our application uses clone() for a large amount of templating, so this bug and <a href="/ticket/9777">#9777</a> make the application unusable in IE7 with any jQuery version after 1.4.  Suggesting to our clients that they must uninstall critical security updates is also not a viable option.</p><h3>Steps to Reproduce</h3><p>A stripped down example can be found at:</p><p><a href="http://jsfiddle.net/dennismsmith/LuBqs/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dennismsmith/LuBqs/</a></p><p>1. The page should initially load with just an Apply Template button visible</p><p>1. Clicking the button should cause any existing items in the (initially empty) list to be removed and a number of new items will be inserted based on a template LI node.</p><p>1. In any browser but IE7 + KB2497640, you can click the button as many times as you like and it continues to display the list items.</p><p>1. With IE7 + KB2497640, after two or three clicks of the button (the number of clicks isn't always consistent), list items will no longer be added, leaving you with an empty list.</p><p>From my investigation, it appears as though the selectors are no longer able to find the template nodes by ID.  If I modify the selectors to find them using classes or element types, I can still find the elements, so they do still exist in the DOM.</p><h3>Compatibility Summary</h3><p>|| || jQuery 1.4 || jQuery 1.5 ||</p><p>|| IE7 ||  OK || OK ||</p><p>|| IE7 + KB2497640 || OK || Fail ||</p><p>|| Other browsers || OK || OK ||</p><p>Note that while this sample not not exhibit the problems from <a href="/ticket/9777">#9777</a> when using jQuery 1.6+, the actual production application does.</p><h3>Notes</h3><p>This problem only occurs in IE7 with KB2497640 installed when using jQuery 1.5.  The exact same site without that security update behaves as expected.  I have only tried this on Windows XP SP3 as I do not have a Vista installation to test with.</p><p>The details of the security update can be found at:</p><p><a href="http://technet.microsoft.com/en-us/security/bulletin/ms11-018" class="ext-link"><span class="icon"></span>http://technet.microsoft.com/en-us/security/bulletin/ms11-018</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (3)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 14, 2011 03:59AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can see the problem happen with a fully patched IE7 and jQuery 1.5.2, but we don't attempt to patch old versions of jQuery. I do not see the problem occur with the 1.7.1 or with 1.6.4. </p><p>I understand what you mean about <a href="/ticket/9777">#9777</a> but we have not been able to find a way around that problem. If you have some insights about that issue it may be easier to fix that and upgrade to a later version. </p><p>Since the issue occurred when this patch was applied, you could try contacting Microsoft to see if they can resolve the problem. If your clients are using IE7 they are most likely a corporate customer and paying quite a bit of money to Microsoft for support.</p><p>I'm going to mark this particular issue as worksforme since it does not occur in any recent version, but we can continue to work on <a href="/ticket/9777">#9777</a>.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 02, 2012 02:54PM UTC by <span class="author">skapigsf</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ran into this issue with 1.6.4 and IE7. Debugging revealed that find() using the id selector on cloned elements would start returning the original element even though the id on it is not set. getElementById() works correctly, so this probably should be considered a jQuery defect.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 02, 2012 02:57PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If you can reproduce it on the jquery-git version please post a link to the test case.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
