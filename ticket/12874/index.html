<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#12874 ($.ajax add is not defined) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/12873/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/12876/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#12874</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 09, 2012 11:38AM UTC</p>
      
        <p>Closed December 05, 2012 01:54AM UTC</p>
      
      
        <p>Last modified December 05, 2012 05:44PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">$.ajax add is not defined</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        mt.norbert@gmail.com
      </td>
      <th>Owned by:</th>
      <td>mt.norbert@gmail.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>deferred</td>
      
        <th>Version:</th>
      
      <td>1.8.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Hi,</p><p>I am working on a site and I am using backbonejs and requirejs and with r.js I create a bundled js file which contains all my js modularised.</p><p>If I make a simple ajax request and I even don't attach any event listener on it I get the following error after I receive the ajax response:</p><pre class="wiki">
Uncaught ReferenceError: add is not defined
jQuery.Callbacks.self.add.firingLength
jQuery.extend.each
e
jQuery.Callbacks.self.add
jQuery.extend.Deferred.promise.always
jQuery.extend.ajax.jqXHR.statusCode
done
jQuery.support.ajax.jQuery.ajaxTransport.send.callback
</pre><p>I have made some debugging and it seems that the problem is here:</p><pre class="wiki">// First, we save the current length
var start = list.length;
(function add( args ) {
	jQuery.each( args, function( _, arg ) {
		var type = jQuery.type( arg );
		if ( type === "function" && ( !options.unique || !self.has( arg ) ) ) {
			list.push( arg );
		} else if ( arg && arg.length && type !== "string" ) {
			// Inspect recursively
			add( arg );
		}
	});
})( arguments );
</pre><p>This is in jquery.js at line 997.</p><p>It seems that the recursive call of the add method is not working.</p><p>This is how I made the ajax request:</p><pre class="wiki">$.ajax(baseUrl+'query',{
	data:form.serialize(),
	dataType: 'json',
	type: 'post'
});
</pre></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 13, 2012 04:23PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ mt.norbert@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project! Please provide a complete reduced test case on jsFiddle to help us assess your ticket!</p><p>Additionally, be sure to test against the "jQuery (edge)" version to ensure the issue still exists. To get you started, use this boilerplate: <a href="http://jsfiddle.net/FrKyN/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/FrKyN/</a>  </p><p>Open the link and click to "Fork" (in the top menu) to begin.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2012 03:19PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">mt.norbert@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="https://github.com/jquery/jquery/pull/1028" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/pull/1028</a></p><p>I'm not clear on how this is happening. The parens around the function shouldn't create a new scope? Is this something the r.js optimizer is transforming within the code?</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 24, 2012 03:21PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">deferred</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ mt.norbert@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 29, 2012 06:05PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">Hi,&#92;
I am working on a site and I am using backbonejs and requirejs and with r.js I create a bundled js file which contains all my js modularised.&#92;
&#92;
If I make a simple ajax request and I even don&#39;t attach any event listener on it I get the following error after I receive the ajax response:&#92;
Uncaught ReferenceError: add is not defined&#92;
jQuery.Callbacks.self.add.firingLength&#92;
jQuery.extend.each&#92;
e&#92;
jQuery.Callbacks.self.add&#92;
jQuery.extend.Deferred.promise.always&#92;
jQuery.extend.ajax.jqXHR.statusCode&#92;
done&#92;
jQuery.support.ajax.jQuery.ajaxTransport.send.callback&#92;
&#92;
I have made some debugging and it seems that the problem is here:&#92;
// First, we save the current length&#92;
					var start = list.length;&#92;
					(function add( args ) {&#92;
						jQuery.each( args, function( _, arg ) {&#92;
							var type = jQuery.type( arg );&#92;
							if ( type === &quot;function&quot; &amp;&amp; ( !options.unique || !self.has( arg ) ) ) {&#92;
								list.push( arg );&#92;
							} else if ( arg &amp;&amp; arg.length &amp;&amp; type !== &quot;string&quot; ) {&#92;
								// Inspect recursively&#92;
								add( arg );&#92;
							}&#92;
						});&#92;
					})( arguments );&#92;
&#92;
This is in jquery.js at line 997.&#92;
It seems that the recursive call of the add method is not working.&#92;
This is how I made the ajax request:&#92;
$.ajax(baseUrl+&#39;query&#39;,{&#92;
		data:form.serialize(),&#92;
		dataType: &#39;json&#39;,&#92;
		type: &#39;post&#39;&#92;
	    });&#92;
</span> → <span class="change-field-new">Hi,&#92;
&#92;
I am working on a site and I am using backbonejs and requirejs and with r.js I create a bundled js file which contains all my js modularised.&#92;
&#92;
If I make a simple ajax request and I even don&#39;t attach any event listener on it I get the following error after I receive the ajax response:&#92;
&#92;
{{{&#92;
Uncaught ReferenceError: add is not defined&#92;
jQuery.Callbacks.self.add.firingLength&#92;
jQuery.extend.each&#92;
e&#92;
jQuery.Callbacks.self.add&#92;
jQuery.extend.Deferred.promise.always&#92;
jQuery.extend.ajax.jqXHR.statusCode&#92;
done&#92;
jQuery.support.ajax.jQuery.ajaxTransport.send.callback&#92;
}}}&#92;
&#92;
I have made some debugging and it seems that the problem is here:&#92;
{{{#!js&#92;
// First, we save the current length&#92;
var start = list.length;&#92;
(function add( args ) {&#92;
	jQuery.each( args, function( _, arg ) {&#92;
		var type = jQuery.type( arg );&#92;
		if ( type === &quot;function&quot; &amp;&amp; ( !options.unique || !self.has( arg ) ) ) {&#92;
			list.push( arg );&#92;
		} else if ( arg &amp;&amp; arg.length &amp;&amp; type !== &quot;string&quot; ) {&#92;
			// Inspect recursively&#92;
			add( arg );&#92;
		}&#92;
	});&#92;
})( arguments );&#92;
}}}&#92;
&#92;
This is in jquery.js at line 997.&#92;
&#92;
It seems that the recursive call of the add method is not working.&#92;
&#92;
This is how I made the ajax request:&#92;
{{{#!js&#92;
$.ajax(baseUrl+&#39;query&#39;,{&#92;
	data:form.serialize(),&#92;
	dataType: &#39;json&#39;,&#92;
	type: &#39;post&#39;&#92;
});&#92;
}}}</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Does this work without using <code>r.js</code>? In which case it's a bug in <code>r.js</code>, not jQuery.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2012 01:54AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ notabug</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>We haven't received replies on this, and it's not clear how this can be a bug in jQuery. Please reply with some technical details if this still needs to be addressed. If r.js is changing the code it sounds like the transformation is being done wrong.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2012 05:44PM UTC by <span class="author">mt.norbert@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry, I don't really have time to create a use case. I think it's better if you close this and if I will create a use case I will write a new comment.</p><p>Sorry again.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
