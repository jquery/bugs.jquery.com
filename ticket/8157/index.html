<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8157 (Focusing an already focused text field will prevent the change event from firing in IE) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8156/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8158/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8157</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 03, 2011 01:40PM UTC</p>
      
        <p>Closed September 21, 2011 03:10AM UTC</p>
      
      
        <p>Last modified March 09, 2012 12:55AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Focusing an already focused text field will prevent the change event from firing in IE</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        scottgonzalez
      </td>
      <th>Owned by:</th>
      <td>dmethvin</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        blocker
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.7">1.7</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>event</td>
      
        <th>Version:</th>
      
      <td>1.5</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>1.7-discuss</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).</p><p>Test case: <a href="http://jsbin.com/ukihu5/2/edit" class="ext-link"><span class="icon"></span>http://jsbin.com/ukihu5/2/edit</a></p><p>According to <a href="https://github.com/jquery/jquery-ui/pull/84" class="ext-link"><span class="icon"></span>the pull request for jQuery UI</a>, this was introduced in 1.4.3 and is caused by <code>jQuery.event.special.change.filters</code>.</p><p>Related jQuery UI bug: <a href="http://bugs.jqueryui.com/ticket/6694" class="ext-link"><span class="icon"></span>http://bugs.jqueryui.com/ticket/6694</a></p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (20)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 03, 2011 02:25PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">event</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 03, 2011 06:34PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 22, 2011 07:22PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">high</span> → <span class="change-field-new">blocker</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 22, 2011 07:27PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.7-discuss</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Nominating ticket for 1.7 discussion.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 22, 2011 09:32PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span> → <span class="change-field-new">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, Could be coupled with an "oninput" normalization</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2011 12:28AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>-1, I think there's something I don't understand here... the value didn't change yet we expect a change event?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2011 04:16AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, confirmed</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 23, 2011 11:58AM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span> → <span class="change-field-new">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:6 jaubourg]:</p><blockquote> -1, I think there's something I don't understand here... the value didn't change yet we expect a change event?</blockquote><p>focus the field, change the value, programmatically focus the field again, blur the field; there should be a change event, but there's not.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 24, 2011 09:13PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, Seems like we should fix it but not sure why it's on the feature list.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 03, 2011 01:46PM UTC by <span class="author">john</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span> → <span class="change-field-new">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1, Oof, would be good to get resolved. Not it!</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 03, 2011 03:49PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed June 05, 2011 09:16PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span> → <span class="change-field-new">If a text field is being edited and it programmatically receives focus while already focused, the change event will not be fired in IE (if no additional changes are made after the field is focused again).&#92;
&#92;
Test case: http://jsbin.com/ukihu5/2/edit&#92;
&#92;
According to [https://github.com/jquery/jquery-ui/pull/84 the pull request for jQuery UI], this was introduced in 1.4.3 and is caused by `jQuery.event.special.change.filters`.&#92;
&#92;
Related jQuery UI bug: http://bugs.jqueryui.com/ticket/6694</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>+1</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 12, 2011 02:38PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.7</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ dmethvin</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 03, 2011 02:16AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>For some reason JSBin isn't working at all for me. Here's the test in jsFiddle:</p><p><a href="http://jsfiddle.net/dmethvin/vn4kX/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dmethvin/vn4kX/</a></p><p>If I change this line</p><pre class="wiki">
  $( "input" ).focus();
</pre><p>to this</p><pre class="wiki">
  $( "input" )[0].focus();
</pre><p>the problem goes away. One difference is that the jQuery <code>.focus()</code> tries to bubble a <code>focus</code> event up the DOM tree (as it does with *all* events, native or non-native). The W3C says <code>focus</code> and <code>blur</code> events are not supposed to bubble (but <code>focusin</code> and <code>focusout</code> should instead). I wonder if we should just run the DOM <code>.focus()</code> method *only* and let the browser sort out the rest. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 03, 2011 12:44PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">The problem comes from from `jQuery.event.special.change.filters.filter` being the same as the `beforeactivate` filter. If the focus filter simply checked to see if the target is the activeElement and bailed if it was, that&#39;d probably fix this.</span> → <span class="change-field-new">1312375487083298</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>The problem comes from from <code>jQuery.event.special.change.filters.focus</code> being the same as the <code>beforeactivate</code> filter. If the focus filter simply checked to see if the target is the activeElement and bailed if it was, that'd probably fix this.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 06, 2011 03:34PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>My concern is this:</p><p><a href="http://jsfiddle.net/dmethvin/MW6B2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dmethvin/MW6B2/</a></p><p>If the element is already focused, the native DOM <code>.focus()</code> method doesn't re-fire a <code>focus</code> event. It is effectively a no-op; no handlers are run.</p><p>For the same case, jQuery <code>.focus()</code> runs any directly attached handler for the element (even though the native method would not), bubbles a <code>focus</code> event up the tree (but <code>focus</code> is not supposed to bubble) firing attached handlers even on non-form elements (not supposed to do that either), then runs the native DOM <code>.focus()</code> method if nobody called <code>preventDefault()</code>. The <code>focus</code> event is not supposed to be cancelable but our process does add the ability to cancel (*only*) a programmatic focus on a blurred element from a jQuery handler since we run the handlers first, rather than afterwards.</p><p>Other than that we're doing *exactly* the same thing as the browser. :-) </p><p>I agree that workaround should fix this particular issue, but the reason the issue exists is because we force-fired a <code>focus</code> event on the element when the native DOM method does not.</p><p>Do we want to do all those other things in the jQuery <code>.focus()</code> method? </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 06, 2011 03:41PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If you want to fix the focus event, then shouldn't you fix all events? And if you did that, wouldn't you break a large amount of existing user code?</p><p>I thought we've already discussed the possibility of doing events properly and decided it was either too much of a breaking change or too much work.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 06, 2011 05:21PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The <code>focus/blur</code> events are unusual in that they don't bubble but they spawn <code>focusin/focusout</code> counterparts that do bubble. Calling the native method a second time in a row has no effect at all, unlike <code>click</code>. </p><p>jQuery <code>.focus()</code> doesn't get any of those three things right because it simply uses the <code>.trigger("focus")</code> behavior which isn't appropriate. There are differences in other events but nothing quite so much as this. </p><blockquote> wouldn't you break a large amount of existing user code? </blockquote><p>At least for this case, <code>$el[0].focus()</code> works perfectly when <code>$el.focus()</code> does not, and it mirrors the event behavior you'd see in user input focusing. I think it would match what people already expect <code>$el.focus()</code> does. </p><p>If there were situations where people expected <code>$el.focus()</code> programmatic behavior to be different than user input behavior (for example, handlers run even when re-focusing focused elements and a <code>focus</code> event bubbles to document) then yep it would be a breaking change.</p><p>Let me drop in a fix to address this specific bug in 1.6.3 and we'll talk about the rest later. Unless you just want to use <code>$el[0].focus()</code> for now.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 06, 2011 06:31PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>As long as the fix doesn't change the behavior of $el.triggerHandler( "focus" ) then I don't have anything against a proper fix for focus.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 21, 2011 03:10AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think this closes this particular saga of the missing <code>change</code> event. I've landed a completely new set of code for IE change detection, let's hope there aren't too many new bugs.</p><p><a href="https://github.com/jquery/jquery/commit/3bd7bed340f9077d39734ffce366ef2caeb9ce35" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/commit/3bd7bed340f9077d39734ffce366ef2caeb9ce35</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
