<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10550 (clone does not transfer checked state for input[type=checkbox] in IE9) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10549/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10551/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#10550</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(cantfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 20, 2011 07:39PM UTC</p>
      
        <p>Closed March 04, 2014 01:36AM UTC</p>
      
      
        <p>Last modified March 25, 2014 12:26AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">clone does not transfer checked state for input[type=checkbox] in IE9</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        mattmanic
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        high
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.11.1/2.1.1">1.11.1/2.1.1</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>attributes</td>
      
        <th>Version:</th>
      
      <td>1.6.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The current code to clone the checked state of an input[type=checkbox] is as follows:</p><pre class="wiki">
if ( src.checked ) {
  dest.defaultChecked = dest.checked = src.checked;
}
</pre><p>This does not work in IE9 as setting object.checked = true does not actually check the object, but simply sets that property on the object as true.  To set the checkbox to true, you need to use </p><pre class="wiki">
object.setAttribute('checked','checked').
</pre><p>I have written a patch, and a test which fails under IE9 for this, and will submit a pull request shortly and link to it from this ticket.</p><p>Matt</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (28)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2011 07:45PM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Pull request is at <a href="https://github.com/jquery/jquery/pull/558," class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/pull/558,</a> commit is at <a href="https://github.com/mattheworiordan/jquery/commit/174c48e1f4bb8c0dcea034305a65aa9b493298d2" class="ext-link"><span class="icon"></span>https://github.com/mattheworiordan/jquery/commit/174c48e1f4bb8c0dcea034305a65aa9b493298d2</a></p><p>Please pull in that commit as it's a small and simple change, and already tested on IE6+, Firefox, Chrome and Safari.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2011 08:20PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">attributes</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The property is what needs to be set.  The checked attribute does not actually relate to the checked state of a checkbox except on initial pageload.</p><p><a href="http://timmywillison.com/pres/attributes/#boolean-example" class="ext-link"><span class="icon"></span>http://timmywillison.com/pres/attributes/#boolean-example</a></p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2011 11:26PM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Timmy, this issue is not resolved, and is replicable in IE9.  I am really not sure why you closed this ticket, I wrote tests which confirm this is an issue, if you had run them you would have seen that.</p><p>I have written a jsFiddle now so you can see the problem for yourself (using IE9) at <a href="http://jsfiddle.net/JuFxk/10/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/JuFxk/10/</a>](<a href="http://jsfiddle.net/JuFxk/10/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/JuFxk/10/</a></p><p>I have also updated my commit so that hopefully it follows the jQuery guidelines.  Please see the pull request at <a href="https://github.com/jquery/jquery/pull/559" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/pull/559</a></p><p>Thanks,</p><p>Matt</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 20, 2011 11:42PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That test case is invalid and disproven: <a href="http://jsfiddle.net/rwaldron/cq2PB/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/rwaldron/cq2PB/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 12:02AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>From the PR:</p><p>Just appending the html of the node rids you of everything on the DOM level that was cloned from the node (events, data, properties, etc.) and recreates a new input based solely on the attributes supplied. Though the reason why you thought our test was faulty makes much more sense to me now (because in other browsers setting defaultChecked also writes an attribute into the html), the intention of clone is still intact. Keep the clone intact and everything works as expected. If needed, let's discuss this issue further in the ticket and not open more pull requests.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 12:13AM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Timmy, I am sorry, but I don't understand you reasoning.</p><p>When you clone an element, you would expect all of it's attributes to be cloned as well.  That is how the clone method behaves for ALL other elements: examples, select retains the selected state, text input fields retain their value attribute, so why would it be OK for checkboxes to not retain their attribute?</p><p>This is not what users of JQuery would expect.  I have cloned an entire form in my code base, and stored the HTML so that I can regenerate the form from this HTML source at any point (I cannot use JQuery objects in this instance, long story).  Only the check boxes and radio buttons lose their state, all other elements retain their state completely.  This is in ALL browsers other than IE9.</p><p>Perhaps what you're saying is that the clone method is doing what it should, however the html() method is not generating the correct HTML on a cloned element for some reason.  Either way, there is a clear bug there that will cause problems for people because either clone() is not cloning correctly, or html() is not generating HTML correctly from cloned elements.  Surely you would expect $(elem).clone().html() to generate HTML that reflects the state of elem and all its children?</p><p>I really cannot see a single example where you would want to clone all properties, but not clone the checked state if you converted that node to HTML.  And if this only occurs in IE9, surely that is a browser specific issue that others will encounter that you need to address?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 12:16AM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry, just for others who read this post, in response to rwaldron, I modified his code to show a case that does fail <a href="http://jsfiddle.net/cq2PB/16/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/cq2PB/16/</a> based on the code he wrote.  So don't really see how this disproves my case, as arguably this just supports my case once again.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 12:55AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is not a valid use case.  It's a waste of code to use clone then try to create another node from .html.  $(elem).clone().html() should not be relied upon to generate yet another real clone.  To ensure that would be to open up a new realm of possibilities in behavior.  The checked attribute in IE9 is not the only thing wrong with that and it is far from the only thing getting thrown out here.  If you would like to create a string of html and simply match the checked state or the checked attribute, it should be done without the use of clone.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 01:08AM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok, so you're basically saying that html() is not a complete method and prone to be buggy, so I should not rely on it to generate HTML that accurately reflects the current node?  Odd, but if that is what you're saying, then perhaps you should add notes in the documentation to that effect.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 01:27AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>.html is doing it's job correctly.  .html is simply not meant for cloning.  If we need to duplicate all of the properties as attributes, we're going to be writing a lot of code.  Even if we did want to ensure that the checked property came over in IE9 as an attribute, there would be several other issues to think about.  Do we base it off the current state or the default state?  What if there is no attribute on the original node?  The html generated from the clone, even in IE9, is an accurate representation of the cloned node.  In the use case provided so far, there's no reason to clone.  $('div').append( $input.html() ); would accomplish the same thing.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 01:42AM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Ok, well unfortunately I'm clearly not going to convince you otherwise.  </p><p>I do unfortunately believe that many other people who happen to have to use the html method (I know, it was odd that I needed it, but I did), may get some nasty surprises.</p><p>Thanks for your time anyway, I appreciate you responding to the issue so quickly.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 02:21AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm happy to debate.  If this is proves to be a common issue, we can certainly reconsider.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 02:23AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>However, I originally closed this without seeing the issue you were proposing so I'll close this wontfix instead of invalid.  We can reopen in the future if needed.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 02:23AM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 03:35AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think it would be fair to say that just about all attributes mirrored as properties have inconsistent behavior in one or more browsers. It just isn't reasonable to expect a browser to mirror dynamic property changes back to the corresponding attributes when an element is cloned. For example, it doesn't do that for user-typed input in text boxes in any browser, as far as I know.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 10:21AM UTC by <span class="author">mattmanic</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>dmethvin, for user-typed input in text boxes, that is user generated or dynamically updated after the node is created.  The example I have given creates a node where checked=checked at the outset, and is copied by the clone command (as expected), but because checked is not set using setAttribute, but using .checked instead, with IE 9 only when you use .html() the checked state is ignored.  </p><p>See this example in IE9, only the checkboxes and radio button states are not checked when cloned and converted to HTML.  <a href="http://jsfiddle.net/JuFxk/14/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/JuFxk/14/</a></p><p>I have given this whole thing much more thought, and I really do think this is a bug because of the following:</p><ul><li>.clone() IS meant to copy the checked attribute.  If you look at the code for .clone() it explicitly copies those attributes across, see <a href="https://github.com/jquery/jquery/blob/master/src/manipulation.js#L432." class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/blob/master/src/manipulation.js#L432.</a>  It seems people here are saying it shouldn't, but if that were the case why is that code explicitly setting the checked state.</li><li>.html() IS meant to return the HTML for that element, see <a href="https://github.com/jquery/jquery/blob/master/src/manipulation.js#L219." class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/blob/master/src/manipulation.js#L219.</a>  </li><li>When we call .html or look at innerHTML of the DOM element in IE9 only, it seems that setting defaultChecked and checked on a input[type=checkbox] is in effective in effecting the HTML representation of the object.  Clone is meant to create a copy of the node, but it is not in this case.  Therefore, my proposed pull request addresses this IE9 issue and I do not believe has any other side effects.  After all, we are only setting the checked attribute which <a href="https://github.com/jquery/jquery/blob/master/src/manipulation.js#L432" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/blob/master/src/manipulation.js#L432</a> is doing anyway.</li></ul><p>Matt</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 24, 2011 03:01PM UTC by <span class="author">response.write@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi there, I had the exact same issue and ended up writing a hack. I totally agree in with the issue raised by mattmatic - please guys check out the jsfiddle test - he has a point! </p><p>.clone() === perfect</p><p>.html() === perfect</p><p>.clone().html() === buggy (for IE9, checkbox='checked')!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 28, 2011 04:35PM UTC by <span class="author">matias</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That this is a wontfix does not make sense to me at all and I strongly urge you to reconsider this. But if you still believe that not cloning the checked attribute in IE9 is perfectly logical, maybe you should update the docs to reflect that?</p><p>My suggestions;</p><p>"This is useful (except in IE9) for moving copies of the elements to another location in the DOM."</p><p>"This is useful for moving copies (or almost copies when using IE9) of the elements to another location in the DOM."</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 05, 2011 11:59AM UTC by <span class="author">grace@girlsthathatelyingair.com</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Why on earth won't you address this issue?  Mattmanic has suggested a simple fix, and the problem is replicable.  What more do you need?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 10, 2012 04:54PM UTC by <span class="author">luke@lmbd.co.uk</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I also concur with matias here. I'm trying to clone all form fields that are within a TR and place them inside a form outside of the containing table (because of course forms in TRs don't work well). The issue arises because I have a select element, and using .clone() (without needing .html()) combined with .appendTo() does not retain the currently selected item.</p><p>Then of course, I need to write specific cases for select statements, which bloats the code quite a lot. It's a bit ambiguous for the input fields to retain their values, and not the selects. It's misleading to say the least - if it's not to be fixed it certainly should be documented.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2012 05:10PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/12127">#12127</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2012 06:59PM UTC by <span class="author">danielchatfield</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hi everyone.</p><p>Unless I have misunderstood something the code to fix this was already in the source:</p><p>jQuery.support.noCloneCheck is meant to be true when checked state is not copied across clone</p><p>and then cloneFixAttributes() makes sure the checked state is the same as the source element.</p><p>The problem was that the test was failing to identify the issue with IE9 and IE10 and that the fix in cloneFixAttributes() was only designed to fix the case where it was checked.</p><p>I will submit a pull request in a few minutes.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 11, 2013 07:20PM UTC by <span class="author">jeff@nd4c.com</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've always considered jQuery to be browser independent, and it technically copies the loaded html for ie,firefox and chrome just the same.  But in firefox and chrome it also copies the current state, but it's not listed in html.  (for example if you set the hidden attribute the the loaded state is sent via a post, but if not hidden the currect active state is sent.) In ie it does not copy the current state.  It there a work around to copy the current state to the html?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 14, 2013 10:26AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I have the same issue! I had to set a class before cloning, and then search for the class afterwards and set checked checked. So it's obviously an issue!</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 15, 2013 01:59PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Reopening for us to take a look. We're only doing this special case for checkboxes but it seems like we're stuck doing it.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 01, 2014 10:56PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">None</span> → <span class="change-field-new">1.11.1/2.1.1</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">low</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 04, 2014 01:36AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">jQuery doesn&#39;t control the serialized HTML string representation of some DOM in the document when you use the `.html()` method, that&#39;s the browser&#39;s job and some do it better than others. Once it is a serialized HTML string representation, it&#39;s pretty much impossible for jQuery to go through that arbitrarily large serialized HTML string representation of a DOM, compare it to the DOM from where it came, and &quot;fix&quot; the serialized HTML string representation to match the DOM. To do that, we&#39;d need an HTML parser in jQuery. We don&#39;t have an HTML parser in jQuery, which is why we use the `.innerHTML` method from the browser. &#92;
&#92;
Sorry. If you have some idea for a fix please let us know. Complaining that we aren&#39;t fixing it won&#39;t help since I don&#39;t think we can fix it.</span> → <span class="change-field-new">1393897158202289</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ cantfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>jQuery doesn't control the serialized HTML string representation of some DOM in the document when you use the <code>.html()</code> method, that's the browser's job and some do it better than others. Once it is a serialized HTML string representation, it's pretty much impossible for jQuery to go through that arbitrarily large serialized HTML string representation of a DOM, compare it to the DOM from where it came, and "fix" the serialized HTML string representation to match the DOM. To do that, we'd need an HTML parser in jQuery. We don't have an HTML parser in jQuery, which is why we use the <code>.innerHTML</code> method from the browser. </p><p>Alternatively we could go through the DOM before serialization and attempt to find all the checkboxes, then set their attributes (vs properties). That's again a very expensive operation for a special case. If you know you are cloning checkboxes and need the cloned representation to reflect the dynamic value, you can easily set it yourself.</p><p>Sorry. If you have some idea for a fix please let us know. Complaining that we aren't fixing it won't help since I don't think we can fix it.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 25, 2014 12:26AM UTC by <span class="author">dcsoft</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Could you please update the documentation to note the limitations?  It affects  more than just clone().  For example, I was using </p><pre class="wiki">.replaceWith()</pre> to copy a <pre class="wiki">&lt;input type="checkbox"&gt;</pre> to a different part of the DOM, and it did not copy the checked property.  It helps to know what is preserved OK and what is not.<p></p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
