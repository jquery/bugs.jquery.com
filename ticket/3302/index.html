<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#3302 (DOM tree errors after multiple clones in IE) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/3301/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/3303/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#3302</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 29, 2008 05:38PM UTC</p>
      
        <p>Closed March 02, 2009 12:35AM UTC</p>
      
      
    </div>
  </div>

  <h1 class="ticket-title">DOM tree errors after multiple clones in IE</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        mv987
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        major
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.3">1.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.2.6</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>clone ie</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>In Internet Explorer:</p><p>After performing a clone of a clone of an element with children, there are errors in jQuery traversal.</p><p>see the attached files.</p><p>test.html has a table with a row with three cells.</p><p>test2.html has a div with three child divs.</p><p>in IE, on both of these pages, if you click 'Add Row' twice (thich clones the parent element), and then click 'click here' in the bottom row, it reports there are 2 children in the parent element.</p><p>The parent element obviously has three children.  clicking 'click here' on the other two parent elements reports correctly.</p><p>as a side note, if you click 'add row' once, and then 'click here' on the new element, and then 'add row' again, the third element reports correctly in this case.</p><p>It seems like the cloned elements are not 'fresh' or something - as in the cached data is old and it is not rescanning?</p><p>i discovered this as I was trying to make a table of inputs that could be expanded.  I also noticed that clone(true) was sometimes applying the event handlers to the wrong element in the cloned element.  for example, the click handler was being put on the TD instead of the A inside that TD.  Still trying to repro that consistently.  It might be related to this.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (2)</summary>

  <ul class="ticket-attachments">
    
      <li>
        <a href="/attachment/ticket/3302/test.html/index.html">test.html</a> (1.6 KB) - added by mv987
        <strong>August 29, 2008 05:38PM UTC</strong>.<br>
        <p>this shows the dom errors on a TABLE as i try to clone the rows</p>
      </li>
    
      <li>
        <a href="/attachment/ticket/3302/test2.html/index.html">test2.html</a> (1.6 KB) - added by mv987
        <strong>August 29, 2008 05:39PM UTC</strong>.<br>
        <p>this shows the clone problems on divs</p>
      </li>
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (6)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 29, 2008 05:42PM UTC by <span class="author">mv987</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Also, if you add the two rows, and then click 'click here' on the third row, and then add another row, the fourth row reports correctly.  however, if you just add three rows straightaway, the fourth row is wrong.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 07, 2008 11:09PM UTC by <span class="author">susurrus</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I'm running into this same problem. Has anyone at least figured out a workaround in the meantime?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 07, 2008 11:10PM UTC by <span class="author">susurrus</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Also, I get this problem on OL and UL when trying to add/remove LIs.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 07, 2008 11:26PM UTC by <span class="author">susurrus</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Seems like a workaround is to use jQuery's clone() the first time and then use the native DOM cloneNode() for the remaining times. This does cause some form inputs to be misrendered (fixed when hovering over them), but the DOM weirdness afterwards doesn't seem to occur.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 12, 2009 04:27PM UTC by <span class="author">SineSwiper</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Any new progress on this ticket?  I'm having major problems with multi-group changes on cloned rows.  For example, if I say "TD.admin BUTTON" and there's two BUTTONs there, IE will only select the first one.  Doing something like "TD.admin BUTTON.delete, TD.admin BUTTON.insert" doesn't work, either.  You actually have to do two separate commands, then IE will pick up on it.  Here are some examples:</p><pre class="wiki">
$trRow.find('TD.admindi BUTTON').removeAttr('disabled');
$trRow.find('TD.admindi BUTTON.insert').removeAttr('disabled'); // IE fix
//
$ei.parents('TD.end').andSelf().removeClass(classToggles).addClass('bad');
$ei.removeClass(classToggles).addClass('bad'); // IE fix
// 
// next example has two TD.times, one with a class of "start time",
// and another with "end time"
//
$row.find('TD.time INPUT').removeClass(classToggles).addClass(type);
$row.find('TD.end INPUT').removeClass(classToggles).addClass(type); // IE fix
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 02, 2009 12:35AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">&#92;
In Internet Explorer:&#92;
After performing a clone of a clone of an element with children, there are errors in jQuery traversal.&#92;
&#92;
see the attached files.&#92;
test.html has a table with a row with three cells.&#92;
test2.html has a div with three child divs.&#92;
&#92;
in IE, on both of these pages, if you click &#39;Add Row&#39; twice (thich clones the parent element), and then click &#39;click here&#39; in the bottom row, it reports there are 2 children in the parent element.&#92;
&#92;
The parent element obviously has three children.  clicking &#39;click here&#39; on the other two parent elements reports correctly.&#92;
&#92;
as a side note, if you click &#39;add row&#39; once, and then &#39;click here&#39; on the new element, and then &#39;add row&#39; again, the third element reports correctly in this case.&#92;
&#92;
It seems like the cloned elements are not &#39;fresh&#39; or something - as in the cached data is old and it is not rescanning?&#92;
&#92;
i discovered this as I was trying to make a table of inputs that could be expanded.  I also noticed that clone(true) was sometimes applying the event handlers to the wrong element in the cloned element.  for example, the click handler was being put on the TD instead of the A inside that TD.  Still trying to repro that consistently.  It might be related to this.&#92;
</span> → <span class="change-field-new">In Internet Explorer:&#92;
After performing a clone of a clone of an element with children, there are errors in jQuery traversal.&#92;
&#92;
see the attached files.&#92;
test.html has a table with a row with three cells.&#92;
test2.html has a div with three child divs.&#92;
&#92;
in IE, on both of these pages, if you click &#39;Add Row&#39; twice (thich clones the parent element), and then click &#39;click here&#39; in the bottom row, it reports there are 2 children in the parent element.&#92;
&#92;
The parent element obviously has three children.  clicking &#39;click here&#39; on the other two parent elements reports correctly.&#92;
&#92;
as a side note, if you click &#39;add row&#39; once, and then &#39;click here&#39; on the new element, and then &#39;add row&#39; again, the third element reports correctly in this case.&#92;
&#92;
It seems like the cloned elements are not &#39;fresh&#39; or something - as in the cached data is old and it is not rescanning?&#92;
&#92;
i discovered this as I was trying to make a table of inputs that could be expanded.  I also noticed that clone(true) was sometimes applying the event handlers to the wrong element in the cloned element.  for example, the click handler was being put on the TD instead of the A inside that TD.  Still trying to repro that consistently.  It might be related to this.&#92;
</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This should be fixed in 1.3.2; please reopen with a test case if problems remain.</p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
