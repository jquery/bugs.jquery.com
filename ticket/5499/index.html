<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#5499 (jQuery.each) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/5498/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/5500/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#5499</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">enhancement</span>
      <span class="ticket-resolution">(wontfix)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened November 12, 2009 02:54PM UTC</p>
      
        <p>Closed November 22, 2010 06:36AM UTC</p>
      
      
        <p>Last modified March 10, 2012 10:15AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery.each</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        dbjdbj
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.5">1.5</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.3.2</td>
    </tr>
    <tr>
      
        <th>Keywords:</th>
      
      <td>foreach</td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Can we please make jQuery more robust by using hasOwnProperty to check each item in the jQuery.each loop to be sure it belongs to the object itself:</p><p>1	forEach = function(obj, f) { </p><p>2	  for (var key in obj) { </p><p>3	    if (obj.hasOwnProperty(key)) { </p><p>4	      f.call(obj, obj[key], key); </p><p>5	    } </p><p>6	  } </p><p>7	}; </p><p>I know this might slow jQuery down.</p><p>Regards: DBJ</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (15)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 12, 2009 02:55PM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>&lt;code&gt;</p><p>1 forEach = function(obj, f) { </p><p>2  for (var key in obj) { </p><p>3   if (obj.hasOwnProperty(key)) { </p><p>4     f.call(obj, obj[key], key); </p><p>5   } </p><p>6  } </p><p>7 }; </p><p>&lt;/code&gt;</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 12, 2009 02:57PM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <pre class="wiki">
 1 forEach = function(obj, f) { 
 2  for (var key in obj) { 
 3   if (obj.hasOwnProperty(key)) { 
 4    f.call(obj, obj[key], key); 
 5   } 
 6  } 
 7 }; 
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 18, 2009 01:05AM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please see :</p><p>&lt;code&gt;</p><p><a href="http://github.com/DBJDBJ/jquery/blob/master/speed/dbj.each.js" class="ext-link"><span class="icon"></span>http://github.com/DBJDBJ/jquery/blob/master/speed/dbj.each.js</a></p><p><a href="http://github.com/DBJDBJ/jquery/blob/master/speed/dbj.each.htm" class="ext-link"><span class="icon"></span>http://github.com/DBJDBJ/jquery/blob/master/speed/dbj.each.htm</a></p><p>&lt;/code&gt;</p><p>It appears the speed difference might not be that bad. Slightly slower, but more robust? </p><p>This requires a lot more testing.</p><p>--DBJ</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 26, 2009 08:45AM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I added this version in  my fork:</p><pre class="wiki">
// Ticket#5499  ---&gt; use hasOwnProperty()
each: function( object, callback, args ) {
var name, length = object.length, value;
if (length === undefined || jQuery.isFunction(object)) {
    if (args) {
        for (name in object) {
         if (hasOwnProperty.call(object,name) && (callback.apply(object[name], args) === false)) break;
        }
    } else {
       for (name in object) {
            if (hasOwnProperty.call(object,name) && callback.call(value = object[name], name, value) === false)) break;
        }
    }
} else {
    if (args) {
        while (length-- && (callback.apply(object[length], args) !== false));
    } else {
        while (length-- && (callback.call(value = object[length], length, value) !== false));
    }
}
return object;
},
</pre><p>Any comments?</p><p>--DBJ</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 26, 2009 04:33PM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I think I would like to change the logic of each() ? Fiddling with the ticket <a href="/ticket/5554">#5554</a>, made me think. If each() would do only arrays as arrays, that is using lemgth, and "everything" else with for/in loop what dould happend then? What I mean is what if each() would look like this :</p><pre class="wiki">
// Ticket#5499  ---&gt; use hasOwnProperty()
// also just divide on isArray()
each: function( object, callback, args ) {
var name, value;
if ( ! jQuery.isArray(object)) {
    if (args) {
        for (name in object) {
         if (hasOwnProperty.call(object,name) && (callback.apply(object[name], args) === false)) break;
        }
    } else {
       for (name in object) {
            if (hasOwnProperty.call(object,name) && callback.call(value = object[name], name, value) === false)) break;
        }
    }
} else {
var length = object.length ;
    if (args) {
        while (length-- && (callback.apply(object[length], args) !== false));
    } else {
        while (length-- && (callback.call(value = object[length], length, value) !== false));
    }
}
return object;
},
</pre><p>Above will not iterate over jQuery instance using its length property. But is that an issue? jQuery is an object and for/in above , will iterate over its "stack" properly.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 27, 2009 09:42AM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>After few days (!), and several false commits, I think I am finally satisfied with the state of affairs in my core.js ( <a href="http://github.com/DBJDBJ/jquery/blob/master/src/core.js" class="ext-link"><span class="icon"></span>http://github.com/DBJDBJ/jquery/blob/master/src/core.js</a> )</p><p>This is really a non-trivial change and involves merge(), grep(), map(), makeArray() as users of this.</p><p>Testing and revieweing by the core team , I think, might be required here.</p><p>Thanks: Dusan</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 26, 2010 09:42AM UTC by <span class="author">dbjdbj</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Now, I realize it will be never feasible to try and improve jQuery.each(). It is way non-standard. It uses non ES5 callbacks and it uses "args" arguments which is also not part of ES5 callback footprint. It also can iterate over function arguments.</p><p>It is not feasible to "improve" it by using (native or not) Array.forEach, Object.keys, etc ...</p><p>It is much more feasible to develop jQuery.forEach( object, callback ), which will be built upon ES5 iteration and callbacks concepts.</p><p>object type/class in this instance may be : array, object, string. </p><p>And even number , or DOM node. Internally it would use native or not, ES5 Array iteration methods.</p><p>And yes it might or might not take in (while iterating) properties which are not "owned" by the object. </p><p>jQuery.forEach( object, callback, use_only_own_properties ) {</p><p>use_only_own_properties = use_only_own_properties || true ;</p><p>}</p><p>Thanks: DBJ</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 07:24PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>.hasOwnProperty(key) lookups are too costly for realistic addition to $.each()</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 07:40PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>See above comment <a href="http://bugs.jquery.com/ticket/5499#comment:8" class="ext-link"><span class="icon"></span>http://bugs.jquery.com/ticket/5499#comment:8</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 07:50PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">1.3.2</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">closed</span> → <span class="change-field-new">reopened</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 07:51PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-new">→ 1.5</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">major</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 07:52PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Will create a patch and perf tests to see if there is any benefit.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 10:29PM UTC by <span class="author">dbjdbj@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can't believe this was 11 months ago ? Thanks for looking into this again.</p><p>Benefit(s) I think are purely in conformance to ES5.</p><p>jQuery.forEach() would deliver that. </p><p>In the same time making jQuery.each() a candidate for deprecation.</p><p>A real can of worms, I think we all agree.</p><p>--DBJ</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 22, 2010 06:36AM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ wontfix</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">reopened</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There is potentially a benefit to allowing people to enumerate the prototype’s properties as well; if we forcibly filter it away, then nobody gets that benefit. If someone really needs to filter, they can do it in their callback.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 22, 2012 05:44PM UTC by <span class="author">sun</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Other frameworks are automatically filtering by hasOwnProperty() in their loop helpers.&#92;
&#92;
This change would vastly help projects like Drupal, which can be extended in unlimited ways and potentially loading any kind of externally developed JavaScript - whereas extending prototypes is considered bad practice within Drupal itself, so its core code does not necessarily account for the possibility.&#92;
&#92;
&gt; allowing people to enumerate the prototype’s properties as well&#92;
&#92;
That sounds like an extreme edge-case, for which developers can still use a custom for...in loop?&#92;
&#92;
Alternatively, I don&#39;t see&#92;
&#92;
1) why this couldn&#39;t be a function argument (shifting the internal args), or&#92;
&#92;
2) why there couldn&#39;t be a .eachOwn()?&#92;
</span> → <span class="change-field-new">1327254830110778</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Other frameworks are automatically filtering by hasOwnProperty() in their loop helpers.</p><p>This change would vastly help projects like Drupal, which can be extended in unlimited ways and potentially loading any kind of externally developed <a href="/wiki/JavaScript">JavaScript</a> - whereas extending prototypes is considered bad practice within Drupal itself, so its core code does not necessarily account for the possibility.</p><blockquote> allowing people to enumerate the prototype’s properties as well</blockquote><p>That sounds like an extreme edge-case, for which developers can still use a custom for...in loop?</p><p>Alternatively, I don't see</p><p>1) why this couldn't be a function argument (shifting the internal args), or</p><p>2) why there couldn't be a .eachOwn()?</p><p>EDIT: Related: <a href="https://github.com/jquery/sizzle/issues/21" class="ext-link"><span class="icon"></span>https://github.com/jquery/sizzle/issues/21</a></p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
