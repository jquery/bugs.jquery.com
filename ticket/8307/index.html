<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#8307 (Using $.append() to &amp;lt;link&amp;gt; a stylesheet does not work in IE9) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/8306/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/8308/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#8307</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened February 17, 2011 10:45PM UTC</p>
      
        <p>Closed February 21, 2011 07:10PM UTC</p>
      
      
        <p>Last modified March 14, 2012 11:36AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">Using $.append() to &lt;link&gt; a stylesheet does not work in IE9</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        JordanClark
      </td>
      <th>Owned by:</th>
      <td>JordanClark</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.next">1.next</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>manipulation</td>
      
        <th>Version:</th>
      
      <td>1.5</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>rwaldron, snover</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Using $.append() to &lt;link&gt; a stylesheet fails in IE9.</p><p><a href="/ticket/7350">#7350</a> identifies this bug, but it was closed as there was no test case given initially, and no response from the reporter when one was requested.</p><p>Here's a link to a test case:</p><p><a href="http://v7.galaxy-inc.com/developmenttests/csstest/css.html" class="ext-link"><span class="icon"></span>http://v7.galaxy-inc.com/developmenttests/csstest/css.html</a></p><p>This test case uses jQ 1.5, but I tested with 1.4.2, 1.4.3, and 1.4.4 with the same results.</p><p>This page loads 5 CSS stylesheets. Each stylesheet contains a single rule which applies to a different span.class, and each is loaded with a different method.</p><p>All the stylesheets load correctly with <a href="/wiki/FireFox">FireFox</a>, Chrome and Safari, IE7 and IE8.</p><p>Using IE9-RC1 (9.0.8080.16413) stylesheets linked via $.append() are not loaded.</p><p>In the CSS tab of IE Developer Tools, the affected stylesheets report the error: "This stylesheet cannot be viewed because it's source is in a different domain than the page."  Capturing requests from the Network tab shows that they are requested and served properly, but IE is just not using them.</p><p>Changing the document mode to IE7 or IE8 resolves the issue.</p><p>I can reduce this test case further if deemed necessary, but I found it useful to see examples of what does work alongside what doesn't.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 19, 2011 01:42PM UTC by <span class="author">Cameron Cooke &lt;web@cameroncooke.com&gt;</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can verify this issue.</p><p>While debugging why my webapp's stylesheet was not being loaded in IE9 I discovered this messsage in IE9's developer tools console:</p><p>"This stylesheet cannot be viewed because its source is in a different domain than the page"</p><p>The stylesheet that IE9 refuses to load is created using this method:</p><pre class="wiki">
$('&lt;link rel="stylesheet" type="text/css" href="styles.css" /&gt;').appendTo('head');
</pre><p>I can confirm that the stylesheet in indeed in the same domain as the page.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 20, 2011 02:29PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">manipulation</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ JordanClark</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project by writing a bug report.</p><p>After checking your report and test site I can't fully reproduce what your are claiming. Your page does indeed work in FF, Chrome and Opera. But when opening the site with IE 6/7/8 all fail the two <code>$.append()</code> tests (IE6 randomly also fails the <code>$.html()</code> test).</p><p>I suspect this may have to do with the fact that your test page doesn't provide any DOCTYPE (!!!), which puts any browser into quirks-mode. The <code>X-UA-Compatible</code> meta-tag you added does alleviate the missing DOCTYPE to some extend for IE but the combination might still be the cause for your problems. So please try either removing the meta-tag and thus putting IE also in quirks-mode or better add a valid DOCTYPE declaration.</p><p>Also with my <a href="http://jsfiddle.net/jitter/ZURqw/" class="ext-link"><span class="icon"></span>test case</a> which is fully valid html I don't have any failures in IE 6/7/8. I sadly can't test with IE9 but I guess it would also work with IE9.</p><p>So please try my test case with IE9RC and report your findings.</p><p></p><hr><p></p><p><a href="http://docs.jquery.com/How_to_Report_Bugs" class="ext-link"><span class="icon"></span>How to report bugs</a></p>
            </div>
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2011 04:05PM UTC by <span class="author">JordanClark</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Oops, oversight on my part in forgetting the DOCTYPE.</p><p>I added a DOCTYPE to the test page, and I'm still seeing the same issue in IE9.</p><p>I can confirm that when using IE7/8, rather than merely changing the document mode in IE9, both $.append() cases fail.  But, switching to use 1.4.4, rather than 1.5, both browser pass. (I created a new test page using 1.4.4, <a href="http://v7.galaxy-inc.com/developmenttests/csstest/css144.html)" class="ext-link"><span class="icon"></span>http://v7.galaxy-inc.com/developmenttests/csstest/css144.html)</a></p><p>Strangely not seeing any failures with your fiddle, which looks all but identical to my test page(s).</p><p>Unfortunately, I cannot test your fiddle in IE9 either. jsFiddle seems to be having it's own IE9 problems; All of the iframes have 0-height and can't be re-sized, which is why I didn't use it for my original test case.</p><p>Let me know if I can do anything else to help here.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2011 06:22PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">You can open my test case in &quot;non-code&quot; view: http://jsfiddle.net/jitter/ZURqw/show</span> → <span class="change-field-new">1298312648543377</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ rwaldron, snover</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>You can open my test case in "non-code" view: <a href="http://jsfiddle.net/jitter/ZURqw/show" class="ext-link"><span class="icon"></span>http://jsfiddle.net/jitter/ZURqw/show</a></p><p>Only difference should be that my test case has no meta-tag for the X-UA-Compatible stuff.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2011 06:31PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jitter’s testcase worksforme in IE9. The original does not, but it seems to probably be not a bug in jQuery if it works at all.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2011 06:50PM UTC by <span class="author">JordanClark</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Opening jitters test in non-code view worked for me in IE9-RC1.</p><p>I removed the meta X-UA-Compatible tag from my original test case, with no effect.</p><p>The only other difference between the two was that you were using the full URL for the stylesheets, whereas I was relying on the relative path.</p><p>Changing my $.append() &lt;link&gt;s to use the full URL fixed the problem.</p><p>While this doesn't seem like a true bug in jQuery, I finds it interesting  that using appendChild() does not have this limitation, but using $.append() does.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed February 21, 2011 07:10PM UTC by <span class="author">snover</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>IE irritatingly munges hrefs in innerHTML strings (forcing relative to absolute). There’s no way to work around this but it sounds like it is the source of your problem.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 28, 2011 04:53PM UTC by <span class="author">manciaux</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>i have the same problem. It works in jsFiddle because the href's are full urls. It fails if I take the same example on my machine and try to use relative urls in the &lt;link href's&gt;.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
