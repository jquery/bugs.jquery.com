<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7263 (jQuery.is(&amp;#39;:first&amp;#39;) not checking correctly) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7262/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7264/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7263</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 21, 2010 02:25AM UTC</p>
      
        <p>Closed November 20, 2010 02:14AM UTC</p>
      
      
        <p>Last modified March 14, 2012 01:46AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jQuery.is(&#39;:first&#39;) not checking correctly</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        qvprof@gmail.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.5">1.5</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.4.3</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>rwaldron, snover, ajpiano</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>So jQuery.is(selector) suppose to return 'true' or 'false' but it doesn't seem to work with with the pseudo selectors :first & :last.</p><pre class="wiki">
In a list of 3 items:

('li:first').is('li:last') //true, wrong, Bug?
('li:eq(0)').is('li:eq(2)')  //false, correct

http://jsfiddle.net/882Tc/
</pre><p>Tried it in a bunch of previous version and got the same result.</p><p>I'm not sure if I'm doing something wrong or I'm not understanding :first correctly... but it seems to me that :first & :last doesn't work correctly with jQuery.is()</p><p>Thanks You</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (15)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 03:26AM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ is first last equal</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">open</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've thoroughly evaluated this here <a href="http://jsfiddle.net/882Tc/10/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/882Tc/10/</a> and it would appear that if you directly compare any item as follows $('elem:first').is('elem:last') is will return a result 'true'. If however you cache the variables beforehand and do an $x.is($y) comparison that returns the correct result of false. Internally both :first,:last and .is are fairly simple in logic and it could be the case that we require additional logic to go in there to handle these cases. As mentioned, using caching allows you to get this working. Leaving open for further review.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 04:07AM UTC by <span class="author">qvprof@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hey addyosmani,</p><p>Thanks for checking the bug.</p><p>Not sure if it's related but when you cache an $x2 then do a $x.is($x2) returns false. Which it would seem should return true...</p><p><a href="http://jsfiddle.net/882Tc/11/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/882Tc/11/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 03:52PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Partly this seems to be a misconception on how `is( selector )` works.&#92;
&#92;
One thing beforehand: `is( selector )` only works with strings. From&#92;
http://api.jquery.com/is/&#92;
&gt;**selector** A **string** containing a selector expression to match elements against.&#92;
&#92;
So you can take out of the picture all the tests where you tried to&#92;
pass in an object as `is` will always return false in such a case.&#92;
&#92;
Some of the remaining sample tests are false negatives to me. The thing to keep in mind is that the `is`-function uses the matched elements as context not the document.&#92;
&#92;
[http://jsfiddle.net/jitter/hBkxs/ live test case] with explanations why I think most use cases work right.&#92;
&#92;
But there seems to be some kind of a bug. If you look at the last two tests&#92;
&#92;
{{{&#92;
&lt;ul class=&quot;test&quot; style=&quot;display:none&quot;&gt;&#92;
    &lt;li&gt;one&lt;/li&gt;&#92;
    &lt;li&gt;two&lt;/li&gt;&#92;
    &lt;li&gt;three&lt;/li&gt;&#92;
&lt;/ul&gt;&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).is( &#39;.test li:last&#39; )&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).filter( &#39;.test li:last&#39; ).length &gt; 0&#92;
}}}&#92;
&#92;
Both should return `false` in my opinion as there is only a `li` in the set of matched elements which neither has the class `test` assigned nor has it any `li` children.&#92;
&#92;
If you switch from 1.4.3 to 1.4.2 another strange thing happens.&#92;
&#92;
The `filter` test returns `false` correctly but the `is` test still returns `true`. So we have both a regression in `filter` and a case where&#92;
&#92;
{{{&#92;
$( sel ).is( secondsel ) != $( sel ).filter( secondsel ).length &gt; 0&#92;
}}}&#92;
&#92;
which shouldn&#39;t happen.&#92;
&#92;
More discussion needed. Does someone follow my view on this?</span> → <span class="change-field-new">1287700080900512</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment1:</th>
                  <td>
                    
                      <span class="change-field-old">Partly this seems to be a misconception on how `is( selector )` works.&#92;
&#92;
One thing beforehand: `is( selector )` only works with strings. From&#92;
http://api.jquery.com/is/&#92;
&gt;**selector** A **string** containing a selector expression to match elements against.&#92;
&#92;
So you can take out of the picture all the tests where you tried to&#92;
pass in an object as `is` will always return false in such a case.&#92;
&#92;
~~Some of the remaining sample tests are false negatives to me. The thing to keep in mind is that the `is`-function uses the matched elements as context not the document.&#92;
&#92;
[http://jsfiddle.net/jitter/hBkxs/ live test case] with explanations why I think most use cases work right.&#92;
&#92;
But there seems to be some kind of a bug. If you look at the last two tests&#92;
&#92;
{{{&#92;
&lt;ul class=&quot;test&quot; style=&quot;display:none&quot;&gt;&#92;
    &lt;li&gt;one&lt;/li&gt;&#92;
    &lt;li&gt;two&lt;/li&gt;&#92;
    &lt;li&gt;three&lt;/li&gt;&#92;
&lt;/ul&gt;&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).is( &#39;.test li:last&#39; )&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).filter( &#39;.test li:last&#39; ).length &gt; 0&#92;
}}}&#92;
&#92;
Both should return `false` in my opinion as there is only a `li` in the set of matched elements which neither has the class `test` assigned nor has it any `li` children.&#92;
&#92;
If you switch from 1.4.3 to 1.4.2 another strange thing happens.&#92;
&#92;
The `filter` test returns `false` correctly but the `is` test still returns `true`. So we have both a regression in `filter` and a case where&#92;
&#92;
{{{&#92;
$( sel ).is( secondsel ) != $( sel ).filter( secondsel ).length &gt; 0&#92;
}}}&#92;
&#92;
which shouldn&#39;t happen.~~&#92;
&#92;
More discussion needed. Does someone follow my view on this?</span> → <span class="change-field-new">1287700151550853</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>_comment2:</th>
                  <td>
                    
                      <span class="change-field-old">Partly this seems to be a misconception on how `is( selector )` works.&#92;
&#92;
One thing beforehand: `is( selector )` only works with strings. From&#92;
http://api.jquery.com/is/&#92;
&gt;**selector** A **string** containing a selector expression to match elements against.&#92;
&#92;
So you can take out of the picture all the tests where you tried to&#92;
pass in an object as `is` will always return false in such a case.&#92;
&#92;
~~Some of the remaining sample tests are false negatives to me. The thing to keep in mind is that the `is`-function uses the matched elements as context not the document.~~&#92;
&#92;
~~[http://jsfiddle.net/jitter/hBkxs/ live test case] with explanations why I think most use cases work right.~~&#92;
&#92;
~~But there seems to be some kind of a bug. If you look at the last two tests~~&#92;
&#92;
{{{&#92;
&lt;ul class=&quot;test&quot; style=&quot;display:none&quot;&gt;&#92;
    &lt;li&gt;one&lt;/li&gt;&#92;
    &lt;li&gt;two&lt;/li&gt;&#92;
    &lt;li&gt;three&lt;/li&gt;&#92;
&lt;/ul&gt;&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).is( &#39;.test li:last&#39; )&#92;
&#92;
//true -&gt; ERROR&#92;
$( &#39;li:first&#39; ).filter( &#39;.test li:last&#39; ).length &gt; 0&#92;
}}}&#92;
&#92;
~~Both should return `false` in my opinion as there is only a `li` in the set of matched elements which neither has the class `test` assigned nor has it any `li` children.~~&#92;
&#92;
~~If you switch from 1.4.3 to 1.4.2 another strange thing happens.~~&#92;
&#92;
~~The `filter` test returns `false` correctly but the `is` test still returns `true`. So we have both a regression in `filter` and a case where~~&#92;
&#92;
{{{&#92;
$( sel ).is( secondsel ) != $( sel ).filter( secondsel ).length &gt; 0&#92;
}}}&#92;
&#92;
~~which shouldn&#39;t happen.~~&#92;
&#92;
More discussion needed. Does someone follow my view on this?</span> → <span class="change-field-new">1287707067294553</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
        
          
        
          
            <div class="ticket-comment-body">
              <p>Partly this seems to be a misconception on how <code>is( selector )</code> works.</p><p>One thing beforehand: <code>is( selector )</code> only works with strings. From</p><p><a href="http://api.jquery.com/is/" class="ext-link"><span class="icon"></span>http://api.jquery.com/is/</a></p><p>&gt;**selector** A **string** containing a selector expression to match elements against.</p><p>So you can take out of the picture all the tests where you tried to</p><p>pass in an object as <code>is</code> will always return false in such a case.</p><p>~~Some of the remaining sample tests are false negatives to me. The thing to keep in mind is that the <code>is</code>-function uses the matched elements as context not the document.~~</p><p>~~[http://jsfiddle.net/jitter/hBkxs/ live test case] with explanations why I think most use cases work right.~~</p><p>But there seems to be some kind of a bug. If you look at the last two tests</p><pre class="wiki">
&lt;ul class="test" style="display:none"&gt;
    &lt;li&gt;one&lt;/li&gt;
    &lt;li&gt;two&lt;/li&gt;
    &lt;li&gt;three&lt;/li&gt;
&lt;/ul&gt;

//true -&gt; ERROR
$( 'li:first' ).is( '.test li:last' )

//true -&gt; ERROR
$( 'li:first' ).filter( '.test li:last' ).length &gt; 0
</pre><p>Both should return <code>false</code> in my opinion ~~as there is only a <code>li</code> in the set of matched elements which neither has the class <code>test</code> assigned nor has it any <code>li</code> children.~~</p><p>~~If you switch from 1.4.3 to 1.4.2 another strange thing happens.~~</p><p>~~The <code>filter</code> test returns <code>false</code> correctly but the <code>is</code> test still returns <code>true</code>. So we have both a regression in <code>filter</code> and a case where~~</p><pre class="wiki">
$( sel ).is( secondsel ) != $( sel ).filter( secondsel ).length &gt; 0
</pre><p>~~which shouldn't happen.~~</p><p>More discussion needed. Does someone follow my view on this?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2010 06:55PM UTC by <span class="author">qvtree</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hey jitter, thanks for testing.</p><p>I didn't realize that jQuery.is filters based on it's context. I always thought it was global.</p><p>I ran a few more <a href="http://jsfiddle.net/hBkxs/4/" class="ext-link"><span class="icon"></span>test cases</a> and think that it actually isn't a bug after all. But what do you guys think?</p><p>Seems the reason why:</p><pre class="wiki">
//Expected False but its True?
log($( 'li:first' ).is( '.test li:last' ), false);
</pre><p>Might be because li:first IS below .test AND is :last in it's context (of only one list item)</p><p>So perhaps the jQuery.is documentation just needs to make it clearer that it's contextual and explains that for hierarchy searches, it goes outside it's context, for pseudo searches it stays within it's context.</p><p>But perhaps it wasn't meant to work like that.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2010 12:23AM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Hmm now I am somewhat confused. After looking at this again I ask myself how/why earlier today I came to the conclusion that <code>jQuery.is( selector )</code> is using the matched elements as context and not <code>document</code>.</p><p>Right now I came to the opposite conclusion which would match the original statements of qvprof and addyosmani and make the better part of my previous comment invalid (that's why I did stroke it out). Maybe I was looking at something else...wtf?</p><p>Can someone double check this?</p><p>So most of my previous comment can be forgotten because it is wrong (or is it). The only thing which stands is my remark about the tests which pass in an object.</p><p>I made some further tests <a href="http://www.jsfiddle.net/jitter/4e7TX/" class="ext-link"><span class="icon"></span>test case</a> trying to trim down where the bug occurs. And especially this version of the bug I found doesn't make any sense at all</p><pre class="wiki">
&lt;ul class="test" style="display:none"&gt;
    &lt;li&gt;one&lt;/li&gt;
    &lt;li&gt;two&lt;/li&gt;
    &lt;li&gt;three&lt;/li&gt;
&lt;/ul&gt;
&lt;ul style="display:none"&gt;
    &lt;li&gt;&lt;p&gt;asd&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

$( 'li:first' ).is( 'ul:last p' ) //why does this yield true
$( 'li:first' ).is( 'ul p:last' ) //why does this yield true
</pre><p>It looks like there are some bigger problems with some pseudo selectors (<code>:first</code>, <code>:last</code>, <code>:eq()</code>, <code>:even</code>, <code>:odd</code> and maybe others too) they don't occur always. Sometimes it needs a special formed selector to trigger the bug (see also my comments in the testcase)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 12, 2010 10:37PM UTC by <span class="author">hoganlong@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>It seems to me that the real problem is the word "is".  If this function was called "has" all the test cases would make sense.  There would be no bug.</p><p>Right now the functionality is a "has", the test is performed in the context of the result.  The first item of a list is also the last item of itself.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 13, 2010 07:42AM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ rwaldron, snover, ajpiano</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>I wanted to close this as a ticket requiring improved documentation on the expected/actual behavior of 'is' however, I think a team review of Jitter's comments are worth taking into account. What is the general feeling on the issues presented here?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 15, 2010 05:53PM UTC by <span class="author">awellis13</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I still think there's a bug related to is(':first'). Isn't :first an alias of :first-child? The following does not work:</p><pre class="wiki">
$('div', $(this)).each(function(){
   if ($(this).is(':first')) {
       $(this).addClass('current');
   } else {
       $(this).hide();
   }
});
</pre><p>However, this does work:</p><pre class="wiki">
$('div', $(this)).each(function(){
   if ($(this).is(':first-child')) {
       $(this).addClass('current');
   } else {
       $(this).hide();
   }
});
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 15, 2010 06:13PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">is first last equal</span> → <span class="change-field-new">is first last equal needsdoc</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>:first is not an alias for :first-child.</p><p>Just so everyone is clear what the bug is here, it seems to be thatthat jQuery's custom selectors that are used for checking elements against their <strong>position in the jQuery object</strong> (:first, :last, :eq, etc)  are failing when used in .is() against another stringy selector.  These selectors are NOT part of QSA, but are obviously useful for a variety of reasons.  </p><p>Part of me isn't even sure there is something that is worth fixing here, it might be more of a docs issue.  While there are lots of valid uses for something that checks DOM position, like .is(":last-child"), I'm unable to think of a viable use case for testing elements against their relative position in an arbitrary selection of elements, which is what .is(":last") does.  </p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 15, 2010 07:17PM UTC by <span class="author">awellis13</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:9 ajpiano]:</p><blockquote> :first is not an alias for :first-child.  Just so everyone is clear what the bug is here, it seems to be thatthat jQuery's custom selectors that are used for checking elements against their <strong>position in the jQuery object</strong> (:first, :last, :eq, etc)  are failing when used in .is() against another stringy selector.  These selectors are NOT part of QSA, but are obviously useful for a variety of reasons.    Part of me isn't even sure there is something that is worth fixing here, it might be more of a docs issue.  While there are lots of valid uses for something that checks DOM position, like .is(":last-child"), I'm unable to think of a viable use case for testing elements against their relative position in an arbitrary selection of elements, which is what .is(":last") does.  </blockquote><p>I guess you're right. It is just confusing reading this in the docs for :first:</p><pre class="wiki">
The :first pseudo-class is equivalent to :eq(0). It could also be written
as :lt(1). While this matches only a single element, :first-child can match
more than one: One for each parent.
</pre><p>It just makes it sound like :first could be used like :first-child for that kind of scenario. I'll admit, the jQuery documentation could use a major overhaul; especially the plugin authoring documentation.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 15, 2010 07:54PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>There are a lot of cases where :first and :first-child will act the same, and a lot of places where they won't.  .is() is clearly one of these cases. </p><p>WRT to the plugin authoring docs, if you would like to discuss that further, we'd welcome you to hop onto IRC (freenode - #jquery-dev) or start a forum thread on your ideas.  The plugin authoring guide was just redone a few months ago, and seems to me to be in reasonable shape.  In any case, it's outside the scope of this ticket so I'mma stop typing now :)</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 19, 2010 01:18PM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old">is first last equal needsdoc</span> → <span class="change-field-new">needsdocs is first last equal</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed November 20, 2010 02:14AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">open</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jitter, you were right about the context being the current set. So...</p><pre class="wiki">
$("li:first").is("li:last")
</pre><p>selects the first </p><pre class="wiki">li</pre> in the document and compares it to the the selector. The <pre class="wiki">is()</pre> method is basically:<p></p><pre class="wiki">
jQuery.filter( selector, this ).length &gt; 0
</pre><p>Where </p><pre class="wiki">selector=="li:last"</pre> and <pre class="wiki">this</pre> is a jQuery set containing the element selected by <pre class="wiki">li:first</pre>. <p></p><p>So, does a single </p><pre class="wiki">li</pre> element match the selector <pre class="wiki">li:last</pre>? Yes!<p></p><p>Note that this also explains the </p><pre class="wiki">$('li:eq(0)').is('li:eq(2)')</pre> case being false, a single <pre class="wiki">li</pre> element will never match the selector <pre class="wiki">li:eq(2)</pre>.<p></p><p>I'm going to close this ticket but leave the needsdocs so we can review and clarify.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed January 10, 2011 07:56PM UTC by <span class="author">jmm</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I ran into the same issue and found this report.  If the current behavior of </p><pre class="wiki">is()</pre> -- working only in the context of the current set -- is the intended behavior, then I'd say the documentation definitely needs work, because it's not at all clear that it will behave that way.<p></p><p>I don't know what implementation issues it would present, but it seems like </p><pre class="wiki">is()</pre> would be more useful if it wasn't limited to the context of the current set and could use an arbitrary selector.<p></p><p>I ran into this while writing a keydown handler for elements in a modal dialog.  While it's displayed I want to restrict the keyboard focus to elements in the dialog.  So for example, when pressing Tab on the last focusable element in the dialog (or Shift+Tab on the first) I want to prevent focus from being given to an element outside of the dialog.  I ran into this issue when I tried to accomplish that using </p><pre class="wiki">is()</pre> like this:<p></p><pre class="wiki">
$( this ).is( "#dialog input:first" )
</pre><p>(Where </p><pre class="wiki">this</pre> is any INPUT element in the dialog.)<p></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed May 20, 2011 06:53PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">needsdocs is first last equal</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
