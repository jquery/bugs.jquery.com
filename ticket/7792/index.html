<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#7792 (.removeAttr(&amp;quot;contentEditable&amp;quot;)) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/7791/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/7793/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#7792</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(worksforme)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened December 16, 2010 01:47PM UTC</p>
      
        <p>Closed December 16, 2010 02:59PM UTC</p>
      
      
        <p>Last modified March 31, 2011 08:04AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.removeAttr(&quot;contentEditable&quot;)</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        admin@hostowisko.pl
      </td>
      <th>Owned by:</th>
      <td>admin@hostowisko.pl</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.6">1.6</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.4.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>$("div").removeAttr("contentEditable");</p><p>FF 3.6.12 firebug 1.6.0:</p><p>An invalid or illegal string was specified" code: "12</p><p>[Wstrzymuj na tym błędzie] attr:function(a,b,d,e){if(!a||a.nodeTy...n(b=a.getAttributeNode("tabIndex"))&& </p><p>I will add that there is no DIV to having Attr "contentEditable", but even as it is - the error is the same.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (8)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 02:32PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Thank you for submitting a ticket to the jQuery Bug Tracker. In order for us to fully investigate the issue you are experiencing, please provide a reduced test case that reproduces the issue experienced on [http://jsfiddle.net http://jsfiddle.net]. &#92;
&#92;
I have written a brief test case for this myself which you can find here [http://jsfiddle.net/JYYY5/ Live Test Case]. This is working fine on FF 3.6.10 and 3.6.11 but I&#39;ll verify behaviour with .12 and let you know if this is working fine for me across all recent versions.</span> → <span class="change-field-new">1292509987607484</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ admin@hostowisko.pl</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Thank you for submitting a ticket to the jQuery Bug Tracker. In order for us to fully investigate the issue you are experiencing, please provide a reduced test case that reproduces the issue experienced on <a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span><a href="http://jsfiddle.net" class="ext-link"><span class="icon"></span>http://jsfiddle.net</a></a>. </p><p>I have written a brief test case for this myself which you can find here <a href="http://jsfiddle.net/JYYY5/" class="ext-link"><span class="icon"></span>Live Test Case</a>. This is working fine on FF 3.6.10 and 3.6.11 but I'll verify behaviour with .12 and let you know if this is working fine for me across all recent versions too.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 02:54PM UTC by <span class="author">admin@hostowisko.pl</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>try this one: <a href="http://jsfiddle.net/JYYY5/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/JYYY5/1/</a></p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 02:59PM UTC by <span class="author">addyosmani</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ worksforme</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Update: Testing your bug with jQuery 1.4.4 & FF 3.6.12 (and using 'div' as the selector of choice) everything seems to be working fine here without any errors being incurred. </p><p>Please see here for my <a href="http://jsfiddle.net/JYYY5/2/" class="ext-link"><span class="icon"></span>second test case</a>. Also, I've tested the fiddle you submitted - if you take a look at the selector, you are camel casing contenteditable in your selector, but not in the attribute reference being used. See here for a working version <a href="http://jsfiddle.net/JYYY5/5/" class="ext-link"><span class="icon"></span>Live Test Case 3</a>.</p><p>Closing this ticket as works for me but do let us know if you have further information or test cases which reproduce the issue submitted.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 16, 2010 03:26PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>on IE 8.0.7600 have the same problem.</p><p>screenshot from ff: <a href="http://www.freeimagehosting.net/uploads/e68c3e8923.png" class="ext-link"><span class="icon"></span>http://www.freeimagehosting.net/uploads/e68c3e8923.png</a></p><p>Your case I run correctly. The error appears only with: $(document).ready(function()</p><p><strong></strong></p><p>$(document).ready(function() {$("div").removeAttr("contentEditable");alert("ok");});</p><p></p><p>On FF and IE alert "ok" don't pops up.</p><p><a href="http://jsfiddle.net/JYYY5/6/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/JYYY5/6/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 17, 2010 12:31AM UTC by <span class="author">jitter</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:4 anonymous]:</p><blockquote> on IE 8.0.7600 have the same problem.</blockquote><p>Did you read the response of addyosmani? It has nothing to do with the ready-function but with</p><blockquote> camel casing contenteditable in your selector, but not in the attribute reference being used</blockquote>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed December 17, 2010 07:50AM UTC by <span class="author">admin@hostowisko.pl</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Reading, reading.</p><p>I know where is the problem: .removeAttr("contenteditable") lowercase works, but if you insert a large "E "for FF and IE I get an error: .removeAttr("contentEditable").</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 30, 2011 11:00AM UTC by <span class="author">peter@jaric.org</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I hit this also, with the code below. In short, it gets the name of the attribute from the element itself and then calls removeAttr on this name without modification. The documentation on removeAttr does not say that attribute names must be lower case.</p><p>The loop goes through many attributes fine before hitting contentEditable and throwing an exception. In the debugger I tried to change the attribute name to lower case before calling removeAttr and then it went well.</p><p>This happens on IE, but not on FF or Chrome for me, but I did not create the element so it might be it doesn't even have contentEditable on FF or Chrome.</p><p>(attributeWhitelists is a map from element names to arrays of attribute names)</p><pre class="wiki">
function getAttributeNames(el) {
    var attrNames = [];
    for (var i = 0, attrs = el.attributes, l = attrs.length; i &lt; l; i++) {
        attrNames.push(attrs.item(i).nodeName);
    }    
    return attrNames;
}

function cleanAttributes(element, attributeWhitelists) {
    var domElement = element.get(0);
    var attributeNames = getAttributeNames(domElement);
    var elementName = domElement.nodeName.toLowerCase();
    var validAttributes = attributeWhitelists[elementName];

    for (var i = 0; i &lt; attributeNames.length; i++) {
        if ($.inArray(attributeNames[i], validAttributes) === -1) {
            element.removeAttr(attributeNames[i]);
        }
    }    
}
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed March 31, 2011 08:04AM UTC by <span class="author">peter@jaric.org</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>OK, obviously I didn't follow the bug reporting guide lines. I'll post again with a reduced example in a jsfiddle if there is any interest.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
