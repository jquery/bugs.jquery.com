<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#12282 (1.8.0 regression - document ready is fired too early on IE 9/10) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/12281/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/12283/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#12282</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 13, 2012 01:12PM UTC</p>
      
        <p>Closed August 20, 2012 12:20PM UTC</p>
      
      
        <p>Last modified October 15, 2012 08:03PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">1.8.0 regression - document ready is fired too early on IE 9/10</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        vrodic@gmail.com
      </td>
      <th>Owned by:</th>
      <td>mikesherov</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        high
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.8.1">1.8.1</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>core</td>
      
        <th>Version:</th>
      
      <td>1.8.0</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>Hi, </p><p>We have a weird banner system that injects an external script with document.write that triggers a regression in $(document).ready() in jQuery 1.8.0 (jQuery 1.7.2 works fine).</p><p>Basically, document ready is fired before the object defined below document ready code section is called (on IE 9 or IE10 - IE 10 is from last years Windows 8 developer preview). </p><p>I've created a minimal test case at:</p><p><a href="http://www.centarnekretnina.net/dev/test.html" class="ext-link"><span class="icon"></span>http://www.centarnekretnina.net/dev/test.html</a></p><p>The page should execute alert("test");</p><p>IE10 dev tools console outputs: </p><p>SCRIPT5007: Unable to get value of the property 'init': object is null or undefined</p><p>test.html, line 20 character 5</p><p>You can download the two small files (test.html and test2.js), change the jquery version and see that this works fine on jQuery 1.7.2</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (31)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 01:18PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ vrodic@gmail.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project! Please provide a complete reduced test case on jsFiddle to help us assess your ticket.</p><p>Additionally, be sure to test against the jQuery Edge version to ensure the issue still exists. To get you started, use this boilerplate:  <a href="http://jsfiddle.net/FrKyN/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/FrKyN/</a> Open the link and click to "Fork" (in the top menu) to get started.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 01:38PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can't reliably reproduce it with jsfiddle (it probably introduces more side-effects), and my version is pretty minimal already. </p><p>I've created another version:</p><p><a href="http://www.centarnekretnina.net/dev/test3.html" class="ext-link"><span class="icon"></span>http://www.centarnekretnina.net/dev/test3.html</a></p><p>That uses <a href="http://code.jquery.com/jquery-git.js" class="ext-link"><span class="icon"></span>http://code.jquery.com/jquery-git.js</a> (jQuery edge)</p><p>You may have to reload the page for the error (no "test" alert) to occur.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 01:44PM UTC by <span class="author">vrodic@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Actually I've found a way to reproduce it on jsfiddle (testing on Windows 8 dev preview - IE10)</p><p><a href="http://jsfiddle.net/dKDdj/2/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dKDdj/2/</a></p><p>After it loads once, click jsfiddle "Run" to run again and take a look at IE10 console (open it before you click run)</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 05:59PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">core</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">None</span> → <span class="change-field-new">1.8.1</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-old">vrodic@gmail.com</span> → <span class="change-field-new">mikesherov</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">high</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 09:57PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Here is an update that reproduces it without any external resources beyond jQuery.</p><p><a href="http://jsfiddle.net/dKDdj/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dKDdj/4/</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 13, 2012 10:34PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>This is great, thanks.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 15, 2012 02:47PM UTC by <span class="author">Denis</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Confirmed in IE9 too.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 16, 2012 11:25AM UTC by <span class="author">SoonDead</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Confirmed in may application too.&#92;
&#92;
$(document).ready() fires before all the javascript files are loaded in IE9.</span> → <span class="change-field-new">1345116342282811</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Confirmed in my application too.</p><p>$(document).ready() fires before all the javascript files are loaded in IE9.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 16, 2012 04:05PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Rather than more "me too", it would be helpful if you guys posted examples and links to see this in action.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 16, 2012 05:07PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-new">→ needsdocs</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>So, this fiddle:  <a href="http://jsfiddle.net/dKDdj/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/dKDdj/4/</a> does not exhibit a problem with .ready(). .ready() is a deferred <a href="http://api.jquery.com/category/deferred-object/" class="ext-link"><span class="icon"></span>http://api.jquery.com/category/deferred-object/</a> . </p><p>If the DOM is ready when you call it, it will execute synchronously.</p><p>If the DOM is not ready when you call it, it will execute asynchronously.</p><p>In the example provided, you are relying on the async execution of .ready(), which isn't a gaurantee. This is because .ready() fires a bit earlier in 1.8 because it does a new check for DOM readiness.</p><p>If someone has proof that the DOM can't be manipulated on .ready(), I'd love to hear about it. </p><p><a href="/wiki/SoonDead">SoonDead</a>, Denis, do you have examples?</p><p>needs docs to re-emphasis the promisey nature of .ready()</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:11">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 16, 2012 09:08PM UTC by <span class="author">markoj21@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:11">comment:11</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Here is the issue in jsFiddle thank you vrodic, we were having this issue when we just updated to 1.8</p><p>Using the mvc3, with partials this problem presents it self in many areas. It works correctly with IE7 and IE8, Chrome and Firefox.</p><p>When you first access the js fiddle link it will run correctly, press the run button it will break. if you change to jquery 1.7.2 it runs correctly it both scenarios.</p><p><a href="http://jsfiddle.net/tgo16/H6zte/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/tgo16/H6zte/4/</a></p><p>Test machine IE9 9.0.8112.16421, Windows 7 SP1</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:12">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 16, 2012 09:18PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:12">comment:12</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>markoj21, please read what I wrote. Of course it will break, as you're assuming something about .ready() that just isn't true. It isn't gauranteed to execute asynchronously.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:13">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 09:46AM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:13">comment:13</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>So, it seems that in many cases (<a href="/wiki/WebKit">WebKit</a>, Gecko, IE &lt; 9) ready() currently fires asynchronously but in IE9 it does not. I get that there is no guarantee, but it is likely that many people have been making this incorrect assumption and so the change in detection logic is exposing it and causing breakage. This is going to be a headache to fix...</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:14">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 10:02AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:14">comment:14</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I don't see how it is a headache. It's as simple as moving the call to <code>$.ready</code> at the end of the inline script. Where it should have been in the first place.</p><p>It's not so much that <code>ready</code> is asynchronous in other browsers but rather that the document is actually ready when executing the inline script in IE9. IE9 is better at detecting DOM readiness than other browsers here, seeing as, if the inline script is being executed, it means it was parsed thus so was the whole document.</p><p>Anyway, since the dom is ready, the handler is called immediately. The real problem is that our documentation doesn't emphasize the fact a handler will be called immediately if the DOM is ready, even though it's been the case since DOM readiness was first introduced in jQuery.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:15">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 02:47PM UTC by <span class="author">ChrisS</span></span>
        <a class="ticket-change-link" href="#comment:15">comment:15</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've another situation where $(document).ready() is fired too early.</p><p>I've a JSP with a default page buffer of 8kb. Which means if the buffer is full it will be flushed and the browser gets the content generated until this time.</p><p>Lets assume a client has submitted a search request and the search will take a few seconds. In case the page buffer is full, for example the header and the navigation was generated, it will be flushed to the client, before the server side search is done and has generated any content. In my case the client has already received some script blocks with a $(document).ready() call. But the javascript the $(document).ready() call should execute is at the end of the page. And due to the server side search, which takes a while, the page isn't completely generated yet.</p><p>Now the Problem is that IE9 sometimes fires $(document).ready() even if the page isn't complete generated.</p><p>Below is a little JSP example which demonstrates this issue. I would expect to see "PAGE END" in the console at first. But sometimes I see "document ready" in the console at first.</p><pre class="wiki">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"&gt;
   &lt;head&gt; 
		&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8" /&gt;
		&lt;title&gt;Test&lt;/title&gt;
		&lt;script type="text/javascript" src="/js/jquery-core/1.8/jquery-1.8.min.js"&gt;&lt;/script&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;h1&gt;TEST&lt;/h1&gt;
		
		&lt;script type="text/javascript"&gt;
		$(document).ready(function() {
			console.log("document ready");
		});
		&lt;/script&gt;

		&lt;%
			// Force the buffer to flush (default is 8kb)
			for (int i = 0; i &lt; (8 * 1024); i++) {
				out.write(" ");
			}
		%&gt;
	
		&lt;h2&gt;Sleeping 1 second (simulating server side process)&lt;/h2&gt;
		&lt;%	
			try {
				Thread.sleep(1000);
			} catch(Exception e) {
			}
		%&gt;

		&lt;h2&gt;ready&lt;/h2&gt;
		&lt;p&gt;&lt;a href="?"&gt;click&lt;/a&gt;&lt;/p&gt;

		&lt;script type="text/javascript"&gt;
			console.log("PAGE END");
		&lt;/script&gt;
		
	&lt;/body&gt;
&lt;/html&gt;
</pre>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:16">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 02:52PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:16">comment:16</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@ChrisS, are the results consistent if there is some HTML below the "PAGE END" log, or if the <a href="/wiki/JavaScript">JavaScript</a> in that block does a <code>document.write</code>? Just curious about the conditions that might affect it.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:17">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 03:11PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:17">comment:17</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>If that's the case, it could be the nail in the coffin of readyState === "interactive" :/</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:18">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 03:14PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:18">comment:18</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>BTW, isn't that what longLoad.php in test/data/event is supposed to test for?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:19">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 03:17PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:19">comment:19</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Could explain this: <a href="http://swarm.jquery.org/result/154890" class="ext-link"><span class="icon"></span>http://swarm.jquery.org/result/154890</a> though I have no clue why it wouldn't fail before.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:20">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 05:22PM UTC by <span class="author">cdowns</span></span>
        <a class="ticket-change-link" href="#comment:20">comment:20</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I've had issues when a page has an .ready in the header that calls something from a script block in the body. It looks similar to an issue that requireJS had (<a href="https://github.com/requirejs/domReady/commit/a3e0dd8b6d3d3ee636ff0ca6a5a7c302d6ab33bf)." class="ext-link"><span class="icon"></span>https://github.com/requirejs/domReady/commit/a3e0dd8b6d3d3ee636ff0ca6a5a7c302d6ab33bf).</a> The issue when debugging in IE9 seems to show up due to line 835 of core.js (changed in f5fd41252e3ae48a655c5da4a0b2910bb897b6ed):</p><pre class="wiki">
if ( document.readyState === "complete" || ( document.readyState !== "loading" && document.addEventListener ) )
</pre><p>IE9 at that point is readyState === "interactive" so it goes through with the .ready, but then you get to line 379 of the .ready:</p><pre class="wiki">
// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
		if ( !document.body ) {
			return setTimeout( jQuery.ready, 1 );
		}
</pre><p>IE9 will give back a document.body that hasn't run all the scripts. Would it be better at that section to actually do the same .addEventListener stuff that is in the ready.promise instead of just calling the ready again until document.body exists? So for the case that document.body doesn't exist, couldn't you rely on the DOMContentLoaded firing like you do in the ready promise? </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:21">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 06:28PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:21">comment:21</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@cdowns, the problem here seems to be that document.body exists, and readyState === "interactive", but DOM clearly isn't ready. I think we can fix this by changing the location in which we do Diego Perini's famous doScroll check. We'll see.</p><p>@jaubourg, it's not what longLoad.php is doing. That is a long loading iframe on a page to keep interactive going even though DOM is ready. This test case would be partial page load triggers interactive too early when DOM clearly isn't ready.</p><p>Hopefully, I can repro this. Silly IE.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:22">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 06:33PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:22">comment:22</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">@mikesherov, maybe @cdowns has something there. If we could detect whether the browser supports `DOMContentModified` we could just ignore `.readyState` entirely, which would cover IE9 and IE10. Unfortunately, the trick we already use in support.js runs afoul of Content Security policy so we can&#39;t do it that way.</span> → <span class="change-field-new">1345228625809851</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>@mikesherov, maybe @cdowns has something there. If we could detect whether the browser supports <code>DOMContentLoaded</code> we could just ignore <code>.readyState</code> entirely, which would cover IE9 and IE10. Unfortunately, the trick we already use in support.js runs afoul of Content Security policy so we can't do it that way.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:23">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 17, 2012 10:05PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:23">comment:23</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@ChrisS @SoonDead  @vrodic @mikesherov @jaubourg </p><p>I have the same problem : </p><p>(jQuery 1.8.0) -  IE9 sometimes fires $(document).ready() even if the page isn't complete generated.</p><p>works fine on jQuery 1.7.2 </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:24">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 19, 2012 09:42PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:24">comment:24</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="https://github.com/jquery/jquery/pull/901" class="ext-link"><span class="icon"></span>https://github.com/jquery/jquery/pull/901</a></p><p>ChrisS  and cdowns, thank you thank you thank you.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:25">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 20, 2012 12:20PM UTC by <span class="author">Mike Sherov</span></span>
        <a class="ticket-change-link" href="#comment:25">comment:25</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fix <a href="/ticket/12282">#12282</a>. IE has premature .readyState == "interactive". Close gh-901. </p><p> Changeset: 0f553ed0ca0c50c5f66377e9f2c6314f822e8f25</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:26">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 21, 2012 05:44AM UTC by <span class="author">ChrisS</span></span>
        <a class="ticket-change-link" href="#comment:26">comment:26</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I can confirm that the bug is fixed, now. The current version from github works fine in my test and production scenario.</p><p>Thank you, mikesherov.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:27">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 23, 2012 06:02PM UTC by <span class="author">michaeldobbins1@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:27">comment:27</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I also confirmed this behavior in IE9. It doesn't seem to matter whether you are in IE8 compatibility mode or 'edge' (eg. &lt;meta http-equiv="X-UA-Compatible" content="IE=8,chrome=1,requiresActiveX=true" /&gt;). I noticed that ie9 was inconsistent in finding all of the items in a collection on $(document).ready; I added an alert right after my $(document).ready call and found that the alert would popup before all of the DOM was rendered. I upgraded to the github jquery source (1.8.1pre) and all is good; $(document).ready doesn't fire until the DOM is fully loaded. Thanks for getting this fixed - just can't wait for the official release of 1.8.1. There are several other issues with ie9 and jQuery 1.8, which I am hoping will be resolved in the upcoming release. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:28">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 25, 2012 07:19PM UTC by <span class="author">lucas@lucasmaia.com</span></span>
        <a class="ticket-change-link" href="#comment:28">comment:28</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please, I can't see the solution. I have the same problem with IE9. Can I help me?</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:29">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 25, 2012 07:31PM UTC by <span class="author">anonymous</span></span>
        <a class="ticket-change-link" href="#comment:29">comment:29</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please, put the file to download. Thanks</p><p>Replying to [comment:26 ChrisS]:</p><blockquote> I can confirm that the bug is fixed, now. The current version from github works fine in my test and production scenario.  Thank you, mikesherov.</blockquote>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:30">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 03, 2012 07:31PM UTC by <span class="author">tentonaxe</span></span>
        <a class="ticket-change-link" href="#comment:30">comment:30</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Was it intended for this fix to cause IE7 and IE8 to fire document.ready later than modern browsers? http://jsfiddle.net/Camilo/PFWmS/ it now seems to wait until onload.</span> → <span class="change-field-new">1349293019684942</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Was it intended for this fix to cause IE7 and IE8 to fire document.ready later than modern browsers? <a href="http://jsfiddle.net/Camilo/PFWmS/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Camilo/PFWmS/</a> it now seems to wait until onload.</p><p>Edit: I guess it has always been that way.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:31">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 15, 2012 08:03PM UTC by <span class="author">mikesherov</span></span>
        <a class="ticket-change-link" href="#comment:31">comment:31</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>keywords:</th>
                  <td>
                    
                      <span class="change-field-old strikethrough">needsdocs</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
