<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10556 (.live() + .trigger(&amp;quot;change&amp;quot;) throws a run time error) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10555/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10557/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#10556</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(invalid)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened October 21, 2011 05:14PM UTC</p>
      
        <p>Closed October 22, 2011 02:56PM UTC</p>
      
      
        <p>Last modified March 14, 2012 08:11AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.live() + .trigger(&quot;change&quot;) throws a run time error</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        prashantjain68
      </td>
      <th>Owned by:</th>
      <td>prashantjain68</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.6.4</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>I have an element which is not added to the DOM. An event handler has been attached via .live(). The element dispatches a change event via trigger() and I get the following error ...</p><p>&lt;DocumentFragment&gt; has no method getAttribute.</p><p>Sample source code ...</p><p>&lt;html&gt;</p><p>    &lt;head&gt;</p><p>        &lt;script type="text/javascript" src="jquery.js"&gt;&lt;/script&gt;</p><p>        &lt;script&gt;</p><p>            $(document).ready(function() {</p><p> jQuery("[groupId='hobbies']").live("change", myHandler);</p><p> var $checkbox = $("&lt;input type='checkbox' groupId='hobbies'/&gt;");</p><p> $checkbox.trigger("change");</p><p>            });</p><p>            function myHandler() {</p><p>            }</p><p>        &lt;/script&gt;</p><p>    &lt;/head&gt;</p><p>    &lt;body&gt;</p><p>    &lt;/body&gt;</p><p>&lt;/html&gt;</p><p>NOTE: I do not get an error If this checkbox was appended to the DOM.</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 05:28PM UTC by <span class="author">prashantjain68</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>jsFiddle url ....</p><p><a href="http://jsfiddle.net/sMByu/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/sMByu/</a></p><p>I used chrome and dev tools will show the error I mentioned.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 21, 2011 11:35PM UTC by <span class="author">prashantjain68</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The problem is in the function ...</p><p>        ATTR: function( elem, match ) {</p><p>            var name = match[1],</p><p>                result = Expr.attrHandle[ name ] ?</p><p>                    Expr.attrHandle[ name ]( elem ) :</p><p>                    elem[ name ] != null ?</p><p>                        elem[ name ] :</p><p>                        elem.getAttribute( name ),</p><p>           ....</p><p>           ....</p><p>           ....</p><p>       }</p><p>replacing "elem.getAttribute( name )" with "elem.getAttribute ? elem.getAttribute( name ) : undefined" would fix the issue.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 12:20AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ prashantjain68</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Since <code>.live()</code> depends on having the element attached to the document, the event dispatch won't work. Are you saying you don't care that the event handler doesn't work but just don't want to see the error? Can you create an example in jsFiddle showing what you want to do?</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 12:21AM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/10555">#10555</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 12:49AM UTC by <span class="author">prashantjain68</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>dmethvin,</p><p>Thanks for the quick response. I have modified the example and here is the new jsFiddle url.</p><p><a href="http://jsfiddle.net/sMByu/4/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/sMByu/4/</a></p><p>In the above example, I have 2 checkboxes, 1 attached to the document and 1 not. I also modified the jquery code on my local machine to check for "elem.getAttribute" before calling "elem.getAttribute( name )". The results are ...</p><p>1) No run time exception.</p><p>2) jQuery invoked the handler for both the attached and non-attached checkboxes. </p><p>In short, the solution I provided works.</p><p>Thanks</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 02:56PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ invalid</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>The jsFiddle confirms the code is trying to trigger <code>.live()</code> on an element not in the document. That cannot work, since the event must **bubble** to the document and it cannot since the elements are not there. The error you are receiving is a futile cry for help from the jQuery API, attempting in its own way to point this out. </p><blockquote> In short, the solution I provided works.</blockquote><p>Works in that it eliminates the error, or in that it somehow allows a detached element to use <code>.live()</code>? Certainly not the latter. Note that your handler is not called, even though the jquery-git version does not report an error:</p><p><a href="http://jsfiddle.net/sMByu/9/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/sMByu/9/</a></p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 05:51PM UTC by <span class="author">prashantjain68</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>dmethvin,</p><p>I checked your example. You have used a jquery-git version and I am not sure what are the differences between the 1.6.4 version and the git version.</p><p>Check this jsfiddle. All I have done is made one change which is mentioned above in one of my comments. I have modified the jsfiddle to include the modified jquery-1.6.4 from my domain and do an alert. The error is eliminated, the triggered change is handled by the .live() and invokes the handler. I would appreciate if you could explain me why do you sa "Certainly not the latter". All I am saying is check whether the elem has the getAttribute method before calling it.</p><p><a href="http://jsfiddle.net/sMByu/12/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/sMByu/12/</a></p><p>I am not developing an application, I am developing a framework which I plan to open source hence I have to make sure this is fixed in jquery.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 06:18PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please do not use <code>.live()</code> at all in any new work, it is confusing because the event handler is implicitly attached at <code>document</code>. Again, the problem isn't the error that is occurring, it's a mistaken assumption that <code>.live()</code> should work on disconnected elements. The example is not valid usage of the API, so it is not supposed to "work" -- whether it generates an error or not.</p><p>Most likely the reason your example "works" in 1.6.4 is bug <a href="/ticket/10489">#10489</a> which is fixed in 1.7. Event delegation with <code>.live()</code> and <code>.delegate()</code> depends on the event bubbling, and elements won't **(shouldn't)** bubble to document out of a disconnected element/subtree. The jQuery-git.js test works as intended. </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2011 07:56PM UTC by <span class="author">prashantjain68</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">Got it. Thanks Dave.&#92;
&#92;
The &quot;non-disconnected element&quot; might be the right approach but might be limiting too. Here is a use case why I think it might be limiting.&#92;
&#92;
I have a view called MyView (which is a js object, a wrapper for html elements). I would expose properties like &quot;selected&quot;. The MyView will contain a checkbox and other elements. In a typical Ajax application where we manipulate the DOM, an instance of MyView could be in a detached/disconnected state. But we could set the myView.selected = true. This should select the checkbox in the myView instance and because this is programatic changing the checkbox.checked property, we need to dispatch a &quot;change&quot; event. There might be a .live() or .delegate() listening to these &quot;change&quot; events and updating the model. How does the &quot;non-disconnected element&quot; approach help in this case?&#92;
&#92;
In todays Ajax world, DOM manipulation and elements living or not living on the DOM is very very common. I have many use cases that will fail because of the &quot;non-disconnected element&quot; approach. Is jQuery good only for the &quot;non-disconnected element&quot; approach? I request the jquery team to throughly think through this before tying this framework to the non-disconnected approach.&#92;
&#92;
Meanwhile, I will have to look for a different approach to solve my problem. I could have piggy backed on jquery&#39;s .is() and .closest() methods but unfortunately they call the Sizzle.selectors.filter.ATTR which does not check for elem.getAttribute before invoking it. Any chances of doing a check before calling getAttribute (developers are innovative and will find many different ways to use a framework). &#92;
&#92;
Thanks &#92;
</span> → <span class="change-field-new">1319313494711828</span>
                    
                  </td>
                </tr>
              
            
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>Got it. Thanks Dave.</p><p>The "non-disconnected element" might be the right approach but might be limiting too. Here is a use case why I think it might be limiting.</p><p>I have a view called <a href="/wiki/MyView">MyView</a> (which is a js object, a wrapper for html elements). I would expose properties like "selected". The <a href="/wiki/MyView">MyView</a> will contain a checkbox and other elements. In a typical Ajax application where we manipulate the DOM, an instance of <a href="/wiki/MyView">MyView</a> could be in a detached/disconnected state. But we could set the myView.selected = true. This should select the checkbox in the myView instance and because this is programatic changing the checkbox.checked property, we need to dispatch a "change" event. There might be a .live() or .delegate() listening to these "change" events and updating the model. How does the "non-disconnected element" approach help in this case?</p><p>In todays Ajax world, DOM manipulation and elements living or not living on the DOM is very very common. I have many use cases that will fail because of the "non-disconnected element" approach. Is jQuery good only for the non-disconnected elements? I request the jquery team to throughly think through this before tying this framework to the non-disconnected approach.</p><p>Meanwhile, I will have to look for a different approach to solve my problem. I could have piggy backed on jquery's .is() and .closest() methods but unfortunately they call the Sizzle.selectors.filter.ATTR which does not check for elem.getAttribute before invoking it. Any chances of doing a check before calling getAttribute (developers are innovative and will find many different ways to use a framework). </p><p>Thanks </p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
