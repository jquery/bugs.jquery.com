<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#12599 (jqXHR object becomes undefined over a period of time - IE8 reports error &amp;#39;jqXHR&amp;#39; is null or not an object) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/12598/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/12600/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#12599</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(notabug)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened September 24, 2012 02:08PM UTC</p>
      
        <p>Closed September 28, 2012 04:36PM UTC</p>
      
      
        <p>Last modified October 22, 2012 02:07PM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">jqXHR object becomes undefined over a period of time - IE8 reports error &#39;jqXHR&#39; is null or not an object</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        sabapathy.k@honeywell.com
      </td>
      <th>Owned by:</th>
      <td>sabapathy.k@honeywell.com</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        undecided
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>unfiled</td>
      
        <th>Version:</th>
      
      <td>1.5.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>In my application I use jquery ajax to fetch the device data at 1 second interval. The device has wince os and the web pages are hosted by httpd web server. We could observe the issue after running the device 2 or more days with web clients connected. The IE status bar displays an error “’jqXHR’ is null or not an object” or 'jqXHR'is undefined (in jquery-1.5.2.js, line no. 6819). I am also catching the request errors by using the jquery error function. But this error reported by IE couldn’t be captured by the error function</p><p>Further analyzing I understood there was an improvement done to IE8 garbage collector, to mitigate the circular reference memory leaks. There is a circular reference (closure) present in the ajax function of Jquery (jqXHR referenced in setTimeout handler at line no. 6819).</p><p>            <em> Timeout</em></p><p>            if ( s.async && s.timeout &gt; 0 ) {</p><p>                timeoutTimer = setTimeout( function(){</p><p>                    jqXHR.abort( "timeout" );</p><p>                }, s.timeout );</p><p>            }</p><p>Somehow the IE GC clears the jqXHR object at somepoint, even though it is referenced, this should not be the case with the earlier versions of IE.</p><p>To prevent IE GC from clearing this object, I declared a global variable and referenced the ajax object, thinking that it will prevent the GC from clearing it, since it has been made as a reachable object now.</p><p>    jqxhr_obj = $.ajax(</p><p>    { .... });</p><p>Unfortunately even this didn't solve the problem.</p><p>I think the jquery implementation needs a change in this case to resolve the issue. jqXHR object should not be directly referenced from the setTimeout handler; this issue could be related to variable scope. Kindly analyze and provide your valuable comments. </p><p>Refer post:http:forum.jquery.com/topic/jqxhr-is-null-or-not-an-object-error-11-7-2012#14737000003491015</p><p>Thanks much!</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (10)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 24, 2012 02:16PM UTC by <span class="author">rwaldron</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ sabapathy.k@honeywell.com</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">pending</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Thanks for taking the time to contribute to the jQuery project! Please provide a complete reduced test case on jsFiddle to help us assess your ticket!</p><p>Additionally, be sure to test against the "jQuery (edge)" version to ensure the issue still exists. To get you started, use this boilerplate: <a href="http://jsfiddle.net/FrKyN/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/FrKyN/</a>  </p><p>Open the link and click to "Fork" (in the top menu) to begin.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 28, 2012 01:00PM UTC by <span class="author">sabapathy.k@honeywell.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">pending</span> → <span class="change-field-new">new</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:1 rwaldron]:</p><p>Hello,</p><p>As per your request I have updated the sample code in the fiddle <a href="http://jsfiddle.net/33eKJ/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/33eKJ/1/</a> for you to assess the issue better. </p><p>But unfortunately I couldn't use the function setInterval in the fiddle, I use this to send periodic AJAX requests. </p><p>Please remember, as I have mentioned in the issue description this issue occurs randomly after 2 or 3 days running the web client continuously in IE8. Kindly analyze and let me know the problem.</p><p>Let me know for clarifications.</p><p>Thanks & regards,</p><p>Sabapathy K</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed September 28, 2012 04:36PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>_comment0:</th>
                  <td>
                    
                      <span class="change-field-old">This isn&#39;t a problem that has ever been reported before, so whatever it is must be very rare and most likely not a jQuery bug.&#92;
&#92;
Not sure why you &quot;Re-initialize the objects&quot; since they are not yours to modify. Is there some jQuery documentation that said to do that?&#92;
&#92;
In general it is a very bad idea to fire off requests using setInterval unless your code is prepared to deal with the possibility that previous requests have not completed. If, for example, there was a temporary break in network connectivity, multiple requests will be queued. The fact that it&#39;s hitting the `jqXHR.abort( &quot;timeout&quot; );` line means at least one request has timed out.&#92;
&#92;
Here&#39;s a test case that creates the situation quickly.&#92;
&#92;
http://jsfiddle.net/33eKJ/3/&#92;
&#92;
I don&#39;t think this is a jQuery bug, but it is is we&#39;d need you to isolate it better and remove the questionable code.&#92;
</span> → <span class="change-field-new">1348850225117903</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ notabug</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>This isn't a problem that has ever been reported before, so whatever it is must be very rare and most likely not a jQuery bug.</p><p>Not sure why you "Re-initialize the objects" since they are not yours to modify. Is there some jQuery documentation that said to do that?</p><p>In general it is a very bad idea to fire off requests using setInterval unless your code is prepared to deal with the possibility that previous requests have not completed. If, for example, there was a temporary break in network connectivity, multiple requests will be queued. The fact that it's hitting the <code>jqXHR.abort( "timeout" );</code> line means at least one request has timed out.</p><p>Here's a test case that creates the situation quickly.</p><p><a href="http://jsfiddle.net/33eKJ/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/33eKJ/3/</a></p><p>I don't think this is a jQuery bug, but if it is we'd need you to isolate it better and remove the questionable code.</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 01, 2012 07:16AM UTC by <span class="author">sabapathy.k@honeywell.com</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:3 dmethvin]:Hello dmethvin,</p><p>The bug could be because of the change in IE8 browser's Garbage collector update (as I have mentioned already). I could not see this issue in IE6. </p><p>I suspect the problem is because, "jqXHR" object which is defined local to the function "ajax"(line:6466) is referenced in the setTimeout handler. The setTimeout handler executes only after the timeout specified elapses. Won't there be any problem if the timeout was set to a greater value? What if the GC scans such type of closures and clears it to avoid any memory leak? Of course this not a usual case. </p><p>Can you please provide me a solution/workaround to prevent this issue occurring? I believe if this object had a global scope, this issue wouldn't have occurred.</p><p>Regarding your other questions regarding my implementation: It is ensured that only one requests hit the server at a time. The next request will not be sent unless the previous one's state is known.</p><p>I do Re-initialize objects only after the request status is completely known. I believe there should not be a problem here. I perform this just to ensure that there is no memory leak. Kindly correct me if I am wrong.</p><p>Thanks in advance for your help!</p><p>Best regards,</p><p>Sabapathy K </p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 01, 2012 02:31PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Your code does this, modifying an object it does not own:</p><pre class="wiki">
    xmlhttp_obj.onreadystatechange = null;        
    xmlhttp_obj.abort = null;    
</pre><p>The error occurs here:</p><pre class="wiki">
jqXHR.abort( "timeout" );
</pre><p>Perhaps there is a connection between your callback setting the <code>.abort</code> property to <code>null</code> and the later issue with the <code>.abort</code> property being null. You would need to debug that.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 03, 2012 12:30PM UTC by <span class="author">sabapathy.k@honeywell.com</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:5 dmethvin]:Hello dmethvin,</p><p>Thanks much for your assistance. I will remove those lines in my code and check. I will let you know the status.</p><p>This is a critical issue in my project, so any help would be much appreciated. Is there a way I can contact the jquery support team, for assistance?.</p><p>Thanks & regards,</p><p>Sabapathy K</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 03, 2012 01:08PM UTC by <span class="author">scottgonzalez</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="http://docs.jquery.com/Commercial_Support" class="ext-link"><span class="icon"></span>http://docs.jquery.com/Commercial_Support</a></p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 15, 2012 07:00AM UTC by <span class="author">sabapathy.k@honeywell.com</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:7 scott.gonzalez]:</p><p>Thanks dmethvin and scott for your valid suggestions.</p><p>Hi dmethvin,</p><p>After removing the code lines where it was modifying the object it was not owning, I started getting the following error:</p><p>"Message: Object doesn't support this property or method</p><p>Line: 975</p><p>Char: 9</p><p>Code: 0</p><p>URI: <a href="http://199.63.213.60/lib/jquery/jquery-1.5.2.js" "="" class="ext-link"><span class="icon"></span>http://199.63.213.60/lib/jquery/jquery-1.5.2.js"</a></p><p>Which clearly indicated that we are getting close to the problematic part of the code. The error in line 975 is related to Defferred Objects section in the file jquery-1.5.2. </p><p>In my code I call the $.ajax (to send the next request), in either "success" callback or in the "error" callback in a specific case. Sometimes in a ajax request cycle (interval of 1.5 sec), I have to send ~3 requests in sequence. My doubt here was, the next request might have been sent before the previous was "complete". Could this be a problem? Can't the "success" or "error" callbacks or the ajax object be queued in jquery?</p><p>Now I have changed the implementation: In each request cycle I have implemented a loop, using <a href="/wiki/SetTimeout">SetTimeout</a> (async delay) to check whether the previous request is "complete" and if compelete it sends the next request.</p><p>I have implemented "beforeSend" and "complete" callback to check the status of the request using a flag say, "ajax-in-progress"(var).</p><p>Do you think calling the ajax in chain is a problem? Though it was called only after the event "success" or "error". Can you please clarify.</p><p>Thanks a lot!</p><p>Best regards,</p><p>Sabapathy K</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2012 06:54AM UTC by <span class="author">sabapathy.k@honeywell.com</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Replying to [comment:8 sabapathy.k@…]:</p><p>Can you please provide me your inputs, regarding my recent comment? That would be of Great Help.</p><p>Thank you.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:10">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed October 22, 2012 02:07PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:10">comment:10</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>@sabapathy since this does not seem like a bug in jQuery, the conversation isn't appropriate here. Please ask for help on a forum or <a href="/wiki/StackOverflow">StackOverflow</a>. If you determine there is a bug, please provide a minimal test case. Your code above seemed to have several problems, but again, the bug tracker is not the appropriate place for debugging user code.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
