<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#9887 (core jQuery.ajaxSetup function may cause unnecessary memory usage and possible Out of stack space error) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/9886/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/9888/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#9887</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(fixed)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened July 22, 2011 01:07AM UTC</p>
      
        <p>Closed July 23, 2011 12:10AM UTC</p>
      
      
        <p>Last modified March 09, 2012 12:40AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">core jQuery.ajaxSetup function may cause unnecessary memory usage and possible Out of stack space error</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        rtumaykin
      </td>
      <th>Owned by:</th>
      <td>jaubourg</td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/1.6.3">1.6.3</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>ajax</td>
      
        <th>Version:</th>
      
      <td>1.6.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th class="missing">Cc:</th>
      
      <td></td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p>The bug is found in the function jQuery.ajaxSetup, jquery-1.6.2.js - lines 6901 - 6919</p><p>Before v 1.5 function jQuery.ajaxSetup used to merge custom settings for each call with the standard jQuery.ajaxSettings using a shallow copy, for example:</p><p>jQuery.extend( jQuery.ajaxSettings, settings );</p><p>Beginning with v 1.5 function jQuery.ajaxSetup started using deep copy (recursive) flag in it, for example:</p><p>jQuery.extend( true, target, jQuery.ajaxSettings, settings );</p><p>There are 2 problems with this approach. </p><p>First - when context is supplied within the settings, then if for example it is a "body" node of the document, then the deep copy would spend time making copy of an entire document into the target. And it is unnecessary, because one of the next steps in the original code goes and replaces the context and url with the references to the original objects. But until the copied data is not picked up by the garbage collector, it consumes memory, not even speaking of some extra resources spent for each ajax request.</p><p>Second - it is possible that as a context, an object containing circular references could be passed. That will lead to out of stack space errors.</p><p>I've created a simple jsfiddle case to demo the error.</p><p><a href="http://jsfiddle.net/MBwUx/3/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/MBwUx/3/</a></p><p>It produces errors on at least IE8, Firefox 5, Chrome12. I have not tested on other browsers but in my opinion the problem will 100% reproduce in any browser because it is not a browser-specific issue.</p><p>In my jQuery copy I rewrote the function in the following way. Sorry I did not use <a href="/wiki/GitHub">GitHub</a>:</p><pre class="wiki">/*  Creates a full fledged settings object into target
    with both ajaxSettings and settings fields.
    If target is omitted, writes into ajaxSettings.
*/
ajaxSetup: function ( target, settings ) {
    /*  Create an empty object to hold an independent copy of 
        jQuery.ajaxSettings if target is provided
    */
    
    var _ajaxSettings = {};

    /* no target provided --&gt; assign settings and make jQuery.ajaxSettings a target */
    
    if (!settings) {
        settings = target;
        target = jQuery.ajaxSettings;
    }
    /*  else create a copy of jQuery.ajaxSettings so context and url 
        could be deleted from it without modifying jQuery.ajaxSettings itself
    */

    else {
        jQuery.extend(_ajaxSettings, jQuery.ajaxSettings);
    }
    /* Flatten fields we don't want deep extended */

    for (var field in { context: 1, url: 1 }) {
        if (field in settings) {
            target[field] = settings[field];
        } else if (field in _ajaxSettings) {
            target[field] = _ajaxSettings[field];
        }
        /* drop properties so they don't get involved in the jQuery.extend step */

        delete settings[field];
        delete _ajaxSettings[field];
    }

    jQuery.extend(true, target, _ajaxSettings, settings);

    return target;
},
</pre><p>Thank you.</p><p>Roman Tumaykin</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (9)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 01:43AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">ajax</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">The bug is found in the function jQuery.ajaxSetup, jquery-1.6.2.js - lines 6901 - 6919&#92;
&#92;
Before v 1.5 function jQuery.ajaxSetup used to merge custom settings for each call with the standard jQuery.ajaxSettings using a shallow copy, for example:&#92;
&#92;
jQuery.extend( jQuery.ajaxSettings, settings );&#92;
&#92;
Beginning with v 1.5 function jQuery.ajaxSetup started using deep copy (recursive) flag in it, for example:&#92;
&#92;
jQuery.extend( true, target, jQuery.ajaxSettings, settings );&#92;
&#92;
There are 2 problems with this approach. &#92;
&#92;
First - when context is supplied within the settings, then if for example it is a &quot;body&quot; node of the document, then the deep copy would spend time making copy of an entire document into the target. And it is unnecessary, because one of the next steps in the original code goes and replaces the context and url with the references to the original objects. But until the copied data is not picked up by the garbage collector, it consumes memory, not even speaking of some extra resources spent for each ajax request.&#92;
&#92;
Second - it is possible that as a context, an object containing circular references could be passed. That will lead to out of stack space errors.&#92;
&#92;
I&#39;ve created a simple jsfiddle case to demo the error.&#92;
&#92;
http://jsfiddle.net/MBwUx/3/&#92;
&#92;
It produces errors on at least IE8, Firefox 5, Chrome12. I have not tested on other browsers but in my opinion the problem will 100% reproduce in any browser because it is not a browser-specific issue.&#92;
&#92;
In my jQuery copy I rewrote the function in the following way. Sorry I did not use GitHub:&#92;
&#92;
/*  Creates a full fledged settings object into target&#92;
    with both ajaxSettings and settings fields.&#92;
    If target is omitted, writes into ajaxSettings.&#92;
*/&#92;
ajaxSetup: function ( target, settings ) {&#92;
	/*  Create an empty object to hold an independent copy of &#92;
        jQuery.ajaxSettings if target is provided&#92;
    */&#92;
    &#92;
    var _ajaxSettings = {};&#92;
&#92;
    /* no target provided --&gt; assign settings and make jQuery.ajaxSettings a target */&#92;
    &#92;
    if (!settings) {&#92;
        settings = target;&#92;
        target = jQuery.ajaxSettings;&#92;
    }&#92;
    /*  else create a copy of jQuery.ajaxSettings so context and url &#92;
        could be deleted from it without modifying jQuery.ajaxSettings itself&#92;
    */&#92;
&#92;
    else {&#92;
        jQuery.extend(_ajaxSettings, jQuery.ajaxSettings);&#92;
    }&#92;
    /* Flatten fields we don&#39;t want deep extended */&#92;
&#92;
    for (var field in { context: 1, url: 1 }) {&#92;
        if (field in settings) {&#92;
            target[field] = settings[field];&#92;
        } else if (field in _ajaxSettings) {&#92;
            target[field] = _ajaxSettings[field];&#92;
        }&#92;
        /* drop properties so they don&#39;t get involved in the jQuery.extend step */&#92;
&#92;
        delete settings[field];&#92;
        delete _ajaxSettings[field];&#92;
    }&#92;
&#92;
    jQuery.extend(true, target, _ajaxSettings, settings);&#92;
&#92;
	return target;&#92;
},&#92;
&#92;
Thank you.&#92;
&#92;
Roman Tumaykin</span> → <span class="change-field-new">The bug is found in the function jQuery.ajaxSetup, jquery-1.6.2.js - lines 6901 - 6919&#92;
&#92;
Before v 1.5 function jQuery.ajaxSetup used to merge custom settings for each call with the standard jQuery.ajaxSettings using a shallow copy, for example:&#92;
&#92;
jQuery.extend( jQuery.ajaxSettings, settings );&#92;
&#92;
Beginning with v 1.5 function jQuery.ajaxSetup started using deep copy (recursive) flag in it, for example:&#92;
&#92;
jQuery.extend( true, target, jQuery.ajaxSettings, settings );&#92;
&#92;
There are 2 problems with this approach. &#92;
&#92;
First - when context is supplied within the settings, then if for example it is a &quot;body&quot; node of the document, then the deep copy would spend time making copy of an entire document into the target. And it is unnecessary, because one of the next steps in the original code goes and replaces the context and url with the references to the original objects. But until the copied data is not picked up by the garbage collector, it consumes memory, not even speaking of some extra resources spent for each ajax request.&#92;
&#92;
Second - it is possible that as a context, an object containing circular references could be passed. That will lead to out of stack space errors.&#92;
&#92;
I&#39;ve created a simple jsfiddle case to demo the error.&#92;
&#92;
http://jsfiddle.net/MBwUx/3/&#92;
&#92;
It produces errors on at least IE8, Firefox 5, Chrome12. I have not tested on other browsers but in my opinion the problem will 100% reproduce in any browser because it is not a browser-specific issue.&#92;
&#92;
In my jQuery copy I rewrote the function in the following way. Sorry I did not use GitHub:&#92;
{{{#!js&#92;
/*  Creates a full fledged settings object into target&#92;
    with both ajaxSettings and settings fields.&#92;
    If target is omitted, writes into ajaxSettings.&#92;
*/&#92;
ajaxSetup: function ( target, settings ) {&#92;
    /*  Create an empty object to hold an independent copy of &#92;
        jQuery.ajaxSettings if target is provided&#92;
    */&#92;
    &#92;
    var _ajaxSettings = {};&#92;
&#92;
    /* no target provided --&gt; assign settings and make jQuery.ajaxSettings a target */&#92;
    &#92;
    if (!settings) {&#92;
        settings = target;&#92;
        target = jQuery.ajaxSettings;&#92;
    }&#92;
    /*  else create a copy of jQuery.ajaxSettings so context and url &#92;
        could be deleted from it without modifying jQuery.ajaxSettings itself&#92;
    */&#92;
&#92;
    else {&#92;
        jQuery.extend(_ajaxSettings, jQuery.ajaxSettings);&#92;
    }&#92;
    /* Flatten fields we don&#39;t want deep extended */&#92;
&#92;
    for (var field in { context: 1, url: 1 }) {&#92;
        if (field in settings) {&#92;
            target[field] = settings[field];&#92;
        } else if (field in _ajaxSettings) {&#92;
            target[field] = _ajaxSettings[field];&#92;
        }&#92;
        /* drop properties so they don&#39;t get involved in the jQuery.extend step */&#92;
&#92;
        delete settings[field];&#92;
        delete _ajaxSettings[field];&#92;
    }&#92;
&#92;
    jQuery.extend(true, target, _ajaxSettings, settings);&#92;
&#92;
	return target;&#92;
},&#92;
}}}&#92;
&#92;
Thank you.&#92;
&#92;
Roman Tumaykin</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">None</span> → <span class="change-field-new">1.next</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>owner:</th>
                  <td>
                    
                      <span class="change-field-new">→ jaubourg</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">assigned</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">bug</span> → <span class="change-field-new">enhancement</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Please make a pull request with this on github :)</p>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 01:45AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>description:</th>
                  <td>
                    
                      <span class="change-field-old">The bug is found in the function jQuery.ajaxSetup, jquery-1.6.2.js - lines 6901 - 6919&#92;
&#92;
Before v 1.5 function jQuery.ajaxSetup used to merge custom settings for each call with the standard jQuery.ajaxSettings using a shallow copy, for example:&#92;
&#92;
jQuery.extend( jQuery.ajaxSettings, settings );&#92;
&#92;
Beginning with v 1.5 function jQuery.ajaxSetup started using deep copy (recursive) flag in it, for example:&#92;
&#92;
jQuery.extend( true, target, jQuery.ajaxSettings, settings );&#92;
&#92;
There are 2 problems with this approach. &#92;
&#92;
First - when context is supplied within the settings, then if for example it is a &quot;body&quot; node of the document, then the deep copy would spend time making copy of an entire document into the target. And it is unnecessary, because one of the next steps in the original code goes and replaces the context and url with the references to the original objects. But until the copied data is not picked up by the garbage collector, it consumes memory, not even speaking of some extra resources spent for each ajax request.&#92;
&#92;
Second - it is possible that as a context, an object containing circular references could be passed. That will lead to out of stack space errors.&#92;
&#92;
I&#39;ve created a simple jsfiddle case to demo the error.&#92;
&#92;
http://jsfiddle.net/MBwUx/3/&#92;
&#92;
It produces errors on at least IE8, Firefox 5, Chrome12. I have not tested on other browsers but in my opinion the problem will 100% reproduce in any browser because it is not a browser-specific issue.&#92;
&#92;
In my jQuery copy I rewrote the function in the following way. Sorry I did not use GitHub:&#92;
{{{#!js&#92;
/*  Creates a full fledged settings object into target&#92;
    with both ajaxSettings and settings fields.&#92;
    If target is omitted, writes into ajaxSettings.&#92;
*/&#92;
ajaxSetup: function ( target, settings ) {&#92;
    /*  Create an empty object to hold an independent copy of &#92;
        jQuery.ajaxSettings if target is provided&#92;
    */&#92;
    &#92;
    var _ajaxSettings = {};&#92;
&#92;
    /* no target provided --&gt; assign settings and make jQuery.ajaxSettings a target */&#92;
    &#92;
    if (!settings) {&#92;
        settings = target;&#92;
        target = jQuery.ajaxSettings;&#92;
    }&#92;
    /*  else create a copy of jQuery.ajaxSettings so context and url &#92;
        could be deleted from it without modifying jQuery.ajaxSettings itself&#92;
    */&#92;
&#92;
    else {&#92;
        jQuery.extend(_ajaxSettings, jQuery.ajaxSettings);&#92;
    }&#92;
    /* Flatten fields we don&#39;t want deep extended */&#92;
&#92;
    for (var field in { context: 1, url: 1 }) {&#92;
        if (field in settings) {&#92;
            target[field] = settings[field];&#92;
        } else if (field in _ajaxSettings) {&#92;
            target[field] = _ajaxSettings[field];&#92;
        }&#92;
        /* drop properties so they don&#39;t get involved in the jQuery.extend step */&#92;
&#92;
        delete settings[field];&#92;
        delete _ajaxSettings[field];&#92;
    }&#92;
&#92;
    jQuery.extend(true, target, _ajaxSettings, settings);&#92;
&#92;
	return target;&#92;
},&#92;
}}}&#92;
&#92;
Thank you.&#92;
&#92;
Roman Tumaykin</span> → <span class="change-field-new">The bug is found in the function jQuery.ajaxSetup, jquery-1.6.2.js - lines 6901 - 6919&#92;
&#92;
Before v 1.5 function jQuery.ajaxSetup used to merge custom settings for each call with the standard jQuery.ajaxSettings using a shallow copy, for example:&#92;
&#92;
jQuery.extend( jQuery.ajaxSettings, settings );&#92;
&#92;
Beginning with v 1.5 function jQuery.ajaxSetup started using deep copy (recursive) flag in it, for example:&#92;
&#92;
jQuery.extend( true, target, jQuery.ajaxSettings, settings );&#92;
&#92;
There are 2 problems with this approach. &#92;
&#92;
First - when context is supplied within the settings, then if for example it is a &quot;body&quot; node of the document, then the deep copy would spend time making copy of an entire document into the target. And it is unnecessary, because one of the next steps in the original code goes and replaces the context and url with the references to the original objects. But until the copied data is not picked up by the garbage collector, it consumes memory, not even speaking of some extra resources spent for each ajax request.&#92;
&#92;
Second - it is possible that as a context, an object containing circular references could be passed. That will lead to out of stack space errors.&#92;
&#92;
I&#39;ve created a simple jsfiddle case to demo the error.&#92;
&#92;
http://jsfiddle.net/MBwUx/3/&#92;
&#92;
It produces errors on at least IE8, Firefox 5, Chrome12. I have not tested on other browsers but in my opinion the problem will 100% reproduce in any browser because it is not a browser-specific issue.&#92;
&#92;
In my jQuery copy I rewrote the function in the following way. Sorry I did not use GitHub:&#92;
{{{#!js&#92;
/*  Creates a full fledged settings object into target&#92;
    with both ajaxSettings and settings fields.&#92;
    If target is omitted, writes into ajaxSettings.&#92;
*/&#92;
ajaxSetup: function ( target, settings ) {&#92;
    /*  Create an empty object to hold an independent copy of &#92;
        jQuery.ajaxSettings if target is provided&#92;
    */&#92;
    &#92;
    var _ajaxSettings = {};&#92;
&#92;
    /* no target provided --&gt; assign settings and make jQuery.ajaxSettings a target */&#92;
    &#92;
    if (!settings) {&#92;
        settings = target;&#92;
        target = jQuery.ajaxSettings;&#92;
    }&#92;
    /*  else create a copy of jQuery.ajaxSettings so context and url &#92;
        could be deleted from it without modifying jQuery.ajaxSettings itself&#92;
    */&#92;
&#92;
    else {&#92;
        jQuery.extend(_ajaxSettings, jQuery.ajaxSettings);&#92;
    }&#92;
    /* Flatten fields we don&#39;t want deep extended */&#92;
&#92;
    for (var field in { context: 1, url: 1 }) {&#92;
        if (field in settings) {&#92;
            target[field] = settings[field];&#92;
        } else if (field in _ajaxSettings) {&#92;
            target[field] = _ajaxSettings[field];&#92;
        }&#92;
        /* drop properties so they don&#39;t get involved in the jQuery.extend step */&#92;
&#92;
        delete settings[field];&#92;
        delete _ajaxSettings[field];&#92;
    }&#92;
&#92;
    jQuery.extend(true, target, _ajaxSettings, settings);&#92;
&#92;
    return target;&#92;
},&#92;
}}}&#92;
&#92;
Thank you.&#92;
&#92;
Roman Tumaykin</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 01:51AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>A couple observations:</p><ul><li>ajaxSetup must not modify the settings object</li><li>if you really wish to gain in perf, you may want to avoid using target in the deep extend when it is not provided (because you basically deep extend ajaxSettings into itself)</li><li>also, dom nodes are never iterated by a deep extend (they're not plain objects), so the argument about the body element being iterated over is irrelevant since it will never happen</li></ul><p>Also, some jsperf test would be nice together with the pull request.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 06:18PM UTC by <span class="author">rtumaykin</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>I will need to learn how to use github - will do this over this weekend. I will modify the code to not modify the original settings object. Regarding the target in the deep extend - my code actually keeps _ajaxSettings = {} if the target is jQuery.ajaxSettings itself.</p><p>Thanks for your comments. I will post here when I am done with the pull request.</p><p>Roman</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 06:20PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p><a href="/ticket/8464">#8464</a> is a duplicate of this ticket.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:6">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 22, 2011 11:31PM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:6">comment:6</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>type:</th>
                  <td>
                    
                      <span class="change-field-old">enhancement</span> → <span class="change-field-new">bug</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:7">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2011 12:10AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:7">comment:7</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ fixed</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">assigned</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Fixes <a href="/ticket/9887">#9887</a>: ajax now supports circular references into objects passed as context. Prefilter and transport developpers should add their own custom option into flatOptions when needed. Unit test added. </p><p> Changeset: e6a99fdb0ee9e0fd7552d5de8bc4acbe982e98b7</p>
            </div>
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:8">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2011 12:40AM UTC by <span class="author">jaubourg</span></span>
        <a class="ticket-change-link" href="#comment:8">comment:8</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>milestone:</th>
                  <td>
                    
                      <span class="change-field-old">1.next</span> → <span class="change-field-new">1.6.3</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:9">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed July 23, 2011 05:21AM UTC by <span class="author">rtumaykin</span></span>
        <a class="ticket-change-link" href="#comment:9">comment:9</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Very nice solution. Thank you!</p><p>Roman</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
