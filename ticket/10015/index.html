<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-pagefind-meta="title">#10015 (.slide*() and .stop()) - jQuery - Bug Tracker</title>
    <meta name="description" content="Static archive of the old bugs.jquery.com Trac site.">
    
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="/bundle/SEeiGkT-TJ.css">
  </head>
  <body>
    <div class="banner flex-center">
      <span>jQuery issues have moved to <a href="https://github.com/jquery/jquery/issues">GitHub</a>. This site is now a static archive of the old <a href="https://trac.edgewall.org/">Trac</a> bugs site. Some functions and pages are no longer available.</span>
    </div>
    <div class="container">
      <a href="#skip" class="visually-hidden">Skip to main content</a>
      <header class="flex-column">
        <div class="flex-row flex-between-start">
          <a id="jq-siteLogo" href="/" title="jQuery Home">
            <img src="/img/logo.svg" width="215" alt="jQuery: Write Less, Do More.">
          </a>
          <input class="hamburger-toggle visually-hidden" id="jq-menutoggle" type="checkbox">
          <label aria-label="Toggle Menu" for="jq-menutoggle" class="hamburger-lines flex-column flex-between-center">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </label>
          <div id="jq-menus">
            <nav id="jq-primaryNavigation">
              <h2 class="visually-hidden">jQuery sites navigation menu</h2>
              <ul class="nav">
                <li class="jq-jquery active">
                  <a href="https://jquery.com/" title="jQuery Home">jQuery</a>
                </li>
                <li class="jq-plugins">
                  <a href="https://plugins.jquery.com/" title="jQuery Plugins">Plugins</a>
                </li>
                <li class="jq-ui">
                  <a href="https://jqueryui.com/" title="jQuery UI">UI</a>
                </li>
                <li class="jq-meetup">
                  <a href="https://meetups.jquery.com/" title="jQuery Meetups">Meetups</a>
                </li>
                <li class="jq-forum">
                  <a href="https://forum.jquery.com/" title="jQuery Forum">Forum</a>
                </li>
                <li class="jq-blog">
                  <a href="https://blog.jquery.com/" title="jQuery Blog">Blog</a>
                </li>
                <li class="jq-about">
                  <a href="https://openjsf.org" title="About jQuery and OpenJS">About</a>
                </li>
                <li class="jq-donate">
                  <a href="https://openjsf.org/about/project-funding-opportunities/" title="Donate to OpenJS">Donate</a>
                </li>
              </ul>
            </nav>
            <nav id="jq-secondaryNavigation">
              <h2 class="visually-hidden">jQuery Core navigation menu</h2>
              <ul class="nav">
                <li class="jq-download">
                  <a href="https://jquery.com/download/">
                    Download
                  </a>
                </li>
                <li class="jq-documentation">
                  <a href="https://api.jquery.com/">
                    Documentation
                  </a>
                </li>
                <li class="jq-tutorials">
                  <a href="https://learn.jquery.com/">
                    Tutorials
                  </a>
                </li>
                <li class="jq-bugTracker">
                  <a href="https://github.com/jquery/jquery/issues">
                    Bug Tracker
                  </a>
                </li>
                <li class="jq-discussion">
                  <a href="https://forum.jquery.com/">
                    Discussion
                  </a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <div id="bug-tracker-form" class="flex-column flex-between-center">
          <h1>Bug Tracker</h1>
          <div id="search"></div>
          
        </div>
      </header>
      <main id="skip" class="flex-column">
        <h2 class="visually-hidden">Side navigation</h2>
        <nav id="jq-sidenav" class="flex-column white-box">
          <h5 class="sidenav-header">Bug Tracker</h5>
          <a href="/newticket">New Ticket</a>
          <a href="/report">View Tickets</a>
          <a href="/ticketgraph">Ticket Graph</a>
          <a href="/roadmap">Roadmap</a>
          <a href="/timeline">Recent Changes</a>
        </nav>
        <div id="jq-content" class="white-box">
          

<div class="flex-column" data-pagefind-body="">
  

  <nav class="content-nav">
    <ul class="flex-row">
      
        <li>
          <a href="/ticket/10014/">← Previous Ticket</a>
        
      
      
        </li><li>
          <a href="/ticket/10016/">Next Ticket →</a>
        </li>
      
    </ul>
  </nav>


<div class="ticket-info">
  <div class="flex-row flex-between-start">
    <h3>
      <a href="" class="ticket-number">#10015</a>
      <span class="ticket-status">closed</span>
      <span class="ticket-type">bug</span>
      <span class="ticket-resolution">(duplicate)</span>
    </h3>

    <div class="ticket-dates">
      <p>Opened August 10, 2011 06:33PM UTC</p>
      
        <p>Closed August 12, 2011 03:48PM UTC</p>
      
      
        <p>Last modified March 10, 2012 02:10AM UTC</p>
      
    </div>
  </div>

  <h1 class="ticket-title">.slide*() and .stop()</h1>

  <table class="ticket-properties">
    <tr>
      <th>Reported by:</th>
      <td>
        jpec07@gmail.com
      </td>
      <th>Owned by:</th>
      <td></td>
    </tr>
    <tr>
      <th>
        Priority:
      </th>
      <td>
        low
      </td>
      
        <th class="missing">Milestone:</th>
      
      <td>
        <a href="/milestone/None">None</a>
      </td>
    </tr>
    <tr>
      <th>Component:</th>
      <td>effects</td>
      
        <th>Version:</th>
      
      <td>1.6.2</td>
    </tr>
    <tr>
      
        <th class="missing">Keywords:</th>
      
      <td></td>
      
        <th>Cc:</th>
      
      <td>timmywil</td>
    </tr>
    <tr>
      <th class="missing">
        Blocked by:
      </th>
      <td></td>
      <th class="missing">
        Blocking:
      </th>
      <td></td>
    </tr>
  </table>
  <div class="ticket-info-bottom">
    <h5 class="ticket-description-title">Description</h5>
    <div class="ticket-description"><p><a href="http://jsfiddle.net/Jpec07/2YdE8/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Jpec07/2YdE8/</a> - Don't know how long it will stay up, but here's a demonstration of the bug, and the associated source code.</p><p>Okay, so here's the deal. .stop(true,false) stops the animation in progress and clears the queue. For most animations, this works fine. However, in the instance of .slideUp(), .slideDown(), and .slideToggle(), it also has an interesting effect on elements whose heights are defined by the content they contain (a necessity for dynamic content). Running the animation again will not fully-show the element's height, but will instead return it to the height at which it was .stop()'d. This can leave a significant portion of the element's content hidden.</p><p>For posterity's sake (in case the jsfiddle link doesn't work, or you can't use it or whatnot), here's some code:</p><p>&lt;!DOCTYPE html&gt; </p><p>&lt;html&gt; </p><p>&lt;head&gt; </p><p>  &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt; </p><p>  &lt;title&gt; - jsFiddle demo&lt;/title&gt; </p><p>  &lt;script type='text/javascript' src='http://code.jquery.com/jquery-1.6.2.js'&gt;&lt;/script&gt; </p><p>  &lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"&gt;&lt;/script&gt;</p><p>  &lt;style type='text/css'&gt; </p><p>    div{</p><p>    padding:.5em;</p><p>    margin:1em;</p><p>    border:1px <a href="/ticket/000">#000</a>;</p><p>    background:#f00;</p><p>    opacity:0.7;</p><p>    width:150px;</p><p>    color:#cff;</p><p>    text-decoration:none;</p><p>}</p><p>a   {</p><p>    color:inherit;</p><p>    text-decoration:inherit;</p><p>}</p><p>  &lt;/style&gt; </p><p>  &lt;script type='text/javascript'&gt; </p><p>  $(function(){</p><p>  $(document).ready(function() {</p><p>&lt;!--<em> Yes, this whole thing could be accomplished by .slideToggle(). But the problem persists that way, too! </em>--&gt;</p><p>    $("#clicker a").click(function() {</p><p>        if ($("#clickee").hasClass('clicked')) {</p><p>            $("#clickee").stop(true, false).slideUp("slow", 'easeInOutCubic').removeClass('clicked');</p><p>        } else {</p><p>            $("#clickee").stop(true, false).slideDown("slow", 'easeInOutCubic').addClass('clicked');</p><p>        }</p><p>    });</p><p>    $("#clicker2 a").click(function() {</p><p>        if ($("#clickee2").hasClass('clicked')) {</p><p>            $("#clickee2").stop(true, false).animate({</p><p>                height: 'hide'</p><p>            }, 500, 'easeInOutCubic').removeClass('clicked');</p><p>        } else {</p><p>            $("#clickee2").stop(true, false).animate({</p><p>                height: 'show'</p><p>            }, 500, 'easeInOutCubic').addClass('clicked');</p><p>        }</p><p>    });</p><p>});</p><p>  });</p><p>  &lt;/script&gt; </p><p>&lt;/head&gt; </p><p>&lt;body&gt;</p><p>&lt;div id="clicker"&gt;&lt;a href="#"&gt;Click me! :D&lt;/a&gt;&lt;/div&gt; </p><p>&lt;div id="clickee" style="display:none;"&gt;This Div's height is defined by its content. There is no other definition for this div's height. Animation should allow it to go all the way down to the end of the world, but that's why I'm posting a bug report.&lt;/div&gt;&lt;br /&gt; </p><p>&lt;br /&gt; </p><p>&lt;br /&gt; </p><p>&lt;div id="clicker2"&gt;&lt;a href="#"&gt;Click me more! &gt;8D&lt;/a&gt;&lt;/div&gt; </p><p>&lt;div id="clickee2" style="display:none;"&gt;This is the second Div. Like the first, the text is the only thing that defines its height. The animation, like the first, defines the height, and when interrupted, still causes problems.&lt;/div&gt; </p><p>&lt;/body&gt; </p><p>&lt;/html&gt; </p><p>Also note that one of the experts in the IRC channel (Brodingo) was able to create a work-around (using .animate() with variables and {queue:false}; I'll post the code he wrote at the end), but it seems like something that could stand to be fixed in an upcoming release of jQuery.</p><p>Thanks!</p><p>-Jpec07</p><p>((Brodingo's Workaround Code:</p><p>$(document).ready(function() {</p><p>    var toggleHeight = $("#clickee").height();</p><p>    console.log(toggleHeight);</p><p>    $("#clicker a").toggle(function(){</p><p>        $("#clickee").animate({height: toggleHeight, paddingTop:".5em", paddingBottom:".5em"},{queue:false});</p><p>    }, function(){</p><p>        $("#clickee").animate({height: 0, paddingTop:0, paddingBottom:0},{queue:false});</p><p>    });</p><p>});</p><p>))</p></div>
  </div>
</div>

<details>
  <summary class="ticket-details-summary">Attachments (0)</summary>

  <ul class="ticket-attachments">
    
  </ul>
</details>

<details open="">
  <summary class="ticket-details-summary">Change History (5)</summary>
  
    <div class="ticket-change flex-column" id="comment:1">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 10, 2011 07:17PM UTC by <span class="author">ajpiano</span></span>
        <a class="ticket-change-link" href="#comment:1">comment:1</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
                <tr>
                  <th>cc:</th>
                  <td>
                    
                      <span class="change-field-new">→ timmywil</span>
                    
                  </td>
                </tr>
              
            
              
            
              
                <tr>
                  <th>component:</th>
                  <td>
                    
                      <span class="change-field-old">unfiled</span> → <span class="change-field-new">effects</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
        
          
            <div class="ticket-comment-body">
              <p>I have a feeling this may be a dupe of <a href="/ticket/8685">#8685</a>, but I can't quite tell if the problem you're experiencing here is remedied completely by the current work on the jQuery (edge) branch, which I've tested against here <a href="http://jsfiddle.net/2YdE8/1/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/2YdE8/1/</a> - or if the error is at least partially due to the timing of when you're adding the classes to toggle the slide direction versus when those slide animations are actually complete.  I think the goal of <a href="/ticket/8685">#8685</a> is to remedy these symptoms, however, so I'll kick it to Timmy for a bit more insight.</p>
            </div>
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:2">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 10, 2011 07:48PM UTC by <span class="author">Jpec07@gmail.com</span></span>
        <a class="ticket-change-link" href="#comment:2">comment:2</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>That correlation wouldn't surprise me one bit. I wish I could be more helpful in providing a solution, but I'm just learning jQuery here (never could quite get my head around <a href="/wiki/JavaScript">JavaScript</a> back in the day). As to the class toggling, I made a page that should wait until after the animations are complete to add the class: even stranger results in this one (tested in Chrome's latest release as of this post time, don't have other browsers on this machine):</p><p><a href="http://jsfiddle.net/Jpec07/YmHCw/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Jpec07/YmHCw/</a></p><p>By putting the class assignment in the callback, it ''should'' only apply that after the animation has run, correct? Putting the class assignment before the stop and the animation doesn't change the results at all:</p><p><a href="http://jsfiddle.net/Jpec07/KVujB/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/Jpec07/KVujB/</a></p><p>For now I guess Brodingo's work-around is the code of choice, at least until the problem is resolved, because the jQuery (edge) doesn't seem to remedy the problem (at least on Chrome, but this is for a project that requires functionality on all browsers, and with some studies putting Chrome at a 30% market share...yeah).</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:3">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 12, 2011 02:56PM UTC by <span class="author">dmethvin</span></span>
        <a class="ticket-change-link" href="#comment:3">comment:3</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>To recap: When you stop the animation and don't use <code>gotoEnd</code> it's leaving the explicitly set height on the element. At the moment there isn't any way for subsequent animations to know this was left behind by a <code>stop()</code>ped animation and should be ignored in favor of the auto height. A <a href="http://bugs.jquery.com/ticket/8685#comment:15" class="ext-link"><span class="icon"></span>comment by rpflorence</a> over on <a href="/ticket/8685">#8685</a> describes one possible solution that sounds like it would work.</p>
            </div>
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:4">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 12, 2011 03:48PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:4">comment:4</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
              
                <tr>
                  <th>priority:</th>
                  <td>
                    
                      <span class="change-field-old">undecided</span> → <span class="change-field-new">low</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>resolution:</th>
                  <td>
                    
                      <span class="change-field-new">→ duplicate</span>
                    
                  </td>
                </tr>
              
            
              
                <tr>
                  <th>status:</th>
                  <td>
                    
                      <span class="change-field-old">new</span> → <span class="change-field-new">closed</span>
                    
                  </td>
                </tr>
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Sorry I didn't get to this sooner.  Yes, this won't be a problem in 1.7 when 8685 has landed so I'll mark this as a dupe.  Here are a couple workarounds in the meantime:</p><p><a href="http://jsfiddle.net/timmywil/2YdE8/20/" class="ext-link"><span class="icon"></span>http://jsfiddle.net/timmywil/2YdE8/20/</a></p>
            </div>
          
        
          
        
          
        
          
        
      </div>
    </div>
  
    <div class="ticket-change flex-column" id="comment:5">
      <h3 class="flex-row flex-between-start ticket-change-header">
        <span>Changed August 12, 2011 03:48PM UTC by <span class="author">timmywil</span></span>
        <a class="ticket-change-link" href="#comment:5">comment:5</a>
      </h3>

      <div class="ticket-change-content">
        <table class="ticket-changes">
          <tbody>
            
              
            
          </tbody>
        </table>
        
          
            <div class="ticket-comment-body">
              <p>Duplicate of <a href="/ticket/8685">#8685</a>.</p>
            </div>
          
        
      </div>
    </div>
  
</details>
</div>
        </div>
      </main>
      <footer>
        Copyright &copy; 2024
        <a href="https://openjsf.org">The OpenJS Foundation</a>
      </footer>
    </div>
    <script src="/pagefind/pagefind-ui.js" type="text/javascript"></script>
  </body>
</html>
